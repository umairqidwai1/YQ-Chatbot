import{s as Ce,E as Ue,F as We,a as B,d,f as h,i as L,g as E,n as me,z as qe,B as Ye,j as ge,p as Ke,k as G,o as Y,e as I,t as oe,c as V,b as re,u as se,h as ae,H as Lt,r as Pt,v as jt,w as At,x as Ut,S as Fe,y as Xe,l as xe,G as Ee,W as Yt,q as Kt,D as et,C as tt}from"./Bk--KVgx.js";import{S as Te,i as Ne,f as Je,b as K,d as J,m as Q,t as b,a as T,e as X,g as fe,c as ue}from"./CoU9NT7-.js";import{e as we}from"./DOi8FfRu.js";import"./C7mVdHWX.js";import{M as Wt,a as Ft,b as qt}from"./D0VtmBkg.js";import{m as lt,n as nt,k as Jt,f as Qt}from"./BQs868cI.js";import{F as Xt}from"./CU2r43ac.js";import{d as Ge,r as xt}from"./I1CDPYOB.js";import"./0ZqDA-lu.js";import{f as Zt}from"./CBc5jlPY.js";import{g as el}from"./D_XIBSCa.js";import{g as tl,p as ll,d as nl,u as ol}from"./DBfunmWF.js";import{b as Rt,u as Gt,c as rl,M as Me,n as al,o as ot,m as Ze}from"./Cx1AvSPh.js";import{t as _e}from"./DXxu2l8m.js";import{g as Re}from"./Dl8uL88t.js";import{C as sl}from"./hEaeE0lN.js";import{S as il}from"./DUvG0acv.js";import{T as pe}from"./CSMXUTi0.js";import{S as fl}from"./DOdgUkVE.js";import{C as ul}from"./CByx3Qer.js";import{L as cl}from"./D2FR-12e.js";import{E as dl}from"./CFfHl7ei.js";import{E as ml}from"./LTqusBkU.js";import{E as hl}from"./BIJPbqz7.js";function _l(o){let e,t;return{c(){e=Ue("svg"),t=Ue("path"),this.h()},l(l){e=We(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=B(e);t=We(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),B(t).forEach(d),n.forEach(d),this.h()},h(){h(t,"stroke-linecap","round"),h(t,"stroke-linejoin","round"),h(t,"d","M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width",o[1]),h(e,"stroke","currentColor"),h(e,"class",o[0])},m(l,n){L(l,e,n),E(e,t)},p(l,[n]){n&2&&h(e,"stroke-width",l[1]),n&1&&h(e,"class",l[0])},i:me,o:me,d(l){l&&d(e)}}}function pl(o,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return o.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class gl extends Te{constructor(e){super(),Ne(this,e,pl,_l,Ce,{className:0,strokeWidth:1})}}function vl(o){let e,t;return{c(){e=Ue("svg"),t=Ue("path"),this.h()},l(l){e=We(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=B(e);t=We(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),B(t).forEach(d),n.forEach(d),this.h()},h(){h(t,"stroke-linecap","round"),h(t,"stroke-linejoin","round"),h(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width",o[1]),h(e,"stroke","currentColor"),h(e,"class",o[0])},m(l,n){L(l,e,n),E(e,t)},p(l,[n]){n&2&&h(e,"stroke-width",l[1]),n&1&&h(e,"class",l[0])},i:me,o:me,d(l){l&&d(e)}}}function bl(o,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return o.$$set=r=>{"className"in r&&t(0,l=r.className),"strokeWidth"in r&&t(1,n=r.strokeWidth)},[l,n]}class wl extends Te{constructor(e){super(),Ne(this,e,bl,vl,Ce,{className:0,strokeWidth:1})}}function kl(o){let e;const t=o[8].default,l=Pt(t,o,o[13],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&8192)&&jt(l,t,n,n[13],e?Ut(t,n[13],r,null):At(n[13]),null)},i(n){e||(b(l,n),e=!0)},o(n){T(l,n),e=!1},d(n){l&&l.d(n)}}}function $l(o){let e,t;return e=new pe({props:{content:o[5].t("More"),className:" group-hover/item:opacity-100  opacity-0",$$slots:{default:[kl]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},p(l,n){const r={};n&32&&(r.content=l[5].t("More")),n&8192&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function yl(o){let e,t;return e=new dl({}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Ml(o){let e,t;return e=new ml({}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function El(o){let e=o[5].t("Keep in Sidebar")+"",t;return{c(){t=oe(e)},l(l){t=re(l,e)},m(l,n){L(l,t,n)},p(l,n){n&32&&e!==(e=l[5].t("Keep in Sidebar")+"")&&ae(t,e)},d(l){l&&d(t)}}}function Dl(o){let e=o[5].t("Hide from Sidebar")+"",t;return{c(){t=oe(e)},l(l){t=re(l,e)},m(l,n){L(l,t,n)},p(l,n){n&32&&e!==(e=l[5].t("Hide from Sidebar")+"")&&ae(t,e)},d(l){l&&d(t)}}}function Cl(o){let e,t,l,n,r,a,s,i,m,u,c,D,$=o[5].t("Copy Link")+"",v,C,z,g;const O=[Ml,yl],k=[];function _(y,w){var Z,le;return w&66&&(t=null),t==null&&(t=!!(((Z=y[6])==null?void 0:Z.pinnedModels)??[]).includes((le=y[1])==null?void 0:le.id)),t?0:1}l=_(o,-1),n=k[l]=O[l](o);function j(y,w){var Z,le;return w&66&&(s=null),s==null&&(s=!!(((Z=y[6])==null?void 0:Z.pinnedModels)??[]).includes((le=y[1])==null?void 0:le.id)),s?Dl:El}let A=j(o,-1),H=A(o);return u=new cl({}),{c(){e=I("button"),n.c(),r=G(),a=I("div"),H.c(),i=G(),m=I("button"),K(u.$$.fragment),c=G(),D=I("div"),v=oe($),this.h()},l(y){e=V(y,"BUTTON",{type:!0,class:!0});var w=B(e);n.l(w),r=Y(w),a=V(w,"DIV",{class:!0});var Z=B(a);H.l(Z),Z.forEach(d),w.forEach(d),i=Y(y),m=V(y,"BUTTON",{type:!0,class:!0});var le=B(m);J(u.$$.fragment,le),c=Y(le),D=V(le,"DIV",{class:!0});var ee=B(D);v=re(ee,$),ee.forEach(d),le.forEach(d),this.h()},h(){h(a,"class","flex items-center"),h(e,"type","button"),h(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2"),h(D,"class","flex items-center"),h(m,"type","button"),h(m,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2")},m(y,w){L(y,e,w),k[l].m(e,null),E(e,r),E(e,a),H.m(a,null),L(y,i,w),L(y,m,w),Q(u,m,null),E(m,c),E(m,D),E(D,v),C=!0,z||(g=[se(e,"click",o[9]),se(m,"click",o[10])],z=!0)},p(y,w){let Z=l;l=_(y,w),l!==Z&&(fe(),T(k[Z],1,1,()=>{k[Z]=null}),ue(),n=k[l],n||(n=k[l]=O[l](y),n.c()),b(n,1),n.m(e,r)),A===(A=j(y,w))&&H?H.p(y,w):(H.d(1),H=A(y),H&&(H.c(),H.m(a,null))),(!C||w&32)&&$!==($=y[5].t("Copy Link")+"")&&ae(v,$)},i(y){C||(b(n),b(u.$$.fragment,y),C=!0)},o(y){T(n),T(u.$$.fragment,y),C=!1},d(y){y&&(d(e),d(i),d(m)),k[l].d(),H.d(),X(u),z=!1,Lt(g)}}}function Tl(o){let e,t,l,n;return e=new Ft({props:{$$slots:{default:[$l]},$$scope:{ctx:o}}}),l=new qt({props:{strategy:"fixed",class:"w-full max-w-[180px] text-sm rounded-xl px-1 py-1.5 z-[9999999] bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:"end",transition:Zt,$$slots:{default:[Cl]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment),t=G(),K(l.$$.fragment)},l(r){J(e.$$.fragment,r),t=Y(r),J(l.$$.fragment,r)},m(r,a){Q(e,r,a),L(r,t,a),Q(l,r,a),n=!0},p(r,a){const s={};a&8224&&(s.$$scope={dirty:a,ctx:r}),e.$set(s);const i={};a&8303&&(i.$$scope={dirty:a,ctx:r}),l.$set(i)},i(r){n||(b(e.$$.fragment,r),b(l.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),T(l.$$.fragment,r),n=!1},d(r){r&&d(t),X(e,r),X(l,r)}}}function Nl(o){let e,t,l;function n(a){o[12](a)}let r={closeFocus:!1,onOpenChange:o[11],typeahead:!1,$$slots:{default:[Tl]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.open=o[0]),e=new Wt({props:r}),qe.push(()=>Je(e,"open",n)),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,s){Q(e,a,s),l=!0},p(a,[s]){const i={};s&16&&(i.onOpenChange=a[11]),s&8303&&(i.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,i.open=a[0],Ye(()=>t=!1)),e.$set(i)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){T(e.$$.fragment,a),l=!1},d(a){X(e,a)}}}function Il(o,e,t){let l,n;ge(o,Rt,g=>t(6,n=g));let{$$slots:r={},$$scope:a}=e;const s=Ke("i18n");ge(o,s,g=>t(5,l=g));let{show:i=!1}=e,{model:m}=e,{pinModelHandler:u=()=>{}}=e,{copyLinkHandler:c=()=>{}}=e,{onClose:D=()=>{}}=e;const $=g=>{g.stopPropagation(),g.preventDefault(),u(m==null?void 0:m.id),t(0,i=!1)},v=g=>{g.stopPropagation(),g.preventDefault(),c(),t(0,i=!1)},C=g=>{g===!1&&D()};function z(g){i=g,t(0,i)}return o.$$set=g=>{"show"in g&&t(0,i=g.show),"model"in g&&t(1,m=g.model),"pinModelHandler"in g&&t(2,u=g.pinModelHandler),"copyLinkHandler"in g&&t(3,c=g.copyLinkHandler),"onClose"in g&&t(4,D=g.onClose),"$$scope"in g&&t(13,a=g.$$scope)},[i,m,u,c,D,l,n,s,r,$,v,C,z,a]}class Vl extends Te{constructor(e){super(),Ne(this,e,Il,Nl,Ce,{show:0,model:1,pinModelHandler:2,copyLinkHandler:3,onClose:4})}}function rt(o,e,t){const l=o.slice();return l[17]=e[t],l}function at(o){var a;let e,t,l=we((a=o[1].model)==null?void 0:a.tags.sort(ht)),n=[];for(let s=0;s<l.length;s+=1)n[s]=st(rt(o,l,s));const r=s=>T(n[s],1,1,()=>{n[s]=null});return{c(){e=I("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var i=B(e);for(let m=0;m<n.length;m+=1)n[m].l(i);i.forEach(d),this.h()},h(){h(e,"class","flex gap-0.5 self-center items-start h-full w-full translate-y-[0.5px] overflow-x-auto scrollbar-none")},m(s,i){L(s,e,i);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(e,null);t=!0},p(s,i){var m;if(i&2){l=we((m=s[1].model)==null?void 0:m.tags.sort(ht));let u;for(u=0;u<l.length;u+=1){const c=rt(s,l,u);n[u]?(n[u].p(c,i),b(n[u],1)):(n[u]=st(c),n[u].c(),b(n[u],1),n[u].m(e,null))}for(fe(),u=l.length;u<n.length;u+=1)r(u);ue()}},i(s){if(!t){for(let i=0;i<l.length;i+=1)b(n[i]);t=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)T(n[i]);t=!1},d(s){s&&d(e),Fe(n,s)}}}function Hl(o){let e,t=o[17].name+"",l,n;return{c(){e=I("div"),l=oe(t),n=G(),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=B(e);l=re(a,t),a.forEach(d),n=Y(r),this.h()},h(){h(e,"class","text-xs font-bold px-1 rounded-sm uppercase bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(r,a){L(r,e,a),E(e,l),L(r,n,a)},p(r,a){a&2&&t!==(t=r[17].name+"")&&ae(l,t)},d(r){r&&(d(e),d(n))}}}function st(o){let e,t;return e=new pe({props:{content:o[17].name,className:"flex-shrink-0",$$slots:{default:[Hl]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},p(l,n){const r={};n&2&&(r.content=l[17].name),n&1048578&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Ol(o){let e,t;return{c(){e=I("img"),this.h()},l(l){e=V(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){var l,n,r;Xe(e.src,t=((r=(n=(l=o[1].model)==null?void 0:l.info)==null?void 0:n.meta)==null?void 0:r.profile_image_url)??"/static/favicon.png")||h(e,"src",t),h(e,"alt","Model"),h(e,"class","rounded-full size-5 flex items-center")},m(l,n){L(l,e,n)},p(l,n){var r,a,s;n&2&&!Xe(e.src,t=((s=(a=(r=l[1].model)==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:s.profile_image_url)??"/static/favicon.png")&&h(e,"src",t)},d(l){l&&d(e)}}}function zl(o){let e,t=o[1].label+"",l;return{c(){e=I("div"),l=oe(t),this.h()},l(n){e=V(n,"DIV",{class:!0});var r=B(e);l=re(r,t),r.forEach(d),this.h()},h(){h(e,"class","line-clamp-1")},m(n,r){L(n,e,r),E(e,l)},p(n,r){r&2&&t!==(t=n[1].label+"")&&ae(l,t)},d(n){n&&d(e)}}}function it(o){var s,i,m,u;let e,t=((s=o[1].model.ollama)==null?void 0:s.expires_at)&&new Date(((i=o[1].model.ollama)==null?void 0:i.expires_at)*1e3)>new Date,l,n,r=(((u=(m=o[1].model.ollama)==null?void 0:m.details)==null?void 0:u.parameter_size)??"")!==""&&ft(o),a=t&&ut(o);return{c(){r&&r.c(),e=G(),a&&a.c(),l=xe()},l(c){r&&r.l(c),e=Y(c),a&&a.l(c),l=xe()},m(c,D){r&&r.m(c,D),L(c,e,D),a&&a.m(c,D),L(c,l,D),n=!0},p(c,D){var $,v,C,z;(((v=($=c[1].model.ollama)==null?void 0:$.details)==null?void 0:v.parameter_size)??"")!==""?r?(r.p(c,D),D&2&&b(r,1)):(r=ft(c),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(fe(),T(r,1,1,()=>{r=null}),ue()),D&2&&(t=((C=c[1].model.ollama)==null?void 0:C.expires_at)&&new Date(((z=c[1].model.ollama)==null?void 0:z.expires_at)*1e3)>new Date),t?a?(a.p(c,D),D&2&&b(a,1)):(a=ut(c),a.c(),b(a,1),a.m(l.parentNode,l)):a&&(fe(),T(a,1,1,()=>{a=null}),ue())},i(c){n||(b(r),b(a),n=!0)},o(c){T(r),T(a),n=!1},d(c){c&&(d(e),d(l)),r&&r.d(c),a&&a.d(c)}}}function ft(o){var n,r,a,s,i,m;let e,t,l;return t=new pe({props:{content:`${(r=(n=o[1].model.ollama)==null?void 0:n.details)!=null&&r.quantization_level?((s=(a=o[1].model.ollama)==null?void 0:a.details)==null?void 0:s.quantization_level)+" ":""}${(i=o[1].model.ollama)!=null&&i.size?`(${(((m=o[1].model.ollama)==null?void 0:m.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[Sl]},$$scope:{ctx:o}}}),{c(){e=I("div"),K(t.$$.fragment),this.h()},l(u){e=V(u,"DIV",{class:!0});var c=B(e);J(t.$$.fragment,c),c.forEach(d),this.h()},h(){h(e,"class","flex items-center translate-y-[0.5px]")},m(u,c){L(u,e,c),Q(t,e,null),l=!0},p(u,c){var $,v,C,z,g,O;const D={};c&2&&(D.content=`${(v=($=u[1].model.ollama)==null?void 0:$.details)!=null&&v.quantization_level?((z=(C=u[1].model.ollama)==null?void 0:C.details)==null?void 0:z.quantization_level)+" ":""}${(g=u[1].model.ollama)!=null&&g.size?`(${(((O=u[1].model.ollama)==null?void 0:O.size)/1024**3).toFixed(1)}GB)`:""}`),c&1048578&&(D.$$scope={dirty:c,ctx:u}),t.$set(D)},i(u){l||(b(t.$$.fragment,u),l=!0)},o(u){T(t.$$.fragment,u),l=!1},d(u){u&&d(e),X(t)}}}function Sl(o){var n,r;let e,t=(((r=(n=o[1].model.ollama)==null?void 0:n.details)==null?void 0:r.parameter_size)??"")+"",l;return{c(){e=I("span"),l=oe(t),this.h()},l(a){e=V(a,"SPAN",{class:!0});var s=B(e);l=re(s,t),s.forEach(d),this.h()},h(){h(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1")},m(a,s){L(a,e,s),E(e,l)},p(a,s){var i,m;s&2&&t!==(t=(((m=(i=a[1].model.ollama)==null?void 0:i.details)==null?void 0:m.parameter_size)??"")+"")&&ae(l,t)},d(a){a&&d(e)}}}function ut(o){var n;let e,t,l;return t=new pe({props:{content:`${o[8].t("Unloads {{FROM_NOW}}",{FROM_NOW:Ge(((n=o[1].model.ollama)==null?void 0:n.expires_at)*1e3).fromNow()})}`,className:"self-end",$$slots:{default:[Bl]},$$scope:{ctx:o}}}),{c(){e=I("div"),K(t.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=B(e);J(t.$$.fragment,a),a.forEach(d),this.h()},h(){h(e,"class","flex items-center translate-y-[0.5px] px-0.5")},m(r,a){L(r,e,a),Q(t,e,null),l=!0},p(r,a){var i;const s={};a&258&&(s.content=`${r[8].t("Unloads {{FROM_NOW}}",{FROM_NOW:Ge(((i=r[1].model.ollama)==null?void 0:i.expires_at)*1e3).fromNow()})}`),a&1048576&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){l||(b(t.$$.fragment,r),l=!0)},o(r){T(t.$$.fragment,r),l=!1},d(r){r&&d(e),X(t)}}}function Bl(o){let e,t='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>';return{c(){e=I("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),Ee(e)!=="svelte-pq0hxj"&&(e.innerHTML=t),this.h()},h(){h(e,"class","flex items-center")},m(l,n){L(l,e,n)},p:me,d(l){l&&d(e)}}}function Ll(o){let e,t;return e=new pe({props:{content:`${o[8].t("External")}`,$$slots:{default:[jl]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},p(l,n){const r={};n&256&&(r.content=`${l[8].t("External")}`),n&1048576&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Pl(o){let e,t;return e=new pe({props:{content:`${o[8].t("Direct")}`,$$slots:{default:[Al]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},p(l,n){const r={};n&256&&(r.content=`${l[8].t("Direct")}`),n&1048576&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function jl(o){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=I("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),Ee(e)!=="svelte-1we9nfa"&&(e.innerHTML=t),this.h()},h(){h(e,"class","translate-y-[1px]")},m(l,n){L(l,e,n)},p:me,d(l){l&&d(e)}}}function Al(o){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" clip-rule="evenodd"></path></svg>';return{c(){e=I("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),Ee(e)!=="svelte-1pvx0j8"&&(e.innerHTML=t),this.h()},h(){h(e,"class","translate-y-[1px]")},m(l,n){L(l,e,n)},p:me,d(l){l&&d(e)}}}function ct(o){var l,n,r;let e,t;return e=new pe({props:{content:`${lt.parse(nt((r=(n=(l=o[1].model)==null?void 0:l.info)==null?void 0:n.meta)==null?void 0:r.description).replaceAll(`
`,"<br>"))}`,$$slots:{default:[Ul]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,s){Q(e,a,s),t=!0},p(a,s){var m,u,c;const i={};s&2&&(i.content=`${lt.parse(nt((c=(u=(m=a[1].model)==null?void 0:m.info)==null?void 0:u.meta)==null?void 0:c.description).replaceAll(`
`,"<br>"))}`),s&1048576&&(i.$$scope={dirty:s,ctx:a}),e.$set(i)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){X(e,a)}}}function Ul(o){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=I("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),Ee(e)!=="svelte-i7zoyb"&&(e.innerHTML=t),this.h()},h(){h(e,"class","translate-y-[1px]")},m(l,n){L(l,e,n)},p:me,d(l){l&&d(e)}}}function dt(o){let e,t;return e=new pe({props:{content:`${o[8].t("Eject")}`,className:"flex-shrink-0 group-hover/item:opacity-100 opacity-0 ",$$slots:{default:[Wl]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},p(l,n){const r={};n&256&&(r.content=`${l[8].t("Eject")}`),n&1048594&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Wl(o){let e,t,l,n,r;return t=new wl({props:{className:"size-3"}}),{c(){e=I("button"),K(t.$$.fragment),this.h()},l(a){e=V(a,"BUTTON",{class:!0});var s=B(e);J(t.$$.fragment,s),s.forEach(d),this.h()},h(){h(e,"class","flex")},m(a,s){L(a,e,s),Q(t,e,null),l=!0,n||(r=se(e,"click",o[12]),n=!0)},p:me,i(a){l||(b(t.$$.fragment,a),l=!0)},o(a){T(t.$$.fragment,a),l=!1},d(a){a&&d(e),X(t),n=!1,r()}}}function Fl(o){let e,t,l,n,r;return t=new hl({}),{c(){e=I("button"),K(t.$$.fragment),this.h()},l(a){e=V(a,"BUTTON",{class:!0});var s=B(e);J(t.$$.fragment,s),s.forEach(d),this.h()},h(){h(e,"class","flex")},m(a,s){L(a,e,s),Q(t,e,null),l=!0,n||(r=se(e,"click",o[13]),n=!0)},p:me,i(a){l||(b(t.$$.fragment,a),l=!0)},o(a){T(t.$$.fragment,a),l=!1},d(a){a&&d(e),X(t),n=!1,r()}}}function mt(o){let e,t,l;return t=new ul({props:{className:"size-3"}}),{c(){e=I("div"),K(t.$$.fragment)},l(n){e=V(n,"DIV",{});var r=B(e);J(t.$$.fragment,r),r.forEach(d)},m(n,r){L(n,e,r),Q(t,e,null),l=!0},i(n){l||(b(t.$$.fragment,n),l=!0)},o(n){T(t.$$.fragment,n),l=!1},d(n){n&&d(e),X(t)}}}function ql(o){var Ve,He,Oe,ze,Se,Be,Le,Pe,je,Ae;let e,t,l,n,r,a,s,i,m,u,c,D,$,v,C,z,g,O=((Ve=o[9])==null?void 0:Ve.role)==="admin"&&o[1].model.owned_by==="ollama"&&((He=o[1].model.ollama)==null?void 0:He.expires_at)&&new Date(((Oe=o[1].model.ollama)==null?void 0:Oe.expires_at)*1e3)>new Date,k,_,j,A,H,y,w,Z,le,ee,W=(((Se=(ze=o[1])==null?void 0:ze.model)==null?void 0:Se.tags)??[]).length>0&&at(o);a=new pe({props:{content:((Be=o[9])==null?void 0:Be.role)==="admin"?((Le=o[1])==null?void 0:Le.value)??"":"",placement:"top-start",$$slots:{default:[Ol]},$$scope:{ctx:o}}}),m=new pe({props:{content:`${o[1].label} (${o[1].value})`,placement:"top-start",$$slots:{default:[zl]},$$scope:{ctx:o}}});let U=o[1].model.owned_by==="ollama"&&it(o);const p=[Pl,Ll],M=[];function te(N,q){var ce;return(ce=N[1].model)!=null&&ce.direct?0:N[1].model.connection_type==="external"?1:-1}~($=te(o))&&(v=M[$]=p[$](o));let R=((Ae=(je=(Pe=o[1].model)==null?void 0:Pe.info)==null?void 0:je.meta)==null?void 0:Ae.description)&&ct(o),S=O&&dt(o);function ve(N){o[15](N)}let Ie={model:o[1].model,pinModelHandler:o[5],copyLinkHandler:o[14],$$slots:{default:[Fl]},$$scope:{ctx:o}};o[7]!==void 0&&(Ie.show=o[7]),_=new Vl({props:Ie}),qe.push(()=>Je(_,"show",ve));let ne=o[3]===o[1].value&&mt();return{c(){e=I("button"),t=I("div"),W&&W.c(),l=G(),n=I("div"),r=I("div"),K(a.$$.fragment),s=G(),i=I("div"),K(m.$$.fragment),u=G(),c=I("div"),U&&U.c(),D=G(),v&&v.c(),C=G(),R&&R.c(),z=G(),g=I("div"),S&&S.c(),k=G(),K(_.$$.fragment),A=G(),ne&&ne.c(),this.h()},l(N){e=V(N,"BUTTON",{"aria-label":!0,class:!0,"data-arrow-selected":!0,"data-value":!0});var q=B(e);t=V(q,"DIV",{class:!0});var ce=B(t);W&&W.l(ce),l=Y(ce),n=V(ce,"DIV",{class:!0});var he=B(n);r=V(he,"DIV",{class:!0});var f=B(r);J(a.$$.fragment,f),f.forEach(d),s=Y(he),i=V(he,"DIV",{class:!0});var P=B(i);J(m.$$.fragment,P),P.forEach(d),u=Y(he),c=V(he,"DIV",{class:!0});var F=B(c);U&&U.l(F),D=Y(F),v&&v.l(F),C=Y(F),R&&R.l(F),F.forEach(d),he.forEach(d),ce.forEach(d),z=Y(q),g=V(q,"DIV",{class:!0});var x=B(g);S&&S.l(x),k=Y(x),J(_.$$.fragment,x),A=Y(x),ne&&ne.l(x),x.forEach(d),q.forEach(d),this.h()},h(){h(r,"class","flex items-center min-w-fit"),h(i,"class","flex items-center"),h(c,"class","shrink-0 flex items-center gap-2"),h(n,"class","flex items-center gap-2"),h(t,"class","flex flex-col flex-1 gap-1.5"),h(g,"class","ml-auto pl-2 pr-1 flex items-center gap-1.5 shrink-0"),h(e,"aria-label","model-item"),h(e,"class",H="flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(o[2]===o[0]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")),h(e,"data-arrow-selected",y=o[2]===o[0]),h(e,"data-value",w=o[1].value)},m(N,q){L(N,e,q),E(e,t),W&&W.m(t,null),E(t,l),E(t,n),E(n,r),Q(a,r,null),E(n,s),E(n,i),Q(m,i,null),E(n,u),E(n,c),U&&U.m(c,null),E(c,D),~$&&M[$].m(c,null),E(c,C),R&&R.m(c,null),E(e,z),E(e,g),S&&S.m(g,null),E(g,k),Q(_,g,null),E(g,A),ne&&ne.m(g,null),Z=!0,le||(ee=se(e,"click",o[16]),le=!0)},p(N,[q]){var F,x,be,de,ke,$e,De,ie,ye,Qe;(((x=(F=N[1])==null?void 0:F.model)==null?void 0:x.tags)??[]).length>0?W?(W.p(N,q),q&2&&b(W,1)):(W=at(N),W.c(),b(W,1),W.m(t,l)):W&&(fe(),T(W,1,1,()=>{W=null}),ue());const ce={};q&514&&(ce.content=((be=N[9])==null?void 0:be.role)==="admin"?((de=N[1])==null?void 0:de.value)??"":""),q&1048578&&(ce.$$scope={dirty:q,ctx:N}),a.$set(ce);const he={};q&2&&(he.content=`${N[1].label} (${N[1].value})`),q&1048578&&(he.$$scope={dirty:q,ctx:N}),m.$set(he),N[1].model.owned_by==="ollama"?U?(U.p(N,q),q&2&&b(U,1)):(U=it(N),U.c(),b(U,1),U.m(c,D)):U&&(fe(),T(U,1,1,()=>{U=null}),ue());let f=$;$=te(N),$===f?~$&&M[$].p(N,q):(v&&(fe(),T(M[f],1,1,()=>{M[f]=null}),ue()),~$?(v=M[$],v?v.p(N,q):(v=M[$]=p[$](N),v.c()),b(v,1),v.m(c,C)):v=null),(De=($e=(ke=N[1].model)==null?void 0:ke.info)==null?void 0:$e.meta)!=null&&De.description?R?(R.p(N,q),q&2&&b(R,1)):(R=ct(N),R.c(),b(R,1),R.m(c,null)):R&&(fe(),T(R,1,1,()=>{R=null}),ue()),q&514&&(O=((ie=N[9])==null?void 0:ie.role)==="admin"&&N[1].model.owned_by==="ollama"&&((ye=N[1].model.ollama)==null?void 0:ye.expires_at)&&new Date(((Qe=N[1].model.ollama)==null?void 0:Qe.expires_at)*1e3)>new Date),O?S?(S.p(N,q),q&514&&b(S,1)):(S=dt(N),S.c(),b(S,1),S.m(g,k)):S&&(fe(),T(S,1,1,()=>{S=null}),ue());const P={};q&2&&(P.model=N[1].model),q&32&&(P.pinModelHandler=N[5]),q&2&&(P.copyLinkHandler=N[14]),q&1048704&&(P.$$scope={dirty:q,ctx:N}),!j&&q&128&&(j=!0,P.show=N[7],Ye(()=>j=!1)),_.$set(P),N[3]===N[1].value?ne?q&10&&b(ne,1):(ne=mt(),ne.c(),b(ne,1),ne.m(g,null)):ne&&(fe(),T(ne,1,1,()=>{ne=null}),ue()),(!Z||q&5&&H!==(H="flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(N[2]===N[0]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")))&&h(e,"class",H),(!Z||q&5&&y!==(y=N[2]===N[0]))&&h(e,"data-arrow-selected",y),(!Z||q&2&&w!==(w=N[1].value))&&h(e,"data-value",w)},i(N){Z||(b(W),b(a.$$.fragment,N),b(m.$$.fragment,N),b(U),b(v),b(R),b(S),b(_.$$.fragment,N),b(ne),Z=!0)},o(N){T(W),T(a.$$.fragment,N),T(m.$$.fragment,N),T(U),T(v),T(R),T(S),T(_.$$.fragment,N),T(ne),Z=!1},d(N){N&&d(e),W&&W.d(),X(a),X(m),U&&U.d(),~$&&M[$].d(),R&&R.d(),S&&S.d(),X(_),ne&&ne.d(),le=!1,ee()}}}const ht=(o,e)=>o.name.localeCompare(e.name);function Zl(o,e,t){let l,n;ge(o,Gt,_=>t(9,n=_));const r=Ke("i18n");ge(o,r,_=>t(8,l=_));let{selectedModelIdx:a=-1}=e,{item:s={}}=e,{index:i=-1}=e,{value:m=""}=e,{unloadModelHandler:u=()=>{}}=e,{pinModelHandler:c=()=>{}}=e,{onClick:D=()=>{}}=e;const $=async _=>{const j=window.location.origin;await Jt(`${j}/?model=${encodeURIComponent(_.id)}`)?_e.success(l.t("Copied link to clipboard")):_e.error(l.t("Failed to copy link"))};let v=!1;const C=_=>{_.preventDefault(),_.stopPropagation(),u(s.value)},z=_=>{_.preventDefault(),_.stopPropagation(),t(7,v=!v)},g=()=>{$(s.model)};function O(_){v=_,t(7,v)}const k=()=>{D()};return o.$$set=_=>{"selectedModelIdx"in _&&t(0,a=_.selectedModelIdx),"item"in _&&t(1,s=_.item),"index"in _&&t(2,i=_.index),"value"in _&&t(3,m=_.value),"unloadModelHandler"in _&&t(4,u=_.unloadModelHandler),"pinModelHandler"in _&&t(5,c=_.pinModelHandler),"onClick"in _&&t(6,D=_.onClick)},[a,s,i,m,u,c,D,v,l,n,r,$,C,z,g,O,k]}class Rl extends Te{constructor(e){super(),Ne(this,e,Zl,ql,Ce,{selectedModelIdx:0,item:1,index:2,value:3,unloadModelHandler:4,pinModelHandler:5,onClick:6})}}function _t(o,e,t){const l=o.slice();return l[51]=e[t],l}function pt(o,e,t){const l=o.slice();return l[54]=e[t],l[56]=t,l}function gt(o,e,t){const l=o.slice();return l[57]=e[t],l}function Gl(o){let e;return{c(){e=oe(o[2])},l(t){e=re(t,o[2])},m(t,l){L(t,e,l)},p(t,l){l[0]&4&&ae(e,t[2])},d(t){t&&d(e)}}}function Yl(o){let e=o[16].label+"",t;return{c(){t=oe(e)},l(l){t=re(l,e)},m(l,n){L(l,t,n)},p(l,n){n[0]&65536&&e!==(e=l[16].label+"")&&ae(t,e)},d(l){l&&d(t)}}}function Kl(o){let e,t,l,n,r,a,s;function i(c,D){return c[16]?Yl:Gl}let m=i(o),u=m(o);return l=new sl({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=I("button"),u.c(),t=G(),K(l.$$.fragment),this.h()},l(c){e=V(c,"BUTTON",{class:!0,type:!0});var D=B(e);u.l(D),t=Y(D),J(l.$$.fragment,D),D.forEach(d),this.h()},h(){h(e,"class",n="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+o[8]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden"),h(e,"type","button")},m(c,D){L(c,e,D),u.m(e,null),E(e,t),Q(l,e,null),r=!0,a||(s=se(e,"mouseenter",o[33]),a=!0)},p(c,D){m===(m=i(c))&&u?u.p(c,D):(u.d(1),u=m(c),u&&(u.c(),u.m(e,t))),(!r||D[0]&256&&n!==(n="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+c[8]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden"))&&h(e,"class",n)},i(c){r||(b(l.$$.fragment,c),r=!0)},o(c){T(l.$$.fragment,c),r=!1},d(c){c&&d(e),u.d(),X(l),a=!1,s()}}}function vt(o){let e,t,l,n,r,a,s;return t=new il({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=I("div"),K(t.$$.fragment),l=G(),n=I("input"),this.h()},l(i){e=V(i,"DIV",{class:!0});var m=B(e);J(t.$$.fragment,m),l=Y(m),n=V(m,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0}),m.forEach(d),this.h()},h(){h(n,"id","model-search-input"),h(n,"class","w-full text-sm bg-transparent outline-hidden"),h(n,"placeholder",o[4]),h(n,"autocomplete","off"),h(e,"class","flex items-center gap-2.5 px-5 mt-3.5 mb-1.5")},m(i,m){L(i,e,m),Q(t,e,null),E(e,l),E(e,n),tt(n,o[10]),r=!0,a||(s=[se(n,"input",o[34]),se(n,"keydown",o[35])],a=!0)},p(i,m){(!r||m[0]&16)&&h(n,"placeholder",i[4]),m[0]&1024&&n.value!==i[10]&&tt(n,i[10])},i(i){r||(b(t.$$.fragment,i),r=!0)},o(i){T(t.$$.fragment,i),r=!1},d(i){i&&d(e),X(t),a=!1,Lt(s)}}}function bt(o){let e,t,l=o[6].find(zt)||o[6].find(St)||o[6].find(Bt)||o[15].length>0,n,r=o[6].find(Ot),a,s=o[6].find(Ht),i,m=o[6].find(Vt),u,c,D,$=l&&wt(o),v=r&&kt(o),C=s&&$t(o),z=m&&yt(o),g=we(o[15]),O=[];for(let k=0;k<g.length;k+=1)O[k]=Mt(gt(o,g,k));return{c(){e=I("div"),t=I("div"),$&&$.c(),n=G(),v&&v.c(),a=G(),C&&C.c(),i=G(),z&&z.c(),u=G();for(let k=0;k<O.length;k+=1)O[k].c();this.h()},l(k){e=V(k,"DIV",{class:!0});var _=B(e);t=V(_,"DIV",{class:!0});var j=B(t);$&&$.l(j),n=Y(j),v&&v.l(j),a=Y(j),C&&C.l(j),i=Y(j),z&&z.l(j),u=Y(j);for(let A=0;A<O.length;A+=1)O[A].l(j);j.forEach(d),_.forEach(d),this.h()},h(){h(t,"class","flex gap-1 w-fit text-center text-sm font-medium rounded-full bg-transparent px-1.5 pb-0.5"),h(e,"class","flex w-full bg-white dark:bg-gray-850 overflow-x-auto scrollbar-none")},m(k,_){L(k,e,_),E(e,t),$&&$.m(t,null),E(t,n),v&&v.m(t,null),E(t,a),C&&C.m(t,null),E(t,i),z&&z.m(t,null),E(t,u);for(let j=0;j<O.length;j+=1)O[j]&&O[j].m(t,null);o[41](t),c||(D=se(e,"wheel",on),c=!0)},p(k,_){if(_[0]&32832&&(l=k[6].find(zt)||k[6].find(St)||k[6].find(Bt)||k[15].length>0),l?$?$.p(k,_):($=wt(k),$.c(),$.m(t,n)):$&&($.d(1),$=null),_[0]&64&&(r=k[6].find(Ot)),r?v?v.p(k,_):(v=kt(k),v.c(),v.m(t,a)):v&&(v.d(1),v=null),_[0]&64&&(s=k[6].find(Ht)),s?C?C.p(k,_):(C=$t(k),C.c(),C.m(t,i)):C&&(C.d(1),C=null),_[0]&64&&(m=k[6].find(Vt)),m?z?z.p(k,_):(z=yt(k),z.c(),z.m(t,u)):z&&(z.d(1),z=null),_[0]&38912){g=we(k[15]);let j;for(j=0;j<g.length;j+=1){const A=gt(k,g,j);O[j]?O[j].p(A,_):(O[j]=Mt(A),O[j].c(),O[j].m(t,null))}for(;j<O.length;j+=1)O[j].d(1);O.length=g.length}},d(k){k&&d(e),$&&$.d(),v&&v.d(),C&&C.d(),z&&z.d(),Fe(O,k),o[41](null),c=!1,D()}}}function wt(o){let e,t=o[22].t("All")+"",l,n,r,a;return{c(){e=I("button"),l=oe(t),this.h()},l(s){e=V(s,"BUTTON",{class:!0});var i=B(e);l=re(i,t),i.forEach(d),this.h()},h(){h(e,"class",n="min-w-fit outline-none p-1.5 "+(o[11]===""&&o[12]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(s,i){L(s,e,i),E(e,l),r||(a=se(e,"click",o[36]),r=!0)},p(s,i){i[0]&4194304&&t!==(t=s[22].t("All")+"")&&ae(l,t),i[0]&6144&&n!==(n="min-w-fit outline-none p-1.5 "+(s[11]===""&&s[12]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&h(e,"class",n)},d(s){s&&d(e),r=!1,a()}}}function kt(o){let e,t=o[22].t("Local")+"",l,n,r,a;return{c(){e=I("button"),l=oe(t),this.h()},l(s){e=V(s,"BUTTON",{class:!0});var i=B(e);l=re(i,t),i.forEach(d),this.h()},h(){h(e,"class",n="min-w-fit outline-none p-1.5 "+(o[12]==="local"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(s,i){L(s,e,i),E(e,l),r||(a=se(e,"click",o[37]),r=!0)},p(s,i){i[0]&4194304&&t!==(t=s[22].t("Local")+"")&&ae(l,t),i[0]&4096&&n!==(n="min-w-fit outline-none p-1.5 "+(s[12]==="local"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&h(e,"class",n)},d(s){s&&d(e),r=!1,a()}}}function $t(o){let e,t=o[22].t("External")+"",l,n,r,a;return{c(){e=I("button"),l=oe(t),this.h()},l(s){e=V(s,"BUTTON",{class:!0});var i=B(e);l=re(i,t),i.forEach(d),this.h()},h(){h(e,"class",n="min-w-fit outline-none p-1.5 "+(o[12]==="external"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(s,i){L(s,e,i),E(e,l),r||(a=se(e,"click",o[38]),r=!0)},p(s,i){i[0]&4194304&&t!==(t=s[22].t("External")+"")&&ae(l,t),i[0]&4096&&n!==(n="min-w-fit outline-none p-1.5 "+(s[12]==="external"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&h(e,"class",n)},d(s){s&&d(e),r=!1,a()}}}function yt(o){let e,t=o[22].t("Direct")+"",l,n,r,a;return{c(){e=I("button"),l=oe(t),this.h()},l(s){e=V(s,"BUTTON",{class:!0});var i=B(e);l=re(i,t),i.forEach(d),this.h()},h(){h(e,"class",n="min-w-fit outline-none p-1.5 "+(o[12]==="direct"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(s,i){L(s,e,i),E(e,l),r||(a=se(e,"click",o[39]),r=!0)},p(s,i){i[0]&4194304&&t!==(t=s[22].t("Direct")+"")&&ae(l,t),i[0]&4096&&n!==(n="min-w-fit outline-none p-1.5 "+(s[12]==="direct"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&h(e,"class",n)},d(s){s&&d(e),r=!1,a()}}}function Mt(o){let e,t=o[57]+"",l,n,r,a,s;function i(){return o[40](o[57])}return{c(){e=I("button"),l=oe(t),n=G(),this.h()},l(m){e=V(m,"BUTTON",{class:!0});var u=B(e);l=re(u,t),n=Y(u),u.forEach(d),this.h()},h(){h(e,"class",r="min-w-fit outline-none p-1.5 "+(o[11]===o[57]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(m,u){L(m,e,u),E(e,l),E(e,n),a||(s=se(e,"click",i),a=!0)},p(m,u){o=m,u[0]&32768&&t!==(t=o[57]+"")&&ae(l,t),u[0]&34816&&r!==(r="min-w-fit outline-none p-1.5 "+(o[11]===o[57]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&h(e,"class",r)},d(m){m&&d(e),a=!1,s()}}}function Et(o){let e,t,l=o[22].t("No results found")+"",n;return{c(){e=I("div"),t=I("div"),n=oe(l),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=B(e);t=V(a,"DIV",{class:!0});var s=B(t);n=re(s,l),s.forEach(d),a.forEach(d),this.h()},h(){h(t,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100"),h(e,"class","")},m(r,a){L(r,e,a),E(e,t),E(t,n)},p(r,a){a[0]&4194304&&l!==(l=r[22].t("No results found")+"")&&ae(n,l)},d(r){r&&d(e)}}}function Dt(o){let e,t;function l(){return o[42](o[54],o[56])}return e=new Rl({props:{selectedModelIdx:o[18],item:o[54],index:o[56],value:o[0],pinModelHandler:o[9],unloadModelHandler:o[31],onClick:l}}),{c(){K(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){Q(e,n,r),t=!0},p(n,r){o=n;const a={};r[0]&262144&&(a.selectedModelIdx=o[18]),r[0]&524288&&(a.item=o[54]),r[0]&1&&(a.value=o[0]),r[0]&512&&(a.pinModelHandler=o[9]),r[0]&802817&&(a.onClick=l),e.$set(a)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Ct(o){let e,t;return e=new pe({props:{content:o[22].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[10]}),placement:"top-start",$$slots:{default:[Jl]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Q(e,l,n),t=!0},p(l,n){const r={};n[0]&4195328&&(r.content=l[22].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:l[10]})),n[0]&4195328|n[1]&131072&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Jl(o){let e,t,l=o[22].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[10]})+"",n,r,a;return{c(){e=I("button"),t=I("div"),n=oe(l),this.h()},l(s){e=V(s,"BUTTON",{class:!0});var i=B(e);t=V(i,"DIV",{class:!0});var m=B(t);n=re(m,l),m.forEach(d),i.forEach(d),this.h()},h(){h(t,"class","truncate"),h(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(s,i){L(s,e,i),E(e,t),E(t,n),r||(a=se(e,"click",o[43]),r=!0)},p(s,i){i[0]&4195328&&l!==(l=s[22].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:s[10]})+"")&&ae(n,l)},d(s){s&&d(e),r=!1,a()}}}function Tt(o){let e,t=o[23][o[51]].digest+"",l;return{c(){e=I("div"),l=oe(t),this.h()},l(n){e=V(n,"DIV",{class:!0});var r=B(e);l=re(r,t),r.forEach(d),this.h()},h(){h(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(n,r){L(n,e,r),E(e,l)},p(n,r){r[0]&8388608&&t!==(t=n[23][n[51]].digest+"")&&ae(l,t)},d(n){n&&d(e)}}}function Ql(o){let e,t='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',l,n;function r(){return o[44](o[51])}return{c(){e=I("button"),e.innerHTML=t,this.h()},l(a){e=V(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Ee(e)!=="svelte-19bzgft"&&(e.innerHTML=t),this.h()},h(){h(e,"class","text-gray-800 dark:text-gray-100")},m(a,s){L(a,e,s),l||(n=se(e,"click",r),l=!0)},p(a,s){o=a},d(a){a&&d(e),l=!1,n()}}}function Nt(o){let e,t,l,n=`<svg class="size-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`,r,a,s,i,m,u=o[51]+"",c,D,$,v,C="pullProgress"in o[23][o[51]]?`(${o[23][o[51]].pullProgress}%)`:"",z,g,O,k,_,j,A,H="digest"in o[23][o[51]]&&o[23][o[51]].digest&&Tt(o);return _=new pe({props:{content:o[22].t("Cancel"),$$slots:{default:[Ql]},$$scope:{ctx:o}}}),{c(){e=I("div"),t=I("div"),l=I("div"),l.innerHTML=n,r=G(),a=I("div"),s=I("div"),i=I("div"),m=oe('Downloading "'),c=oe(u),D=oe('"'),$=G(),v=I("div"),z=oe(C),g=G(),H&&H.c(),O=G(),k=I("div"),K(_.$$.fragment),j=G(),this.h()},l(y){e=V(y,"DIV",{class:!0});var w=B(e);t=V(w,"DIV",{class:!0});var Z=B(t);l=V(Z,"DIV",{class:!0,"data-svelte-h":!0}),Ee(l)!=="svelte-102rp4j"&&(l.innerHTML=n),r=Y(Z),a=V(Z,"DIV",{class:!0});var le=B(a);s=V(le,"DIV",{class:!0});var ee=B(s);i=V(ee,"DIV",{class:!0});var W=B(i);m=re(W,'Downloading "'),c=re(W,u),D=re(W,'"'),W.forEach(d),$=Y(ee),v=V(ee,"DIV",{class:!0});var U=B(v);z=re(U,C),U.forEach(d),ee.forEach(d),g=Y(le),H&&H.l(le),le.forEach(d),Z.forEach(d),O=Y(w),k=V(w,"DIV",{class:!0});var p=B(k);J(_.$$.fragment,p),p.forEach(d),j=Y(w),w.forEach(d),this.h()},h(){h(l,"class","-ml-2 mr-2.5 translate-y-0.5"),h(i,"class","line-clamp-1"),h(v,"class","shrink-0"),h(s,"class","flex gap-1"),h(a,"class","flex flex-col self-start"),h(t,"class","flex"),h(k,"class","mr-2 ml-1 translate-y-0.5"),h(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(y,w){L(y,e,w),E(e,t),E(t,l),E(t,r),E(t,a),E(a,s),E(s,i),E(i,m),E(i,c),E(i,D),E(s,$),E(s,v),E(v,z),E(a,g),H&&H.m(a,null),E(e,O),E(e,k),Q(_,k,null),E(e,j),A=!0},p(y,w){(!A||w[0]&8388608)&&u!==(u=y[51]+"")&&ae(c,u),(!A||w[0]&8388608)&&C!==(C="pullProgress"in y[23][y[51]]?`(${y[23][y[51]].pullProgress}%)`:"")&&ae(z,C),"digest"in y[23][y[51]]&&y[23][y[51]].digest?H?H.p(y,w):(H=Tt(y),H.c(),H.m(a,null)):H&&(H.d(1),H=null);const Z={};w[0]&4194304&&(Z.content=y[22].t("Cancel")),w[0]&8388608|w[1]&131072&&(Z.$$scope={dirty:w,ctx:y}),_.$set(Z)},i(y){A||(b(_.$$.fragment,y),A=!0)},o(y){T(_.$$.fragment,y),A=!1},d(y){y&&d(e),H&&H.d(),X(_)}}}function Xl(o){let e;return{c(){e=I("div"),this.h()},l(t){e=V(t,"DIV",{class:!0}),B(e).forEach(d),this.h()},h(){h(e,"class","mb-3")},m(t,l){L(t,e,l)},p:me,i:me,o:me,d(t){t&&d(e)}}}function xl(o){let e,t,l,n,r,a=o[22].t("Temporary Chat")+"",s,i,m,u,c,D,$;return n=new gl({props:{className:"size-4",strokeWidth:"2.5"}}),u=new fl({props:{state:o[26]}}),{c(){e=I("div"),t=I("button"),l=I("div"),K(n.$$.fragment),r=G(),s=oe(a),i=G(),m=I("div"),K(u.$$.fragment),this.h()},l(v){e=V(v,"DIV",{class:!0});var C=B(e);t=V(C,"BUTTON",{class:!0});var z=B(t);l=V(z,"DIV",{class:!0});var g=B(l);J(n.$$.fragment,g),r=Y(g),s=re(g,a),g.forEach(d),i=Y(z),m=V(z,"DIV",{});var O=B(m);J(u.$$.fragment,O),O.forEach(d),z.forEach(d),C.forEach(d),this.h()},h(){h(l,"class","flex gap-2.5 items-center"),h(t,"class","flex justify-between w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 px-3 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted"),h(e,"class","flex items-center mx-2 mt-1 mb-2")},m(v,C){L(v,e,C),E(e,t),E(t,l),Q(n,l,null),E(l,r),E(l,s),E(t,i),E(t,m),Q(u,m,null),c=!0,D||($=se(t,"click",o[45]),D=!0)},p(v,C){(!c||C[0]&4194304)&&a!==(a=v[22].t("Temporary Chat")+"")&&ae(s,a);const z={};C[0]&67108864&&(z.state=v[26]),u.$set(z)},i(v){c||(b(n.$$.fragment,v),b(u.$$.fragment,v),c=!0)},o(v){T(n.$$.fragment,v),T(u.$$.fragment,v),c=!1},d(v){v&&d(e),X(n),X(u),D=!1,$()}}}function en(o){var U;let e,t,l=o[15]&&o[6].filter(It).length>0,n,r,a,s=!(o[10].trim()in o[23])&&o[10]&&o[17]&&((U=o[25])==null?void 0:U.role)==="admin",i,m,u,c,D,$,v,C,z,g=o[3]&&vt(o),O=l&&bt(o),k=we(o[19]),_=[];for(let p=0;p<k.length;p+=1)_[p]=Dt(pt(o,k,p));const j=p=>T(_[p],1,1,()=>{_[p]=null});let A=null;k.length||(A=Et(o));let H=s&&Ct(o),y=we(Object.keys(o[23])),w=[];for(let p=0;p<y.length;p+=1)w[p]=Nt(_t(o,y,p));const Z=p=>T(w[p],1,1,()=>{w[p]=null}),le=[xl,Xl],ee=[];function W(p,M){return p[5]?0:1}return u=W(o),c=ee[u]=le[u](o),{c(){g&&g.c(),e=G(),t=I("div"),O&&O.c(),n=G(),r=I("div");for(let p=0;p<_.length;p+=1)_[p].c();A&&A.c(),a=G(),H&&H.c(),i=G();for(let p=0;p<w.length;p+=1)w[p].c();m=G(),c.c(),D=G(),$=I("div"),v=G(),C=I("div"),this.h()},l(p){g&&g.l(p),e=Y(p),t=V(p,"DIV",{class:!0});var M=B(t);O&&O.l(M),M.forEach(d),n=Y(p),r=V(p,"DIV",{class:!0});var te=B(r);for(let R=0;R<_.length;R+=1)_[R].l(te);A&&A.l(te),a=Y(te),H&&H.l(te),i=Y(te);for(let R=0;R<w.length;R+=1)w[R].l(te);te.forEach(d),m=Y(p),c.l(p),D=Y(p),$=V(p,"DIV",{class:!0}),B($).forEach(d),v=Y(p),C=V(p,"DIV",{class:!0}),B(C).forEach(d),this.h()},h(){h(t,"class","px-3"),h(r,"class","px-3 max-h-64 overflow-y-auto group relative"),h($,"class","hidden w-[42rem]"),h(C,"class","hidden w-[32rem]")},m(p,M){g&&g.m(p,M),L(p,e,M),L(p,t,M),O&&O.m(t,null),L(p,n,M),L(p,r,M);for(let te=0;te<_.length;te+=1)_[te]&&_[te].m(r,null);A&&A.m(r,null),E(r,a),H&&H.m(r,null),E(r,i);for(let te=0;te<w.length;te+=1)w[te]&&w[te].m(r,null);L(p,m,M),ee[u].m(p,M),L(p,D,M),L(p,$,M),L(p,v,M),L(p,C,M),z=!0},p(p,M){var R;if(p[3]?g?(g.p(p,M),M[0]&8&&b(g,1)):(g=vt(p),g.c(),b(g,1),g.m(e.parentNode,e)):g&&(fe(),T(g,1,1,()=>{g=null}),ue()),M[0]&32832&&(l=p[15]&&p[6].filter(It).length>0),l?O?O.p(p,M):(O=bt(p),O.c(),O.m(t,null)):O&&(O.d(1),O=null),M[0]&4997633|M[1]&1){k=we(p[19]);let S;for(S=0;S<k.length;S+=1){const ve=pt(p,k,S);_[S]?(_[S].p(ve,M),b(_[S],1)):(_[S]=Dt(ve),_[S].c(),b(_[S],1),_[S].m(r,a))}for(fe(),S=k.length;S<_.length;S+=1)j(S);ue(),!k.length&&A?A.p(p,M):k.length?A&&(A.d(1),A=null):(A=Et(p),A.c(),A.m(r,a))}if(M[0]&42075136&&(s=!(p[10].trim()in p[23])&&p[10]&&p[17]&&((R=p[25])==null?void 0:R.role)==="admin"),s?H?(H.p(p,M),M[0]&42075136&&b(H,1)):(H=Ct(p),H.c(),b(H,1),H.m(r,i)):H&&(fe(),T(H,1,1,()=>{H=null}),ue()),M[0]&1086324736){y=we(Object.keys(p[23]));let S;for(S=0;S<y.length;S+=1){const ve=_t(p,y,S);w[S]?(w[S].p(ve,M),b(w[S],1)):(w[S]=Nt(ve),w[S].c(),b(w[S],1),w[S].m(r,null))}for(fe(),S=y.length;S<w.length;S+=1)Z(S);ue()}let te=u;u=W(p),u===te?ee[u].p(p,M):(fe(),T(ee[te],1,1,()=>{ee[te]=null}),ue(),c=ee[u],c?c.p(p,M):(c=ee[u]=le[u](p),c.c()),b(c,1),c.m(D.parentNode,D))},i(p){if(!z){b(g);for(let M=0;M<k.length;M+=1)b(_[M]);b(H);for(let M=0;M<y.length;M+=1)b(w[M]);b(c),z=!0}},o(p){T(g),_=_.filter(Boolean);for(let M=0;M<_.length;M+=1)T(_[M]);T(H),w=w.filter(Boolean);for(let M=0;M<w.length;M+=1)T(w[M]);T(c),z=!1},d(p){p&&(d(e),d(t),d(n),d(r),d(m),d(D),d($),d(v),d(C)),g&&g.d(p),O&&O.d(),Fe(_,p),A&&A.d(),H&&H.d(),Fe(w,p),ee[u].d(p)}}}function tn(o){let e;const t=o[32].default,l=Pt(t,o,o[48],null),n=l||en(o);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,a){n&&n.m(r,a),e=!0},p(r,a){l?l.p&&(!e||a[1]&131072)&&jt(l,t,r,r[48],e?Ut(t,r[48],a,null):At(r[48]),null):n&&n.p&&(!e||a[0]&114228857)&&n.p(r,e?a:[-1,-1])},i(r){e||(b(n,r),e=!0)},o(r){T(n,r),e=!1},d(r){n&&n.d(r)}}}function ln(o){let e,t,l,n;return e=new Ft({props:{class:"relative w-full font-primary","aria-label":o[2],id:"model-selector-"+o[1]+"-button",$$slots:{default:[Kl]},$$scope:{ctx:o}}}),l=new qt({props:{class:" z-40 "+(o[24]?"w-full":`${o[7]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden",transition:Zt,side:o[24]?"bottom":"bottom-start",sideOffset:3,$$slots:{default:[tn]},$$scope:{ctx:o}}}),{c(){K(e.$$.fragment),t=G(),K(l.$$.fragment)},l(r){J(e.$$.fragment,r),t=Y(r),J(l.$$.fragment,r)},m(r,a){Q(e,r,a),L(r,t,a),Q(l,r,a),n=!0},p(r,a){const s={};a[0]&4&&(s["aria-label"]=r[2]),a[0]&2&&(s.id="model-selector-"+r[1]+"-button"),a[0]&3211524|a[1]&131072&&(s.$$scope={dirty:a,ctx:r}),e.$set(s);const i={};a[0]&16777344&&(i.class=" z-40 "+(r[24]?"w-full":`${r[7]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden"),a[0]&16777216&&(i.side=r[24]?"bottom":"bottom-start"),a[0]&114228857|a[1]&131072&&(i.$$scope={dirty:a,ctx:r}),l.$set(i)},i(r){n||(b(e.$$.fragment,r),b(l.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),T(l.$$.fragment,r),n=!1},d(r){r&&d(t),X(e,r),X(l,r)}}}function nn(o){let e,t,l;function n(a){o[47](a)}let r={onOpenChange:o[46],closeFocus:!1,$$slots:{default:[ln]},$$scope:{ctx:o}};return o[14]!==void 0&&(r.open=o[14]),e=new Wt({props:r}),qe.push(()=>Je(e,"open",n)),{c(){K(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,s){Q(e,a,s),l=!0},p(a,s){const i={};s[0]&1024&&(i.onOpenChange=a[46]),s[0]&134217727|s[1]&131072&&(i.$$scope={dirty:s,ctx:a}),!t&&s[0]&16384&&(t=!0,i.open=a[14],Ye(()=>t=!1)),e.$set(i)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){T(e.$$.fragment,a),l=!1},d(a){X(e,a)}}}const It=o=>{var e,t,l;return!(((l=(t=(e=o.model)==null?void 0:e.info)==null?void 0:t.meta)==null?void 0:l.hidden)??!1)},Vt=o=>{var e;return(e=o.model)==null?void 0:e.direct},Ht=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="external"},Ot=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="local"},zt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="local"},St=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="external"},Bt=o=>{var e;return(e=o.model)==null?void 0:e.direct},on=o=>{o.deltaY!==0&&(o.preventDefault(),o.currentTarget.scrollLeft+=o.deltaY)};function rn(o,e,t){let l,n,r,a,s,i,m,u;ge(o,Rt,f=>t(20,n=f)),ge(o,rl,f=>t(21,r=f)),ge(o,Me,f=>t(23,s=f)),ge(o,al,f=>t(24,i=f)),ge(o,Gt,f=>t(25,m=f)),ge(o,ot,f=>t(26,u=f));let{$$slots:c={},$$scope:D}=e;Ge.extend(xt);const $=Ke("i18n");ge(o,$,f=>t(22,a=f)),Yt();let{id:v=""}=e,{value:C=""}=e,{placeholder:z="Select a model"}=e,{searchEnabled:g=!0}=e,{searchPlaceholder:O=a.t("Search a model")}=e,{showTemporaryChatControl:k=!1}=e,{items:_=[]}=e,{className:j="w-[32rem]"}=e,{triggerClassName:A="text-lg"}=e,{pinModelHandler:H=()=>{}}=e,y,w=!1,Z=[],le="",ee="",W="",U="",p=null,M=0;const te=new Xt(_.map(f=>{var F,x,be,de,ke;return{...f,modelName:(F=f.model)==null?void 0:F.name,tags:(((x=f.model)==null?void 0:x.tags)??[]).map($e=>$e.name).join(" "),desc:(ke=(de=(be=f.model)==null?void 0:be.info)==null?void 0:de.meta)==null?void 0:ke.description}}),{keys:["value","tags","modelName"],threshold:.4}),R=async()=>{await et();const f=l.findIndex(F=>F.value===C);f>=0?t(18,M=f):t(18,M=0),await et();const P=document.querySelector('[data-arrow-selected="true"]');P==null||P.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},S=async()=>{var x;const f=ee.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(s[f]){_e.error(a.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:f}));return}if(Object.keys(s).length===3){_e.error(a.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const[P,F]=await ll(localStorage.token,f,"0").catch(be=>(_e.error(`${be}`),null));if(P){const be=P.body.pipeThrough(new TextDecoderStream).pipeThrough(Qt(`
`)).getReader();for(Me.set({...s,[f]:{...s[f],abortController:F,reader:be,done:!1}});;)try{const{value:de,done:ke}=await be.read();if(ke)break;let $e=de.split(`
`);for(const De of $e)if(De!==""){let ie=JSON.parse(De);if(ie.error)throw ie.error;if(ie.detail)throw ie.detail;if(ie.status)if(ie.digest){let ye=0;ie.completed?ye=Math.round(ie.completed/ie.total*1e3)/10:ye=100,Me.set({...s,[f]:{...s[f],pullProgress:ye,digest:ie.digest}})}else _e.success(ie.status),Me.set({...s,[f]:{...s[f],done:ie.status==="success"}})}}catch(de){typeof de!="string"&&(de=de.message),_e.error(`${de}`);break}s[f].done?(_e.success(a.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:f})),Ze.set(await Re(localStorage.token,((x=r==null?void 0:r.features)==null?void 0:x.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))):_e.error(a.t("Download canceled")),delete s[f],Me.set({...s})}};Kt(async()=>{t(17,p=await tl(localStorage.token).catch(f=>!1)),_&&(t(15,Z=_.filter(f=>{var P,F,x;return!(((x=(F=(P=f.model)==null?void 0:P.info)==null?void 0:F.meta)==null?void 0:x.hidden)??!1)}).flatMap(f=>{var P;return((P=f.model)==null?void 0:P.tags)??[]}).map(f=>f.name)),t(15,Z=Array.from(new Set(Z)).sort((f,P)=>f.localeCompare(P))))});const ve=async f=>{const{reader:P,abortController:F}=s[f];F&&F.abort(),P&&(await P.cancel(),delete s[f],Me.set({...s}),await nl(localStorage.token,f),_e.success(`${f} download has been canceled`))},Ie=async f=>{var F;await ol(localStorage.token,f).catch(x=>{_e.error(a.t("Error unloading model: {{error}}",{error:x}))})&&(_e.success(a.t("Model unloaded successfully")),Ze.set(await Re(localStorage.token,((F=r==null?void 0:r.features)==null?void 0:F.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null))))},ne=async()=>{var f;Ze.set(await Re(localStorage.token,((f=r==null?void 0:r.features)==null?void 0:f.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))};function Ve(){ee=this.value,t(10,ee)}const He=f=>{if(f.code==="Enter"&&l.length>0){t(0,C=l[M].value),t(14,w=!1);return}else f.code==="ArrowDown"?t(18,M=Math.min(M+1,l.length-1)):f.code==="ArrowUp"?t(18,M=Math.max(M-1,0)):t(18,M=0);const P=document.querySelector('[data-arrow-selected="true"]');P==null||P.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},Oe=()=>{t(12,U=""),t(11,W="")},ze=()=>{t(11,W=""),t(12,U="local")},Se=()=>{t(11,W=""),t(12,U="external")},Be=()=>{t(11,W=""),t(12,U="direct")},Le=f=>{t(12,U=""),t(11,W=f)};function Pe(f){qe[f?"unshift":"push"](()=>{y=f,t(13,y)})}const je=(f,P)=>{t(0,C=f.value),t(18,M=P),t(14,w=!1)},Ae=()=>{S()},N=f=>{ve(f)},q=async()=>{ot.set(!u),await el("/");const f=document.getElementById("new-chat-button");setTimeout(()=>{f==null||f.click()},0),u?history.replaceState(null,"","?temporary-chat=true"):history.replaceState(null,"",location.pathname),t(14,w=!1)},ce=async()=>{t(10,ee=""),window.setTimeout(()=>{var f;return(f=document.getElementById("model-search-input"))==null?void 0:f.focus()},0),R()};function he(f){w=f,t(14,w)}return o.$$set=f=>{"id"in f&&t(1,v=f.id),"value"in f&&t(0,C=f.value),"placeholder"in f&&t(2,z=f.placeholder),"searchEnabled"in f&&t(3,g=f.searchEnabled),"searchPlaceholder"in f&&t(4,O=f.searchPlaceholder),"showTemporaryChatControl"in f&&t(5,k=f.showTemporaryChatControl),"items"in f&&t(6,_=f.items),"className"in f&&t(7,j=f.className),"triggerClassName"in f&&t(8,A=f.triggerClassName),"pinModelHandler"in f&&t(9,H=f.pinModelHandler),"$$scope"in f&&t(48,D=f.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&65&&t(16,le=_.find(f=>f.value===C)??""),o.$$.dirty[0]&7232&&t(19,l=(ee?te.search(ee).map(f=>f.item).filter(f=>{var P;return W===""?!0:(((P=f.model)==null?void 0:P.tags)??[]).map(F=>F.name).includes(W)}).filter(f=>{var P,F,x;if(U==="")return!0;if(U==="local")return((P=f.model)==null?void 0:P.connection_type)==="local";if(U==="external")return((F=f.model)==null?void 0:F.connection_type)==="external";if(U==="direct")return(x=f.model)==null?void 0:x.direct}):_.filter(f=>{var P;return W===""?!0:(((P=f.model)==null?void 0:P.tags)??[]).map(F=>F.name).includes(W)}).filter(f=>{var P,F,x;if(U==="")return!0;if(U==="local")return((P=f.model)==null?void 0:P.connection_type)==="local";if(U==="external")return((F=f.model)==null?void 0:F.connection_type)==="external";if(U==="direct")return(x=f.model)==null?void 0:x.direct})).filter(f=>{var P,F,x;return!(((x=(F=(P=f.model)==null?void 0:P.info)==null?void 0:F.meta)==null?void 0:x.hidden)??!1)})),o.$$.dirty[0]&6144&&R()},[C,v,z,g,O,k,_,j,A,H,ee,W,U,y,w,Z,le,p,M,l,n,r,a,s,i,m,u,$,R,S,ve,Ie,c,ne,Ve,He,Oe,ze,Se,Be,Le,Pe,je,Ae,N,q,ce,he,D]}class Vn extends Te{constructor(e){super(),Ne(this,e,rn,nn,Ce,{id:1,value:0,placeholder:2,searchEnabled:3,searchPlaceholder:4,showTemporaryChatControl:5,items:6,className:7,triggerClassName:8,pinModelHandler:9},null,[-1,-1])}}export{Vn as S};
//# sourceMappingURL=BhFq3bSh.js.map
