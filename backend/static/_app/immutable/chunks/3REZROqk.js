var kn=Object.defineProperty;var wn=(r,e,t)=>e in r?kn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var pt=(r,e,t)=>wn(r,typeof e!="symbol"?e+"":e,t);import{s as Be,e as E,k as A,c as M,a as k,d as m,o as j,f as d,i as V,g as _,n as Ee,t as W,b as q,G as Fe,C as at,u as me,h as K,U as Je,H as Xe,j as Me,p as Ge,K as vt,q as kt,z as ze,B as Qe,r as yn,v as In,w as En,x as Mn,l as de,E as ke,F as we,X as Rt,D as Ce,L as Nn,ao as Dn,T as It,y as Pt,Y as Vn,Z as Cn}from"./jBEftbNB.js";import{S as Pe,i as Le,b as X,d as $,m as x,t as b,a as D,e as ee,f as Ye,g as le,c as se,j as Et}from"./2lNU1ddO.js";import{e as Ne,u as Ht,o as Gt,d as Tn}from"./ClpXlKdG.js";import{m as zt,e as ml,n as Hr,b as gt,i as Bn,G as gl,H as _l,J as Sn,K as On,c as zr,T as pl,u as Ut,o as Kt,g as Lt,W as Rn,d as bl,B as vl,D as Pn}from"./BmtUElco.js";import{t as je}from"./CPRQqKui.js";import{h as Ln,u as An,j as jn}from"./CDfCqrfx.js";import{b as Jt,x as kl,k as Ur,y as Hn,n as bt,w as At,l as Wr,m as jt,v as wl}from"./DB_xkffJ.js";import{d as ot}from"./I1CDPYOB.js";import"./BFK-koEx.js";import{u as yl,c as zn}from"./Ddi6zbrk.js";import{c as Un}from"./Bf7AzwKN.js";import{s as Wn}from"./DSPK5BQw.js";import{i as qn}from"./BsJ7Y_VG.js";import{P as qr,N as Zt}from"./DI6I5qc8.js";import{I as Qt}from"./lz5LDNDa.js";import{T as Oe}from"./BmKU5_x6.js";import{T as Fn}from"./Ciy_Y1cx.js";import{C as Fr}from"./Dhr8dmOJ.js";import{C as Jr}from"./DD7FDy6G.js";import{M as Jn}from"./Br01dd8n.js";import{aF as Gr,aU as Gn,aK as Nt,aV as Kn,aW as Zn}from"./Dkh2Coyr.js";import{S as Qn}from"./mjqZMJkg.js";import{C as Kr}from"./DYraow1T.js";import{I as Yn}from"./DTFFhxnA.js";import{M as Zr}from"./BUbv5-y6.js";import{S as Yt}from"./DPITe5b2.js";import{B as Xt}from"./C922YKcw.js";import{C as Xn}from"./C615oZGu.js";import{X as $n}from"./BXcnQbVe.js";import{E as xn}from"./_4rz0OwG.js";import"./CF4_YkFU.js";import{c as Il}from"./DuCCpQXh.js";import{F as $t}from"./Cm2AoO8L.js";import{f as Mt}from"./CttUuOFF.js";import{L as ei}from"./BmBLuAwI.js";import{F as ti}from"./CU2r43ac.js";import{E as li}from"./BPVH9yCr.js";function si(r){return new Worker(""+new URL("../workers/kokoro.worker-Cev3ZHQt.js",import.meta.url).href,{type:"module",name:r==null?void 0:r.name})}class ri{constructor(e="fp32"){pt(this,"worker",null);pt(this,"initialized",!1);pt(this,"dtype");pt(this,"requestQueue",[]);pt(this,"processing",!1);this.dtype=e}async init(){if(this.worker){console.warn("KokoroWorker is already initialized.");return}return this.worker=new si,this.worker.onmessage=e=>{const{status:t,error:l,audioUrl:s}=e.data;if(t==="init:complete")this.initialized=!0;else if(t==="init:error")console.error(l),this.initialized=!1;else if(t==="generate:complete"){const n=this.requestQueue.shift();n&&(n.resolve(s),this.processNextRequest())}else if(t==="generate:error"){const n=this.requestQueue.shift();n&&(n.reject(new Error(l)),this.processNextRequest())}},new Promise((e,t)=>{this.worker.postMessage({type:"init",payload:{dtype:this.dtype}});const l=s=>{s.data.status==="init:complete"?(this.worker.removeEventListener("message",l),this.initialized=!0,e()):s.data.status==="init:error"&&(this.worker.removeEventListener("message",l),t(new Error(s.data.error)))};this.worker.addEventListener("message",l)})}async generate({text:e,voice:t}){if(!this.initialized||!this.worker)throw new Error("KokoroTTS Worker is not initialized yet.");return new Promise((l,s)=>{this.requestQueue.push({text:e,voice:t,resolve:l,reject:s}),this.processing||this.processNextRequest()})}processNextRequest(){if(this.requestQueue.length===0){this.processing=!1;return}this.processing=!0;const{text:e,voice:t}=this.requestQueue[0];this.worker.postMessage({type:"generate",payload:{text:e,voice:t}})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null,this.initialized=!1,this.requestQueue=[],this.processing=!1)}}function ni(r){let e,t,l,s,n,i,o,a,f,u,c,g,h,p,w,v,y,N,O,P,R,I,C,B,S,T;return{c(){e=E("div"),t=E("div"),l=E("div"),s=E("div"),i=A(),o=E("div"),a=E("div"),u=A(),c=E("div"),h=A(),p=E("div"),w=E("div"),y=A(),N=E("div"),P=A(),R=E("div"),C=A(),B=E("div"),this.h()},l(z){e=M(z,"DIV",{class:!0});var J=k(e);t=M(J,"DIV",{class:!0});var H=k(t);l=M(H,"DIV",{class:!0});var re=k(l);s=M(re,"DIV",{class:!0}),k(s).forEach(m),i=j(re),o=M(re,"DIV",{class:!0});var Q=k(o);a=M(Q,"DIV",{class:!0}),k(a).forEach(m),u=j(Q),c=M(Q,"DIV",{class:!0}),k(c).forEach(m),Q.forEach(m),h=j(re),p=M(re,"DIV",{class:!0});var ie=k(p);w=M(ie,"DIV",{class:!0}),k(w).forEach(m),y=j(ie),N=M(ie,"DIV",{class:!0}),k(N).forEach(m),P=j(ie),R=M(ie,"DIV",{class:!0}),k(R).forEach(m),ie.forEach(m),C=j(re),B=M(re,"DIV",{class:!0}),k(B).forEach(m),re.forEach(m),H.forEach(m),J.forEach(m),this.h()},h(){d(s,"class",n=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm mr-14"),d(a,"class",f=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2"),d(c,"class",g=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1"),d(o,"class","grid grid-cols-3 gap-4"),d(w,"class",v=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1"),d(N,"class",O=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2"),d(R,"class",I=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1 mr-4"),d(p,"class","grid grid-cols-4 gap-4"),d(B,"class",S=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm"),d(l,"class",T=(r[0]==="md"?"space-y-2":"space-y-1.5")+" w-full"),d(t,"class","animate-pulse flex w-full"),d(e,"class","w-full mt-2 mb-2")},m(z,J){V(z,e,J),_(e,t),_(t,l),_(l,s),_(l,i),_(l,o),_(o,a),_(o,u),_(o,c),_(l,h),_(l,p),_(p,w),_(p,y),_(p,N),_(p,P),_(p,R),_(l,C),_(l,B)},p(z,[J]){J&1&&n!==(n=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm mr-14")&&d(s,"class",n),J&1&&f!==(f=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2")&&d(a,"class",f),J&1&&g!==(g=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1")&&d(c,"class",g),J&1&&v!==(v=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1")&&d(w,"class",v),J&1&&O!==(O=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2")&&d(N,"class",O),J&1&&I!==(I=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1 mr-4")&&d(R,"class",I),J&1&&S!==(S=(z[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm")&&d(B,"class",S),J&1&&T!==(T=(z[0]==="md"?"space-y-2":"space-y-1.5")+" w-full")&&d(l,"class",T)},i:Ee,o:Ee,d(z){z&&m(e)}}}function ii(r,e,t){let{size:l="md"}=e;return r.$$set=s=>{"size"in s&&t(0,l=s.size)},[l]}class xt extends Pe{constructor(e){super(),Le(this,e,ii,ni,Be,{size:0})}}function El(r,e,t){const l=r.slice();return l[23]=e[t],l}function Ml(r,e,t){const l=r.slice();return l[26]=e[t],l}function Nl(r){var s;let e,t=r[8].t('This response was generated by "{{model}}"',{model:r[7]?((s=r[7])==null?void 0:s.name)??r[7].id:r[1].selectedModelId})+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var i=k(e);l=q(i,t),i.forEach(m),this.h()},h(){d(e,"class","text-xs font-medium pt-1.5 -mb-0.5")},m(n,i){V(n,e,i),_(e,l)},p(n,i){var o;i&386&&t!==(t=n[8].t('This response was generated by "{{model}}"',{model:n[7]?((o=n[7])==null?void 0:o.name)??n[7].id:n[1].selectedModelId})+"")&&K(l,t)},d(n){n&&m(e)}}}function Dl(r){let e,t=r[26]+"",l,s,n,i,o,a;function f(){return r[12](r[26])}return{c(){e=E("button"),l=W(t),s=A(),this.h()},l(u){e=M(u,"BUTTON",{class:!0});var c=k(e);l=q(c,t),s=j(c),c.forEach(m),this.h()},h(){var u,c;d(e,"class",n="size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[6]===r[26]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900"),e.disabled=i=((c=(u=r[1])==null?void 0:u.annotation)==null?void 0:c.rating)===-1?r[26]>5:r[26]<6},m(u,c){V(u,e,c),_(e,l),_(e,s),o||(a=me(e,"click",f),o=!0)},p(u,c){var g,h;r=u,c&64&&n!==(n="size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[6]===r[26]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900")&&d(e,"class",n),c&2&&i!==(i=((h=(g=r[1])==null?void 0:g.annotation)==null?void 0:h.rating)===-1?r[26]>5:r[26]<6)&&(e.disabled=i)},d(u){u&&m(e),o=!1,a()}}}function Vl(r){let e,t=r[8].t("Why?")+"",l,s,n,i=Ne(r[3]),o=[];for(let a=0;a<i.length;a+=1)o[a]=Cl(El(r,i,a));return{c(){e=E("div"),l=W(t),s=A(),n=E("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=j(a),n=M(a,"DIV",{class:!0});var u=k(n);for(let c=0;c<o.length;c+=1)o[c].l(u);u.forEach(m),this.h()},h(){d(e,"class","text-sm mt-1.5 font-medium"),d(n,"class","flex flex-wrap gap-1.5 text-sm mt-1.5")},m(a,f){V(a,e,f),_(e,l),V(a,s,f),V(a,n,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null)},p(a,f){if(f&256&&t!==(t=a[8].t("Why?")+"")&&K(l,t),f&280){i=Ne(a[3]);let u;for(u=0;u<i.length;u+=1){const c=El(a,i,u);o[u]?o[u].p(c,f):(o[u]=Cl(c),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},d(a){a&&(m(e),m(s),m(n)),Je(o,a)}}}function ai(r){let e=r[23]+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&8&&e!==(e=l[23]+"")&&K(t,e)},d(l){l&&m(t)}}}function oi(r){let e=r[8].t("Other")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Other")+"")&&K(t,e)},d(l){l&&m(t)}}}function fi(r){let e=r[8].t("Being lazy")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Being lazy")+"")&&K(t,e)},d(l){l&&m(t)}}}function ui(r){let e=r[8].t("Refused when it shouldn't have")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Refused when it shouldn't have")+"")&&K(t,e)},d(l){l&&m(t)}}}function ci(r){let e=r[8].t("Didn't fully follow instructions")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Didn't fully follow instructions")+"")&&K(t,e)},d(l){l&&m(t)}}}function di(r){let e=r[8].t("Not factually correct")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Not factually correct")+"")&&K(t,e)},d(l){l&&m(t)}}}function hi(r){let e=r[8].t("Not helpful")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Not helpful")+"")&&K(t,e)},d(l){l&&m(t)}}}function mi(r){let e=r[8].t("Too verbose")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Too verbose")+"")&&K(t,e)},d(l){l&&m(t)}}}function gi(r){let e=r[8].t("Don't like the style")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Don't like the style")+"")&&K(t,e)},d(l){l&&m(t)}}}function _i(r){let e=r[8].t("Thorough explanation")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Thorough explanation")+"")&&K(t,e)},d(l){l&&m(t)}}}function pi(r){let e=r[8].t("Attention to detail")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Attention to detail")+"")&&K(t,e)},d(l){l&&m(t)}}}function bi(r){let e=r[8].t("Positive attitude")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Positive attitude")+"")&&K(t,e)},d(l){l&&m(t)}}}function vi(r){let e=r[8].t("Showcased creativity")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Showcased creativity")+"")&&K(t,e)},d(l){l&&m(t)}}}function ki(r){let e=r[8].t("Followed instructions perfectly")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Followed instructions perfectly")+"")&&K(t,e)},d(l){l&&m(t)}}}function wi(r){let e=r[8].t("Accurate information")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Accurate information")+"")&&K(t,e)},d(l){l&&m(t)}}}function Cl(r){let e,t,l,s,n;function i(u,c){return u[23]==="accurate_information"?wi:u[23]==="followed_instructions_perfectly"?ki:u[23]==="showcased_creativity"?vi:u[23]==="positive_attitude"?bi:u[23]==="attention_to_detail"?pi:u[23]==="thorough_explanation"?_i:u[23]==="dont_like_the_style"?gi:u[23]==="too_verbose"?mi:u[23]==="not_helpful"?hi:u[23]==="not_factually_correct"?di:u[23]==="didnt_fully_follow_instructions"?ci:u[23]==="refused_when_it_shouldnt_have"?ui:u[23]==="being_lazy"?fi:u[23]==="other"?oi:ai}let o=i(r),a=o(r);function f(){return r[13](r[23])}return{c(){e=E("button"),a.c(),t=A(),this.h()},l(u){e=M(u,"BUTTON",{class:!0});var c=k(e);a.l(c),t=j(c),c.forEach(m),this.h()},h(){d(e,"class",l="px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[4]===r[23]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-xl")},m(u,c){V(u,e,c),a.m(e,null),_(e,t),s||(n=me(e,"click",f),s=!0)},p(u,c){r=u,o===(o=i(r))&&a?a.p(r,c):(a.d(1),a=o(r),a&&(a.c(),a.m(e,t))),c&24&&l!==(l="px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[4]===r[23]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-xl")&&d(e,"class",l)},d(u){u&&m(e),a.d(),s=!1,n()}}}function yi(r){var te;let e,t,l,s,n=r[8].t("How would you rate this response?")+"",i,o,a,f='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>',u,c,g,h,p,w,v,y,N=r[8].t("Awful")+"",O,P,R,I,C=r[8].t("Amazing")+"",B,S,T,z,J,H,re,Q,ie,ge,he,ye,Z,oe=r[8].t("Save")+"",pe,ae,ue,F,_e,fe=((te=r[1])==null?void 0:te.arena)&&Nl(r),be=Ne(Array.from({length:10}).map(Tl)),L=[];for(let Y=0;Y<be.length;Y+=1)L[Y]=Dl(Ml(r,be,Y));let G=r[3].length>0&&Vl(r);return he=new Fn({props:{tags:r[2]}}),he.$on("delete",r[15]),he.$on("add",r[16]),{c(){fe&&fe.c(),e=A(),t=E("div"),l=E("div"),s=E("div"),i=W(n),o=A(),a=E("button"),a.innerHTML=f,u=A(),c=E("div"),g=E("div"),h=E("div");for(let Y=0;Y<L.length;Y+=1)L[Y].c();p=A(),w=E("div"),v=E("div"),y=W("1 - "),O=W(N),P=A(),R=E("div"),I=W("10 - "),B=W(C),S=A(),T=E("div"),G&&G.c(),z=A(),J=E("div"),H=E("textarea"),Q=A(),ie=E("div"),ge=E("div"),X(he.$$.fragment),ye=A(),Z=E("button"),pe=W(oe),this.h()},l(Y){fe&&fe.l(Y),e=j(Y),t=M(Y,"DIV",{class:!0,id:!0});var ce=k(t);l=M(ce,"DIV",{class:!0});var ve=k(l);s=M(ve,"DIV",{class:!0});var Ve=k(s);i=q(Ve,n),Ve.forEach(m),o=j(ve),a=M(ve,"BUTTON",{"data-svelte-h":!0}),Fe(a)!=="svelte-1ew22ui"&&(a.innerHTML=f),ve.forEach(m),u=j(ce),c=M(ce,"DIV",{class:!0});var De=k(c);g=M(De,"DIV",{class:!0});var Ae=k(g);h=M(Ae,"DIV",{class:!0});var He=k(h);for(let nt=0;nt<L.length;nt+=1)L[nt].l(He);He.forEach(m),p=j(Ae),w=M(Ae,"DIV",{class:!0});var Ue=k(w);v=M(Ue,"DIV",{});var ne=k(v);y=q(ne,"1 - "),O=q(ne,N),ne.forEach(m),P=j(Ue),R=M(Ue,"DIV",{});var We=k(R);I=q(We,"10 - "),B=q(We,C),We.forEach(m),Ue.forEach(m),Ae.forEach(m),De.forEach(m),S=j(ce),T=M(ce,"DIV",{});var et=k(T);G&&G.l(et),et.forEach(m),z=j(ce),J=M(ce,"DIV",{class:!0});var tt=k(J);H=M(tt,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),k(H).forEach(m),tt.forEach(m),Q=j(ce),ie=M(ce,"DIV",{class:!0});var Ke=k(ie);ge=M(Ke,"DIV",{class:!0});var ft=k(ge);$(he.$$.fragment,ft),ft.forEach(m),ye=j(Ke),Z=M(Ke,"BUTTON",{class:!0});var ut=k(Z);pe=q(ut,oe),ut.forEach(m),Ke.forEach(m),ce.forEach(m),this.h()},h(){d(s,"class","text-sm font-medium"),d(l,"class","flex justify-between items-center"),d(h,"class","mt-1.5 w-fit flex gap-1 pb-2"),d(w,"class","sticky top-0 bottom-0 left-0 right-0 flex justify-between text-xs"),d(g,"class","relative w-fit overflow-x-auto scrollbar-none"),d(c,"class","w-full flex justify-center"),d(H,"class","w-full text-sm px-1 py-2 bg-transparent outline-hidden resize-none rounded-xl"),d(H,"placeholder",re=r[8].t("Feel free to add specific details")),d(H,"rows","3"),d(J,"class","mt-2"),d(ge,"class","flex items-end group"),d(Z,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),d(ie,"class","mt-2 gap-1.5 flex justify-between"),d(t,"class","my-2.5 rounded-xl px-4 py-3 border border-gray-100 dark:border-gray-850"),d(t,"id",ae="message-feedback-"+r[1].id)},m(Y,ce){fe&&fe.m(Y,ce),V(Y,e,ce),V(Y,t,ce),_(t,l),_(l,s),_(s,i),_(l,o),_(l,a),_(t,u),_(t,c),_(c,g),_(g,h);for(let ve=0;ve<L.length;ve+=1)L[ve]&&L[ve].m(h,null);_(g,p),_(g,w),_(w,v),_(v,y),_(v,O),_(w,P),_(w,R),_(R,I),_(R,B),_(t,S),_(t,T),G&&G.m(T,null),_(t,z),_(t,J),_(J,H),at(H,r[5]),_(t,Q),_(t,ie),_(ie,ge),x(he,ge,null),_(ie,ye),_(ie,Z),_(Z,pe),ue=!0,F||(_e=[me(a,"click",r[11]),me(H,"input",r[14]),me(Z,"click",r[17])],F=!0)},p(Y,[ce]){var Ve;if((Ve=Y[1])!=null&&Ve.arena?fe?fe.p(Y,ce):(fe=Nl(Y),fe.c(),fe.m(e.parentNode,e)):fe&&(fe.d(1),fe=null),(!ue||ce&256)&&n!==(n=Y[8].t("How would you rate this response?")+"")&&K(i,n),ce&66){be=Ne(Array.from({length:10}).map(Tl));let De;for(De=0;De<be.length;De+=1){const Ae=Ml(Y,be,De);L[De]?L[De].p(Ae,ce):(L[De]=Dl(Ae),L[De].c(),L[De].m(h,null))}for(;De<L.length;De+=1)L[De].d(1);L.length=be.length}(!ue||ce&256)&&N!==(N=Y[8].t("Awful")+"")&&K(O,N),(!ue||ce&256)&&C!==(C=Y[8].t("Amazing")+"")&&K(B,C),Y[3].length>0?G?G.p(Y,ce):(G=Vl(Y),G.c(),G.m(T,null)):G&&(G.d(1),G=null),(!ue||ce&256&&re!==(re=Y[8].t("Feel free to add specific details")))&&d(H,"placeholder",re),ce&32&&at(H,Y[5]);const ve={};ce&4&&(ve.tags=Y[2]),he.$set(ve),(!ue||ce&256)&&oe!==(oe=Y[8].t("Save")+"")&&K(pe,oe),(!ue||ce&2&&ae!==(ae="message-feedback-"+Y[1].id))&&d(t,"id",ae)},i(Y){ue||(b(he.$$.fragment,Y),ue=!0)},o(Y){D(he.$$.fragment,Y),ue=!1},d(Y){Y&&(m(e),m(t)),fe&&fe.d(Y),Je(L,Y),G&&G.d(),ee(he),F=!1,Xe(_e)}}}const Tl=(r,e)=>e+1;function Ii(r,e,t){let l,s;Me(r,zt,T=>t(18,s=T));const n=Ge("i18n");Me(r,n,T=>t(8,l=T));const i=vt();let{message:o}=e,{show:a=!1}=e,f=["accurate_information","followed_instructions_perfectly","showcased_creativity","positive_attitude","attention_to_detail","thorough_explanation","other"],u=["dont_like_the_style","too_verbose","not_helpful","not_factually_correct","didnt_fully_follow_instructions","refused_when_it_shouldnt_have","being_lazy","other"],c=[],g=[],h=null,p="",w=null,v=null;const y=()=>{var T,z,J,H,re;h||t(4,h=((T=o==null?void 0:o.annotation)==null?void 0:T.reason)??""),p||t(5,p=((z=o==null?void 0:o.annotation)==null?void 0:z.comment)??""),t(2,c=(((J=o==null?void 0:o.annotation)==null?void 0:J.tags)??[]).map(Q=>({name:Q}))),w||t(6,w=((re=(H=o==null?void 0:o.annotation)==null?void 0:H.details)==null?void 0:re.rating)??null)};kt(()=>{o!=null&&o.arena&&(t(7,v=s.find(T=>T.id===o.selectedModelId)),je.success(l.t('This response was generated by "{{model}}"',{model:v?(v==null?void 0:v.name)??v.id:o.selectedModelId})))});const N=()=>{console.log("saveHandler"),i("save",{reason:h,comment:p,tags:c.map(T=>T.name),details:{rating:w}}),je.success(l.t("Thanks for your feedback!")),t(0,a=!1)},O=()=>{t(0,a=!1)},P=T=>{t(6,w=T)},R=T=>{t(4,h=T)};function I(){p=this.value,t(5,p)}const C=T=>{t(2,c=c.filter(z=>z.name.replaceAll(" ","_").toLowerCase()!==T.detail.replaceAll(" ","_").toLowerCase()))},B=T=>{t(2,c=[...c,{name:T.detail}])},S=()=>{N()};return r.$$set=T=>{"message"in T&&t(1,o=T.message),"show"in T&&t(0,a=T.show)},r.$$.update=()=>{var T,z;r.$$.dirty&2&&(((T=o==null?void 0:o.annotation)==null?void 0:T.rating)===1?t(3,g=f):((z=o==null?void 0:o.annotation)==null?void 0:z.rating)===-1&&t(3,g=u)),r.$$.dirty&2&&o&&y()},[a,o,c,g,h,p,w,v,l,n,N,O,P,R,I,C,B,S]}class Ei extends Pe{constructor(e){super(),Le(this,e,Ii,yi,Be,{message:1,show:0})}}function Bl(r,e,t){const l=r.slice();return l[5]=e[t],l[7]=t,l}function Mi(r){let e,t;return e=new Fr({props:{strokeWidth:"3.5",className:"size-3.5 "}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ni(r){let e,t;return e=new Jr({props:{strokeWidth:"3.5",className:"size-3.5 "}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Di(r){let e,t,l,s,n;const i=r[2].default,o=yn(i,r,r[4],null),a=[Ni,Mi],f=[];function u(c,g){return c[1]?0:1}return l=u(r),s=f[l]=a[l](r),{c(){e=E("div"),o&&o.c(),t=A(),s.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);o&&o.l(g),t=j(g),s.l(g),g.forEach(m),this.h()},h(){d(e,"class","flex items-center gap-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition")},m(c,g){V(c,e,g),o&&o.m(e,null),_(e,t),f[l].m(e,null),n=!0},p(c,g){o&&o.p&&(!n||g&16)&&In(o,i,c,c[4],n?Mn(i,c[4],g,null):En(c[4]),null);let h=l;l=u(c),l!==h&&(le(),D(f[h],1,1,()=>{f[h]=null}),se(),s=f[l],s||(s=f[l]=a[l](c),s.c()),b(s,1),s.m(e,null))},i(c){n||(b(o,c),b(s),n=!0)},o(c){D(o,c),D(s),n=!1},d(c){c&&m(e),o&&o.d(c),f[l].d()}}}function Sl(r){let e,t,l,s,n,i=r[0].query+"",o,a,f,u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',c,g;return l=new Jn({}),{c(){e=E("a"),t=E("div"),X(l.$$.fragment),s=A(),n=E("div"),o=W(i),a=A(),f=E("div"),f.innerHTML=u,this.h()},l(h){e=M(h,"A",{href:!0,target:!0,class:!0});var p=k(e);t=M(p,"DIV",{class:!0});var w=k(t);$(l.$$.fragment,w),s=j(w),n=M(w,"DIV",{class:!0});var v=k(n);o=q(v,i),v.forEach(m),w.forEach(m),a=j(p),f=M(p,"DIV",{class:!0,"data-svelte-h":!0}),Fe(f)!=="svelte-14xjows"&&(f.innerHTML=u),p.forEach(m),this.h()},h(){d(n,"class","line-clamp-1"),d(t,"class","flex gap-2 items-center"),d(f,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",c="https://www.google.com/search?q="+r[0].query),d(e,"target","_blank"),d(e,"class","flex w-full items-center p-3 px-4 border-b border-gray-300/30 dark:border-gray-700/50 group/item justify-between font-normal text-gray-800 dark:text-gray-300 no-underline")},m(h,p){V(h,e,p),_(e,t),x(l,t,null),_(t,s),_(t,n),_(n,o),_(e,a),_(e,f),g=!0},p(h,p){(!g||p&1)&&i!==(i=h[0].query+"")&&K(o,i),(!g||p&1&&c!==(c="https://www.google.com/search?q="+h[0].query))&&d(e,"href",c)},i(h){g||(b(l.$$.fragment,h),g=!0)},o(h){D(l.$$.fragment,h),g=!1},d(h){h&&m(e),ee(l)}}}function Ol(r){let e,t,l=r[5]+"",s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',a,f,u;return{c(){e=E("a"),t=E("div"),s=W(l),n=A(),i=E("div"),i.innerHTML=o,a=A(),this.h()},l(c){e=M(c,"A",{href:!0,target:!0,class:!0});var g=k(e);t=M(g,"DIV",{class:!0});var h=k(t);s=q(h,l),h.forEach(m),n=j(g),i=M(g,"DIV",{class:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-14xjows"&&(i.innerHTML=o),a=j(g),g.forEach(m),this.h()},h(){d(t,"class","line-clamp-1"),d(i,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",f=r[5]),d(e,"target","_blank"),d(e,"class",u="flex w-full items-center p-3 px-4 "+(r[7]===r[0].urls.length-1?"":"border-b border-gray-300/30 dark:border-gray-700/50")+" group/item justify-between font-normal text-gray-800 dark:text-gray-300")},m(c,g){V(c,e,g),_(e,t),_(t,s),_(e,n),_(e,i),_(e,a)},p(c,g){g&1&&l!==(l=c[5]+"")&&K(s,l),g&1&&f!==(f=c[5])&&d(e,"href",f),g&1&&u!==(u="flex w-full items-center p-3 px-4 "+(c[7]===c[0].urls.length-1?"":"border-b border-gray-300/30 dark:border-gray-700/50")+" group/item justify-between font-normal text-gray-800 dark:text-gray-300")&&d(e,"class",u)},d(c){c&&m(e)}}}function Vi(r){var o;let e,t,l,s=((o=r[0])==null?void 0:o.query)&&Sl(r),n=Ne(r[0].urls),i=[];for(let a=0;a<n.length;a+=1)i[a]=Ol(Bl(r,n,a));return{c(){e=E("div"),s&&s.c(),t=A();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0,slot:!0});var f=k(e);s&&s.l(f),t=j(f);for(let u=0;u<i.length;u+=1)i[u].l(f);f.forEach(m),this.h()},h(){d(e,"class","text-sm border border-gray-300/30 dark:border-gray-700/50 rounded-xl mb-1.5"),d(e,"slot","content")},m(a,f){V(a,e,f),s&&s.m(e,null),_(e,t);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);l=!0},p(a,f){var u;if((u=a[0])!=null&&u.query?s?(s.p(a,f),f&1&&b(s,1)):(s=Sl(a),s.c(),b(s,1),s.m(e,t)):s&&(le(),D(s,1,1,()=>{s=null}),se()),f&1){n=Ne(a[0].urls);let c;for(c=0;c<n.length;c+=1){const g=Bl(a,n,c);i[c]?i[c].p(g,f):(i[c]=Ol(g),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}},i(a){l||(b(s),l=!0)},o(a){D(s),l=!1},d(a){a&&m(e),s&&s.d(),Je(i,a)}}}function Ci(r){let e,t,l;function s(i){r[3](i)}let n={className:"w-full space-y-1",$$slots:{content:[Vi],default:[Di]},$$scope:{ctx:r}};return r[1]!==void 0&&(n.open=r[1]),e=new Gr({props:n}),ze.push(()=>Ye(e,"open",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,[o]){const a={};o&19&&(a.$$scope={dirty:o,ctx:i}),!t&&o&2&&(t=!0,a.open=i[1],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){D(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function Ti(r,e,t){let{$$slots:l={},$$scope:s}=e,{status:n={urls:[],query:""}}=e,i=!1;function o(a){i=a,t(1,i)}return r.$$set=a=>{"status"in a&&t(0,n=a.status),"$$scope"in a&&t(4,s=a.$$scope)},[n,i,l,o,s]}class Bi extends Pe{constructor(e){super(),Le(this,e,Ti,Ci,Be,{status:0})}}function Si(r){let e,t,l,s,n,i=(typeof r[0]=="string"?r[0]:JSON.stringify(r[0]))+"",o,a;return l=new Yn({props:{className:"size-5 text-red-700 dark:text-red-400"}}),{c(){e=E("div"),t=E("div"),X(l.$$.fragment),s=A(),n=E("div"),o=W(i),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);t=M(u,"DIV",{class:!0});var c=k(t);$(l.$$.fragment,c),c.forEach(m),s=j(u),n=M(u,"DIV",{class:!0});var g=k(n);o=q(g,i),g.forEach(m),u.forEach(m),this.h()},h(){d(t,"class","self-start mt-0.5"),d(n,"class","self-center text-sm"),d(e,"class","flex my-2 gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-lg")},m(f,u){V(f,e,u),_(e,t),x(l,t,null),_(e,s),_(e,n),_(n,o),a=!0},p(f,[u]){(!a||u&1)&&i!==(i=(typeof f[0]=="string"?f[0]:JSON.stringify(f[0]))+"")&&K(o,i)},i(f){a||(b(l.$$.fragment,f),a=!0)},o(f){D(l.$$.fragment,f),a=!1},d(f){f&&m(e),ee(l)}}}function Oi(r,e,t){let{content:l=""}=e;return r.$$set=s=>{"content"in s&&t(0,l=s.content)},[l]}let Ri=class extends Pe{constructor(e){super(),Le(this,e,Oi,Si,Be,{content:0})}};function Rl(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function Pi(r){const e=r.slice(),t=Ki(e[10].distance);return e[13]=t,e}function Li(r){let e,t=r[4].t("No source available")+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400")},m(s,n){V(s,e,n),_(e,l)},p(s,n){n&16&&t!==(t=s[4].t("No source available")+"")&&K(l,t)},i:Ee,o:Ee,d(s){s&&m(e)}}}function Ai(r){var a;let e,t,l,s,n;e=new Oe({props:{className:"w-fit",content:r[4].t("Open file"),placement:"top-start",tippyOptions:{duration:[500,0]},$$slots:{default:[ji]},$$scope:{ctx:r}}});let i=((a=r[10].metadata)==null?void 0:a.parameters)&&Ll(r),o=r[2]&&Al(r);return{c(){X(e.$$.fragment),t=A(),i&&i.c(),l=A(),o&&o.c(),s=de()},l(f){$(e.$$.fragment,f),t=j(f),i&&i.l(f),l=j(f),o&&o.l(f),s=de()},m(f,u){x(e,f,u),V(f,t,u),i&&i.m(f,u),V(f,l,u),o&&o.m(f,u),V(f,s,u),n=!0},p(f,u){var g;const c={};u&16&&(c.content=f[4].t("Open file")),u&16408&&(c.$$scope={dirty:u,ctx:f}),e.$set(c),(g=f[10].metadata)!=null&&g.parameters?i?i.p(f,u):(i=Ll(f),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),f[2]?o?(o.p(f,u),u&4&&b(o,1)):(o=Al(f),o.c(),b(o,1),o.m(s.parentNode,s)):o&&(le(),D(o,1,1,()=>{o=null}),se())},i(f){n||(b(e.$$.fragment,f),b(o),n=!0)},o(f){D(e.$$.fragment,f),D(o),n=!1},d(f){f&&(m(t),m(l),m(s)),ee(e,f),i&&i.d(f),o&&o.d(f)}}}function Pl(r){let e,t,l=r[4].t("page")+"",s,n,i=r[10].metadata.page+1+"",o,a;return{c(){e=E("span"),t=W("("),s=W(l),n=A(),o=W(i),a=W(")"),this.h()},l(f){e=M(f,"SPAN",{class:!0});var u=k(e);t=q(u,"("),s=q(u,l),n=j(u),o=q(u,i),a=q(u,")"),u.forEach(m),this.h()},h(){d(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(f,u){V(f,e,u),_(e,t),_(e,s),_(e,n),_(e,o),_(e,a)},p(f,u){u&16&&l!==(l=f[4].t("page")+"")&&K(s,l),u&8&&i!==(i=f[10].metadata.page+1+"")&&K(o,i)},d(f){f&&m(e)}}}function ji(r){var a,f,u,c;let e,t,l=r[6](((f=(a=r[10])==null?void 0:a.metadata)==null?void 0:f.name)??r[10].source.name)+"",s,n,i,o=((c=(u=r[10])==null?void 0:u.metadata)==null?void 0:c.page)&&Pl(r);return{c(){e=E("div"),t=E("a"),s=W(l),i=A(),o&&o.c(),this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);t=M(h,"A",{class:!0,href:!0,target:!0});var p=k(t);s=q(p,l),p.forEach(m),i=j(h),o&&o.l(h),h.forEach(m),this.h()},h(){var g,h,p,w,v,y,N,O;d(t,"class","hover:text-gray-500 dark:hover:text-gray-100 underline grow"),d(t,"href",n=(h=(g=r[10])==null?void 0:g.metadata)!=null&&h.file_id?`${ml}/files/${(w=(p=r[10])==null?void 0:p.metadata)==null?void 0:w.file_id}/content${((y=(v=r[10])==null?void 0:v.metadata)==null?void 0:y.page)!==void 0?`#page=${r[10].metadata.page+1}`:""}`:(O=(N=r[10].source)==null?void 0:N.url)!=null&&O.includes("http")?r[10].source.url:"#"),d(t,"target","_blank"),d(e,"class","text-sm dark:text-gray-400 flex items-center gap-2 w-fit")},m(g,h){V(g,e,h),_(e,t),_(t,s),_(e,i),o&&o.m(e,null)},p(g,h){var p,w,v,y,N,O,P,R,I,C,B,S;h&8&&l!==(l=g[6](((w=(p=g[10])==null?void 0:p.metadata)==null?void 0:w.name)??g[10].source.name)+"")&&K(s,l),h&8&&n!==(n=(y=(v=g[10])==null?void 0:v.metadata)!=null&&y.file_id?`${ml}/files/${(O=(N=g[10])==null?void 0:N.metadata)==null?void 0:O.file_id}/content${((R=(P=g[10])==null?void 0:P.metadata)==null?void 0:R.page)!==void 0?`#page=${g[10].metadata.page+1}`:""}`:(C=(I=g[10].source)==null?void 0:I.url)!=null&&C.includes("http")?g[10].source.url:"#")&&d(t,"href",n),(S=(B=g[10])==null?void 0:B.metadata)!=null&&S.page?o?o.p(g,h):(o=Pl(g),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(g){g&&m(e),o&&o.d()}}}function Ll(r){let e,t=r[4].t("Parameters")+"",l,s,n,i=JSON.stringify(r[10].metadata.parameters,null,2)+"",o;return{c(){e=E("div"),l=W(t),s=A(),n=E("pre"),o=W(i),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=j(a),n=M(a,"PRE",{class:!0});var u=k(n);o=q(u,i),u.forEach(m),this.h()},h(){d(e,"class","text-sm font-medium dark:text-gray-300 mt-2"),d(n,"class","text-sm dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-2 rounded-md overflow-auto max-h-40")},m(a,f){V(a,e,f),_(e,l),V(a,s,f),V(a,n,f),_(n,o)},p(a,f){f&16&&t!==(t=a[4].t("Parameters")+"")&&K(l,t),f&8&&i!==(i=JSON.stringify(a[10].metadata.parameters,null,2)+"")&&K(o,i)},d(a){a&&(m(e),m(s),m(n))}}}function Al(r){let e,t=r[4].t("Relevance")+"",l,s,n,i,o,a;const f=[zi,Hi],u=[];function c(g,h){return g[10].distance!==void 0?0:1}return n=c(r),i=u[n]=f[n](r),{c(){e=E("div"),l=W(t),s=A(),i.c(),o=de(),this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);l=q(h,t),h.forEach(m),s=j(g),i.l(g),o=de(),this.h()},h(){d(e,"class","text-sm font-medium dark:text-gray-300 mt-2")},m(g,h){V(g,e,h),_(e,l),V(g,s,h),u[n].m(g,h),V(g,o,h),a=!0},p(g,h){(!a||h&16)&&t!==(t=g[4].t("Relevance")+"")&&K(l,t);let p=n;n=c(g),n===p?u[n].p(g,h):(le(),D(u[p],1,1,()=>{u[p]=null}),se(),i=u[n],i?i.p(g,h):(i=u[n]=f[n](g),i.c()),b(i,1),i.m(o.parentNode,o))},i(g){a||(b(i),a=!0)},o(g){D(i),a=!1},d(g){g&&(m(e),m(s),m(o)),u[n].d(g)}}}function Hi(r){let e,t=r[4].t("No distance available")+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400")},m(s,n){V(s,e,n),_(e,l)},p(s,n){n&16&&t!==(t=s[4].t("No distance available")+"")&&K(l,t)},i:Ee,o:Ee,d(s){s&&m(e)}}}function zi(r){let e,t;return e=new Oe({props:{className:"w-fit",content:r[4].t("Semantic distance to query"),placement:"top-start",tippyOptions:{duration:[500,0]},$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s&16&&(n.content=l[4].t("Semantic distance to query")),s&16394&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ui(r){var i;let e,t,l=(((i=r[10])==null?void 0:i.distance)??0).toFixed(4)+"",s,n;return{c(){e=E("span"),t=W("("),s=W(l),n=W(")"),this.h()},l(o){e=M(o,"SPAN",{class:!0});var a=k(e);t=q(a,"("),s=q(a,l),n=q(a,")"),a.forEach(m),this.h()},h(){d(e,"class","text-gray-500 dark:text-gray-500")},m(o,a){V(o,e,a),_(e,t),_(e,s),_(e,n)},p(o,a){var f;a&8&&l!==(l=(((f=o[10])==null?void 0:f.distance)??0).toFixed(4)+"")&&K(s,l)},d(o){o&&m(e)}}}function jl(r){var n;let e,t,l=typeof r[13]=="number"&&Hl(r),s=typeof((n=r[10])==null?void 0:n.distance)=="number"&&zl(r);return{c(){l&&l.c(),e=A(),s&&s.c(),t=de()},l(i){l&&l.l(i),e=j(i),s&&s.l(i),t=de()},m(i,o){l&&l.m(i,o),V(i,e,o),s&&s.m(i,o),V(i,t,o)},p(i,o){var a;typeof i[13]=="number"?l?l.p(i,o):(l=Hl(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),typeof((a=i[10])==null?void 0:a.distance)=="number"?s?s.p(i,o):(s=zl(i),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(i){i&&(m(e),m(t)),l&&l.d(i),s&&s.d(i)}}}function Hl(r){let e,t=r[13].toFixed(2)+"",l,s,n;return{c(){e=E("span"),l=W(t),s=W("%"),this.h()},l(i){e=M(i,"SPAN",{class:!0});var o=k(e);l=q(o,t),s=q(o,"%"),o.forEach(m),this.h()},h(){d(e,"class",n=`px-1 rounded-sm font-medium ${ql(r[13])}`)},m(i,o){V(i,e,o),_(e,l),_(e,s)},p(i,o){o&8&&t!==(t=i[13].toFixed(2)+"")&&K(l,t),o&8&&n!==(n=`px-1 rounded-sm font-medium ${ql(i[13])}`)&&d(e,"class",n)},d(i){i&&m(e)}}}function zl(r){var i;let e,t,l=(((i=r[10])==null?void 0:i.distance)??0).toFixed(4)+"",s,n;return{c(){e=E("span"),t=W("("),s=W(l),n=W(")"),this.h()},l(o){e=M(o,"SPAN",{class:!0});var a=k(e);t=q(a,"("),s=q(a,l),n=q(a,")"),a.forEach(m),this.h()},h(){d(e,"class","text-gray-500 dark:text-gray-500")},m(o,a){V(o,e,a),_(e,t),_(e,s),_(e,n)},p(o,a){var f;a&8&&l!==(l=(((f=o[10])==null?void 0:f.distance)??0).toFixed(4)+"")&&K(s,l)},d(o){o&&m(e)}}}function Wi(r){let e;function t(i,o){var a;if(i[1])return jl;if(typeof((a=i[10])==null?void 0:a.distance)=="number")return Ui}function l(i,o){return o===jl?Pi(i):i}let s=t(r),n=s&&s(l(r,s));return{c(){e=E("div"),n&&n.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);n&&n.l(o),o.forEach(m),this.h()},h(){d(e,"class","text-sm my-1 dark:text-gray-400 flex items-center gap-2 w-fit")},m(i,o){V(i,e,o),n&&n.m(e,null)},p(i,o){s===(s=t(i))&&n?n.p(l(i,s),o):(n&&n.d(1),n=s&&s(l(i,s)),n&&(n.c(),n.m(e,null)))},d(i){i&&m(e),n&&n.d()}}}function qi(r){let e,t,l=r[10].document+"",s,n;return{c(){e=E("pre"),t=W("                "),s=W(l),n=W(`
              `),this.h()},l(i){e=M(i,"PRE",{class:!0});var o=k(e);t=q(o,"                "),s=q(o,l),n=q(o,`
              `),o.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400 whitespace-pre-line")},m(i,o){V(i,e,o),_(e,t),_(e,s),_(e,n)},p(i,o){o&8&&l!==(l=i[10].document+"")&&K(s,l)},d(i){i&&m(e)}}}function Fi(r){let e,t,l;return{c(){e=E("iframe"),this.h()},l(s){e=M(s,"IFRAME",{class:!0,sandbox:!0,srcdoc:!0,title:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","w-full border-0 h-auto rounded-none"),d(e,"sandbox","allow-scripts allow-forms allow-same-origin"),d(e,"srcdoc",t=r[10].document),d(e,"title",l=r[4].t("Content"))},m(s,n){V(s,e,n)},p(s,n){n&8&&t!==(t=s[10].document)&&d(e,"srcdoc",t),n&16&&l!==(l=s[4].t("Content"))&&d(e,"title",l)},d(s){s&&m(e)}}}function Ul(r){let e;return{c(){e=E("hr"),this.h()},l(t){e=M(t,"HR",{class:!0}),this.h()},h(){d(e,"class","border-gray-100 dark:border-gray-850 my-3")},m(t,l){V(t,e,l)},d(t){t&&m(e)}}}function Wl(r){let e,t,l=r[4].t("Source")+"",s,n,i,o,a,f,u,c=r[4].t("Content")+"",g,h,p,w,v;const y=[Ai,Li],N=[];function O(B,S){var T;return(T=B[10].source)!=null&&T.name?0:1}i=O(r),o=N[i]=y[i](r);function P(B,S){var T;return(T=B[10].metadata)!=null&&T.html?Fi:qi}let R=P(r),I=R(r),C=r[12]!==r[3].length-1&&Ul();return{c(){e=E("div"),t=E("div"),s=W(l),n=A(),o.c(),a=A(),f=E("div"),u=E("div"),g=W(c),h=A(),I.c(),p=A(),C&&C.c(),w=de(),this.h()},l(B){e=M(B,"DIV",{class:!0});var S=k(e);t=M(S,"DIV",{class:!0});var T=k(t);s=q(T,l),T.forEach(m),n=j(S),o.l(S),S.forEach(m),a=j(B),f=M(B,"DIV",{class:!0});var z=k(f);u=M(z,"DIV",{class:!0});var J=k(u);g=q(J,c),J.forEach(m),h=j(z),I.l(z),z.forEach(m),p=j(B),C&&C.l(B),w=de(),this.h()},h(){d(t,"class","text-sm font-medium dark:text-gray-300"),d(e,"class","flex flex-col w-full"),d(u,"class","text-sm font-medium dark:text-gray-300 mt-2"),d(f,"class","flex flex-col w-full")},m(B,S){V(B,e,S),_(e,t),_(t,s),_(e,n),N[i].m(e,null),V(B,a,S),V(B,f,S),_(f,u),_(u,g),_(f,h),I.m(f,null),V(B,p,S),C&&C.m(B,S),V(B,w,S),v=!0},p(B,S){(!v||S&16)&&l!==(l=B[4].t("Source")+"")&&K(s,l);let T=i;i=O(B),i===T?N[i].p(B,S):(le(),D(N[T],1,1,()=>{N[T]=null}),se(),o=N[i],o?o.p(B,S):(o=N[i]=y[i](B),o.c()),b(o,1),o.m(e,null)),(!v||S&16)&&c!==(c=B[4].t("Content")+"")&&K(g,c),R===(R=P(B))&&I?I.p(B,S):(I.d(1),I=R(B),I&&(I.c(),I.m(f,null))),B[12]!==B[3].length-1?C||(C=Ul(),C.c(),C.m(w.parentNode,w)):C&&(C.d(1),C=null)},i(B){v||(b(o),v=!0)},o(B){D(o),v=!1},d(B){B&&(m(e),m(a),m(f),m(p),m(w)),N[i].d(),I.d(),C&&C.d(B)}}}function Ji(r){let e,t,l,s=r[4].t("Citation")+"",n,i,o,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,u,c,g,h,p,w=Ne(r[3]),v=[];for(let N=0;N<w.length;N+=1)v[N]=Wl(Rl(r,w,N));const y=N=>D(v[N],1,1,()=>{v[N]=null});return{c(){e=E("div"),t=E("div"),l=E("div"),n=W(s),i=A(),o=E("button"),o.innerHTML=a,f=A(),u=E("div"),c=E("div");for(let N=0;N<v.length;N+=1)v[N].c();this.h()},l(N){e=M(N,"DIV",{});var O=k(e);t=M(O,"DIV",{class:!0});var P=k(t);l=M(P,"DIV",{class:!0});var R=k(l);n=q(R,s),R.forEach(m),i=j(P),o=M(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(o)!=="svelte-745w2y"&&(o.innerHTML=a),P.forEach(m),f=j(O),u=M(O,"DIV",{class:!0});var I=k(u);c=M(I,"DIV",{class:!0});var C=k(c);for(let B=0;B<v.length;B+=1)v[B].l(C);C.forEach(m),I.forEach(m),O.forEach(m),this.h()},h(){d(l,"class","text-lg font-medium self-center capitalize"),d(o,"class","self-center"),d(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"),d(c,"class","flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden"),d(u,"class","flex flex-col md:flex-row w-full px-6 pb-5 md:space-x-4")},m(N,O){V(N,e,O),_(e,t),_(t,l),_(l,n),_(t,i),_(t,o),_(e,f),_(e,u),_(u,c);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(c,null);g=!0,h||(p=me(o,"click",r[8]),h=!0)},p(N,O){if((!g||O&16)&&s!==(s=N[4].t("Citation")+"")&&K(n,s),O&94){w=Ne(N[3]);let P;for(P=0;P<w.length;P+=1){const R=Rl(N,w,P);v[P]?(v[P].p(R,O),b(v[P],1)):(v[P]=Wl(R),v[P].c(),b(v[P],1),v[P].m(c,null))}for(le(),P=w.length;P<v.length;P+=1)y(P);se()}},i(N){if(!g){for(let O=0;O<w.length;O+=1)b(v[O]);g=!0}},o(N){v=v.filter(Boolean);for(let O=0;O<v.length;O+=1)D(v[O]);g=!1},d(N){N&&m(e),Je(v,N),h=!1,p()}}}function Gi(r){let e,t,l;function s(i){r[9](i)}let n={size:"lg",$$slots:{default:[Ji]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.show=r[0]),e=new Zr({props:n}),ze.push(()=>Ye(e,"show",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,[o]){const a={};o&16415&&(a.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,a.show=i[0],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){D(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function Ki(r){return typeof r!="number"?null:r<0?0:r>1?100:Math.round(r*1e4)/100}function ql(r){return r>=80?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":r>=60?"bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200":r>=40?"bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200":"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200"}function Zi(r,e,t){let l;const s=Ge("i18n");Me(r,s,h=>t(4,l=h));let{show:n=!1}=e,{citation:i}=e,{showPercentage:o=!1}=e,{showRelevance:a=!0}=e,f=[];const u=h=>{try{return decodeURIComponent(h)}catch{return h}},c=()=>{t(0,n=!1)};function g(h){n=h,t(0,n)}return r.$$set=h=>{"show"in h&&t(0,n=h.show),"citation"in h&&t(7,i=h.citation),"showPercentage"in h&&t(1,o=h.showPercentage),"showRelevance"in h&&t(2,a=h.showRelevance)},r.$$.update=()=>{var h;r.$$.dirty&136&&i&&(t(3,f=(h=i.document)==null?void 0:h.map((p,w)=>{var v,y;return{source:i.source,document:p,metadata:(v=i.metadata)==null?void 0:v[w],distance:(y=i.distances)==null?void 0:y[w]}})),f.every(p=>p.distance!==void 0)&&t(3,f=f.sort((p,w)=>(w.distance??1/0)-(p.distance??1/0))))},[n,o,a,f,l,s,u,i,c,g]}class Qi extends Pe{constructor(e){super(),Le(this,e,Zi,Gi,Be,{show:0,citation:7,showPercentage:1,showRelevance:2})}}function Fl(r,e,t){const l=r.slice();return l[19]=e[t],l[21]=t,l}function Jl(r,e,t){const l=r.slice();return l[19]=e[t],l[21]=t,l}function Gl(r,e,t){const l=r.slice();return l[19]=e[t],l[21]=t,l}function Kl(r){let e,t,l,s;const n=[Xi,Yi],i=[];function o(a,f){return a[1].length<=3?0:1}return t=o(r),l=i[t]=n[t](r),{c(){e=E("div"),l.c(),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);l.l(f),f.forEach(m),this.h()},h(){d(e,"class","py-0.5 -mx-0.5 w-full flex gap-1 items-center flex-wrap")},m(a,f){V(a,e,f),i[t].m(e,null),s=!0},p(a,f){let u=t;t=o(a),t===u?i[t].p(a,f):(le(),D(i[u],1,1,()=>{i[u]=null}),se(),l=i[t],l?l.p(a,f):(l=i[t]=n[t](a),l.c()),b(l,1),l.m(e,null))},i(a){s||(b(l),s=!0)},o(a){D(l),s=!1},d(a){a&&m(e),i[t].d()}}}function Yi(r){let e,t,l;function s(i){r[18](i)}let n={id:`collapsible-${r[0]}`,className:"w-full max-w-full ",buttonClassName:"w-fit max-w-full",$$slots:{content:[ta],default:[ea]},$$scope:{ctx:r}};return r[6]!==void 0&&(n.open=r[6]),e=new Gr({props:n}),ze.push(()=>Ye(e,"open",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,o){const a={};o&1&&(a.id=`collapsible-${i[0]}`),o&16777459&&(a.$$scope={dirty:o,ctx:i}),!t&&o&64&&(t=!0,a.open=i[6],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){D(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function Xi(r){let e,t=Ne(r[1]),l=[];for(let s=0;s<t.length;s+=1)l[s]=xl(Gl(r,t,s));return{c(){e=E("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);for(let i=0;i<l.length;i+=1)l[i].l(n);n.forEach(m),this.h()},h(){d(e,"class","flex text-xs font-medium flex-wrap")},m(s,n){V(s,e,n);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,n){if(n&563){t=Ne(s[1]);let i;for(i=0;i<t.length;i+=1){const o=Gl(s,t,i);l[i]?l[i].p(o,n):(l[i]=xl(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},i:Ee,o:Ee,d(s){s&&m(e),Je(l,s)}}}function Zl(r){let e,t=r[21]+1+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","bg-gray-50 dark:bg-gray-800 rounded-full size-4")},m(s,n){V(s,e,n),_(e,l)},d(s){s&&m(e)}}}function Ql(r){let e,t=r[1].every(r[13]),l,s,n=r[9](r[19].source.name)+"",i,o,a,f,u=t&&Zl(r);function c(){return r[17](r[19])}return{c(){e=E("button"),u&&u.c(),l=A(),s=E("div"),i=W(n),o=A(),this.h()},l(g){e=M(g,"BUTTON",{class:!0});var h=k(e);u&&u.l(h),l=j(h),s=M(h,"DIV",{class:!0});var p=k(s);i=q(p,n),p.forEach(m),o=j(h),h.forEach(m),this.h()},h(){d(s,"class","flex-1 mx-1 truncate"),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition rounded-xl max-w-96")},m(g,h){V(g,e,h),u&&u.m(e,null),_(e,l),_(e,s),_(s,i),_(e,o),a||(f=[me(e,"click",c),me(e,"pointerup",na)],a=!0)},p(g,h){r=g,h&2&&(t=r[1].every(r[13])),t?u||(u=Zl(r),u.c(),u.m(e,l)):u&&(u.d(1),u=null),h&2&&n!==(n=r[9](r[19].source.name)+"")&&K(i,n)},d(g){g&&m(e),u&&u.d(),a=!1,Xe(f)}}}function $i(r){let e,t;return e=new Fr({props:{strokeWidth:"3.5",className:"size-3.5"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function xi(r){let e,t;return e=new Jr({props:{strokeWidth:"3.5",className:"size-3.5"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ea(r){let e,t,l,s=r[7].t("References from")+"",n,i,o,a,f,u,c,g=r[7].t("and")+"",h,p,w=r[1].length-2+"",v,y,N,O=r[7].t("more")+"",P,R,I,C,B,S,T=Ne(r[1].slice(0,2)),z=[];for(let Q=0;Q<T.length;Q+=1)z[Q]=Ql(Fl(r,T,Q));const J=[xi,$i],H=[];function re(Q,ie){return Q[6]?0:1}return C=re(r),B=H[C]=J[C](r),{c(){e=E("div"),t=E("div"),l=E("span"),n=W(s),i=A(),o=E("div"),a=E("div");for(let Q=0;Q<z.length;Q+=1)z[Q].c();f=A(),u=E("div"),c=E("span"),h=W(g),p=A(),v=W(w),y=A(),N=E("span"),P=W(O),R=A(),I=E("div"),B.c(),this.h()},l(Q){e=M(Q,"DIV",{class:!0});var ie=k(e);t=M(ie,"DIV",{class:!0});var ge=k(t);l=M(ge,"SPAN",{class:!0});var he=k(l);n=q(he,s),he.forEach(m),i=j(ge),o=M(ge,"DIV",{class:!0});var ye=k(o);a=M(ye,"DIV",{class:!0});var Z=k(a);for(let F=0;F<z.length;F+=1)z[F].l(Z);Z.forEach(m),ye.forEach(m),f=j(ge),u=M(ge,"DIV",{class:!0});var oe=k(u);c=M(oe,"SPAN",{class:!0});var pe=k(c);h=q(pe,g),pe.forEach(m),p=j(oe),v=q(oe,w),y=j(oe),N=M(oe,"SPAN",{});var ae=k(N);P=q(ae,O),ae.forEach(m),oe.forEach(m),ge.forEach(m),R=j(ie),I=M(ie,"DIV",{class:!0});var ue=k(I);B.l(ue),ue.forEach(m),ie.forEach(m),this.h()},h(){d(l,"class","whitespace-nowrap hidden sm:inline shrink-0"),d(a,"class","flex text-xs font-medium items-center"),d(o,"class","flex items-center overflow-auto scrollbar-none w-full max-w-full flex-1"),d(c,"class","hidden sm:inline"),d(u,"class","flex items-center gap-1 whitespace-nowrap shrink-0"),d(t,"class","flex-1 flex items-center gap-1 overflow-auto scrollbar-none w-full max-w-full"),d(I,"class","shrink-0"),d(e,"class","flex w-full overflow-auto items-center gap-2 text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition cursor-pointer")},m(Q,ie){V(Q,e,ie),_(e,t),_(t,l),_(l,n),_(t,i),_(t,o),_(o,a);for(let ge=0;ge<z.length;ge+=1)z[ge]&&z[ge].m(a,null);_(t,f),_(t,u),_(u,c),_(c,h),_(u,p),_(u,v),_(u,y),_(u,N),_(N,P),_(e,R),_(e,I),H[C].m(I,null),S=!0},p(Q,ie){if((!S||ie&128)&&s!==(s=Q[7].t("References from")+"")&&K(n,s),ie&562){T=Ne(Q[1].slice(0,2));let he;for(he=0;he<T.length;he+=1){const ye=Fl(Q,T,he);z[he]?z[he].p(ye,ie):(z[he]=Ql(ye),z[he].c(),z[he].m(a,null))}for(;he<z.length;he+=1)z[he].d(1);z.length=T.length}(!S||ie&128)&&g!==(g=Q[7].t("and")+"")&&K(h,g),(!S||ie&2)&&w!==(w=Q[1].length-2+"")&&K(v,w),(!S||ie&128)&&O!==(O=Q[7].t("more")+"")&&K(P,O);let ge=C;C=re(Q),C!==ge&&(le(),D(H[ge],1,1,()=>{H[ge]=null}),se(),B=H[C],B||(B=H[C]=J[C](Q),B.c()),b(B,1),B.m(I,null))},i(Q){S||(b(B),S=!0)},o(Q){D(B),S=!1},d(Q){Q&&m(e),Je(z,Q),H[C].d()}}}function Yl(r){let e,t=r[21]+1+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","bg-gray-50 dark:bg-gray-800 rounded-full size-4")},m(s,n){V(s,e,n),_(e,l)},d(s){s&&m(e)}}}function Xl(r){let e,t=r[1].every(r[12]),l,s,n=r[9](r[19].source.name)+"",i,o,a,f,u,c=t&&Yl(r);function g(){return r[16](r[19])}return{c(){e=E("button"),c&&c.c(),l=A(),s=E("div"),i=W(n),o=A(),this.h()},l(h){e=M(h,"BUTTON",{id:!0,class:!0});var p=k(e);c&&c.l(p),l=j(p),s=M(p,"DIV",{class:!0});var w=k(s);i=q(w,n),w.forEach(m),o=j(p),p.forEach(m),this.h()},h(){d(s,"class","flex-1 mx-1 truncate"),d(e,"id",a=`source-${r[0]}-${r[21]+1}`),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition rounded-xl max-w-96")},m(h,p){V(h,e,p),c&&c.m(e,null),_(e,l),_(e,s),_(s,i),_(e,o),f||(u=me(e,"click",g),f=!0)},p(h,p){r=h,p&2&&(t=r[1].every(r[12])),t?c||(c=Yl(r),c.c(),c.m(e,l)):c&&(c.d(1),c=null),p&2&&n!==(n=r[9](r[19].source.name)+"")&&K(i,n),p&1&&a!==(a=`source-${r[0]}-${r[21]+1}`)&&d(e,"id",a)},d(h){h&&m(e),c&&c.d(),f=!1,u()}}}function ta(r){let e,t,l=Ne(r[1]),s=[];for(let n=0;n<l.length;n+=1)s[n]=Xl(Jl(r,l,n));return{c(){e=E("div"),t=E("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=M(n,"DIV",{slot:!0});var i=k(e);t=M(i,"DIV",{class:!0});var o=k(t);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),i.forEach(m),this.h()},h(){d(t,"class","flex text-xs font-medium flex-wrap"),d(e,"slot","content")},m(n,i){V(n,e,i),_(e,t);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null)},p(n,i){if(i&563){l=Ne(n[1]);let o;for(o=0;o<l.length;o+=1){const a=Jl(n,l,o);s[o]?s[o].p(a,i):(s[o]=Xl(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(n){n&&m(e),Je(s,n)}}}function $l(r){let e,t=r[21]+1+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","bg-gray-50 dark:bg-gray-800 rounded-full size-4")},m(s,n){V(s,e,n),_(e,l)},d(s){s&&m(e)}}}function xl(r){let e,t=r[1].every(r[11]),l,s,n=r[9](r[19].source.name)+"",i,o,a,f,u,c=t&&$l(r);function g(){return r[15](r[19])}return{c(){e=E("button"),c&&c.c(),l=A(),s=E("div"),i=W(n),o=A(),this.h()},l(h){e=M(h,"BUTTON",{id:!0,class:!0});var p=k(e);c&&c.l(p),l=j(p),s=M(p,"DIV",{class:!0});var w=k(s);i=q(w,n),w.forEach(m),o=j(p),p.forEach(m),this.h()},h(){d(s,"class","flex-1 mx-1 truncate text-black/60 hover:text-black dark:text-white/60 dark:hover:text-white transition"),d(e,"id",a=`source-${r[0]}-${r[21]+1}`),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-white dark:bg-gray-900 rounded-xl max-w-96")},m(h,p){V(h,e,p),c&&c.m(e,null),_(e,l),_(e,s),_(s,i),_(e,o),f||(u=me(e,"click",g),f=!0)},p(h,p){r=h,p&2&&(t=r[1].every(r[11])),t?c||(c=$l(r),c.c(),c.m(e,l)):c&&(c.d(1),c=null),p&2&&n!==(n=r[9](r[19].source.name)+"")&&K(i,n),p&1&&a!==(a=`source-${r[0]}-${r[21]+1}`)&&d(e,"id",a)},d(h){h&&m(e),c&&c.d(),f=!1,u()}}}function la(r){let e,t,l,s,n;function i(f){r[14](f)}let o={citation:r[5],showPercentage:r[2],showRelevance:r[3]};r[4]!==void 0&&(o.show=r[4]),e=new Qi({props:o}),ze.push(()=>Ye(e,"show",i));let a=r[1].length>0&&Kl(r);return{c(){X(e.$$.fragment),l=A(),a&&a.c(),s=de()},l(f){$(e.$$.fragment,f),l=j(f),a&&a.l(f),s=de()},m(f,u){x(e,f,u),V(f,l,u),a&&a.m(f,u),V(f,s,u),n=!0},p(f,[u]){const c={};u&32&&(c.citation=f[5]),u&4&&(c.showPercentage=f[2]),u&8&&(c.showRelevance=f[3]),!t&&u&16&&(t=!0,c.show=f[4],Qe(()=>t=!1)),e.$set(c),f[1].length>0?a?(a.p(f,u),u&2&&b(a,1)):(a=Kl(f),a.c(),b(a,1),a.m(s.parentNode,s)):a&&(le(),D(a,1,1,()=>{a=null}),se())},i(f){n||(b(e.$$.fragment,f),b(a),n=!0)},o(f){D(e.$$.fragment,f),D(a),n=!1},d(f){f&&(m(l),m(s)),ee(e,f),a&&a.d(f)}}}function sa(r){const e=r.flatMap(s=>s.distances??[]),t=e.filter(s=>s!==void 0&&s>=-1&&s<=1).length,l=e.filter(s=>s!==void 0&&(s<-1||s>1)).length;return!(e.length===0||t===e.length-1&&l===1||l===e.length-1&&t===1)}function ra(r){return r.flatMap(t=>t.distances??[]).every(t=>t!==void 0&&t>=-1&&t<=1)}const na=r=>{r.stopPropagation()};function ia(r,e,t){let l;const s=Ge("i18n");Me(r,s,I=>t(7,l=I));let{id:n=""}=e,{sources:i=[]}=e,o=[],a=!1,f=!0,u=!1,c=null,g=!1;const h=I=>{try{return decodeURIComponent(I)}catch{return I}},p=I=>I.distances!==void 0,w=I=>I.distances!==void 0,v=I=>I.distances!==void 0;function y(I){u=I,t(4,u)}const N=I=>{t(4,u=!0),t(5,c=I)},O=I=>{t(4,u=!0),t(5,c=I)},P=I=>{t(4,u=!0),t(5,c=I)};function R(I){g=I,t(6,g)}return r.$$set=I=>{"id"in I&&t(0,n=I.id),"sources"in I&&t(10,i=I.sources)},r.$$.update=()=>{r.$$.dirty&1026&&(console.log("sources",i),t(1,o=i.reduce((I,C)=>(Object.keys(C).length===0||C.document.forEach((B,S)=>{var Q,ie,ge;const T=(Q=C.metadata)==null?void 0:Q[S],z=(ie=C.distances)==null?void 0:ie[S],J=(T==null?void 0:T.source)??((ge=C==null?void 0:C.source)==null?void 0:ge.id)??"N/A";let H=C==null?void 0:C.source;T!=null&&T.name&&(H={...H,name:T.name}),(J.startsWith("http://")||J.startsWith("https://"))&&(H={...H,name:J,url:J});const re=I.find(he=>he.id===J);re?(re.document.push(B),re.metadata.push(T),z!==void 0&&re.distances.push(z)):I.push({id:J,source:H,document:[B],metadata:T?[T]:[],distances:z!==void 0?[z]:void 0})}),I),[])),console.log("citations",o),t(3,f=sa(o)),t(2,a=ra(o)))},[n,o,a,f,u,c,g,l,s,h,i,p,w,v,y,N,O,P,R]}class aa extends Pe{constructor(e){super(),Le(this,e,ia,la,Be,{id:0,sources:10})}}function es(r,e,t){const l=r.slice();return l[6]=e[t],l}function ts(r){let e,t,l,s;const n=[ua,fa,oa],i=[];function o(a,f){var u,c;return(u=a[1].result)!=null&&u.error?0:(c=a[1].result)!=null&&c.output?1:2}return t=o(r),l=i[t]=n[t](r),{c(){e=E("div"),l.c()},l(a){e=M(a,"DIV",{});var f=k(e);l.l(f),f.forEach(m)},m(a,f){V(a,e,f),i[t].m(e,null),s=!0},p(a,f){let u=t;t=o(a),t!==u&&(le(),D(i[u],1,1,()=>{i[u]=null}),se(),l=i[t],l||(l=i[t]=n[t](a),l.c()),b(l,1),l.m(e,null))},i(a){s||(b(l),s=!0)},o(a){D(l),s=!1},d(a){a&&m(e),i[t].d()}}}function oa(r){let e,t;return e=new Xt({props:{type:"warning",content:"incomplete"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function fa(r){let e,t;return e=new Xt({props:{type:"success",content:"success"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ua(r){let e,t;return e=new Xt({props:{type:"error",content:"error"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ls(r){let e,t,l;return t=new Yt({props:{className:"size-4"}}),{c(){e=E("div"),X(t.$$.fragment)},l(s){e=M(s,"DIV",{});var n=k(e);$(t.$$.fragment,n),n.forEach(m)},m(s,n){V(s,e,n),x(t,e,null),l=!0},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){D(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function ca(r){let e=r[2].t("Code execution")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Code execution")+"")&&K(t,e)},d(l){l&&m(t)}}}function da(r){var i;let e=r[2].t("Code execution")+"",t,l,s=((i=r[1])==null?void 0:i.name)+"",n;return{c(){t=W(e),l=W(": "),n=W(s)},l(o){t=q(o,e),l=q(o,": "),n=q(o,s)},m(o,a){V(o,t,a),V(o,l,a),V(o,n,a)},p(o,a){var f;a&4&&e!==(e=o[2].t("Code execution")+"")&&K(t,e),a&2&&s!==(s=((f=o[1])==null?void 0:f.name)+"")&&K(n,s)},d(o){o&&(m(t),m(l),m(n))}}}function ss(r){var n,i,o,a;let e,t,l=((i=(n=r[1])==null?void 0:n.result)==null?void 0:i.error)&&rs(r),s=((a=(o=r[1])==null?void 0:o.result)==null?void 0:a.output)&&ns(r);return{c(){e=E("div"),l&&l.c(),t=A(),s&&s.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l&&l.l(u),t=j(u),s&&s.l(u),u.forEach(m),this.h()},h(){d(e,"class","dark:bg-[#202123] dark:text-white px-4 py-4 rounded-b-lg flex flex-col gap-3")},m(f,u){V(f,e,u),l&&l.m(e,null),_(e,t),s&&s.m(e,null)},p(f,u){var c,g,h,p;(g=(c=f[1])==null?void 0:c.result)!=null&&g.error?l?l.p(f,u):(l=rs(f),l.c(),l.m(e,t)):l&&(l.d(1),l=null),(p=(h=f[1])==null?void 0:h.result)!=null&&p.output?s?s.p(f,u):(s=ns(f),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(f){f&&m(e),l&&l.d(),s&&s.d()}}}function rs(r){var f,u;let e,t,l=r[2].t("ERROR")+"",s,n,i,o=((u=(f=r[1])==null?void 0:f.result)==null?void 0:u.error)+"",a;return{c(){e=E("div"),t=E("div"),s=W(l),n=A(),i=E("div"),a=W(o),this.h()},l(c){e=M(c,"DIV",{});var g=k(e);t=M(g,"DIV",{class:!0});var h=k(t);s=q(h,l),h.forEach(m),n=j(g),i=M(g,"DIV",{class:!0});var p=k(i);a=q(p,o),p.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-gray-500 text-xs mb-1"),d(i,"class","text-sm")},m(c,g){V(c,e,g),_(e,t),_(t,s),_(e,n),_(e,i),_(i,a)},p(c,g){var h,p;g&4&&l!==(l=c[2].t("ERROR")+"")&&K(s,l),g&2&&o!==(o=((p=(h=c[1])==null?void 0:h.result)==null?void 0:p.error)+"")&&K(a,o)},d(c){c&&m(e)}}}function ns(r){var f,u;let e,t,l=r[2].t("OUTPUT")+"",s,n,i,o=((u=(f=r[1])==null?void 0:f.result)==null?void 0:u.output)+"",a;return{c(){e=E("div"),t=E("div"),s=W(l),n=A(),i=E("div"),a=W(o),this.h()},l(c){e=M(c,"DIV",{});var g=k(e);t=M(g,"DIV",{class:!0});var h=k(t);s=q(h,l),h.forEach(m),n=j(g),i=M(g,"DIV",{class:!0});var p=k(i);a=q(p,o),p.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-gray-500 text-xs mb-1"),d(i,"class","text-sm")},m(c,g){V(c,e,g),_(e,t),_(t,s),_(e,n),_(e,i),_(i,a)},p(c,g){var h,p;g&4&&l!==(l=c[2].t("OUTPUT")+"")&&K(s,l),g&2&&o!==(o=((p=(h=c[1])==null?void 0:h.result)==null?void 0:p.output)+"")&&K(a,o)},d(c){c&&m(e)}}}function is(r){var c,g;let e,t,l,s,n=r[2].t("Files")+"",i,o,a,f=Ne((g=(c=r[1])==null?void 0:c.result)==null?void 0:g.files),u=[];for(let h=0;h<f.length;h+=1)u[h]=as(es(r,f,h));return{c(){e=E("div"),t=E("hr"),l=A(),s=E("div"),i=W(n),o=A(),a=E("ul");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=M(h,"DIV",{class:!0});var p=k(e);t=M(p,"HR",{class:!0}),l=j(p),s=M(p,"DIV",{class:!0});var w=k(s);i=q(w,n),w.forEach(m),o=j(p),a=M(p,"UL",{class:!0});var v=k(a);for(let y=0;y<u.length;y+=1)u[y].l(v);v.forEach(m),p.forEach(m),this.h()},h(){d(t,"class","border-gray-100 dark:border-gray-850 my-2"),d(s,"class","text-sm font-medium dark:text-gray-300"),d(a,"class","mt-1 list-disc pl-4 text-xs"),d(e,"class","flex flex-col w-full")},m(h,p){V(h,e,p),_(e,t),_(e,l),_(e,s),_(s,i),_(e,o),_(e,a);for(let w=0;w<u.length;w+=1)u[w]&&u[w].m(a,null)},p(h,p){var w,v;if(p&4&&n!==(n=h[2].t("Files")+"")&&K(i,n),p&2){f=Ne((v=(w=h[1])==null?void 0:w.result)==null?void 0:v.files);let y;for(y=0;y<f.length;y+=1){const N=es(h,f,y);u[y]?u[y].p(N,p):(u[y]=as(N),u[y].c(),u[y].m(a,null))}for(;y<u.length;y+=1)u[y].d(1);u.length=f.length}},d(h){h&&m(e),Je(u,h)}}}function as(r){let e,t,l=r[6].name+"",s,n,i;return{c(){e=E("li"),t=E("a"),s=W(l),i=A(),this.h()},l(o){e=M(o,"LI",{});var a=k(e);t=M(a,"A",{href:!0,target:!0});var f=k(t);s=q(f,l),f.forEach(m),i=j(a),a.forEach(m),this.h()},h(){d(t,"href",n=r[6].url),d(t,"target","_blank")},m(o,a){V(o,e,a),_(e,t),_(t,s),_(e,i)},p(o,a){a&2&&l!==(l=o[6].name+"")&&K(s,l),a&2&&n!==(n=o[6].url)&&d(t,"href",n)},d(o){o&&m(e)}}}function ha(r){var J,H,re,Q,ie,ge,he,ye,Z,oe,pe,ae,ue,F,_e,fe,be,L,G;let e,t,l,s,n,i,o,a,f,u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,g,h,p,w,v,y,N,O,P,R=((J=r[1])==null?void 0:J.result)&&ts(r),I=!((H=r[1])!=null&&H.result)&&ls();function C(te,Y){var ce;return(ce=te[1])!=null&&ce.name?da:ca}let B=C(r),S=B(r);w=new Gn({props:{id:"code-exec-"+((re=r[1])==null?void 0:re.id)+"-code",lang:((Q=r[1])==null?void 0:Q.language)??"",code:((ie=r[1])==null?void 0:ie.code)??"",className:"",editorClassName:(ge=r[1])!=null&&ge.result&&((ye=(he=r[1])==null?void 0:he.result)!=null&&ye.error||(oe=(Z=r[1])==null?void 0:Z.result)!=null&&oe.output)?"rounded-b-none":"",stickyButtonsClassName:"top-0",run:!1}});let T=((pe=r[1])==null?void 0:pe.result)&&(((ue=(ae=r[1])==null?void 0:ae.result)==null?void 0:ue.error)||((_e=(F=r[1])==null?void 0:F.result)==null?void 0:_e.output))&&ss(r),z=((be=(fe=r[1])==null?void 0:fe.result)==null?void 0:be.files)&&((G=(L=r[1])==null?void 0:L.result)==null?void 0:G.files.length)>0&&is(r);return{c(){e=E("div"),t=E("div"),l=E("div"),R&&R.c(),s=A(),n=E("div"),I&&I.c(),i=A(),o=E("div"),S.c(),a=A(),f=E("button"),f.innerHTML=u,c=A(),g=E("div"),h=E("div"),p=E("div"),X(w.$$.fragment),v=A(),T&&T.c(),y=A(),z&&z.c(),this.h()},l(te){e=M(te,"DIV",{});var Y=k(e);t=M(Y,"DIV",{class:!0});var ce=k(t);l=M(ce,"DIV",{class:!0});var ve=k(l);R&&R.l(ve),s=j(ve),n=M(ve,"DIV",{class:!0});var Ve=k(n);I&&I.l(Ve),i=j(Ve),o=M(Ve,"DIV",{});var De=k(o);S.l(De),De.forEach(m),Ve.forEach(m),ve.forEach(m),a=j(ce),f=M(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(f)!=="svelte-vnrwun"&&(f.innerHTML=u),ce.forEach(m),c=j(Y),g=M(Y,"DIV",{class:!0});var Ae=k(g);h=M(Ae,"DIV",{class:!0});var He=k(h);p=M(He,"DIV",{class:!0});var Ue=k(p);$(w.$$.fragment,Ue),Ue.forEach(m),v=j(He),T&&T.l(He),y=j(He),z&&z.l(He),He.forEach(m),Ae.forEach(m),Y.forEach(m),this.h()},h(){d(n,"class","flex gap-2 items-center"),d(l,"class","text-lg font-medium self-center flex flex-col gap-0.5 capitalize"),d(f,"class","self-center"),d(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"),d(p,"class","flex flex-col w-full"),d(h,"class","flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden"),d(g,"class","flex flex-col md:flex-row w-full px-4 pb-5")},m(te,Y){V(te,e,Y),_(e,t),_(t,l),R&&R.m(l,null),_(l,s),_(l,n),I&&I.m(n,null),_(n,i),_(n,o),S.m(o,null),_(t,a),_(t,f),_(e,c),_(e,g),_(g,h),_(h,p),x(w,p,null),_(h,v),T&&T.m(h,null),_(h,y),z&&z.m(h,null),N=!0,O||(P=me(f,"click",r[4]),O=!0)},p(te,Y){var ve,Ve,De,Ae,He,Ue,ne,We,et,tt,Ke,ft,ut,nt,Dt,Vt,Ct,Tt,Bt;(ve=te[1])!=null&&ve.result?R?(R.p(te,Y),Y&2&&b(R,1)):(R=ts(te),R.c(),b(R,1),R.m(l,s)):R&&(le(),D(R,1,1,()=>{R=null}),se()),(Ve=te[1])!=null&&Ve.result?I&&(le(),D(I,1,1,()=>{I=null}),se()):I?Y&2&&b(I,1):(I=ls(),I.c(),b(I,1),I.m(n,i)),B===(B=C(te))&&S?S.p(te,Y):(S.d(1),S=B(te),S&&(S.c(),S.m(o,null)));const ce={};Y&2&&(ce.id="code-exec-"+((De=te[1])==null?void 0:De.id)+"-code"),Y&2&&(ce.lang=((Ae=te[1])==null?void 0:Ae.language)??""),Y&2&&(ce.code=((He=te[1])==null?void 0:He.code)??""),Y&2&&(ce.editorClassName=(Ue=te[1])!=null&&Ue.result&&((We=(ne=te[1])==null?void 0:ne.result)!=null&&We.error||(tt=(et=te[1])==null?void 0:et.result)!=null&&tt.output)?"rounded-b-none":""),w.$set(ce),(Ke=te[1])!=null&&Ke.result&&((ut=(ft=te[1])==null?void 0:ft.result)!=null&&ut.error||(Dt=(nt=te[1])==null?void 0:nt.result)!=null&&Dt.output)?T?T.p(te,Y):(T=ss(te),T.c(),T.m(h,y)):T&&(T.d(1),T=null),(Ct=(Vt=te[1])==null?void 0:Vt.result)!=null&&Ct.files&&((Bt=(Tt=te[1])==null?void 0:Tt.result)==null?void 0:Bt.files.length)>0?z?z.p(te,Y):(z=is(te),z.c(),z.m(h,null)):z&&(z.d(1),z=null)},i(te){N||(b(R),b(I),b(w.$$.fragment,te),N=!0)},o(te){D(R),D(I),D(w.$$.fragment,te),N=!1},d(te){te&&m(e),R&&R.d(),I&&I.d(),S.d(),ee(w),T&&T.d(),z&&z.d(),O=!1,P()}}}function ma(r){let e,t,l;function s(i){r[5](i)}let n={size:"lg",$$slots:{default:[ha]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.show=r[0]),e=new Zr({props:n}),ze.push(()=>Ye(e,"show",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,[o]){const a={};o&519&&(a.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,a.show=i[0],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){D(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function ga(r,e,t){let l;const s=Ge("i18n");Me(r,s,f=>t(2,l=f));let{show:n=!1}=e,{codeExecution:i=null}=e;const o=()=>{t(0,n=!1),t(1,i=null)};function a(f){n=f,t(0,n)}return r.$$set=f=>{"show"in f&&t(0,n=f.show),"codeExecution"in f&&t(1,i=f.codeExecution)},[n,i,l,s,o,a]}class _a extends Pe{constructor(e){super(),Le(this,e,ga,ma,Be,{show:0,codeExecution:1})}}function os(r,e,t){const l=r.slice();return l[6]=e[t],l}function fs(r){let e,t=[],l=new Map,s,n=Ne(r[0]);const i=o=>o[6].id;for(let o=0;o<n.length;o+=1){let a=os(r,n,o),f=i(a);l.set(f,t[o]=us(f,a))}return{c(){e=E("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(m),this.h()},h(){d(e,"class","mt-1 mb-2 w-full flex gap-1 items-center flex-wrap")},m(o,a){V(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(o,a){a&7&&(n=Ne(o[0]),le(),t=Ht(t,a,i,1,o,n,l,e,Gt,us,null,os),se())},i(o){if(!s){for(let a=0;a<n.length;a+=1)b(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)D(t[a]);s=!1},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function pa(r){let e,t;return e=new Yt({props:{className:"size-4"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ba(r){let e,t,l,s;const n=[wa,ka,va],i=[];function o(a,f){var u,c;return(u=a[6].result)!=null&&u.error?0:(c=a[6].result)!=null&&c.output?1:2}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),V(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e!==u&&(le(),D(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t||(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){D(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function va(r){let e,t;return e=new xn({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ka(r){let e,t;return e=new Xn({props:{strokeWidth:"3",className:"size-3"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function wa(r){let e,t;return e=new $n({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function us(r,e){let t,l,s,n,i,o,a,f=e[6].name+"",u,c,g,h,p,w;const v=[ba,pa],y=[];function N(P,R){var I;return(I=P[6])!=null&&I.result?0:1}n=N(e),i=y[n]=v[n](e);function O(){return e[4](e[6])}return{key:r,first:null,c(){t=E("div"),l=E("button"),s=E("div"),i.c(),o=A(),a=E("div"),u=W(f),g=A(),this.h()},l(P){t=M(P,"DIV",{class:!0});var R=k(t);l=M(R,"BUTTON",{class:!0});var I=k(l);s=M(I,"DIV",{class:!0});var C=k(s);i.l(C),C.forEach(m),o=j(I),a=M(I,"DIV",{class:!0});var B=k(a);u=q(B,f),B.forEach(m),I.forEach(m),g=j(R),R.forEach(m),this.h()},h(){var P;d(s,"class","bg-white dark:bg-gray-700 rounded-full size-4 flex items-center justify-center"),d(a,"class",c="flex-1 mx-2 line-clamp-1 code-execution-name "+((P=e[6])!=null&&P.result?"":"pulse")+" svelte-1gvtig2"),d(l,"class","flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl max-w-96"),d(t,"class","flex gap-1 text-xs font-semibold"),this.first=t},m(P,R){V(P,t,R),_(t,l),_(l,s),y[n].m(s,null),_(l,o),_(l,a),_(a,u),_(t,g),h=!0,p||(w=me(l,"click",O),p=!0)},p(P,R){var C;e=P;let I=n;n=N(e),n===I?y[n].p(e,R):(le(),D(y[I],1,1,()=>{y[I]=null}),se(),i=y[n],i?i.p(e,R):(i=y[n]=v[n](e),i.c()),b(i,1),i.m(s,null)),(!h||R&1)&&f!==(f=e[6].name+"")&&K(u,f),(!h||R&1&&c!==(c="flex-1 mx-2 line-clamp-1 code-execution-name "+((C=e[6])!=null&&C.result?"":"pulse")+" svelte-1gvtig2"))&&d(a,"class",c)},i(P){h||(b(i),h=!0)},o(P){D(i),h=!1},d(P){P&&m(t),y[n].d(),p=!1,w()}}}function ya(r){let e,t,l,s,n;function i(f){r[3](f)}let o={codeExecution:r[1]};r[2]!==void 0&&(o.show=r[2]),e=new _a({props:o}),ze.push(()=>Ye(e,"show",i));let a=r[0].length>0&&fs(r);return{c(){X(e.$$.fragment),l=A(),a&&a.c(),s=de()},l(f){$(e.$$.fragment,f),l=j(f),a&&a.l(f),s=de()},m(f,u){x(e,f,u),V(f,l,u),a&&a.m(f,u),V(f,s,u),n=!0},p(f,[u]){const c={};u&2&&(c.codeExecution=f[1]),!t&&u&4&&(t=!0,c.show=f[2],Qe(()=>t=!1)),e.$set(c),f[0].length>0?a?(a.p(f,u),u&1&&b(a,1)):(a=fs(f),a.c(),b(a,1),a.m(s.parentNode,s)):a&&(le(),D(a,1,1,()=>{a=null}),se())},i(f){n||(b(e.$$.fragment,f),b(a),n=!0)},o(f){D(e.$$.fragment,f),D(a),n=!1},d(f){f&&(m(l),m(s)),ee(e,f),a&&a.d(f)}}}function Ia(r,e,t){let{codeExecutions:l=[]}=e,s=null,n=!1;const i=()=>{s&&t(1,s=l.find(f=>f.id===s.id))};function o(f){n=f,t(2,n)}const a=f=>{t(1,s=f),t(2,n=!0)};return r.$$set=f=>{"codeExecutions"in f&&t(0,l=f.codeExecutions)},r.$$.update=()=>{r.$$.dirty&1&&l&&i()},[l,s,n,o,a]}class Ea extends Pe{constructor(e){super(),Le(this,e,Ia,ya,Be,{codeExecutions:0})}}function Ma(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",r[1]),d(e,"stroke","currentColor"),d(e,"class",r[0])},m(l,s){V(l,e,s),_(e,t)},p(l,[s]){s&2&&d(e,"stroke-width",l[1]),s&1&&d(e,"class",l[0])},i:Ee,o:Ee,d(l){l&&m(e)}}}function Na(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,s=n.strokeWidth)},[l,s]}class Da extends Pe{constructor(e){super(),Le(this,e,Na,Ma,Be,{className:0,strokeWidth:1})}}function Va(r){let e,t,l,s,n,i,o,a,f,u,c,g;s=new Nt({props:{id:`${r[0]}-float-prompt`,content:r[4]}});const h=[Ba,Ta],p=[];function w(y,N){return N&32&&(a=null),a==null&&(a=y[5].trim()===""),a?0:1}f=w(r,-1),u=p[f]=h[f](r);let v=r[6]&&cs(r);return{c(){e=E("div"),t=E("div"),l=E("div"),X(s.$$.fragment),n=A(),i=E("div"),o=E("div"),u.c(),c=A(),v&&v.c(),this.h()},l(y){e=M(y,"DIV",{class:!0});var N=k(e);t=M(N,"DIV",{class:!0});var O=k(t);l=M(O,"DIV",{class:!0});var P=k(l);$(s.$$.fragment,P),P.forEach(m),O.forEach(m),n=j(N),i=M(N,"DIV",{class:!0});var R=k(i);o=M(R,"DIV",{class:!0,id:!0});var I=k(o);u.l(I),c=j(I),v&&v.l(I),I.forEach(m),R.forEach(m),N.forEach(m),this.h()},h(){d(l,"class","font-medium"),d(t,"class","bg-gray-50/50 dark:bg-gray-800 dark:text-gray-100 text-medium rounded-xl px-3.5 py-3 w-full"),d(o,"class","max-h-80 overflow-y-auto w-full markdown-prose-xs"),d(o,"id","response-container"),d(i,"class","bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-xl px-3.5 py-3 w-full"),d(e,"class","bg-white dark:bg-gray-850 dark:text-gray-100 rounded-xl shadow-xl w-80 max-w-full")},m(y,N){V(y,e,N),_(e,t),_(t,l),x(s,l,null),_(e,n),_(e,i),_(i,o),p[f].m(o,null),_(o,c),v&&v.m(o,null),g=!0},p(y,N){const O={};N&1&&(O.id=`${y[0]}-float-prompt`),N&16&&(O.content=y[4]),s.$set(O);let P=f;f=w(y,N),f===P?p[f].p(y,N):(le(),D(p[P],1,1,()=>{p[P]=null}),se(),u=p[f],u?u.p(y,N):(u=p[f]=h[f](y),u.c()),b(u,1),u.m(o,c)),y[6]?v?v.p(y,N):(v=cs(y),v.c(),v.m(o,null)):v&&(v.d(1),v=null)},i(y){g||(b(s.$$.fragment,y),b(u),g=!0)},o(y){D(s.$$.fragment,y),D(u),g=!1},d(y){y&&m(e),ee(s),p[f].d(),v&&v.d()}}}function Ca(r){let e,t,l,s;const n=[Oa,Sa],i=[];function o(a,f){return a[1]?1:0}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),V(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),D(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){D(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function Ta(r){let e,t;return e=new Nt({props:{id:`${r[0]}-float-response`,content:r[5]}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s&1&&(n.id=`${l[0]}-float-response`),s&32&&(n.content=l[5]),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ba(r){let e,t;return e=new xt({props:{size:"sm"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function cs(r){let e,t,l=r[7].t("Add")+"",s,n,i;return{c(){e=E("div"),t=E("button"),s=W(l),this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);t=M(a,"BUTTON",{class:!0});var f=k(t);s=q(f,l),f.forEach(m),a.forEach(m),this.h()},h(){d(t,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),d(e,"class","flex justify-end pt-3 text-sm font-medium")},m(o,a){V(o,e,a),_(e,t),_(t,s),n||(i=me(t,"click",r[11]),n=!0)},p(o,a){a&128&&l!==(l=o[7].t("Add")+"")&&K(s,l)},d(o){o&&m(e),n=!1,i()}}}function Sa(r){let e,t,l,s,n,i,o,a,f,u,c;return{c(){e=E("div"),t=E("input"),s=A(),n=E("div"),i=E("button"),o=ke("svg"),a=ke("path"),this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);t=M(h,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),s=j(h),n=M(h,"DIV",{class:!0});var p=k(n);i=M(p,"BUTTON",{class:!0});var w=k(i);o=we(w,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var v=k(o);a=we(v,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(a).forEach(m),v.forEach(m),w.forEach(m),p.forEach(m),h.forEach(m),this.h()},h(){d(t,"type","text"),d(t,"id","floating-message-input"),d(t,"class","ml-5 bg-transparent outline-hidden w-full flex-1 text-sm"),d(t,"placeholder",l=r[7].t("Ask a question")),d(a,"fill-rule","evenodd"),d(a,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),d(a,"clip-rule","evenodd"),d(o,"xmlns","http://www.w3.org/2000/svg"),d(o,"viewBox","0 0 16 16"),d(o,"fill","currentColor"),d(o,"class","size-4"),d(i,"class",f=(r[3]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center"),d(n,"class","ml-1 mr-2"),d(e,"class","py-1 flex dark:text-gray-100 bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-850 w-72 rounded-full shadow-xl")},m(g,h){V(g,e,h),_(e,t),at(t,r[3]),_(e,s),_(e,n),_(n,i),_(i,o),_(o,a),u||(c=[me(t,"input",r[18]),me(t,"keydown",r[19]),me(i,"click",r[20])],u=!0)},p(g,h){h&128&&l!==(l=g[7].t("Ask a question"))&&d(t,"placeholder",l),h&8&&t.value!==g[3]&&at(t,g[3]),h&8&&f!==(f=(g[3]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center")&&d(i,"class",f)},i:Ee,o:Ee,d(g){g&&m(e),u=!1,Xe(c)}}}function Oa(r){let e,t,l,s,n,i=r[7].t("Ask")+"",o,a,f,u,c,g,h=r[7].t("Explain")+"",p,w,v,y;return l=new Da({props:{className:"size-3 shrink-0"}}),u=new Kn({props:{className:"size-3 shrink-0"}}),{c(){e=E("div"),t=E("button"),X(l.$$.fragment),s=A(),n=E("div"),o=W(i),a=A(),f=E("button"),X(u.$$.fragment),c=A(),g=E("div"),p=W(h),this.h()},l(N){e=M(N,"DIV",{class:!0});var O=k(e);t=M(O,"BUTTON",{class:!0});var P=k(t);$(l.$$.fragment,P),s=j(P),n=M(P,"DIV",{class:!0});var R=k(n);o=q(R,i),R.forEach(m),P.forEach(m),a=j(O),f=M(O,"BUTTON",{class:!0});var I=k(f);$(u.$$.fragment,I),c=j(I),g=M(I,"DIV",{class:!0});var C=k(g);p=q(C,h),C.forEach(m),I.forEach(m),O.forEach(m),this.h()},h(){d(n,"class","shrink-0"),d(t,"class","px-1 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-sm flex items-center gap-1 min-w-fit"),d(g,"class","shrink-0"),d(f,"class","px-1 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-sm flex items-center gap-1 min-w-fit"),d(e,"class","flex flex-row gap-0.5 shrink-0 p-1 bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-lg shadow-xl")},m(N,O){V(N,e,O),_(e,t),x(l,t,null),_(t,s),_(t,n),_(n,o),_(e,a),_(e,f),x(u,f,null),_(f,c),_(f,g),_(g,p),w=!0,v||(y=[me(t,"click",r[16]),me(f,"click",r[17])],v=!0)},p(N,O){(!w||O&128)&&i!==(i=N[7].t("Ask")+"")&&K(o,i),(!w||O&128)&&h!==(h=N[7].t("Explain")+"")&&K(p,h)},i(N){w||(b(l.$$.fragment,N),b(u.$$.fragment,N),w=!0)},o(N){D(l.$$.fragment,N),D(u.$$.fragment,N),w=!1},d(N){N&&m(e),ee(l),ee(u),v=!1,Xe(y)}}}function Ra(r){let e,t,l,s,n;const i=[Ca,Va],o=[];function a(f,u){return f[5]===null?0:1}return t=a(r),l=o[t]=i[t](r),{c(){e=E("div"),l.c(),this.h()},l(f){e=M(f,"DIV",{id:!0,class:!0,style:!0});var u=k(e);l.l(u),u.forEach(m),this.h()},h(){d(e,"id",s=`floating-buttons-${r[0]}`),d(e,"class","absolute rounded-lg mt-1 text-xs z-9999"),Rt(e,"display","none")},m(f,u){V(f,e,u),o[t].m(e,null),n=!0},p(f,[u]){let c=t;t=a(f),t===c?o[t].p(f,u):(le(),D(o[c],1,1,()=>{o[c]=null}),se(),l=o[t],l?l.p(f,u):(l=o[t]=i[t](f),l.c()),b(l,1),l.m(e,null)),(!n||u&1&&s!==(s=`floating-buttons-${f[0]}`))&&d(e,"id",s)},i(f){n||(b(l),n=!0)},o(f){D(l),n=!1},d(f){f&&m(e),o[t].d()}}}function Pa(r,e,t){let l;const s=Ge("i18n");Me(r,s,S=>t(7,l=S));let{id:n=""}=e,{model:i=null}=e,{messages:o=[]}=e,{onAdd:a=()=>{}}=e,f=!1,u="",c="",g="",h=null,p=!1;const w=async()=>{const S=document.getElementById("response-container");S.scrollHeight-S.clientHeight<=S.scrollTop+50&&(S.scrollTop=S.scrollHeight)},v=async()=>{if(!i){je.error("Model not selected");return}t(4,g=[...u.split(`
`).map(z=>`> ${z}`),"",c].join(`
`)),t(3,c=""),t(5,h="");const[S,T]=await Il(localStorage.token,{model:i,messages:[...o,{role:"user",content:g}].map(z=>({role:z.role,content:z.content})),stream:!0});if(S&&S.ok){const z=S.body.getReader(),J=new TextDecoder;await(async()=>{var re,Q;for(;;){const{done:ie,value:ge}=await z.read();if(ie)break;const ye=J.decode(ge,{stream:!0}).split(`
`).filter(Z=>Z.trim()!=="");for(const Z of ye)if(Z.startsWith("data: "))if(Z.startsWith("data: [DONE]")){t(6,p=!0),await Ce(),w();continue}else try{const oe=JSON.parse(Z.slice(6));oe.choices&&((Q=(re=oe.choices[0])==null?void 0:re.delta)!=null&&Q.content)&&(t(5,h+=oe.choices[0].delta.content),w())}catch(oe){console.error(oe)}}})()}else je.error("An error occurred while fetching the explanation")},y=async()=>{if(!i){je.error("Model not selected");return}const S=u.split(`
`).map(J=>`> ${J}`).join(`
`);t(4,g=`${S}

Explain`),t(5,h="");const[T,z]=await Il(localStorage.token,{model:i,messages:[...o,{role:"user",content:g}].map(J=>({role:J.role,content:J.content})),stream:!0});if(T&&T.ok){const J=T.body.getReader(),H=new TextDecoder;await(async()=>{var Q,ie;for(;;){const{done:ge,value:he}=await J.read();if(ge)break;const Z=H.decode(he,{stream:!0}).split(`
`).filter(oe=>oe.trim()!=="");for(const oe of Z)if(oe.startsWith("data: "))if(oe.startsWith("data: [DONE]")){t(6,p=!0),await Ce(),w();continue}else try{const pe=JSON.parse(oe.slice(6));pe.choices&&((ie=(Q=pe.choices[0])==null?void 0:Q.delta)!=null&&ie.content)&&(t(5,h+=pe.choices[0].delta.content),w())}catch(pe){console.error(pe)}}})()}else je.error("An error occurred while fetching the explanation")},N=async()=>{a({modelId:i,parentId:n,messages:[{role:"user",content:g},{role:"assistant",content:h}]})},O=()=>{t(5,h=null),t(6,p=!1),t(1,f=!1),t(3,c="")},P=async()=>{t(2,u=window.getSelection().toString()),t(1,f=!0),await Ce(),setTimeout(()=>{const S=document.getElementById("floating-message-input");S&&S.focus()},0)},R=()=>{t(2,u=window.getSelection().toString()),y()};function I(){c=this.value,t(3,c)}const C=S=>{S.key==="Enter"&&v()},B=()=>{v()};return r.$$set=S=>{"id"in S&&t(0,n=S.id),"model"in S&&t(12,i=S.model),"messages"in S&&t(13,o=S.messages),"onAdd"in S&&t(14,a=S.onAdd)},[n,f,u,c,g,h,p,l,s,v,y,N,i,o,a,O,P,R,I,C,B]}class La extends Pe{constructor(e){super(),Le(this,e,Pa,Ra,Be,{id:0,model:12,messages:13,onAdd:14,closeHandler:15})}get closeHandler(){return this.$$.ctx[15]}}function ds(r){var s;let e,t,l={id:r[0],model:(s=r[3])==null?void 0:s.id,messages:Jt(r[2],r[0]),onAdd:r[22]};return e=new La({props:l}),r[23](e),{c(){X(e.$$.fragment)},l(n){$(e.$$.fragment,n)},m(n,i){x(e,n,i),t=!0},p(n,i){var a;const o={};i&1&&(o.id=n[0]),i&8&&(o.model=(a=n[3])==null?void 0:a.id),i&5&&(o.messages=Jt(n[2],n[0])),i&2048&&(o.onAdd=n[22]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){r[23](null),ee(e,n)}}}function Aa(r){let e,t,l,s,n;t=new Nt({props:{id:r[0],content:r[1],model:r[3],save:r[5],preview:r[6],sourceIds:(r[4]??[]).reduce(r[18],[]),onSourceClick:r[9],onTaskClick:r[10],onSave:r[8],onUpdate:r[19],onPreview:r[20]}});let i=r[7]&&r[3]&&ds(r);return{c(){e=E("div"),X(t.$$.fragment),l=A(),i&&i.c(),s=de()},l(o){e=M(o,"DIV",{});var a=k(e);$(t.$$.fragment,a),a.forEach(m),l=j(o),i&&i.l(o),s=de()},m(o,a){V(o,e,a),x(t,e,null),r[21](e),V(o,l,a),i&&i.m(o,a),V(o,s,a),n=!0},p(o,[a]){const f={};a&1&&(f.id=o[0]),a&2&&(f.content=o[1]),a&8&&(f.model=o[3]),a&32&&(f.save=o[5]),a&64&&(f.preview=o[6]),a&24&&(f.sourceIds=(o[4]??[]).reduce(o[18],[])),a&512&&(f.onSourceClick=o[9]),a&1024&&(f.onTaskClick=o[10]),a&256&&(f.onSave=o[8]),a&114688&&(f.onUpdate=o[19]),t.$set(f),o[7]&&o[3]?i?(i.p(o,a),a&136&&b(i,1)):(i=ds(o),i.c(),b(i,1),i.m(s.parentNode,s)):i&&(le(),D(i,1,1,()=>{i=null}),se())},i(o){n||(b(t.$$.fragment,o),b(i),n=!0)},o(o){D(t.$$.fragment,o),D(i),n=!1},d(o){o&&(m(e),m(l),m(s)),ee(t),r[21](null),i&&i.d(o)}}}function ja(r,e,t){let l,s,n;Me(r,Hr,H=>t(14,l=H)),Me(r,gt,H=>t(15,s=H)),Me(r,Bn,H=>t(16,n=H)),Ge("i18n");let{id:i}=e,{content:o}=e,{history:a}=e,{model:f=null}=e,{sources:u=null}=e,{save:c=!1}=e,{preview:g=!1}=e,{floatingButtons:h=!0}=e,{onSave:p=()=>{}}=e,{onSourceClick:w=()=>{}}=e,{onTaskClick:v=()=>{}}=e,{onAddMessages:y=()=>{}}=e,N,O;const P=H=>{const re=document.getElementById(`floating-buttons-${i}`);if(!(N!=null&&N.contains(H.target))&&!(re!=null&&re.contains(H.target))){R();return}setTimeout(async()=>{if(await Ce(),!(N!=null&&N.contains(H.target)))return;let Q=window.getSelection();if(Q.toString().trim().length>0){const ge=Q.getRangeAt(0).getBoundingClientRect(),he=N.getBoundingClientRect(),ye=ge.bottom-he.top,Z=ge.left-he.left;if(re){re.style.display="block";const oe=he.width-Z;let pe=l?window.innerWidth/2:window.innerWidth/3;if(oe<pe){const ae=he.right-ge.right;re.style.right=`${ae}px`,re.style.left="auto"}else re.style.left=`${Z}px`,re.style.right="auto";re.style.top=`${ye+5}px`}}else R()},0)},R=()=>{const H=document.getElementById(`floating-buttons-${i}`);H&&(H.style.display="none"),O&&typeof(O==null?void 0:O.closeHandler)=="function"&&(O==null||O.closeHandler())},I=H=>{H.key==="Escape"&&R()};kt(()=>{h&&(N==null||N.addEventListener("mouseup",P),document.addEventListener("mouseup",P),document.addEventListener("keydown",I))}),Nn(()=>{h&&(N==null||N.removeEventListener("mouseup",P),document.removeEventListener("mouseup",P),document.removeEventListener("keydown",I))});const C=(H,re)=>{let Q=[];return re.document.forEach((ie,ge)=>{var Z,oe,pe,ae,ue;if(((pe=(oe=(Z=f==null?void 0:f.info)==null?void 0:Z.meta)==null?void 0:oe.capabilities)==null?void 0:pe.citations)==!1)return Q.push("N/A"),Q;const he=(ae=re.metadata)==null?void 0:ae[ge],ye=(he==null?void 0:he.source)??"N/A";return he!=null&&he.name?(Q.push(he.name),Q):(ye.startsWith("http://")||ye.startsWith("https://")?Q.push(ye):Q.push(((ue=re==null?void 0:re.source)==null?void 0:ue.name)??ye),Q)}),H=[...H,...Q],H.filter((ie,ge)=>H.indexOf(ie)===ge)},B=H=>{const{lang:re,text:Q}=H;((s==null?void 0:s.detectArtifacts)??!0)&&(["html","svg"].includes(re)||re==="xml"&&Q.includes("svg"))&&!l&&n&&(gl.set(!0),_l.set(!0))},S=async H=>{console.log("Preview",H),await Sn.set(H),await _l.set(!0),await gl.set(!0),await On.set(!1)};function T(H){ze[H?"unshift":"push"](()=>{N=H,t(12,N)})}const z=({modelId:H,parentId:re,messages:Q})=>{console.log(H,re,Q),y({modelId:H,parentId:re,messages:Q}),R()};function J(H){ze[H?"unshift":"push"](()=>{O=H,t(13,O)})}return r.$$set=H=>{"id"in H&&t(0,i=H.id),"content"in H&&t(1,o=H.content),"history"in H&&t(2,a=H.history),"model"in H&&t(3,f=H.model),"sources"in H&&t(4,u=H.sources),"save"in H&&t(5,c=H.save),"preview"in H&&t(6,g=H.preview),"floatingButtons"in H&&t(7,h=H.floatingButtons),"onSave"in H&&t(8,p=H.onSave),"onSourceClick"in H&&t(9,w=H.onSourceClick),"onTaskClick"in H&&t(10,v=H.onTaskClick),"onAddMessages"in H&&t(11,y=H.onAddMessages)},[i,o,a,f,u,c,g,h,p,w,v,y,N,O,l,s,n,R,C,B,S,T,z,J]}class Ha extends Pe{constructor(e){super(),Le(this,e,ja,Aa,Be,{id:0,content:1,history:2,model:3,sources:4,save:5,preview:6,floatingButtons:7,onSave:8,onSourceClick:9,onTaskClick:10,onAddMessages:11})}}function za(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=k(e);t=we(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M2.75 2a.75.75 0 0 1 .75.75v6.5h7.94l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H2.75A.75.75 0 0 1 2 10V2.75A.75.75 0 0 1 2.75 2Z"),d(t,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16"),d(e,"fill","currentColor"),d(e,"class",r[0])},m(l,s){V(l,e,s),_(e,t)},p(l,[s]){s&1&&d(e,"class",l[0])},i:Ee,o:Ee,d(l){l&&m(e)}}}function Ua(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,s=n.strokeWidth)},[l,s]}class Wa extends Pe{constructor(e){super(),Le(this,e,Ua,za,Be,{className:0,strokeWidth:1})}}function hs(r,e,t){const l=r.slice();return l[5]=e[t],l[7]=t,l}function ms(r){let e;return{c(){e=E("hr"),this.h()},l(t){e=M(t,"HR",{class:!0}),this.h()},h(){d(e,"class","border-gray-100 dark:border-gray-850")},m(t,l){V(t,e,l)},d(t){t&&m(e)}}}function gs(r,e){let t,l,s,n,i=e[5]+"",o,a,f,u,c,g,h,p;l=new Wa({props:{className:"size-3.5"}});function w(){return e[4](e[5])}let v=e[7]<e[0].length-1&&ms();return{key:r,first:null,c(){t=E("button"),X(l.$$.fragment),s=A(),n=E("div"),o=W(i),u=A(),v&&v.c(),c=de(),this.h()},l(y){t=M(y,"BUTTON",{class:!0,title:!0,"aria-label":!0});var N=k(t);$(l.$$.fragment,N),s=j(N),n=M(N,"DIV",{class:!0});var O=k(n);o=q(O,i),O.forEach(m),N.forEach(m),u=j(y),v&&v.l(y),c=de(),this.h()},h(){d(n,"class","line-clamp-1"),d(t,"class","mr-2 py-1.5 bg-transparent text-left text-sm flex items-center gap-2 px-1.5 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition"),d(t,"title",a=e[5]),d(t,"aria-label",f=e[5]),this.first=t},m(y,N){V(y,t,N),x(l,t,null),_(t,s),_(t,n),_(n,o),V(y,u,N),v&&v.m(y,N),V(y,c,N),g=!0,h||(p=me(t,"click",w),h=!0)},p(y,N){e=y,(!g||N&1)&&i!==(i=e[5]+"")&&K(o,i),(!g||N&1&&a!==(a=e[5]))&&d(t,"title",a),(!g||N&1&&f!==(f=e[5]))&&d(t,"aria-label",f),e[7]<e[0].length-1?v||(v=ms(),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},i(y){g||(b(l.$$.fragment,y),g=!0)},o(y){D(l.$$.fragment,y),g=!1},d(y){y&&(m(t),m(u),m(c)),ee(l),v&&v.d(y),h=!1,p()}}}function qa(r){let e,t,l=r[2].t("Follow up")+"",s,n,i,o=[],a=new Map,f,u=Ne(r[0]);const c=g=>g[7];for(let g=0;g<u.length;g+=1){let h=hs(r,u,g),p=c(h);a.set(p,o[g]=gs(p,h))}return{c(){e=E("div"),t=E("div"),s=W(l),n=A(),i=E("div");for(let g=0;g<o.length;g+=1)o[g].c();this.h()},l(g){e=M(g,"DIV",{class:!0});var h=k(e);t=M(h,"DIV",{class:!0});var p=k(t);s=q(p,l),p.forEach(m),n=j(h),i=M(h,"DIV",{class:!0});var w=k(i);for(let v=0;v<o.length;v+=1)o[v].l(w);w.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","text-sm font-medium"),d(i,"class","flex flex-col text-left gap-1 mt-1.5"),d(e,"class","mt-4")},m(g,h){V(g,e,h),_(e,t),_(t,s),_(e,n),_(e,i);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(i,null);f=!0},p(g,[h]){(!f||h&4)&&l!==(l=g[2].t("Follow up")+"")&&K(s,l),h&3&&(u=Ne(g[0]),le(),o=Ht(o,h,c,1,g,u,a,i,Gt,gs,null,hs),se())},i(g){if(!f){for(let h=0;h<u.length;h+=1)b(o[h]);f=!0}},o(g){for(let h=0;h<o.length;h+=1)D(o[h]);f=!1},d(g){g&&m(e);for(let h=0;h<o.length;h+=1)o[h].d()}}}function Fa(r,e,t){let l;const s=Ge("i18n");Me(r,s,a=>t(2,l=a));let{followUps:n=[]}=e,{onClick:i=()=>{}}=e;const o=a=>i(a);return r.$$set=a=>{"followUps"in a&&t(0,n=a.followUps),"onClick"in a&&t(1,i=a.onClick)},[n,i,l,s,o]}class Ja extends Pe{constructor(e){super(),Le(this,e,Fa,qa,Be,{followUps:0,onClick:1})}}function _s(r,e,t){const l=r.slice();return l[89]=e[t],l}function ps(r,e,t){const l=r.slice();return l[92]=e[t],l}function Wt(r){var l,s,n;const e=r.slice(),t=(((l=e[13])==null?void 0:l.statusHistory)??[...(s=e[13])!=null&&s.status?[(n=e[13])==null?void 0:n.status]:[]]).at(-1);return e[95]=t,e}function Ga(r){var s;let e,t=(((s=r[17])==null?void 0:s.name)??r[13].model)+"",l;return{c(){e=E("span"),l=W(t),this.h()},l(n){e=M(n,"SPAN",{class:!0});var i=k(e);l=q(i,t),i.forEach(m),this.h()},h(){d(e,"class","line-clamp-1 text-black dark:text-white")},m(n,i){V(n,e,i),_(e,l)},p(n,i){var o;i[0]&139264&&t!==(t=(((o=n[17])==null?void 0:o.name)??n[13].model)+"")&&K(l,t)},d(n){n&&m(e)}}}function bs(r){let e,t,l;return t=new Oe({props:{content:ot(r[13].timestamp*1e3).format("LLLL"),$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=E("div"),X(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){d(e,"class","self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]")},m(s,n){V(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&8192&&(i.content=ot(s[13].timestamp*1e3).format("LLLL")),n[0]&8192|n[3]&8&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){D(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function Ka(r){let e,t=At(r[13].timestamp*1e3)+"",l;return{c(){e=E("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,n){V(s,e,n),_(e,l)},p(s,n){n[0]&8192&&t!==(t=At(s[13].timestamp*1e3)+"")&&K(l,t)},d(s){s&&m(e)}}}function Za(r){var i;let e,t,l,s;e=new Oe({props:{content:((i=r[17])==null?void 0:i.name)??r[13].model,placement:"top-start",$$slots:{default:[Ga]},$$scope:{ctx:r}}});let n=r[13].timestamp&&bs(r);return{c(){X(e.$$.fragment),t=A(),n&&n.c(),l=de()},l(o){$(e.$$.fragment,o),t=j(o),n&&n.l(o),l=de()},m(o,a){x(e,o,a),V(o,t,a),n&&n.m(o,a),V(o,l,a),s=!0},p(o,a){var u;const f={};a[0]&139264&&(f.content=((u=o[17])==null?void 0:u.name)??o[13].model),a[0]&139264|a[3]&8&&(f.$$scope={dirty:a,ctx:o}),e.$set(f),o[13].timestamp?n?(n.p(o,a),a[0]&8192&&b(n,1)):(n=bs(o),n.c(),b(n,1),n.m(l.parentNode,l)):n&&(le(),D(n,1,1,()=>{n=null}),se())},i(o){s||(b(e.$$.fragment,o),b(n),s=!0)},o(o){D(e.$$.fragment,o),D(n),s=!1},d(o){o&&(m(t),m(l)),ee(e,o),n&&n.d(o)}}}function vs(r){var s;let e,t,l=!((s=r[95])!=null&&s.hidden)&&ks(r);return{c(){l&&l.c(),e=de()},l(n){l&&l.l(n),e=de()},m(n,i){l&&l.m(n,i),V(n,e,i),t=!0},p(n,i){var o;(o=n[95])!=null&&o.hidden?l&&(le(),D(l,1,1,()=>{l=null}),se()):l?(l.p(n,i),i[0]&8192&&b(l,1)):(l=ks(n),l.c(),b(l,1),l.m(e.parentNode,e))},i(n){t||(b(l),t=!0)},o(n){D(l),t=!1},d(n){n&&m(e),l&&l.d(n)}}}function ks(r){let e,t,l,s;const n=[Xa,Ya,Qa],i=[];function o(a,f){var u,c,g;return((u=a[95])==null?void 0:u.action)==="web_search"&&((c=a[95])!=null&&c.urls)?0:((g=a[95])==null?void 0:g.action)==="knowledge_search"?1:2}return t=o(r),l=i[t]=n[t](r),{c(){e=E("div"),l.c(),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);l.l(f),f.forEach(m),this.h()},h(){d(e,"class","status-description flex items-center gap-2 py-0.5")},m(a,f){V(a,e,f),i[t].m(e,null),s=!0},p(a,f){let u=t;t=o(a),t===u?i[t].p(a,f):(le(),D(i[u],1,1,()=>{i[u]=null}),se(),l=i[t],l?l.p(a,f):(l=i[t]=n[t](a),l.c()),b(l,1),l.m(e,null))},i(a){s||(b(l),s=!0)},o(a){D(l),s=!1},d(a){a&&m(e),i[t].d()}}}function Qa(r){let e,t,l,s;function n(a,f){var u,c,g,h;return f[0]&8192&&(l=null),l==null&&(l=!!((u=a[95])!=null&&u.description.includes("{{searchQuery}}"))),l?lo:((c=a[95])==null?void 0:c.description)==="No search query generated"?to:((g=a[95])==null?void 0:g.description)==="Generating search query"?eo:((h=a[95])==null?void 0:h.description)==="Searching the web"?xa:$a}let i=n(r,[-1,-1,-1,-1]),o=i(r);return{c(){e=E("div"),t=E("div"),o.c(),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);t=M(f,"DIV",{class:!0});var u=k(t);o.l(u),u.forEach(m),f.forEach(m),this.h()},h(){var a;d(t,"class",s=(((a=r[95])==null?void 0:a.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(a,f){V(a,e,f),_(e,t),o.m(t,null)},p(a,f){var u;i===(i=n(a,f))&&o?o.p(a,f):(o.d(1),o=i(a),o&&(o.c(),o.m(t,null))),f[0]&8192&&s!==(s=(((u=a[95])==null?void 0:u.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",s)},i:Ee,o:Ee,d(a){a&&m(e),o.d()}}}function Ya(r){let e,t,l=r[28].t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:r[95].query})+"",s,n;return{c(){e=E("div"),t=E("div"),s=W(l),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);t=M(o,"DIV",{class:!0});var a=k(t);s=q(a,l),a.forEach(m),o.forEach(m),this.h()},h(){var i;d(t,"class",n=(((i=r[95])==null?void 0:i.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(i,o){V(i,e,o),_(e,t),_(t,s)},p(i,o){var a;o[0]&268443648&&l!==(l=i[28].t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:i[95].query})+"")&&K(s,l),o[0]&8192&&n!==(n=(((a=i[95])==null?void 0:a.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",n)},i:Ee,o:Ee,d(i){i&&m(e)}}}function Xa(r){let e,t;return e=new Bi({props:{status:r[95],$$slots:{default:[ao]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.status=l[95]),s[0]&268443648|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function $a(r){var l;let e=((l=r[95])==null?void 0:l.description)+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){V(s,t,n)},p(s,n){var i;n[0]&8192&&e!==(e=((i=s[95])==null?void 0:i.description)+"")&&K(t,e)},d(s){s&&m(t)}}}function xa(r){let e=r[28].t("Searching the web...")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("Searching the web...")+"")&&K(t,e)},d(l){l&&m(t)}}}function eo(r){let e=r[28].t("Generating search query")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("Generating search query")+"")&&K(t,e)},d(l){l&&m(t)}}}function to(r){let e=r[28].t("No search query generated")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("No search query generated")+"")&&K(t,e)},d(l){l&&m(t)}}}function lo(r){var l,s;let e=r[28].t((l=r[95])==null?void 0:l.description,{searchQuery:(s=r[95])==null?void 0:s.query})+"",t;return{c(){t=W(e)},l(n){t=q(n,e)},m(n,i){V(n,t,i)},p(n,i){var o,a;i[0]&268443648&&e!==(e=n[28].t((o=n[95])==null?void 0:o.description,{searchQuery:(a=n[95])==null?void 0:a.query})+"")&&K(t,e)},d(n){n&&m(t)}}}function so(r){var l;let e=((l=r[95])==null?void 0:l.description)+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){V(s,t,n)},p(s,n){var i;n[0]&8192&&e!==(e=((i=s[95])==null?void 0:i.description)+"")&&K(t,e)},d(s){s&&m(t)}}}function ro(r){let e=r[28].t("Generating search query")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("Generating search query")+"")&&K(t,e)},d(l){l&&m(t)}}}function no(r){let e=r[28].t("No search query generated")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("No search query generated")+"")&&K(t,e)},d(l){l&&m(t)}}}function io(r){var l,s;let e=r[28].t((l=r[95])==null?void 0:l.description,{count:(s=r[95])==null?void 0:s.urls.length})+"",t;return{c(){t=W(e)},l(n){t=q(n,e)},m(n,i){V(n,t,i)},p(n,i){var o,a;i[0]&268443648&&e!==(e=n[28].t((o=n[95])==null?void 0:o.description,{count:(a=n[95])==null?void 0:a.urls.length})+"")&&K(t,e)},d(n){n&&m(t)}}}function ao(r){let e,t,l,s;function n(a,f){var u,c,g;return f[0]&8192&&(l=null),l==null&&(l=!!((u=a[95])!=null&&u.description.includes("{{count}}"))),l?io:((c=a[95])==null?void 0:c.description)==="No search query generated"?no:((g=a[95])==null?void 0:g.description)==="Generating search query"?ro:so}let i=n(r,[-1,-1,-1,-1]),o=i(r);return{c(){e=E("div"),t=E("div"),o.c(),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);t=M(f,"DIV",{class:!0});var u=k(t);o.l(u),u.forEach(m),f.forEach(m),this.h()},h(){var a;d(t,"class",s=(((a=r[95])==null?void 0:a.done)===!1?"shimmer":"")+" text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(a,f){V(a,e,f),_(e,t),o.m(t,null)},p(a,f){var u;i===(i=n(a,f))&&o?o.p(a,f):(o.d(1),o=i(a),o&&(o.c(),o.m(t,null))),f[0]&8192&&s!==(s=(((u=a[95])==null?void 0:u.done)===!1?"shimmer":"")+" text-base line-clamp-1 text-wrap")&&d(t,"class",s)},d(a){a&&m(e),o.d()}}}function ws(r){let e,t,l=Ne(r[13].files),s=[];for(let i=0;i<l.length;i+=1)s[i]=ys(ps(r,l,i));const n=i=>D(s[i],1,1,()=>{s[i]=null});return{c(){e=E("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","my-1 w-full flex overflow-x-auto gap-2 flex-wrap")},m(i,o){V(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,o){if(o[0]&8192){l=Ne(i[13].files);let a;for(a=0;a<l.length;a+=1){const f=ps(i,l,a);s[a]?(s[a].p(f,o),b(s[a],1)):(s[a]=ys(f),s[a].c(),b(s[a],1),s[a].m(e,null))}for(le(),a=l.length;a<s.length;a+=1)n(a);se()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)b(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)D(s[o]);t=!1},d(i){i&&m(e),Je(s,i)}}}function oo(r){var l;let e,t;return e=new $t({props:{item:r[92],url:r[92].url,name:r[92].name,type:r[92].type,size:(l=r[92])==null?void 0:l.size,colorClassName:"bg-white dark:bg-gray-850 "}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n[0]&8192&&(i.item=s[92]),n[0]&8192&&(i.url=s[92].url),n[0]&8192&&(i.name=s[92].name),n[0]&8192&&(i.type=s[92].type),n[0]&8192&&(i.size=(o=s[92])==null?void 0:o.size),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function fo(r){let e,t;return e=new Qt({props:{src:r[92].url,alt:r[13].content}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.src=l[92].url),s[0]&8192&&(n.alt=l[13].content),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ys(r){let e,t,l,s,n;const i=[fo,oo],o=[];function a(f,u){return f[92].type==="image"?0:1}return t=a(r),l=o[t]=i[t](r),{c(){e=E("div"),l.c(),s=A()},l(f){e=M(f,"DIV",{});var u=k(e);l.l(u),s=j(u),u.forEach(m)},m(f,u){V(f,e,u),o[t].m(e,null),_(e,s),n=!0},p(f,u){let c=t;t=a(f),t===c?o[t].p(f,u):(le(),D(o[c],1,1,()=>{o[c]=null}),se(),l=o[t],l?l.p(f,u):(l=o[t]=i[t](f),l.c()),b(l,1),l.m(e,s))},i(f){n||(b(l),n=!0)},o(f){D(l),n=!1},d(f){f&&m(e),o[t].d()}}}function uo(r){var p,w,v,y,N,O,P;let e,t,l,s,n,i,o;const a=[mo,ho],f=[];function u(R,I){var C,B,S;return R[13].content===""&&!R[13].error&&(((C=R[13])==null?void 0:C.statusHistory)??[...(B=R[13])!=null&&B.status?[(S=R[13])==null?void 0:S.status]:[]]).length===0?0:R[13].content&&R[13].error!==!0?1:-1}~(t=u(r))&&(l=f[t]=a[t](r));let c=((p=r[13])==null?void 0:p.error)&&Is(r),g=(((w=r[13])==null?void 0:w.sources)||((v=r[13])==null?void 0:v.citations))&&(((P=(O=(N=(y=r[17])==null?void 0:y.info)==null?void 0:N.meta)==null?void 0:O.capabilities)==null?void 0:P.citations)??!0)&&Es(r),h=r[13].code_executions&&Ms(r);return{c(){e=E("div"),l&&l.c(),s=A(),c&&c.c(),n=A(),g&&g.c(),i=A(),h&&h.c(),this.h()},l(R){e=M(R,"DIV",{class:!0,id:!0});var I=k(e);l&&l.l(I),s=j(I),c&&c.l(I),n=j(I),g&&g.l(I),i=j(I),h&&h.l(I),I.forEach(m),this.h()},h(){d(e,"class","w-full flex flex-col relative"),d(e,"id","response-content-container")},m(R,I){V(R,e,I),~t&&f[t].m(e,null),_(e,s),c&&c.m(e,null),_(e,n),g&&g.m(e,null),_(e,i),h&&h.m(e,null),o=!0},p(R,I){var B,S,T,z,J,H,re;let C=t;t=u(R),t===C?~t&&f[t].p(R,I):(l&&(le(),D(f[C],1,1,()=>{f[C]=null}),se()),~t?(l=f[t],l?l.p(R,I):(l=f[t]=a[t](R),l.c()),b(l,1),l.m(e,s)):l=null),(B=R[13])!=null&&B.error?c?(c.p(R,I),I[0]&8192&&b(c,1)):(c=Is(R),c.c(),b(c,1),c.m(e,n)):c&&(le(),D(c,1,1,()=>{c=null}),se()),((S=R[13])!=null&&S.sources||(T=R[13])!=null&&T.citations)&&(((re=(H=(J=(z=R[17])==null?void 0:z.info)==null?void 0:J.meta)==null?void 0:H.capabilities)==null?void 0:re.citations)??!0)?g?(g.p(R,I),I[0]&139264&&b(g,1)):(g=Es(R),g.c(),b(g,1),g.m(e,i)):g&&(le(),D(g,1,1,()=>{g=null}),se()),R[13].code_executions?h?(h.p(R,I),I[0]&8192&&b(h,1)):(h=Ms(R),h.c(),b(h,1),h.m(e,null)):h&&(le(),D(h,1,1,()=>{h=null}),se())},i(R){o||(b(l),b(c),b(g),b(h),o=!0)},o(R){D(l),D(c),D(g),D(h),o=!1},d(R){R&&m(e),~t&&f[t].d(),c&&c.d(),g&&g.d(),h&&h.d()}}}function co(r){let e,t,l,s,n,i,o,a=r[28].t("Save As Copy")+"",f,u,c,g,h=r[28].t("Cancel")+"",p,w,v,y=r[28].t("Save")+"",N,O,P;return{c(){e=E("div"),t=E("textarea"),s=A(),n=E("div"),i=E("div"),o=E("button"),f=W(a),u=A(),c=E("div"),g=E("button"),p=W(h),w=A(),v=E("button"),N=W(y),this.h()},l(R){e=M(R,"DIV",{class:!0});var I=k(e);t=M(I,"TEXTAREA",{id:!0,class:!0}),k(t).forEach(m),s=j(I),n=M(I,"DIV",{class:!0});var C=k(n);i=M(C,"DIV",{});var B=k(i);o=M(B,"BUTTON",{id:!0,class:!0});var S=k(o);f=q(S,a),S.forEach(m),B.forEach(m),u=j(C),c=M(C,"DIV",{class:!0});var T=k(c);g=M(T,"BUTTON",{id:!0,class:!0});var z=k(g);p=q(z,h),z.forEach(m),w=j(T),v=M(T,"BUTTON",{id:!0,class:!0});var J=k(v);N=q(J,y),J.forEach(m),T.forEach(m),C.forEach(m),I.forEach(m),this.h()},h(){d(t,"id",l="message-edit-"+r[13].id),d(t,"class","bg-transparent outline-hidden w-full resize-none"),d(o,"id","save-new-message-button"),d(o,"class","px-4 py-2 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl"),d(g,"id","close-edit-message-button"),d(g,"class","px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl"),d(v,"id","confirm-edit-message-button"),d(v,"class","px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl"),d(c,"class","flex space-x-1.5"),d(n,"class","mt-2 mb-1 flex justify-between text-sm font-medium"),d(e,"class","w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2")},m(R,I){V(R,e,I),_(e,t),r[51](t),at(t,r[18]),_(e,s),_(e,n),_(n,i),_(i,o),_(o,f),_(n,u),_(n,c),_(c,g),_(g,p),_(c,w),_(c,v),_(v,N),O||(P=[me(t,"input",r[52]),me(t,"input",Lo),me(t,"keydown",r[53]),me(o,"click",r[54]),me(g,"click",r[55]),me(v,"click",r[56])],O=!0)},p(R,I){I[0]&8192&&l!==(l="message-edit-"+R[13].id)&&d(t,"id",l),I[0]&262144&&at(t,R[18]),I[0]&268435456&&a!==(a=R[28].t("Save As Copy")+"")&&K(f,a),I[0]&268435456&&h!==(h=R[28].t("Cancel")+"")&&K(p,h),I[0]&268435456&&y!==(y=R[28].t("Save")+"")&&K(N,y)},i:Ee,o:Ee,d(R){R&&m(e),r[51](null),O=!1,Xe(P)}}}function ho(r){var l;let e,t;return e=new Ha({props:{id:r[13].id,history:r[0],content:r[13].content,sources:r[13].sources,floatingButtons:((l=r[13])==null?void 0:l.done)&&!r[12],save:!r[12],preview:!r[12],model:r[17],onTaskClick:r[57],onSourceClick:r[58],onAddMessages:r[59],onSave:r[60]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n[0]&8192&&(i.id=s[13].id),n[0]&1&&(i.history=s[0]),n[0]&8192&&(i.content=s[13].content),n[0]&8192&&(i.sources=s[13].sources),n[0]&12288&&(i.floatingButtons=((o=s[13])==null?void 0:o.done)&&!s[12]),n[0]&4096&&(i.save=!s[12]),n[0]&4096&&(i.preview=!s[12]),n[0]&131072&&(i.model=s[17]),n[0]&8192&&(i.onSourceClick=s[58]),n[0]&1024&&(i.onAddMessages=s[59]),n[0]&8225&&(i.onSave=s[60]),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function mo(r){let e,t;return e=new xt({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Is(r){var l,s;let e,t;return e=new Ri({props:{content:((s=(l=r[13])==null?void 0:l.error)==null?void 0:s.content)??r[13].content}}),{c(){X(e.$$.fragment)},l(n){$(e.$$.fragment,n)},m(n,i){x(e,n,i),t=!0},p(n,i){var a,f;const o={};i[0]&8192&&(o.content=((f=(a=n[13])==null?void 0:a.error)==null?void 0:f.content)??n[13].content),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Es(r){var l,s,n;let e,t;return e=new aa({props:{id:(l=r[13])==null?void 0:l.id,sources:((s=r[13])==null?void 0:s.sources)??((n=r[13])==null?void 0:n.citations)}}),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),t=!0},p(i,o){var f,u,c;const a={};o[0]&8192&&(a.id=(f=i[13])==null?void 0:f.id),o[0]&8192&&(a.sources=((u=i[13])==null?void 0:u.sources)??((c=i[13])==null?void 0:c.citations)),e.$set(a)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){D(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function Ms(r){let e,t;return e=new Ea({props:{codeExecutions:r[13].code_executions}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.codeExecutions=l[13].code_executions),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ns(r){var f;let e,t,l,s,n,i=(r[13].done||r[1].length>1)&&Ds(r),o=r[13].done&&r[24]&&Us(r),a=r[11]&&r[13].done&&!r[12]&&(((f=r[13])==null?void 0:f.followUps)??[]).length>0&&Ws(r);return{c(){e=E("div"),i&&i.c(),t=A(),o&&o.c(),l=A(),a&&a.c(),s=de(),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=k(e);i&&i.l(c),c.forEach(m),t=j(u),o&&o.l(u),l=j(u),a&&a.l(u),s=de(),this.h()},h(){d(e,"class","flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500 mt-0.5 svelte-1u5gq5j")},m(u,c){V(u,e,c),i&&i.m(e,null),r[77](e),V(u,t,c),o&&o.m(u,c),V(u,l,c),a&&a.m(u,c),V(u,s,c),n=!0},p(u,c){var g;u[13].done||u[1].length>1?i?(i.p(u,c),c[0]&8194&&b(i,1)):(i=Ds(u),i.c(),b(i,1),i.m(e,null)):i&&(le(),D(i,1,1,()=>{i=null}),se()),u[13].done&&u[24]?o?(o.p(u,c),c[0]&16785408&&b(o,1)):(o=Us(u),o.c(),b(o,1),o.m(l.parentNode,l)):o&&(le(),D(o,1,1,()=>{o=null}),se()),u[11]&&u[13].done&&!u[12]&&(((g=u[13])==null?void 0:g.followUps)??[]).length>0?a?(a.p(u,c),c[0]&14336&&b(a,1)):(a=Ws(u),a.c(),b(a,1),a.m(s.parentNode,s)):a&&(le(),D(a,1,1,()=>{a=null}),se())},i(u){n||(b(i),b(o),b(a),n=!0)},o(u){D(i),D(o),D(a),n=!1},d(u){u&&(m(e),m(t),m(l),m(s)),i&&i.d(),r[77](null),o&&o.d(u),a&&a.d(u)}}}function Ds(r){let e,t,l,s=r[1].length>1&&Vs(r),n=r[13].done&&Cs(r);return{c(){s&&s.c(),e=A(),n&&n.c(),t=de()},l(i){s&&s.l(i),e=j(i),n&&n.l(i),t=de()},m(i,o){s&&s.m(i,o),V(i,e,o),n&&n.m(i,o),V(i,t,o),l=!0},p(i,o){i[1].length>1?s?s.p(i,o):(s=Vs(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[13].done?n?(n.p(i,o),o[0]&8192&&b(n,1)):(n=Cs(i),n.c(),b(n,1),n.m(t.parentNode,t)):n&&(le(),D(n,1,1,()=>{n=null}),se())},i(i){l||(b(n),l=!0)},o(i){D(n),l=!1},d(i){i&&(m(e),m(t)),s&&s.d(i),n&&n.d(i)}}}function Vs(r){let e,t,l,s,n,i,o,a,f,u,c,g,h;function p(y,N){return y[20]?_o:go}let w=p(r),v=w(r);return{c(){e=E("div"),t=E("button"),l=ke("svg"),s=ke("path"),i=A(),v.c(),o=A(),a=E("button"),f=ke("svg"),u=ke("path"),this.h()},l(y){e=M(y,"DIV",{class:!0,dir:!0});var N=k(e);t=M(N,"BUTTON",{"aria-label":!0,class:!0});var O=k(t);l=we(O,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var P=k(l);s=we(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(s).forEach(m),P.forEach(m),O.forEach(m),i=j(N),v.l(N),o=j(N),a=M(N,"BUTTON",{class:!0,"aria-label":!0});var R=k(a);f=we(R,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var I=k(f);u=we(I,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(u).forEach(m),I.forEach(m),R.forEach(m),N.forEach(m),this.h()},h(){d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(s,"d","M15.75 19.5 8.25 12l7.5-7.5"),d(l,"aria-hidden","true"),d(l,"xmlns","http://www.w3.org/2000/svg"),d(l,"fill","none"),d(l,"viewBox","0 0 24 24"),d(l,"stroke","currentColor"),d(l,"stroke-width","2.5"),d(l,"class","size-3.5"),d(t,"aria-label",n=r[28].t("Previous message")),d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(u,"stroke-linecap","round"),d(u,"stroke-linejoin","round"),d(u,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),d(f,"xmlns","http://www.w3.org/2000/svg"),d(f,"fill","none"),d(f,"aria-hidden","true"),d(f,"viewBox","0 0 24 24"),d(f,"stroke","currentColor"),d(f,"stroke-width","2.5"),d(f,"class","size-3.5"),d(a,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(a,"aria-label",c=r[28].t("Next message")),d(e,"class","flex self-center min-w-fit"),d(e,"dir","ltr")},m(y,N){V(y,e,N),_(e,t),_(t,l),_(l,s),_(e,i),v.m(e,null),_(e,o),_(e,a),_(a,f),_(f,u),g||(h=[me(t,"click",r[61]),me(a,"click",r[65])],g=!0)},p(y,N){N[0]&268435456&&n!==(n=y[28].t("Previous message"))&&d(t,"aria-label",n),w===(w=p(y))&&v?v.p(y,N):(v.d(1),v=w(y),v&&(v.c(),v.m(e,o))),N[0]&268435456&&c!==(c=y[28].t("Next message"))&&d(a,"aria-label",c)},d(y){y&&m(e),v.d(),g=!1,Xe(h)}}}function go(r){let e,t=r[1].indexOf(r[13].id)+1+"",l,s,n=r[1].length+"",i,o,a;return{c(){e=E("div"),l=W(t),s=W("/"),i=W(n),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l=q(u,t),s=q(u,"/"),i=q(u,n),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){V(f,e,u),_(e,l),_(e,s),_(e,i),o||(a=me(e,"dblclick",r[64]),o=!0)},p(f,u){u[0]&8194&&t!==(t=f[1].indexOf(f[13].id)+1+"")&&K(l,t),u[0]&2&&n!==(n=f[1].length+"")&&K(i,n)},d(f){f&&m(e),o=!1,a()}}}function _o(r){let e,t,l,s,n,i,o=r[1].length+"",a,f,u;return{c(){e=E("div"),t=E("input"),i=W("/"),a=W(o),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),i=q(g,"/"),a=q(g,o),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+r[13].id),d(t,"type","number"),t.value=s=r[1].indexOf(r[13].id)+1,d(t,"min","1"),d(t,"max",n=r[1].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){V(c,e,g),_(e,t),_(e,i),_(e,a),f||(u=[me(t,"focus",Ao),me(t,"blur",r[62]),me(t,"keydown",r[63])],f=!0)},p(c,g){g[0]&8192&&l!==(l="message-index-input-"+c[13].id)&&d(t,"id",l),g[0]&8194&&s!==(s=c[1].indexOf(c[13].id)+1)&&t.value!==s&&(t.value=s),g[0]&2&&n!==(n=c[1].length)&&d(t,"max",n),g[0]&2&&o!==(o=c[1].length+"")&&K(a,o)},d(c){c&&m(e),f=!1,Xe(u)}}}function Cs(r){var p,w,v,y,N,O,P,R,I;let e,t,l,s,n,i,o,a,f=!r[12]&&Ts(r);t=new Oe({props:{content:r[28].t("Copy"),placement:"bottom",$$slots:{default:[bo]},$$scope:{ctx:r}}});let u=(((p=r[29])==null?void 0:p.role)==="admin"||(((y=(v=(w=r[29])==null?void 0:w.permissions)==null?void 0:v.chat)==null?void 0:y.tts)??!0))&&Ss(r),c=((N=r[27])==null?void 0:N.features.enable_image_generation)&&(((O=r[29])==null?void 0:O.role)==="admin"||((I=(R=(P=r[29])==null?void 0:P.permissions)==null?void 0:R.features)==null?void 0:I.image_generation))&&!r[12]&&Os(r),g=r[13].usage&&Rs(r),h=!r[12]&&Ps(r);return{c(){f&&f.c(),e=A(),X(t.$$.fragment),l=A(),u&&u.c(),s=A(),c&&c.c(),n=A(),g&&g.c(),i=A(),h&&h.c(),o=de()},l(C){f&&f.l(C),e=j(C),$(t.$$.fragment,C),l=j(C),u&&u.l(C),s=j(C),c&&c.l(C),n=j(C),g&&g.l(C),i=j(C),h&&h.l(C),o=de()},m(C,B){f&&f.m(C,B),V(C,e,B),x(t,C,B),V(C,l,B),u&&u.m(C,B),V(C,s,B),c&&c.m(C,B),V(C,n,B),g&&g.m(C,B),V(C,i,B),h&&h.m(C,B),V(C,o,B),a=!0},p(C,B){var T,z,J,H,re,Q,ie,ge,he;C[12]?f&&(le(),D(f,1,1,()=>{f=null}),se()):f?(f.p(C,B),B[0]&4096&&b(f,1)):(f=Ts(C),f.c(),b(f,1),f.m(e.parentNode,e));const S={};B[0]&268435456&&(S.content=C[28].t("Copy")),B[0]&268445696|B[3]&8&&(S.$$scope={dirty:B,ctx:C}),t.$set(S),((T=C[29])==null?void 0:T.role)==="admin"||(((H=(J=(z=C[29])==null?void 0:z.permissions)==null?void 0:J.chat)==null?void 0:H.tts)??!0)?u?(u.p(C,B),B[0]&536870912&&b(u,1)):(u=Ss(C),u.c(),b(u,1),u.m(s.parentNode,s)):u&&(le(),D(u,1,1,()=>{u=null}),se()),(re=C[27])!=null&&re.features.enable_image_generation&&(((Q=C[29])==null?void 0:Q.role)==="admin"||(he=(ge=(ie=C[29])==null?void 0:ie.permissions)==null?void 0:ge.features)!=null&&he.image_generation)&&!C[12]?c?(c.p(C,B),B[0]&671092736&&b(c,1)):(c=Os(C),c.c(),b(c,1),c.m(n.parentNode,n)):c&&(le(),D(c,1,1,()=>{c=null}),se()),C[13].usage?g?(g.p(C,B),B[0]&8192&&b(g,1)):(g=Rs(C),g.c(),b(g,1),g.m(i.parentNode,i)):g&&(le(),D(g,1,1,()=>{g=null}),se()),C[12]?h&&(le(),D(h,1,1,()=>{h=null}),se()):h?(h.p(C,B),B[0]&4096&&b(h,1)):(h=Ps(C),h.c(),b(h,1),h.m(o.parentNode,o))},i(C){a||(b(f),b(t.$$.fragment,C),b(u),b(c),b(g),b(h),a=!0)},o(C){D(f),D(t.$$.fragment,C),D(u),D(c),D(g),D(h),a=!1},d(C){C&&(m(e),m(l),m(s),m(n),m(i),m(o)),f&&f.d(C),ee(t,C),u&&u.d(C),c&&c.d(C),g&&g.d(C),h&&h.d(C)}}}function Ts(r){var s,n,i,o;let e,t,l=(((s=r[29])==null?void 0:s.role)==="user"?((o=(i=(n=r[29])==null?void 0:n.permissions)==null?void 0:i.chat)==null?void 0:o.edit)??!0:!0)&&Bs(r);return{c(){l&&l.c(),e=de()},l(a){l&&l.l(a),e=de()},m(a,f){l&&l.m(a,f),V(a,e,f),t=!0},p(a,f){var u,c,g,h;((u=a[29])==null?void 0:u.role)!=="user"||(((h=(g=(c=a[29])==null?void 0:c.permissions)==null?void 0:g.chat)==null?void 0:h.edit)??!0)?l?(l.p(a,f),f[0]&536870912&&b(l,1)):(l=Bs(a),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),D(l,1,1,()=>{l=null}),se())},i(a){t||(b(l),t=!0)},o(a){D(l),t=!1},d(a){a&&m(e),l&&l.d(a)}}}function Bs(r){let e,t;return e=new Oe({props:{content:r[28].t("Edit"),placement:"bottom",$$slots:{default:[po]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Edit")),s[0]&268437504|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function po(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=r[28].t("Edit")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[66]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Edit"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function bo(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"aria-hidden","true"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=r[28].t("Copy")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button")},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[67]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Copy"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function Ss(r){let e,t;return e=new Oe({props:{content:r[28].t("Read Aloud"),placement:"bottom",$$slots:{default:[yo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Read Aloud")),s[0]&274737152|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function vo(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"aria-hidden":!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){V(l,e,s),_(e,t)},d(l){l&&m(e)}}}function ko(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"aria-hidden":!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){V(l,e,s),_(e,t)},d(l){l&&m(e)}}}function wo(r){let e,t,l,s,n,i;return{c(){e=ke("svg"),t=ke("style"),l=W(`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),s=ke("circle"),n=ke("circle"),i=ke("circle"),this.h()},l(o){e=we(o,"svg",{class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,xmlns:!0});var a=k(e);t=we(a,"style",{});var f=k(t);l=q(f,`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),f.forEach(m),s=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(s).forEach(m),n=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(n).forEach(m),i=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(i).forEach(m),a.forEach(m),this.h()},h(){d(s,"class","spinner_S1WN"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","3"),d(n,"class","spinner_S1WN spinner_Km9P"),d(n,"cx","12"),d(n,"cy","12"),d(n,"r","3"),d(i,"class","spinner_S1WN spinner_JApP"),d(i,"cx","20"),d(i,"cy","12"),d(i,"r","3"),d(e,"class","w-4 h-4"),d(e,"fill","currentColor"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(o,a){V(o,e,a),_(e,t),_(t,l),_(e,s),_(e,n),_(e,i)},d(o){o&&m(e)}}}function yo(r){let e,t,l,s,n,i;function o(u,c){return u[22]?wo:u[21]?ko:vo}let a=o(r),f=a(r);return{c(){e=E("button"),f.c(),this.h()},l(u){e=M(u,"BUTTON",{"aria-label":!0,id:!0,class:!0});var c=k(e);f.l(c),c.forEach(m),this.h()},h(){d(e,"aria-label",t=r[28].t("Read Aloud")),d(e,"id",l="speak-button-"+r[13].id),d(e,"class",s=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(u,c){V(u,e,c),f.m(e,null),n||(i=me(e,"click",r[68]),n=!0)},p(u,c){a!==(a=o(u))&&(f.d(1),f=a(u),f&&(f.c(),f.m(e,null))),c[0]&268435456&&t!==(t=u[28].t("Read Aloud"))&&d(e,"aria-label",t),c[0]&8192&&l!==(l="speak-button-"+u[13].id)&&d(e,"id",l),c[0]&2048&&s!==(s=(u[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",s)},d(u){u&&m(e),f.d(),n=!1,i()}}}function Os(r){let e,t;return e=new Oe({props:{content:r[28].t("Generate Image"),placement:"bottom",$$slots:{default:[Mo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Generate Image")),s[0]&276834304|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Io(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"aria-hidden","true"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){V(l,e,s),_(e,t)},d(l){l&&m(e)}}}function Eo(r){let e,t,l,s,n,i;return{c(){e=ke("svg"),t=ke("style"),l=W(`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),s=ke("circle"),n=ke("circle"),i=ke("circle"),this.h()},l(o){e=we(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=k(e);t=we(a,"style",{});var f=k(t);l=q(f,`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),f.forEach(m),s=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(s).forEach(m),n=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(n).forEach(m),i=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(i).forEach(m),a.forEach(m),this.h()},h(){d(s,"class","spinner_S1WN"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","3"),d(n,"class","spinner_S1WN spinner_Km9P"),d(n,"cx","12"),d(n,"cy","12"),d(n,"r","3"),d(i,"class","spinner_S1WN spinner_JApP"),d(i,"cx","20"),d(i,"cy","12"),d(i,"r","3"),d(e,"aria-hidden","true"),d(e,"class","w-4 h-4"),d(e,"fill","currentColor"),d(e,"viewBox","0 0 24 24"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(o,a){V(o,e,a),_(e,t),_(t,l),_(e,s),_(e,n),_(e,i)},d(o){o&&m(e)}}}function Mo(r){let e,t,l,s,n;function i(f,u){return f[23]?Eo:Io}let o=i(r),a=o(r);return{c(){e=E("button"),a.c(),this.h()},l(f){e=M(f,"BUTTON",{"aria-label":!0,class:!0});var u=k(e);a.l(u),u.forEach(m),this.h()},h(){d(e,"aria-label",t=r[28].t("Generate Image")),d(e,"class",l=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(f,u){V(f,e,u),a.m(e,null),s||(n=me(e,"click",r[69]),s=!0)},p(f,u){o!==(o=i(f))&&(a.d(1),a=o(f),a&&(a.c(),a.m(e,null))),u[0]&268435456&&t!==(t=f[28].t("Generate Image"))&&d(e,"aria-label",t),u[0]&2048&&l!==(l=(f[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",l)},d(f){f&&m(e),a.d(),s=!1,n()}}}function Rs(r){let e,t;return e=new Oe({props:{content:r[13].usage?`<pre>${bt(JSON.stringify(r[13].usage,null,2).replace(/"([^(")"]+)":/g,"$1:").slice(1,-1).split(`
`).map(Gs).map(Ks).join(`
`))}</pre>`:"",placement:"bottom",$$slots:{default:[No]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.content=l[13].usage?`<pre>${bt(JSON.stringify(l[13].usage,null,2).replace(/"([^(")"]+)":/g,"$1:").slice(1,-1).split(`
`).map(Gs).map(Ks).join(`
`))}</pre>`:""),s[0]&10240|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function No(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{"aria-hidden":!0,class:!0,id:!0});var f=k(e);t=we(f,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"),d(t,"aria-hidden","true"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-hidden","true"),d(e,"class",s=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap"),d(e,"id",n="info-"+r[13].id)},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[70]),i=!0)},p(a,f){f[0]&2048&&s!==(s=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap")&&d(e,"class",s),f[0]&8192&&n!==(n="info-"+a[13].id)&&d(e,"id",n)},d(a){a&&m(e),i=!1,o()}}}function Ps(r){var g;let e,t,l,s,n,i,o,a=!r[30]&&(((g=r[27])==null?void 0:g.features.enable_message_rating)??!0)&&Ls(r),f=r[11]&&As(r);l=new Oe({props:{content:r[28].t("Regenerate"),placement:"bottom",$$slots:{default:[To]},$$scope:{ctx:r}}});let u=r[1].length>1&&js(r),c=r[11]&&Hs(r);return{c(){a&&a.c(),e=A(),f&&f.c(),t=A(),X(l.$$.fragment),s=A(),u&&u.c(),n=A(),c&&c.c(),i=de()},l(h){a&&a.l(h),e=j(h),f&&f.l(h),t=j(h),$(l.$$.fragment,h),s=j(h),u&&u.l(h),n=j(h),c&&c.l(h),i=de()},m(h,p){a&&a.m(h,p),V(h,e,p),f&&f.m(h,p),V(h,t,p),x(l,h,p),V(h,s,p),u&&u.m(h,p),V(h,n,p),c&&c.m(h,p),V(h,i,p),o=!0},p(h,p){var v;!h[30]&&(((v=h[27])==null?void 0:v.features.enable_message_rating)??!0)?a?(a.p(h,p),p[0]&1207959552&&b(a,1)):(a=Ls(h),a.c(),b(a,1),a.m(e.parentNode,e)):a&&(le(),D(a,1,1,()=>{a=null}),se()),h[11]?f?(f.p(h,p),p[0]&2048&&b(f,1)):(f=As(h),f.c(),b(f,1),f.m(t.parentNode,t)):f&&(le(),D(f,1,1,()=>{f=null}),se());const w={};p[0]&268435456&&(w.content=h[28].t("Regenerate")),p[0]&285354496|p[3]&8&&(w.$$scope={dirty:p,ctx:h}),l.$set(w),h[1].length>1?u?(u.p(h,p),p[0]&2&&b(u,1)):(u=js(h),u.c(),b(u,1),u.m(n.parentNode,n)):u&&(le(),D(u,1,1,()=>{u=null}),se()),h[11]?c?(c.p(h,p),p[0]&2048&&b(c,1)):(c=Hs(h),c.c(),b(c,1),c.m(i.parentNode,i)):c&&(le(),D(c,1,1,()=>{c=null}),se())},i(h){o||(b(a),b(f),b(l.$$.fragment,h),b(u),b(c),o=!0)},o(h){D(a),D(f),D(l.$$.fragment,h),D(u),D(c),o=!1},d(h){h&&(m(e),m(t),m(s),m(n),m(i)),a&&a.d(h),f&&f.d(h),ee(l,h),u&&u.d(h),c&&c.d(h)}}}function Ls(r){let e,t,l,s;return e=new Oe({props:{content:r[28].t("Good Response"),placement:"bottom",$$slots:{default:[Do]},$$scope:{ctx:r}}}),l=new Oe({props:{content:r[28].t("Bad Response"),placement:"bottom",$$slots:{default:[Vo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment),t=A(),X(l.$$.fragment)},l(n){$(e.$$.fragment,n),t=j(n),$(l.$$.fragment,n)},m(n,i){x(e,n,i),V(n,t,i),x(l,n,i),s=!0},p(n,i){const o={};i[0]&268435456&&(o.content=n[28].t("Good Response")),i[0]&302000128|i[3]&8&&(o.$$scope={dirty:i,ctx:n}),e.$set(o);const a={};i[0]&268435456&&(a.content=n[28].t("Bad Response")),i[0]&302000128|i[3]&8&&(a.$$scope={dirty:i,ctx:n}),l.$set(a)},i(n){s||(b(e.$$.fragment,n),b(l.$$.fragment,n),s=!0)},o(n){D(e.$$.fragment,n),D(l.$$.fragment,n),s=!1},d(n){n&&m(t),ee(e,n),ee(l,n)}}}function Do(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{"aria-hidden":!0,stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0,xmlns:!0});var u=k(t);l=we(u,"path",{d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var a,f;d(l,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"fill","none"),d(t,"stroke-width","2.3"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class","w-4 h-4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(e,"aria-label",s=r[28].t("Good Response")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((f=(a=r[13])==null?void 0:a.annotation)==null?void 0:f.rating)??"").toString()==="1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent"),e.disabled=r[25]},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[71]),i=!0)},p(a,f){var u,c;f[0]&268435456&&s!==(s=a[28].t("Good Response"))&&d(e,"aria-label",s),f[0]&10240&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((c=(u=a[13])==null?void 0:u.annotation)==null?void 0:c.rating)??"").toString()==="1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent")&&d(e,"class",n),f[0]&33554432&&(e.disabled=a[25])},d(a){a&&m(e),i=!1,o()}}}function Vo(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{"aria-hidden":!0,stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0,xmlns:!0});var u=k(t);l=we(u,"path",{d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var a,f;d(l,"d","M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"fill","none"),d(t,"stroke-width","2.3"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class","w-4 h-4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(e,"aria-label",s=r[28].t("Bad Response")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((f=(a=r[13])==null?void 0:a.annotation)==null?void 0:f.rating)??"").toString()==="-1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent"),e.disabled=r[25]},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[72]),i=!0)},p(a,f){var u,c;f[0]&268435456&&s!==(s=a[28].t("Bad Response"))&&d(e,"aria-label",s),f[0]&10240&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((c=(u=a[13])==null?void 0:u.annotation)==null?void 0:c.rating)??"").toString()==="-1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent")&&d(e,"class",n),f[0]&33554432&&(e.disabled=a[25])},d(a){a&&m(e),i=!1,o()}}}function As(r){let e,t;return e=new Oe({props:{content:r[28].t("Continue Response"),placement:"bottom",$$slots:{default:[Co]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Continue Response")),s[0]&268437760|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Co(r){let e,t,l,s,n,i,o,a;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),s=ke("path"),this.h()},l(f){e=M(f,"BUTTON",{"aria-label":!0,type:!0,id:!0,class:!0});var u=k(e);t=we(u,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=k(t);l=we(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),s=we(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(s).forEach(m),c.forEach(m),u.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(s,"d","M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"),d(t,"aria-hidden","true"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",n=r[28].t("Continue Response")),d(e,"type","button"),d(e,"id","continue-response-button"),d(e,"class",i=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(f,u){V(f,e,u),_(e,t),_(t,l),_(t,s),o||(a=me(e,"click",r[73]),o=!0)},p(f,u){u[0]&268435456&&n!==(n=f[28].t("Continue Response"))&&d(e,"aria-label",n),u[0]&2048&&i!==(i=(f[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",i)},d(f){f&&m(e),o=!1,a()}}}function To(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{type:!0,"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"type","button"),d(e,"aria-label",s=r[28].t("Regenerate")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[74]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Regenerate"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function js(r){let e,t;return e=new Oe({props:{content:r[28].t("Delete"),placement:"bottom",$$slots:{default:[Bo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Delete")),s[0]&268503040|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Bo(r){let e,t,l,s,n,i,o;return{c(){e=E("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=M(a,"BUTTON",{type:!0,"aria-label":!0,id:!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,"aria-hidden":!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2"),d(t,"stroke","currentColor"),d(t,"aria-hidden","true"),d(t,"class","w-4 h-4"),d(e,"type","button"),d(e,"aria-label",s=r[28].t("Delete")),d(e,"id","delete-response-button"),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(a,f){V(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[75]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Delete"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function Hs(r){var i;let e,t,l=Ne(((i=r[17])==null?void 0:i.actions)??[]),s=[];for(let o=0;o<l.length;o+=1)s[o]=zs(_s(r,l,o));const n=o=>D(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=de()},l(o){for(let a=0;a<s.length;a+=1)s[a].l(o);e=de()},m(o,a){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(o,a);V(o,e,a),t=!0},p(o,a){var f;if(a[0]&141376){l=Ne(((f=o[17])==null?void 0:f.actions)??[]);let u;for(u=0;u<l.length;u+=1){const c=_s(o,l,u);s[u]?(s[u].p(c,a),b(s[u],1)):(s[u]=zs(c),s[u].c(),b(s[u],1),s[u].m(e.parentNode,e))}for(le(),u=l.length;u<s.length;u+=1)n(u);se()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)D(s[a]);t=!1},d(o){o&&m(e),Je(s,o)}}}function So(r){let e,t;return e=new Qn({props:{strokeWidth:"2.1",className:"size-4"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Oo(r){let e,t,l,s,n;return{c(){e=E("div"),t=E("img"),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);t=M(o,"IMG",{src:!0,class:!0,style:!0,alt:!0}),o.forEach(m),this.h()},h(){Pt(t.src,l=r[89].icon)||d(t,"src",l),d(t,"class",s="w-4 h-4 "+(r[89].icon.includes("svg")?"dark:invert-[80%]":"")),Rt(t,"fill","currentColor"),d(t,"alt",n=r[89].name),d(e,"class","size-4")},m(i,o){V(i,e,o),_(e,t)},p(i,o){o[0]&131072&&!Pt(t.src,l=i[89].icon)&&d(t,"src",l),o[0]&131072&&s!==(s="w-4 h-4 "+(i[89].icon.includes("svg")?"dark:invert-[80%]":""))&&d(t,"class",s),o[0]&131072&&n!==(n=i[89].name)&&d(t,"alt",n)},i:Ee,o:Ee,d(i){i&&m(e)}}}function Ro(r){let e,t,l,s,n,i,o,a,f;const u=[Oo,So],c=[];function g(p,w){var v;return(v=p[89])!=null&&v.icon?0:1}t=g(r),l=c[t]=u[t](r);function h(){return r[76](r[89])}return{c(){e=E("button"),l.c(),i=A(),this.h()},l(p){e=M(p,"BUTTON",{type:!0,"aria-label":!0,class:!0});var w=k(e);l.l(w),w.forEach(m),i=j(p),this.h()},h(){d(e,"type","button"),d(e,"aria-label",s=r[89].name),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(p,w){V(p,e,w),c[t].m(e,null),V(p,i,w),o=!0,a||(f=me(e,"click",h),a=!0)},p(p,w){r=p;let v=t;t=g(r),t===v?c[t].p(r,w):(le(),D(c[v],1,1,()=>{c[v]=null}),se(),l=c[t],l?l.p(r,w):(l=c[t]=u[t](r),l.c()),b(l,1),l.m(e,null)),(!o||w[0]&131072&&s!==(s=r[89].name))&&d(e,"aria-label",s),(!o||w[0]&2048&&n!==(n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition"))&&d(e,"class",n)},i(p){o||(b(l),o=!0)},o(p){D(l),o=!1},d(p){p&&(m(e),m(i)),c[t].d(),a=!1,f()}}}function zs(r){let e,t;return e=new Oe({props:{content:r[89].name,placement:"bottom",$$slots:{default:[Ro]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&131072&&(n.content=l[89].name),s[0]&141376|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Us(r){let e,t,l,s;function n(a){r[78](a)}function i(a){r[79](a)}let o={};return r[13]!==void 0&&(o.message=r[13]),r[24]!==void 0&&(o.show=r[24]),e=new Ei({props:o}),ze.push(()=>Ye(e,"message",n)),ze.push(()=>Ye(e,"show",i)),e.$on("save",r[80]),{c(){X(e.$$.fragment)},l(a){$(e.$$.fragment,a)},m(a,f){x(e,a,f),s=!0},p(a,f){const u={};!t&&f[0]&8192&&(t=!0,u.message=a[13],Qe(()=>t=!1)),!l&&f[0]&16777216&&(l=!0,u.show=a[24],Qe(()=>l=!1)),e.$set(u)},i(a){s||(b(e.$$.fragment,a),s=!0)},o(a){D(e.$$.fragment,a),s=!1},d(a){ee(e,a)}}}function Ws(r){var n;let e,t,l,s;return t=new Ja({props:{followUps:(n=r[13])==null?void 0:n.followUps,onClick:r[81]}}),{c(){e=E("div"),X(t.$$.fragment),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);$(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","mt-2.5")},m(i,o){V(i,e,o),x(t,e,null),s=!0},p(i,o){var f;const a={};o[0]&8192&&(a.followUps=(f=i[13])==null?void 0:f.followUps),o[0]&8320&&(a.onClick=i[81]),t.$set(a)},i(i){s||(b(t.$$.fragment,i),i&&(l||It(()=>{l=Et(e,Mt,{duration:100}),l.start()})),s=!0)},o(i){D(t.$$.fragment,i),s=!1},d(i){i&&m(e),ee(t)}}}function qs(r){var s;let e,t=(((s=r[13])==null?void 0:s.content)??"")+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(n){e=M(n,"DIV",{"aria-live":!0,class:!0});var i=k(e);l=q(i,t),i.forEach(m),this.h()},h(){d(e,"aria-live","polite"),d(e,"class","sr-only")},m(n,i){V(n,e,i),_(e,l)},p(n,i){var o;i[0]&8192&&t!==(t=(((o=n[13])==null?void 0:o.content)??"")+"")&&K(l,t)},d(n){n&&m(e)}}}function Fs(r){var re,Q,ie,ge,he,ye,Z,oe,pe;let e,t,l,s,n,i,o,a,f,u,c,g=((re=r[13])==null?void 0:re.files)&&((Q=r[13].files)==null?void 0:Q.filter(Js).length)>0,h,p,w,v,y,N,O,P,R,I;l=new qr({props:{src:((he=(ge=(ie=r[17])==null?void 0:ie.info)==null?void 0:ge.meta)==null?void 0:he.profile_image_url)??(r[28].language==="dg-DG"?"/doge.png":`${Lt}/static/favicon.png`),className:"size-8"}}),i=new Zt({props:{$$slots:{default:[Za]},$$scope:{ctx:r}}});let C=(((ye=r[13])==null?void 0:ye.statusHistory)??[...(Z=r[13])!=null&&Z.status?[(oe=r[13])==null?void 0:oe.status]:[]]).length>0&&vs(Wt(r)),B=g&&ws(r);const S=[co,uo],T=[];function z(ae,ue){return ae[14]===!0?0:1}p=z(r),w=T[p]=S[p](r);let J=!r[14]&&Ns(r),H=((pe=r[13])==null?void 0:pe.done)&&qs(r);return{c(){e=E("div"),t=E("div"),X(l.$$.fragment),s=A(),n=E("div"),X(i.$$.fragment),o=A(),a=E("div"),f=E("div"),u=E("div"),C&&C.c(),c=A(),B&&B.c(),h=A(),w.c(),y=A(),J&&J.c(),N=A(),H&&H.c(),this.h()},l(ae){e=M(ae,"DIV",{class:!0,id:!0,dir:!0});var ue=k(e);t=M(ue,"DIV",{class:!0});var F=k(t);$(l.$$.fragment,F),F.forEach(m),s=j(ue),n=M(ue,"DIV",{class:!0});var _e=k(n);$(i.$$.fragment,_e),o=j(_e),a=M(_e,"DIV",{});var fe=k(a);f=M(fe,"DIV",{class:!0});var be=k(f);u=M(be,"DIV",{});var L=k(u);C&&C.l(L),c=j(L),B&&B.l(L),h=j(L),w.l(L),L.forEach(m),be.forEach(m),y=j(fe),J&&J.l(fe),fe.forEach(m),N=j(_e),H&&H.l(_e),_e.forEach(m),ue.forEach(m),this.h()},h(){d(t,"class",Dn("shrink-0 ltr:mr-3 rtl:ml-3 hidden @lg:flex ")+" svelte-1u5gq5j"),d(f,"class",v="chat-"+r[13].role+" w-full min-w-full markdown-prose svelte-1u5gq5j"),d(n,"class","flex-auto w-0 pl-1 relative -translate-y-0.5"),d(e,"class",O="flex w-full message-"+r[13].id+" svelte-1u5gq5j"),d(e,"id",P="message-"+r[13].id),d(e,"dir",R=r[26].chatDirection)},m(ae,ue){V(ae,e,ue),_(e,t),x(l,t,null),_(e,s),_(e,n),x(i,n,null),_(n,o),_(n,a),_(a,f),_(f,u),C&&C.m(u,null),_(u,c),B&&B.m(u,null),_(u,h),T[p].m(u,null),_(a,y),J&&J.m(a,null),_(n,N),H&&H.m(n,null),I=!0},p(ae,ue){var be,L,G,te,Y,ce,ve,Ve,De;const F={};ue[0]&268566528&&(F.src=((G=(L=(be=ae[17])==null?void 0:be.info)==null?void 0:L.meta)==null?void 0:G.profile_image_url)??(ae[28].language==="dg-DG"?"/doge.png":`${Lt}/static/favicon.png`)),l.$set(F);const _e={};ue[0]&139264|ue[3]&8&&(_e.$$scope={dirty:ue,ctx:ae}),i.$set(_e),(((te=ae[13])==null?void 0:te.statusHistory)??[...(Y=ae[13])!=null&&Y.status?[(ce=ae[13])==null?void 0:ce.status]:[]]).length>0?C?(C.p(Wt(ae),ue),ue[0]&8192&&b(C,1)):(C=vs(Wt(ae)),C.c(),b(C,1),C.m(u,c)):C&&(le(),D(C,1,1,()=>{C=null}),se()),ue[0]&8192&&(g=((ve=ae[13])==null?void 0:ve.files)&&((Ve=ae[13].files)==null?void 0:Ve.filter(Js).length)>0),g?B?(B.p(ae,ue),ue[0]&8192&&b(B,1)):(B=ws(ae),B.c(),b(B,1),B.m(u,h)):B&&(le(),D(B,1,1,()=>{B=null}),se());let fe=p;p=z(ae),p===fe?T[p].p(ae,ue):(le(),D(T[fe],1,1,()=>{T[fe]=null}),se(),w=T[p],w?w.p(ae,ue):(w=T[p]=S[p](ae),w.c()),b(w,1),w.m(u,null)),(!I||ue[0]&8192&&v!==(v="chat-"+ae[13].role+" w-full min-w-full markdown-prose svelte-1u5gq5j"))&&d(f,"class",v),ae[14]?J&&(le(),D(J,1,1,()=>{J=null}),se()):J?(J.p(ae,ue),ue[0]&16384&&b(J,1)):(J=Ns(ae),J.c(),b(J,1),J.m(a,null)),(De=ae[13])!=null&&De.done?H?H.p(ae,ue):(H=qs(ae),H.c(),H.m(n,null)):H&&(H.d(1),H=null),(!I||ue[0]&8192&&O!==(O="flex w-full message-"+ae[13].id+" svelte-1u5gq5j"))&&d(e,"class",O),(!I||ue[0]&8192&&P!==(P="message-"+ae[13].id))&&d(e,"id",P),(!I||ue[0]&67108864&&R!==(R=ae[26].chatDirection))&&d(e,"dir",R)},i(ae){I||(b(l.$$.fragment,ae),b(i.$$.fragment,ae),b(C),b(B),b(w),b(J),I=!0)},o(ae){D(l.$$.fragment,ae),D(i.$$.fragment,ae),D(C),D(B),D(w),D(J),I=!1},d(ae){ae&&m(e),ee(l),ee(i),C&&C.d(),B&&B.d(),T[p].d(),J&&J.d(),H&&H.d()}}}function Po(r){let e,t,l,s=r[13].id,n,i;function o(u){r[49](u)}let a={title:r[28].t("Delete message?")};r[16]!==void 0&&(a.show=r[16]),e=new Kr({props:a}),ze.push(()=>Ye(e,"show",o)),e.$on("confirm",r[50]);let f=Fs(r);return{c(){X(e.$$.fragment),l=A(),f.c(),n=de()},l(u){$(e.$$.fragment,u),l=j(u),f.l(u),n=de()},m(u,c){x(e,u,c),V(u,l,c),f.m(u,c),V(u,n,c),i=!0},p(u,c){const g={};c[0]&268435456&&(g.title=u[28].t("Delete message?")),!t&&c[0]&65536&&(t=!0,g.show=u[16],Qe(()=>t=!1)),e.$set(g),c[0]&8192&&Be(s,s=u[13].id)?(le(),D(f,1,1,Ee),se(),f=Fs(u),f.c(),b(f,1),f.m(n.parentNode,n)):f.p(u,c)},i(u){i||(b(e.$$.fragment,u),b(f),i=!0)},o(u){D(e.$$.fragment,u),D(f),i=!1},d(u){u&&(m(l),m(n)),ee(e,u),f.d(u)}}}const Js=r=>r.type==="image",Lo=r=>{r.target.style.height="",r.target.style.height=`${r.target.scrollHeight}px`},Ao=r=>{r.target.select()},Gs=r=>r.slice(2),Ks=r=>r.endsWith(",")?r.slice(0,-1):r;function jo(r,e,t){let l,s,n,i,o,a,f;Me(r,zt,U=>t(48,l=U)),Me(r,gt,U=>t(26,s=U)),Me(r,zr,U=>t(27,n=U)),Me(r,pl,U=>t(85,i=U)),Me(r,Ut,U=>t(29,a=U)),Me(r,Kt,U=>t(30,f=U));const u=Ge("i18n");Me(r,u,U=>t(28,o=U));const c=vt();let{chatId:g=""}=e,{history:h}=e,{messageId:p}=e,w=JSON.parse(JSON.stringify(h.messages[p])),{siblings:v}=e,{gotoMessage:y=()=>{}}=e,{showPreviousMessage:N}=e,{showNextMessage:O}=e,{updateChat:P}=e,{editMessage:R}=e,{saveMessage:I}=e,{rateMessage:C}=e,{actionMessage:B}=e,{deleteMessage:S}=e,{submitMessage:T}=e,{continueResponse:z}=e,{regenerateResponse:J}=e,{addMessages:H}=e,{isLastMessage:re=!0}=e,{readOnly:Q=!1}=e,ie,ge=!1,he=null,ye=!1,Z="",oe,pe=!1,ae={},ue=!1,F,_e=!1,fe=!1,be=!1;const L=async U=>{var Ie,Se;U=kl(U),(((Ie=n==null?void 0:n.ui)==null?void 0:Ie.response_watermark)??"").trim()!==""&&(U=`${U}

${(Se=n==null?void 0:n.ui)==null?void 0:Se.response_watermark}`),await Ur(U,(s==null?void 0:s.copyFormatted)??!1)&&je.success(o.t("Copying to clipboard was successful!"))},G=U=>new Promise(Te=>{F=U;const Ie=ae[U];if(!Ie)return Te();Ie.play(),Ie.onended=async()=>{await new Promise(Se=>setTimeout(Se,300)),Object.keys(ae).length-1===U&&t(21,ue=!1),Te()}}),te=async()=>{var Te,Ie,Se,lt,st,St,ct,wt,Re,Ze,it,yt,Ot,el,tl,ll,sl,rl,nl,il,al,ol,fl;if(ue){try{speechSynthesis.cancel(),F!==void 0&&ae[F]&&(ae[F].pause(),ae[F].currentTime=0)}catch{}t(21,ue=!1),F=void 0;return}if(!((w==null?void 0:w.content)??"").trim().length){je.info(o.t("No content to speak"));return}t(21,ue=!0);const U=kl(w.content);if(n.audio.tts.engine===""){let $e=[];const _t=setInterval(()=>{var xe,dt,rt;if($e=speechSynthesis.getVoices(),$e.length>0){clearInterval(_t);const qe=((xe=$e==null?void 0:$e.filter(mt=>{var ul,cl,dl,hl;return mt.voiceURI===(((cl=(ul=s==null?void 0:s.audio)==null?void 0:ul.tts)==null?void 0:cl.voice)??((hl=(dl=n==null?void 0:n.audio)==null?void 0:dl.tts)==null?void 0:hl.voice))}))==null?void 0:xe.at(0))??void 0;console.log(qe);const ht=new SpeechSynthesisUtterance(U);ht.rate=((rt=(dt=s.audio)==null?void 0:dt.tts)==null?void 0:rt.playbackRate)??1,console.log(ht),ht.onend=()=>{var mt;t(21,ue=!1),s.conversationMode&&((mt=document.getElementById("voice-input-button"))==null||mt.click())},qe&&(ht.voice=qe),speechSynthesis.speak(ht)}},100)}else{t(22,_e=!0);const $e=Hn(U,((Ie=(Te=n==null?void 0:n.audio)==null?void 0:Te.tts)==null?void 0:Ie.split_on)??"punctuation");if(!$e.length){console.log("No content to speak"),je.info(o.t("No content to speak")),t(21,ue=!1),t(22,_e=!1);return}console.debug("Prepared message content for TTS",$e),ae=$e.reduce((xe,dt,rt)=>(xe[rt]=null,xe),{});let _t=Promise.resolve();if(((lt=(Se=s.audio)==null?void 0:Se.tts)==null?void 0:lt.engine)==="browser-kokoro"){i||(await pl.set(new ri({dtype:((ct=(St=(st=s.audio)==null?void 0:st.tts)==null?void 0:St.engineConfig)==null?void 0:ct.dtype)??"fp32"})),await i.init());for(const[xe,dt]of $e.entries()){const rt=await i.generate({text:dt,voice:((Re=(wt=s==null?void 0:s.audio)==null?void 0:wt.tts)==null?void 0:Re.voice)??((it=(Ze=n==null?void 0:n.audio)==null?void 0:Ze.tts)==null?void 0:it.voice)}).catch(qe=>{console.error(qe),je.error(`${qe}`),t(21,ue=!1),t(22,_e=!1)});if(rt){const qe=new Audio(rt);qe.playbackRate=((Ot=(yt=s.audio)==null?void 0:yt.tts)==null?void 0:Ot.playbackRate)??1,ae[xe]=qe,t(22,_e=!1),_t=_t.then(()=>G(xe))}}}else for(const[xe,dt]of $e.entries()){const rt=await Wn(localStorage.token,((tl=(el=s==null?void 0:s.audio)==null?void 0:el.tts)==null?void 0:tl.defaultVoice)===n.audio.tts.voice?((sl=(ll=s==null?void 0:s.audio)==null?void 0:ll.tts)==null?void 0:sl.voice)??((nl=(rl=n==null?void 0:n.audio)==null?void 0:rl.tts)==null?void 0:nl.voice):(al=(il=n==null?void 0:n.audio)==null?void 0:il.tts)==null?void 0:al.voice,dt).catch(qe=>{console.error(qe),je.error(`${qe}`),t(21,ue=!1),t(22,_e=!1)});if(rt){const qe=await rt.blob(),ht=URL.createObjectURL(qe),mt=new Audio(ht);mt.playbackRate=((fl=(ol=s.audio)==null?void 0:ol.tts)==null?void 0:fl.playbackRate)??1,ae[xe]=mt,t(22,_e=!1),_t=_t.then(()=>G(xe))}}}};let Y=[];function ce(U){const Te=[];let Ie=0;return U=U.replace(/<details[\s\S]*?<\/details>/gi,Se=>(Te.push(Se),`<details id="__DETAIL_${Ie++}__"/>`)),Y=Te,U}function ve(U){return U.replace(/<details id="__DETAIL_(\d+)__"\/>/g,(Ie,Se)=>Y[parseInt(Se)]||"")}const Ve=async()=>{t(14,ye=!0),t(18,Z=ce(w.content)),await Ce(),t(19,oe.style.height="",oe),t(19,oe.style.height=`${oe.scrollHeight}px`,oe)},De=async()=>{const U=ve(Z||"");R(w.id,{content:U},!1),t(14,ye=!1),t(18,Z=""),await Ce()},Ae=async()=>{const U=ve(Z||"");R(w.id,{content:U}),t(14,ye=!1),t(18,Z=""),await Ce()},He=async()=>{t(14,ye=!1),t(18,Z=""),await Ce()},Ue=async U=>{t(23,fe=!0);const Te=await qn(localStorage.token,U.content).catch(Ie=>{je.error(`${Ie}`)});if(console.log(Te),Te){const Ie=Te.map(Se=>({type:"image",url:`${Se.url}`}));I(U.id,{...U,files:Ie})}t(23,fe=!1)};let ne=!1;const We=async(U=null,Te=null)=>{var wt;t(25,ne=!0),console.log("Feedback",U,Te);const Ie={...w,annotation:{...(w==null?void 0:w.annotation)??{},...U!==null?{rating:U}:{},...Te||{}}},Se=await Ln(localStorage.token,g).catch(Re=>{je.error(`${Re}`)});if(!Se)return;const lt=Jt(h,w.id);let st={type:"rating",data:{...Ie!=null&&Ie.annotation?Ie.annotation:{},model_id:(w==null?void 0:w.selectedModelId)??w.model,...h.messages[w.parentId].childrenIds.length>1?{sibling_model_ids:h.messages[w.parentId].childrenIds.filter(Re=>Re!==w.id).map(Re=>{var Ze;return((Ze=h.messages[Re])==null?void 0:Ze.selectedModelId)??h.messages[Re].model})}:{}},meta:{arena:w?w.arena:!1,model_id:w.model,message_id:w.id,message_index:lt.length,chat_id:g},snapshot:{chat:Se}};const St=[st.data.model_id,...st.data.sibling_model_ids??[]].reduce((Re,Ze)=>{var yt;const it=l.find(Ot=>Ot.id===Ze);return it?Re[it.id]=((yt=it==null?void 0:it.info)==null?void 0:yt.base_model_id)??null:console.warn(`Model with ID ${Ze} not found`),Re},{});st.meta.base_models=St;let ct=null;if(w!=null&&w.feedbackId?ct=await yl(localStorage.token,w.feedbackId,st).catch(Re=>{je.error(`${Re}`)}):(ct=await zn(localStorage.token,st).catch(Re=>{je.error(`${Re}`)}),ct&&(Ie.feedbackId=ct.id)),console.log(Ie),I(w.id,Ie),await Ce(),!Te&&(t(24,be=!0),!((wt=Ie.annotation)!=null&&wt.tags))){const Re=await Un(localStorage.token,w.model,lt,g).catch(Ze=>(console.error(Ze),[]));console.log(Re),Re&&(Ie.annotation.tags=Re,st.data.tags=Re,I(w.id,Ie),await yl(localStorage.token,Ie.feedbackId,st).catch(Ze=>{je.error(`${Ze}`)}))}t(25,ne=!1)},et=async()=>{S(w.id)};kt(async()=>{await Ce(),ie&&(console.log(ie),ie.addEventListener("wheel",function(U){ie.scrollWidth<=ie.clientWidth||(U.preventDefault(),U.deltaY!==0&&t(15,ie.scrollLeft+=U.deltaY,ie))}))});function tt(U){ge=U,t(16,ge)}const Ke=()=>{et()};function ft(U){ze[U?"unshift":"push"](()=>{oe=U,t(19,oe)})}function ut(){Z=this.value,t(18,Z)}const nt=U=>{var Se,lt;U.key==="Escape"&&((Se=document.getElementById("close-edit-message-button"))==null||Se.click());const Te=U.metaKey||U.ctrlKey,Ie=U.key==="Enter";Te&&Ie&&((lt=document.getElementById("confirm-edit-message-button"))==null||lt.click())},Dt=()=>{Ae()},Vt=()=>{He()},Ct=()=>{De()},Tt=async U=>{console.log(U)},Bt=async(U,Te)=>{console.log(U,Te);let Ie=document.getElementById(`source-${w.id}-${Te}`);const Se=document.getElementById(`collapsible-${w.id}`);Ie?Ie.click():Se&&(Se.querySelector("div:first-child").dispatchEvent(new PointerEvent("pointerup",{})),await new Promise(lt=>{requestAnimationFrame(()=>{requestAnimationFrame(lt)})}),Ie=document.getElementById(`source-${w.id}-${Te}`),Ie&&Ie.click())},Yr=({modelId:U,parentId:Te,messages:Ie})=>{H({modelId:U,parentId:Te,messages:Ie})},Xr=({raw:U,oldContent:Te,newContent:Ie})=>{t(0,h.messages[w.id].content=h.messages[w.id].content.replace(U,U.replace(Te,Ie)),h),P()},$r=()=>{N(w)},xr=U=>{y(w,U.target.value-1),t(20,pe=!1)},en=U=>{U.key==="Enter"&&(y(w,U.target.value-1),t(20,pe=!1))},tn=async()=>{t(20,pe=!0),await Ce();const U=document.getElementById(`message-index-input-${w.id}`);U&&(U.focus(),U.select())},ln=()=>{O(w)},sn=()=>{Ve()},rn=()=>{L(w.content)},nn=()=>{_e||te()},an=()=>{fe||Ue(w)},on=()=>{console.log(w)},fn=async()=>{await We(1),window.setTimeout(()=>{var U;(U=document.getElementById(`message-feedback-${w.id}`))==null||U.scrollIntoView()},0)},un=async()=>{await We(-1),window.setTimeout(()=>{var U;(U=document.getElementById(`message-feedback-${w.id}`))==null||U.scrollIntoView()},0)},cn=()=>{z()},dn=()=>{t(24,be=!1),J(w),((he==null?void 0:he.actions)??[]).forEach(U=>{c("action",{id:U.id,event:{id:"regenerate-response",data:{messageId:w.id}}})})},hn=()=>{t(16,ge=!0)},mn=U=>{B(U.id,w)};function gn(U){ze[U?"unshift":"push"](()=>{ie=U,t(15,ie)})}function _n(U){w=U,t(13,w),t(0,h),t(43,p)}function pn(U){be=U,t(24,be)}const bn=async U=>{await We(null,{...U.detail})},vn=U=>{T(w==null?void 0:w.id,U)};return r.$$set=U=>{"chatId"in U&&t(42,g=U.chatId),"history"in U&&t(0,h=U.history),"messageId"in U&&t(43,p=U.messageId),"siblings"in U&&t(1,v=U.siblings),"gotoMessage"in U&&t(2,y=U.gotoMessage),"showPreviousMessage"in U&&t(3,N=U.showPreviousMessage),"showNextMessage"in U&&t(4,O=U.showNextMessage),"updateChat"in U&&t(5,P=U.updateChat),"editMessage"in U&&t(44,R=U.editMessage),"saveMessage"in U&&t(45,I=U.saveMessage),"rateMessage"in U&&t(46,C=U.rateMessage),"actionMessage"in U&&t(6,B=U.actionMessage),"deleteMessage"in U&&t(47,S=U.deleteMessage),"submitMessage"in U&&t(7,T=U.submitMessage),"continueResponse"in U&&t(8,z=U.continueResponse),"regenerateResponse"in U&&t(9,J=U.regenerateResponse),"addMessages"in U&&t(10,H=U.addMessages),"isLastMessage"in U&&t(11,re=U.isLastMessage),"readOnly"in U&&t(12,Q=U.readOnly)},r.$$.update=()=>{r.$$.dirty[0]&8193|r.$$.dirty[1]&4096&&h.messages&&JSON.stringify(w)!==JSON.stringify(h.messages[p])&&t(13,w=JSON.parse(JSON.stringify(h.messages[p]))),r.$$.dirty[0]&8192|r.$$.dirty[1]&131072&&t(17,he=l.find(U=>U.id===w.model)),r.$$.dirty[0]&16384&&(ye||(async()=>await Ce())())},[h,v,y,N,O,P,B,T,z,J,H,re,Q,w,ye,ie,ge,he,Z,oe,pe,ue,_e,fe,be,ne,s,n,o,a,f,u,c,L,te,Ve,De,Ae,He,Ue,We,et,g,p,R,I,C,S,l,tt,Ke,ft,ut,nt,Dt,Vt,Ct,Tt,Bt,Yr,Xr,$r,xr,en,tn,ln,sn,rn,nn,an,on,fn,un,cn,dn,hn,mn,gn,_n,pn,bn,vn]}class Qr extends Pe{constructor(e){super(),Le(this,e,jo,Po,Be,{chatId:42,history:0,messageId:43,siblings:1,gotoMessage:2,showPreviousMessage:3,showNextMessage:4,updateChat:5,editMessage:44,saveMessage:45,rateMessage:46,actionMessage:6,deleteMessage:47,submitMessage:7,continueResponse:8,regenerateResponse:9,addMessages:10,isLastMessage:11,readOnly:12},null,[-1,-1,-1,-1])}}function Ho(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm6-2a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm0 0h-1a5 5 0 0 1-5-5v-.5"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",r[1]),d(e,"stroke","currentColor"),d(e,"class",r[0])},m(l,s){V(l,e,s),_(e,t)},p(l,[s]){s&2&&d(e,"stroke-width",l[1]),s&1&&d(e,"class",l[0])},i:Ee,o:Ee,d(l){l&&m(e)}}}function zo(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,s=n.strokeWidth)},[l,s]}class Uo extends Pe{constructor(e){super(),Le(this,e,zo,Ho,Be,{className:0,strokeWidth:1})}}function qt(r){var l;const e=r.slice(),t=(l=e[0].messages[e[2]])==null?void 0:l.merged;return e[15]=t,e}function Zs(r,e,t){const l=r.slice();return l[39]=e[t],l}function Ft(r){const e=r.slice(),t=e[18][e[39]].messageIds[e[19][e[39]]];return e[42]=t,e}function Qs(r){let e,t,l,s,n,i=Ne(Object.keys(r[18])),o=[];for(let u=0;u<i.length;u+=1)o[u]=xs(Zs(r,i,u));const a=u=>D(o[u],1,1,()=>{o[u]=null});let f=!r[4]&&er(r);return{c(){e=E("div"),t=E("div");for(let u=0;u<o.length;u+=1)o[u].c();s=A(),f&&f.c(),this.h()},l(u){e=M(u,"DIV",{});var c=k(e);t=M(c,"DIV",{class:!0,id:!0});var g=k(t);for(let h=0;h<o.length;h+=1)o[h].l(g);g.forEach(m),s=j(c),f&&f.l(c),c.forEach(m),this.h()},h(){d(t,"class","flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden"),d(t,"id",l="responses-container-"+r[1]+"-"+r[17].id)},m(u,c){V(u,e,c),_(e,t);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(t,null);_(e,s),f&&f.m(e,null),n=!0},p(u,c){if(c[0]&60620791){i=Ne(Object.keys(u[18]));let g;for(g=0;g<i.length;g+=1){const h=Zs(u,i,g);o[g]?(o[g].p(h,c),b(o[g],1)):(o[g]=xs(h),o[g].c(),b(o[g],1),o[g].m(t,null))}for(le(),g=i.length;g<o.length;g+=1)a(g);se()}(!n||c[0]&131074&&l!==(l="responses-container-"+u[1]+"-"+u[17].id))&&d(t,"id",l),u[4]?f&&(le(),D(f,1,1,()=>{f=null}),se()):f?(f.p(u,c),c[0]&16&&b(f,1)):(f=er(u),f.c(),b(f,1),f.m(e,null))},i(u){if(!n){for(let c=0;c<i.length;c+=1)b(o[c]);b(f),n=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)D(o[c]);D(f),n=!1},d(u){u&&m(e),Je(o,u),f&&f.d()}}}function Ys(r){let e,t=r[0].currentId,l,s,n,i,o,a=$s(r);function f(){return r[34](r[42])}return{c(){e=E("div"),a.c(),l=A(),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=k(e);a.l(c),l=j(c),c.forEach(m),this.h()},h(){var u;d(e,"class",s="snap-center w-full max-w-full m-1 border "+(((u=r[0].messages[r[2]])==null?void 0:u.modelIdx)==r[39]?`border-gray-100 dark:border-gray-850 border-[1.5px] ${r[20]?"min-w-full":"min-w-80"}`:`border-gray-100 dark:border-gray-850 border-dashed ${r[20]?"min-w-full":"min-w-80"}`)+" transition-all p-5 rounded-2xl")},m(u,c){V(u,e,c),a.m(e,null),_(e,l),n=!0,i||(o=me(e,"click",f),i=!0)},p(u,c){var g;r=u,c[0]&1&&Be(t,t=r[0].currentId)?(le(),D(a,1,1,Ee),se(),a=$s(r),a.c(),b(a,1),a.m(e,l)):a.p(r,c),(!n||c[0]&1310725&&s!==(s="snap-center w-full max-w-full m-1 border "+(((g=r[0].messages[r[2]])==null?void 0:g.modelIdx)==r[39]?`border-gray-100 dark:border-gray-850 border-[1.5px] ${r[20]?"min-w-full":"min-w-80"}`:`border-gray-100 dark:border-gray-850 border-dashed ${r[20]?"min-w-full":"min-w-80"}`)+" transition-all p-5 rounded-2xl"))&&d(e,"class",s)},i(u){n||(b(a),n=!0)},o(u){D(a),n=!1},d(u){u&&m(e),a.d(u),i=!1,o()}}}function Xs(r){let e,t;function l(...o){return r[30](r[39],...o)}function s(){return r[31](r[39])}function n(){return r[32](r[39])}function i(...o){return r[33](r[39],...o)}return e=new Qr({props:{chatId:r[1],history:r[0],messageId:r[42],isLastMessage:!0,siblings:r[18][r[39]].messageIds,gotoMessage:l,showPreviousMessage:s,showNextMessage:n,updateChat:r[5],editMessage:r[6],saveMessage:r[7],rateMessage:r[8],deleteMessage:r[11],actionMessage:r[9],submitMessage:r[10],continueResponse:r[12],regenerateResponse:i,addMessages:r[14],readOnly:r[4]}}),{c(){X(e.$$.fragment)},l(o){$(e.$$.fragment,o)},m(o,a){x(e,o,a),t=!0},p(o,a){r=o;const f={};a[0]&2&&(f.chatId=r[1]),a[0]&1&&(f.history=r[0]),a[0]&786432&&(f.messageId=r[42]),a[0]&262144&&(f.siblings=r[18][r[39]].messageIds),a[0]&262144&&(f.gotoMessage=l),a[0]&262144&&(f.showPreviousMessage=s),a[0]&262144&&(f.showNextMessage=n),a[0]&32&&(f.updateChat=r[5]),a[0]&64&&(f.editMessage=r[6]),a[0]&128&&(f.saveMessage=r[7]),a[0]&256&&(f.rateMessage=r[8]),a[0]&2048&&(f.deleteMessage=r[11]),a[0]&512&&(f.actionMessage=r[9]),a[0]&1024&&(f.submitMessage=r[10]),a[0]&4096&&(f.continueResponse=r[12]),a[0]&794624&&(f.regenerateResponse=i),a[0]&16384&&(f.addMessages=r[14]),a[0]&16&&(f.readOnly=r[4]),e.$set(f)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){ee(e,o)}}}function $s(r){let e,t,l=r[15]&&Xs(r);return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),V(s,e,n),t=!0},p(s,n){s[15]?l?(l.p(s,n),n[0]&32768&&b(l,1)):(l=Xs(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),D(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){D(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function xs(r){let e,t,l=r[19][r[39]]!==void 0&&r[18][r[39]].messageIds.length>0&&Ys(Ft(r));return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),V(s,e,n),t=!0},p(s,n){s[19][s[39]]!==void 0&&s[18][s[39]].messageIds.length>0?l?(l.p(Ft(s),n),n[0]&786432&&b(l,1)):(l=Ys(Ft(s)),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),D(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){D(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function er(r){let e=!Object.keys(r[18]).find(r[29]),t,l,s=e&&tr(r);return{c(){s&&s.c(),t=de()},l(n){s&&s.l(n),t=de()},m(n,i){s&&s.m(n,i),V(n,t,i),l=!0},p(n,i){i[0]&786433&&(e=!Object.keys(n[18]).find(n[29])),e?s?(s.p(n,i),i[0]&786433&&b(s,1)):(s=tr(n),s.c(),b(s,1),s.m(t.parentNode,t)):s&&(le(),D(s,1,1,()=>{s=null}),se())},i(n){l||(b(s),l=!0)},o(n){D(s),l=!1},d(n){n&&m(t),s&&s.d(n)}}}function tr(r){var o,a;let e,t,l,s,n=((a=(o=r[0].messages[r[2]])==null?void 0:o.merged)==null?void 0:a.status)&&lr(qt(r)),i=r[3]&&rr(r);return{c(){e=E("div"),t=E("div"),n&&n.c(),l=A(),i&&i.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);t=M(u,"DIV",{class:!0});var c=k(t);n&&n.l(c),c.forEach(m),l=j(u),i&&i.l(u),u.forEach(m),this.h()},h(){d(t,"class","w-full"),d(e,"class","flex justify-end")},m(f,u){V(f,e,u),_(e,t),n&&n.m(t,null),_(e,l),i&&i.m(e,null),s=!0},p(f,u){var c,g;(g=(c=f[0].messages[f[2]])==null?void 0:c.merged)!=null&&g.status?n?(n.p(qt(f),u),u[0]&5&&b(n,1)):(n=lr(qt(f)),n.c(),b(n,1),n.m(t,null)):n&&(le(),D(n,1,1,()=>{n=null}),se()),f[3]?i?(i.p(f,u),u[0]&8&&b(i,1)):(i=rr(f),i.c(),b(i,1),i.m(e,null)):i&&(le(),D(i,1,1,()=>{i=null}),se())},i(f){s||(b(n),b(i),s=!0)},o(f){D(n),D(i),s=!1},d(f){f&&m(e),n&&n.d(),i&&i.d()}}}function lr(r){let e,t,l,s,n,i,o;t=new Zt({props:{$$slots:{default:[Wo]},$$scope:{ctx:r}}});const a=[Fo,qo],f=[];function u(c,g){var h;return(((h=c[15])==null?void 0:h.content)??"")===""?0:1}return n=u(r),i=f[n]=a[n](r),{c(){e=E("div"),X(t.$$.fragment),l=A(),s=E("div"),i.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);$(t.$$.fragment,g),l=j(g),s=M(g,"DIV",{class:!0});var h=k(s);i.l(h),h.forEach(m),g.forEach(m),this.h()},h(){d(s,"class","mt-1 markdown-prose w-full min-w-full"),d(e,"class","w-full rounded-xl pl-5 pr-2 py-2")},m(c,g){V(c,e,g),x(t,e,null),_(e,l),_(e,s),f[n].m(s,null),o=!0},p(c,g){const h={};g[0]&2097157|g[1]&4096&&(h.$$scope={dirty:g,ctx:c}),t.$set(h);let p=n;n=u(c),n===p?f[n].p(c,g):(le(),D(f[p],1,1,()=>{f[p]=null}),se(),i=f[n],i?i.p(c,g):(i=f[n]=a[n](c),i.c()),b(i,1),i.m(s,null))},i(c){o||(b(t.$$.fragment,c),b(i),o=!0)},o(c){D(t.$$.fragment,c),D(i),o=!1},d(c){c&&m(e),ee(t),f[n].d()}}}function sr(r){let e,t=ot(r[15].timestamp*1e3).format("LT")+"",l;return{c(){e=E("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase ml-0.5 -mt-0.5")},m(s,n){V(s,e,n),_(e,l)},p(s,n){n[0]&5&&t!==(t=ot(s[15].timestamp*1e3).format("LT")+"")&&K(l,t)},d(s){s&&m(e)}}}function Wo(r){let e=r[21].t("Merged Response")+"",t,l,s,n=r[15].timestamp&&sr(r);return{c(){t=W(e),l=A(),n&&n.c(),s=de()},l(i){t=q(i,e),l=j(i),n&&n.l(i),s=de()},m(i,o){V(i,t,o),V(i,l,o),n&&n.m(i,o),V(i,s,o)},p(i,o){o[0]&2097152&&e!==(e=i[21].t("Merged Response")+"")&&K(t,e),i[15].timestamp?n?n.p(i,o):(n=sr(i),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(i){i&&(m(t),m(l),m(s)),n&&n.d(i)}}}function qo(r){let e,t;return e=new Nt({props:{id:"merged",content:r[15].content??""}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&5&&(n.content=l[15].content??""),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Fo(r){let e,t;return e=new xt({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function rr(r){let e,t,l;return t=new Oe({props:{content:r[21].t("Merge Responses"),placement:"bottom",$$slots:{default:[Jo]},$$scope:{ctx:r}}}),{c(){e=E("div"),X(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){d(e,"class","shrink-0 text-gray-600 dark:text-gray-500 mt-1")},m(s,n){V(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&2097152&&(i.content=s[21].t("Merge Responses")),n[1]&4096&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){D(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function Jo(r){let e,t,l,s,n;return t=new Uo({props:{className:" size-5 "}}),{c(){e=E("button"),X(t.$$.fragment),this.h()},l(i){e=M(i,"BUTTON",{type:!0,id:!0,class:!0});var o=k(e);$(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"type","button"),d(e,"id","merge-response-button"),d(e,"class","visible p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(i,o){V(i,e,o),x(t,e,null),l=!0,s||(n=me(e,"click",r[35]),s=!0)},p:Ee,i(i){l||(b(t.$$.fragment,i),l=!0)},o(i){D(t.$$.fragment,i),l=!1},d(i){i&&m(e),ee(t),s=!1,n()}}}function Go(r){let e,t,l=r[17]&&Qs(r);return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),V(s,e,n),t=!0},p(s,n){s[17]?l?(l.p(s,n),n[0]&131072&&b(l,1)):(l=Qs(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),D(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){D(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function Ko(r,e,t){let l,s,n;Me(r,gt,F=>t(36,l=F)),Me(r,Hr,F=>t(20,s=F));const i=Ge("i18n");Me(r,i,F=>t(21,n=F)),ot.extend(Wr);let{chatId:o}=e,{history:a}=e,{messageId:f}=e,{isLastMessage:u}=e,{readOnly:c=!1}=e,{updateChat:g}=e,{editMessage:h}=e,{saveMessage:p}=e,{rateMessage:w}=e,{actionMessage:v}=e,{submitMessage:y}=e,{deleteMessage:N}=e,{continueResponse:O}=e,{regenerateResponse:P}=e,{mergeResponses:R}=e,{addMessages:I}=e,{triggerScroll:C}=e;vt();let B,S,T={},z={},J=JSON.parse(JSON.stringify(a.messages[f]));const H=async(F,_e)=>{t(19,z[F]=Math.max(0,Math.min(_e,T[F].messageIds.length-1)),z);let fe=T[F].messageIds[z[F]];console.log(fe);let be=a.messages[fe].childrenIds;for(;be.length!==0;)fe=be.at(-1),be=a.messages[fe].childrenIds;t(0,a.currentId=fe,a),await Ce(),await g(),C()},re=async F=>{t(19,z[F]=Math.max(0,z[F]-1),z);let _e=T[F].messageIds[z[F]];console.log(_e);let fe=a.messages[_e].childrenIds;for(;fe.length!==0;)_e=fe.at(-1),fe=a.messages[_e].childrenIds;t(0,a.currentId=_e,a),await Ce(),await g(),C()},Q=async F=>{t(19,z[F]=Math.min(T[F].messageIds.length-1,z[F]+1),z);let _e=T[F].messageIds[z[F]];console.log(_e);let fe=a.messages[_e].childrenIds;for(;fe.length!==0;)_e=fe.at(-1),fe=a.messages[_e].childrenIds;t(0,a.currentId=_e,a),await Ce(),await g(),C()},ie=async()=>{console.log("multiresponse:initHandler"),await Ce(),t(16,B=f),t(17,S=a.messages[f].parentId?a.messages[a.messages[f].parentId]:null),t(18,T=S==null?void 0:S.models.reduce((F,_e,fe)=>{let be=S==null?void 0:S.childrenIds.map(L=>a.messages[L]).filter(L=>(L==null?void 0:L.modelIdx)===fe).map(L=>L.id);if(be.length===0){let L=S==null?void 0:S.childrenIds.map(G=>a.messages[G]).filter(G=>(G==null?void 0:G.model)===_e);L.forEach(G=>{G.modelIdx=fe}),be=L.map(G=>G.id)}return{...F,[fe]:{messageIds:be}}},{})),t(19,z=S==null?void 0:S.models.reduce((F,_e,fe)=>{const be=T[fe].messageIds.findIndex(L=>L===f);return be!==-1?{...F,[fe]:be}:{...F,[fe]:T[fe].messageIds.length-1}},{})),console.log(T,z),await Ce()},ge=async()=>{const F=Object.keys(T).map(_e=>{const{messageIds:fe}=T[_e],be=fe[z[_e]];return a.messages[be].content});R(f,F,o)};kt(async()=>{if(await ie(),await Ce(),(l==null?void 0:l.scrollOnBranchChange)??!0){const F=document.getElementById(`message-${f}`);F&&F.scrollIntoView({block:"start"})}});const he=F=>{var be;const{messageIds:_e}=T[F],fe=_e[z[F]];return!((be=a.messages[fe])!=null&&be.done)},ye=(F,_e,fe)=>H(F,fe),Z=F=>re(F),oe=F=>Q(F),pe=async(F,_e)=>{P(_e),await Ce(),t(19,z[F]=T[F].messageIds.length-1,z)},ae=async F=>{if(f!=F){let _e=F,fe=a.messages[_e].childrenIds;for(;fe.length!==0;)_e=fe.at(-1),fe=a.messages[_e].childrenIds;t(0,a.currentId=_e,a)}},ue=()=>{ge()};return r.$$set=F=>{"chatId"in F&&t(1,o=F.chatId),"history"in F&&t(0,a=F.history),"messageId"in F&&t(2,f=F.messageId),"isLastMessage"in F&&t(3,u=F.isLastMessage),"readOnly"in F&&t(4,c=F.readOnly),"updateChat"in F&&t(5,g=F.updateChat),"editMessage"in F&&t(6,h=F.editMessage),"saveMessage"in F&&t(7,p=F.saveMessage),"rateMessage"in F&&t(8,w=F.rateMessage),"actionMessage"in F&&t(9,v=F.actionMessage),"submitMessage"in F&&t(10,y=F.submitMessage),"deleteMessage"in F&&t(11,N=F.deleteMessage),"continueResponse"in F&&t(12,O=F.continueResponse),"regenerateResponse"in F&&t(13,P=F.regenerateResponse),"mergeResponses"in F&&t(27,R=F.mergeResponses),"addMessages"in F&&t(14,I=F.addMessages),"triggerScroll"in F&&t(28,C=F.triggerScroll)},r.$$.update=()=>{r.$$.dirty[0]&32773&&a.messages&&JSON.stringify(J)!==JSON.stringify(a.messages[f])&&t(15,J=JSON.parse(JSON.stringify(a.messages[f])))},[a,o,f,u,c,g,h,p,w,v,y,N,O,P,I,J,B,S,T,z,s,n,i,H,re,Q,ge,R,C,he,ye,Z,oe,pe,ae,ue]}class Zo extends Pe{constructor(e){super(),Le(this,e,Ko,Go,Be,{chatId:1,history:0,messageId:2,isLastMessage:3,readOnly:4,updateChat:5,editMessage:6,saveMessage:7,rateMessage:8,actionMessage:9,submitMessage:10,deleteMessage:11,continueResponse:12,regenerateResponse:13,mergeResponses:27,addMessages:14,triggerScroll:28},null,[-1,-1])}}function nr(r,e,t){const l=r.slice();return l[53]=e[t],l[55]=t,l}function ir(r,e,t){const l=r.slice();return l[53]=e[t],l}function ar(r){var s,n,i,o;let e,t,l;return t=new qr({props:{src:r[7].user?((i=(n=(s=r[16].find(r[30]))==null?void 0:s.info)==null?void 0:n.meta)==null?void 0:i.profile_image_url)??"/user.png":((o=r[0])==null?void 0:o.profile_image_url)??"/user.png",className:"size-8"}}),{c(){e=E("div"),X(t.$$.fragment),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);$(t.$$.fragment,f),f.forEach(m),this.h()},h(){d(e,"class","shrink-0 ltr:mr-3 rtl:ml-3")},m(a,f){V(a,e,f),x(t,e,null),l=!0},p(a,f){var c,g,h,p;const u={};f[0]&65665&&(u.src=a[7].user?((h=(g=(c=a[16].find(a[30]))==null?void 0:c.info)==null?void 0:g.meta)==null?void 0:h.profile_image_url)??"/user.png":((p=a[0])==null?void 0:p.profile_image_url)??"/user.png"),t.$set(u)},i(a){l||(b(t.$$.fragment,a),l=!0)},o(a){D(t.$$.fragment,a),l=!1},d(a){a&&m(e),ee(t)}}}function or(r){let e,t,l;return t=new Zt({props:{$$slots:{default:[xo]},$$scope:{ctx:r}}}),{c(){e=E("div"),X(t.$$.fragment)},l(s){e=M(s,"DIV",{});var n=k(e);$(t.$$.fragment,n),n.forEach(m)},m(s,n){V(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&180353|n[1]&134217728&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){D(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function Qo(r){let e=r[14].t("You")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&16384&&e!==(e=l[14].t("You")+"")&&K(t,e)},d(l){l&&m(t)}}}function Yo(r){let e=r[0].name+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){V(l,t,s)},p(l,s){s[0]&1&&e!==(e=l[0].name+"")&&K(t,e)},d(l){l&&m(t)}}}function Xo(r){var o;let e=r[14].t("You")+"",t,l,s,n=(((o=r[7])==null?void 0:o.user)??"")+"",i;return{c(){t=W(e),l=A(),s=E("span"),i=W(n),this.h()},l(a){t=q(a,e),l=j(a),s=M(a,"SPAN",{class:!0});var f=k(s);i=q(f,n),f.forEach(m),this.h()},h(){d(s,"class","text-gray-500 text-sm font-medium")},m(a,f){V(a,t,f),V(a,l,f),V(a,s,f),_(s,i)},p(a,f){var u;f[0]&16384&&e!==(e=a[14].t("You")+"")&&K(t,e),f[0]&128&&n!==(n=(((u=a[7])==null?void 0:u.user)??"")+"")&&K(i,n)},d(a){a&&(m(t),m(l),m(s))}}}function fr(r){let e,t,l;return t=new Oe({props:{content:ot(r[7].timestamp*1e3).format("LLLL"),$$slots:{default:[$o]},$$scope:{ctx:r}}}),{c(){e=E("div"),X(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){d(e,"class","self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]")},m(s,n){V(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&128&&(i.content=ot(s[7].timestamp*1e3).format("LLLL")),n[0]&128|n[1]&134217728&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){D(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function $o(r){let e,t=At(r[7].timestamp*1e3)+"",l;return{c(){e=E("span"),l=W(t),this.h()},l(s){e=M(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,n){V(s,e,n),_(e,l)},p(s,n){n[0]&128&&t!==(t=At(s[7].timestamp*1e3)+"")&&K(l,t)},d(s){s&&m(e)}}}function xo(r){let e,t,l;function s(a,f){return a[7].user?Xo:a[15].showUsername||a[17].name!==a[0].name?Yo:Qo}let n=s(r),i=n(r),o=r[7].timestamp&&fr(r);return{c(){i.c(),e=A(),o&&o.c(),t=de()},l(a){i.l(a),e=j(a),o&&o.l(a),t=de()},m(a,f){i.m(a,f),V(a,e,f),o&&o.m(a,f),V(a,t,f),l=!0},p(a,f){n===(n=s(a))&&i?i.p(a,f):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e))),a[7].timestamp?o?(o.p(a,f),f[0]&128&&b(o,1)):(o=fr(a),o.c(),b(o,1),o.m(t.parentNode,t)):o&&(le(),D(o,1,1,()=>{o=null}),se())},i(a){l||(b(o),l=!0)},o(a){D(o),l=!1},d(a){a&&(m(e),m(t)),i.d(a),o&&o.d(a)}}}function ur(r){let e,t,l=r[7].files&&cr(r);return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),V(s,e,n),t=!0},p(s,n){s[7].files?l?(l.p(s,n),n[0]&128&&b(l,1)):(l=cr(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),D(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){D(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function cr(r){let e,t,l=Ne(r[7].files),s=[];for(let i=0;i<l.length;i+=1)s[i]=dr(ir(r,l,i));const n=i=>D(s[i],1,1,()=>{s[i]=null});return{c(){e=E("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","mt-2.5 mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap")},m(i,o){V(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,o){if(o[0]&32896){l=Ne(i[7].files);let a;for(a=0;a<l.length;a+=1){const f=ir(i,l,a);s[a]?(s[a].p(f,o),b(s[a],1)):(s[a]=dr(f),s[a].c(),b(s[a],1),s[a].m(e,null))}for(le(),a=l.length;a<s.length;a+=1)n(a);se()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)b(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)D(s[o]);t=!1},d(i){i&&m(e),Je(s,i)}}}function ef(r){var l;let e,t;return e=new $t({props:{item:r[53],url:r[53].url,name:r[53].name,type:r[53].type,size:(l=r[53])==null?void 0:l.size,colorClassName:"bg-white dark:bg-gray-850 "}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n[0]&128&&(i.item=s[53]),n[0]&128&&(i.url=s[53].url),n[0]&128&&(i.name=s[53].name),n[0]&128&&(i.type=s[53].type),n[0]&128&&(i.size=(o=s[53])==null?void 0:o.size),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function tf(r){let e,t;return e=new Qt({props:{src:r[53].url,imageClassName:" max-h-96 rounded-lg"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&128&&(n.src=l[53].url),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function dr(r){let e,t,l,s,n,i;const o=[tf,ef],a=[];function f(u,c){return u[53].type==="image"?0:1}return t=f(r),l=a[t]=o[t](r),{c(){e=E("div"),l.c(),s=A(),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=k(e);l.l(c),s=j(c),c.forEach(m),this.h()},h(){var u;d(e,"class",n=((u=r[15])==null?void 0:u.chatBubble)??!0?"self-end":"")},m(u,c){V(u,e,c),a[t].m(e,null),_(e,s),i=!0},p(u,c){var h;let g=t;t=f(u),t===g?a[t].p(u,c):(le(),D(a[g],1,1,()=>{a[g]=null}),se(),l=a[t],l?l.p(u,c):(l=a[t]=o[t](u),l.c()),b(l,1),l.m(e,s)),(!i||c[0]&32768&&n!==(n=((h=u[15])==null?void 0:h.chatBubble)??!0?"self-end":""))&&d(e,"class",n)},i(u){i||(b(l),i=!0)},o(u){D(l),i=!1},d(u){u&&m(e),a[t].d()}}}function hr(r){let e,t,l,s;const n=[sf,lf],i=[];function o(a,f){return a[10]===!0?0:1}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),V(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),D(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){D(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function lf(r){var P,R;let e,t,l,s,n,i,o,a,f,u,c,g,h,p,w=r[7].content&&mr(r),v=!(((P=r[15])==null?void 0:P.chatBubble)??!0)&&gr(r),y=!r[6]&&pr(r);u=new Oe({props:{content:r[14].t("Copy"),placement:"bottom",$$slots:{default:[of]},$$scope:{ctx:r}}});let N=!r[6]&&(!r[5]||r[1].length>1)&&br(r),O=(((R=r[15])==null?void 0:R.chatBubble)??!0)&&vr(r);return{c(){e=E("div"),t=E("div"),l=E("div"),w&&w.c(),i=A(),o=E("div"),v&&v.c(),a=A(),y&&y.c(),f=A(),X(u.$$.fragment),c=A(),N&&N.c(),g=A(),O&&O.c(),this.h()},l(I){e=M(I,"DIV",{class:!0});var C=k(e);t=M(C,"DIV",{class:!0});var B=k(t);l=M(B,"DIV",{class:!0});var S=k(l);w&&w.l(S),S.forEach(m),B.forEach(m),i=j(C),o=M(C,"DIV",{class:!0});var T=k(o);v&&v.l(T),a=j(T),y&&y.l(T),f=j(T),$(u.$$.fragment,T),c=j(T),N&&N.l(T),g=j(T),O&&O.l(T),T.forEach(m),C.forEach(m),this.h()},h(){var I,C,B;d(l,"class",s="rounded-3xl "+(((I=r[15])==null?void 0:I.chatBubble)??!0?`max-w-[90%] px-5 py-2  bg-gray-50 dark:bg-gray-850 ${r[7].files?"rounded-tr-lg":""}`:" w-full")),d(t,"class",n="flex "+(((C=r[15])==null?void 0:C.chatBubble)??!0?"justify-end pb-1":"w-full")),d(o,"class",h="flex "+(((B=r[15])==null?void 0:B.chatBubble)??!0?"justify-end":"")+" text-gray-600 dark:text-gray-500"),d(e,"class","w-full")},m(I,C){V(I,e,C),_(e,t),_(t,l),w&&w.m(l,null),_(e,i),_(e,o),v&&v.m(o,null),_(o,a),y&&y.m(o,null),_(o,f),x(u,o,null),_(o,c),N&&N.m(o,null),_(o,g),O&&O.m(o,null),p=!0},p(I,C){var S,T,z,J,H;I[7].content?w?(w.p(I,C),C[0]&128&&b(w,1)):(w=mr(I),w.c(),b(w,1),w.m(l,null)):w&&(le(),D(w,1,1,()=>{w=null}),se()),(!p||C[0]&32896&&s!==(s="rounded-3xl "+(((S=I[15])==null?void 0:S.chatBubble)??!0?`max-w-[90%] px-5 py-2  bg-gray-50 dark:bg-gray-850 ${I[7].files?"rounded-tr-lg":""}`:" w-full")))&&d(l,"class",s),(!p||C[0]&32768&&n!==(n="flex "+(((T=I[15])==null?void 0:T.chatBubble)??!0?"justify-end pb-1":"w-full")))&&d(t,"class",n),((z=I[15])==null?void 0:z.chatBubble)??!0?v&&(v.d(1),v=null):v?v.p(I,C):(v=gr(I),v.c(),v.m(o,a)),I[6]?y&&(le(),D(y,1,1,()=>{y=null}),se()):y?(y.p(I,C),C[0]&64&&b(y,1)):(y=pr(I),y.c(),b(y,1),y.m(o,f));const B={};C[0]&16384&&(B.content=I[14].t("Copy")),C[0]&128|C[1]&134217728&&(B.$$scope={dirty:C,ctx:I}),u.$set(B),!I[6]&&(!I[5]||I[1].length>1)?N?(N.p(I,C),C[0]&98&&b(N,1)):(N=br(I),N.c(),b(N,1),N.m(o,g)):N&&(le(),D(N,1,1,()=>{N=null}),se()),((J=I[15])==null?void 0:J.chatBubble)??!0?O?O.p(I,C):(O=vr(I),O.c(),O.m(o,null)):O&&(O.d(1),O=null),(!p||C[0]&32768&&h!==(h="flex "+(((H=I[15])==null?void 0:H.chatBubble)??!0?"justify-end":"")+" text-gray-600 dark:text-gray-500"))&&d(o,"class",h)},i(I){p||(b(w),b(y),b(u.$$.fragment,I),b(N),p=!0)},o(I){D(w),D(y),D(u.$$.fragment,I),D(N),p=!1},d(I){I&&m(e),w&&w.d(),v&&v.d(),y&&y.d(),ee(u),N&&N.d(),O&&O.d()}}}function sf(r){let e,t,l,s,n,i,o,a,f,u=r[14].t("Save")+"",c,g,h,p,w=r[14].t("Cancel")+"",v,y,N,O=r[14].t("Send")+"",P,R,I,C,B=(r[12]??[]).length>0&&wr(r);return{c(){e=E("div"),B&&B.c(),t=A(),l=E("div"),s=E("textarea"),i=A(),o=E("div"),a=E("div"),f=E("button"),c=W(u),g=A(),h=E("div"),p=E("button"),v=W(w),y=A(),N=E("button"),P=W(O),this.h()},l(S){e=M(S,"DIV",{class:!0});var T=k(e);B&&B.l(T),t=j(T),l=M(T,"DIV",{class:!0});var z=k(l);s=M(z,"TEXTAREA",{id:!0,class:!0}),k(s).forEach(m),z.forEach(m),i=j(T),o=M(T,"DIV",{class:!0});var J=k(o);a=M(J,"DIV",{});var H=k(a);f=M(H,"BUTTON",{id:!0,class:!0});var re=k(f);c=q(re,u),re.forEach(m),H.forEach(m),g=j(J),h=M(J,"DIV",{class:!0});var Q=k(h);p=M(Q,"BUTTON",{id:!0,class:!0});var ie=k(p);v=q(ie,w),ie.forEach(m),y=j(Q),N=M(Q,"BUTTON",{id:!0,class:!0});var ge=k(N);P=q(ge,O),ge.forEach(m),Q.forEach(m),J.forEach(m),T.forEach(m),this.h()},h(){d(s,"id",n="message-edit-"+r[7].id),d(s,"class","bg-transparent outline-hidden w-full resize-none"),d(l,"class","max-h-96 overflow-auto"),d(f,"id","save-edit-message-button"),d(f,"class","px-4 py-2 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl"),d(p,"id","close-edit-message-button"),d(p,"class","px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl"),d(N,"id","confirm-edit-message-button"),d(N,"class","px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl"),d(h,"class","flex space-x-1.5"),d(o,"class","mt-2 mb-1 flex justify-between text-sm font-medium"),d(e,"class","w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2")},m(S,T){V(S,e,T),B&&B.m(e,null),_(e,t),_(e,l),_(l,s),r[34](s),at(s,r[11]),_(e,i),_(e,o),_(o,a),_(a,f),_(f,c),_(o,g),_(o,h),_(h,p),_(p,v),_(h,y),_(h,N),_(N,P),R=!0,I||(C=[me(s,"input",r[35]),me(s,"input",gf),me(s,"keydown",r[36]),me(f,"click",r[37]),me(p,"click",r[38]),me(N,"click",r[39])],I=!0)},p(S,T){(S[12]??[]).length>0?B?(B.p(S,T),T[0]&4096&&b(B,1)):(B=wr(S),B.c(),b(B,1),B.m(e,t)):B&&(le(),D(B,1,1,()=>{B=null}),se()),(!R||T[0]&128&&n!==(n="message-edit-"+S[7].id))&&d(s,"id",n),T[0]&2048&&at(s,S[11]),(!R||T[0]&16384)&&u!==(u=S[14].t("Save")+"")&&K(c,u),(!R||T[0]&16384)&&w!==(w=S[14].t("Cancel")+"")&&K(v,w),(!R||T[0]&16384)&&O!==(O=S[14].t("Send")+"")&&K(P,O)},i(S){R||(b(B),R=!0)},o(S){D(B),R=!1},d(S){S&&m(e),B&&B.d(),r[34](null),I=!1,Xe(C)}}}function mr(r){let e,t;return e=new Nt({props:{id:r[7].id,content:r[7].content}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&128&&(n.id=l[7].id),s[0]&128&&(n.content=l[7].content),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function gr(r){let e,t=r[1].length>1&&_r(r);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,s){t&&t.m(l,s),V(l,e,s)},p(l,s){l[1].length>1?t?t.p(l,s):(t=_r(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function _r(r){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg>',a,f;function u(h,p){return h[9]?nf:rf}let c=u(r),g=c(r);return{c(){e=E("div"),t=E("button"),t.innerHTML=l,s=A(),g.c(),n=A(),i=E("button"),i.innerHTML=o,this.h()},l(h){e=M(h,"DIV",{class:!0,dir:!0});var p=k(e);t=M(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(t)!=="svelte-buado9"&&(t.innerHTML=l),s=j(p),g.l(p),n=j(p),i=M(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-4phel2"&&(i.innerHTML=o),p.forEach(m),this.h()},h(){d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(i,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(e,"class","flex self-center"),d(e,"dir","ltr")},m(h,p){V(h,e,p),_(e,t),_(e,s),g.m(e,null),_(e,n),_(e,i),a||(f=[me(t,"click",r[40]),me(i,"click",r[44])],a=!0)},p(h,p){c===(c=u(h))&&g?g.p(h,p):(g.d(1),g=c(h),g&&(g.c(),g.m(e,n)))},d(h){h&&m(e),g.d(),a=!1,Xe(f)}}}function rf(r){let e,t=r[1].indexOf(r[7].id)+1+"",l,s,n=r[1].length+"",i,o,a;return{c(){e=E("div"),l=W(t),s=W("/"),i=W(n),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l=q(u,t),s=q(u,"/"),i=q(u,n),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){V(f,e,u),_(e,l),_(e,s),_(e,i),o||(a=me(e,"dblclick",r[43]),o=!0)},p(f,u){u[0]&130&&t!==(t=f[1].indexOf(f[7].id)+1+"")&&K(l,t),u[0]&2&&n!==(n=f[1].length+"")&&K(i,n)},d(f){f&&m(e),o=!1,a()}}}function nf(r){let e,t,l,s,n,i,o=r[1].length+"",a,f,u;return{c(){e=E("div"),t=E("input"),i=W("/"),a=W(o),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),i=q(g,"/"),a=q(g,o),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+r[7].id),d(t,"type","number"),t.value=s=r[1].indexOf(r[7].id)+1,d(t,"min","1"),d(t,"max",n=r[1].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){V(c,e,g),_(e,t),_(e,i),_(e,a),f||(u=[me(t,"focus",_f),me(t,"blur",r[41]),me(t,"keydown",r[42])],f=!0)},p(c,g){g[0]&128&&l!==(l="message-index-input-"+c[7].id)&&d(t,"id",l),g[0]&130&&s!==(s=c[1].indexOf(c[7].id)+1)&&t.value!==s&&(t.value=s),g[0]&2&&n!==(n=c[1].length)&&d(t,"max",n),g[0]&2&&o!==(o=c[1].length+"")&&K(a,o)},d(c){c&&m(e),f=!1,Xe(u)}}}function pr(r){let e,t;return e=new Oe({props:{content:r[14].t("Edit"),placement:"bottom",$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&16384&&(n.content=l[14].t("Edit")),s[1]&134217728&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function af(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.3" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg>',l,s;return{c(){e=E("button"),e.innerHTML=t,this.h()},l(n){e=M(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-tlrz1q"&&(e.innerHTML=t),this.h()},h(){d(e,"class","invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button")},m(n,i){V(n,e,i),l||(s=me(e,"click",r[45]),l=!0)},p:Ee,d(n){n&&m(e),l=!1,s()}}}function of(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.3" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"></path></svg>',l,s;return{c(){e=E("button"),e.innerHTML=t,this.h()},l(n){e=M(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-1ivgdx2"&&(e.innerHTML=t),this.h()},h(){d(e,"class","invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(n,i){V(n,e,i),l||(s=me(e,"click",r[46]),l=!0)},p:Ee,d(n){n&&m(e),l=!1,s()}}}function br(r){let e,t;return e=new Oe({props:{content:r[14].t("Delete"),placement:"bottom",$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&16384&&(n.content=l[14].t("Delete")),s[0]&256|s[1]&134217728&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ff(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',l,s;return{c(){e=E("button"),e.innerHTML=t,this.h()},l(n){e=M(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-146x2zz"&&(e.innerHTML=t),this.h()},h(){d(e,"class","invisible group-hover:visible p-1 rounded-sm dark:hover:text-white hover:text-black transition")},m(n,i){V(n,e,i),l||(s=me(e,"click",r[47]),l=!0)},p:Ee,d(n){n&&m(e),l=!1,s()}}}function vr(r){let e,t=r[1].length>1&&kr(r);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,s){t&&t.m(l,s),V(l,e,s)},p(l,s){l[1].length>1?t?t.p(l,s):(t=kr(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function kr(r){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg>',a,f;function u(h,p){return h[9]?cf:uf}let c=u(r),g=c(r);return{c(){e=E("div"),t=E("button"),t.innerHTML=l,s=A(),g.c(),n=A(),i=E("button"),i.innerHTML=o,this.h()},l(h){e=M(h,"DIV",{class:!0,dir:!0});var p=k(e);t=M(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(t)!=="svelte-buado9"&&(t.innerHTML=l),s=j(p),g.l(p),n=j(p),i=M(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-4phel2"&&(i.innerHTML=o),p.forEach(m),this.h()},h(){d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(i,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(e,"class","flex self-center"),d(e,"dir","ltr")},m(h,p){V(h,e,p),_(e,t),_(e,s),g.m(e,null),_(e,n),_(e,i),a||(f=[me(t,"click",r[48]),me(i,"click",r[52])],a=!0)},p(h,p){c===(c=u(h))&&g?g.p(h,p):(g.d(1),g=c(h),g&&(g.c(),g.m(e,n)))},d(h){h&&m(e),g.d(),a=!1,Xe(f)}}}function uf(r){let e,t=r[1].indexOf(r[7].id)+1+"",l,s,n=r[1].length+"",i,o,a;return{c(){e=E("div"),l=W(t),s=W("/"),i=W(n),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);l=q(u,t),s=q(u,"/"),i=q(u,n),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){V(f,e,u),_(e,l),_(e,s),_(e,i),o||(a=me(e,"dblclick",r[51]),o=!0)},p(f,u){u[0]&130&&t!==(t=f[1].indexOf(f[7].id)+1+"")&&K(l,t),u[0]&2&&n!==(n=f[1].length+"")&&K(i,n)},d(f){f&&m(e),o=!1,a()}}}function cf(r){let e,t,l,s,n,i,o=r[1].length+"",a,f,u;return{c(){e=E("div"),t=E("input"),i=W("/"),a=W(o),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);t=M(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),i=q(g,"/"),a=q(g,o),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+r[7].id),d(t,"type","number"),t.value=s=r[1].indexOf(r[7].id)+1,d(t,"min","1"),d(t,"max",n=r[1].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){V(c,e,g),_(e,t),_(e,i),_(e,a),f||(u=[me(t,"focus",pf),me(t,"blur",r[49]),me(t,"keydown",r[50])],f=!0)},p(c,g){g[0]&128&&l!==(l="message-index-input-"+c[7].id)&&d(t,"id",l),g[0]&130&&s!==(s=c[1].indexOf(c[7].id)+1)&&t.value!==s&&(t.value=s),g[0]&2&&n!==(n=c[1].length)&&d(t,"max",n),g[0]&2&&o!==(o=c[1].length+"")&&K(a,o)},d(c){c&&m(e),f=!1,Xe(u)}}}function wr(r){let e,t,l=Ne(r[12]),s=[];for(let i=0;i<l.length;i+=1)s[i]=yr(nr(r,l,i));const n=i=>D(s[i],1,1,()=>{s[i]=null});return{c(){e=E("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","flex items-center flex-wrap gap-2 -mx-2 mb-1")},m(i,o){V(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,o){if(o[0]&4096){l=Ne(i[12]);let a;for(a=0;a<l.length;a+=1){const f=nr(i,l,a);s[a]?(s[a].p(f,o),b(s[a],1)):(s[a]=yr(f),s[a].c(),b(s[a],1),s[a].m(e,null))}for(le(),a=l.length;a<s.length;a+=1)n(a);se()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)b(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)D(s[o]);t=!1},d(i){i&&m(e),Je(s,i)}}}function df(r){var n;let e,t;function l(){return r[32](r[55])}function s(){return r[33](r[53])}return e=new $t({props:{item:r[53],name:r[53].name,type:r[53].type,size:(n=r[53])==null?void 0:n.size,loading:r[53].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",l),e.$on("click",s),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),t=!0},p(i,o){var f;r=i;const a={};o[0]&4096&&(a.item=r[53]),o[0]&4096&&(a.name=r[53].name),o[0]&4096&&(a.type=r[53].type),o[0]&4096&&(a.size=(f=r[53])==null?void 0:f.size),o[0]&4096&&(a.loading=r[53].status==="uploading"),e.$set(a)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){D(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function hf(r){let e,t,l,s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',a,f,u,c;l=new Qt({props:{src:r[53].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});function g(){return r[31](r[55])}return{c(){e=E("div"),t=E("div"),X(l.$$.fragment),s=A(),n=E("div"),i=E("button"),i.innerHTML=o,a=A(),this.h()},l(h){e=M(h,"DIV",{class:!0});var p=k(e);t=M(p,"DIV",{class:!0});var w=k(t);$(l.$$.fragment,w),w.forEach(m),s=j(p),n=M(p,"DIV",{class:!0});var v=k(n);i=M(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-1ki5d3w"&&(i.innerHTML=o),v.forEach(m),a=j(p),p.forEach(m),this.h()},h(){d(t,"class","relative flex items-center"),d(i,"class","bg-white text-black border border-white rounded-full group-hover:visible invisible transition"),d(i,"type","button"),d(n,"class","absolute -top-1 -right-1"),d(e,"class","relative group")},m(h,p){V(h,e,p),_(e,t),x(l,t,null),_(e,s),_(e,n),_(n,i),_(e,a),f=!0,u||(c=me(i,"click",g),u=!0)},p(h,p){r=h;const w={};p[0]&4096&&(w.src=r[53].url),l.$set(w)},i(h){f||(b(l.$$.fragment,h),f=!0)},o(h){D(l.$$.fragment,h),f=!1},d(h){h&&m(e),ee(l),u=!1,c()}}}function yr(r){let e,t,l,s;const n=[hf,df],i=[];function o(a,f){return a[53].type==="image"?0:1}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),V(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),D(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){D(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function mf(r){var P,R;let e,t,l,s,n,i,o,a,f,u,c,g,h;function p(I){r[28](I)}let w={title:r[14].t("Delete message?")};r[8]!==void 0&&(w.show=r[8]),e=new Kr({props:w}),ze.push(()=>Ye(e,"show",p)),e.$on("confirm",r[29]);let v=!(((P=r[15])==null?void 0:P.chatBubble)??!0)&&ar(r),y=!(((R=r[15])==null?void 0:R.chatBubble)??!0)&&or(r),N=r[10]!==!0&&ur(r),O=r[7].content!==""&&hr(r);return{c(){X(e.$$.fragment),l=A(),s=E("div"),v&&v.c(),n=A(),i=E("div"),y&&y.c(),o=A(),a=E("div"),N&&N.c(),f=A(),O&&O.c(),this.h()},l(I){$(e.$$.fragment,I),l=j(I),s=M(I,"DIV",{class:!0,dir:!0,id:!0});var C=k(s);v&&v.l(C),n=j(C),i=M(C,"DIV",{class:!0});var B=k(i);y&&y.l(B),o=j(B),a=M(B,"DIV",{class:!0});var S=k(a);N&&N.l(S),f=j(S),O&&O.l(S),S.forEach(m),B.forEach(m),C.forEach(m),this.h()},h(){d(a,"class",u="chat-"+r[7].role+" w-full min-w-full markdown-prose"),d(i,"class","flex-auto w-0 max-w-full pl-1"),d(s,"class","flex w-full user-message"),d(s,"dir",c=r[15].chatDirection),d(s,"id",g="message-"+r[7].id)},m(I,C){x(e,I,C),V(I,l,C),V(I,s,C),v&&v.m(s,null),_(s,n),_(s,i),y&&y.m(i,null),_(i,o),_(i,a),N&&N.m(a,null),_(a,f),O&&O.m(a,null),h=!0},p(I,C){var S,T;const B={};C[0]&16384&&(B.title=I[14].t("Delete message?")),!t&&C[0]&256&&(t=!0,B.show=I[8],Qe(()=>t=!1)),e.$set(B),((S=I[15])==null?void 0:S.chatBubble)??!0?v&&(le(),D(v,1,1,()=>{v=null}),se()):v?(v.p(I,C),C[0]&32768&&b(v,1)):(v=ar(I),v.c(),b(v,1),v.m(s,n)),((T=I[15])==null?void 0:T.chatBubble)??!0?y&&(le(),D(y,1,1,()=>{y=null}),se()):y?(y.p(I,C),C[0]&32768&&b(y,1)):(y=or(I),y.c(),b(y,1),y.m(i,o)),I[10]!==!0?N?(N.p(I,C),C[0]&1024&&b(N,1)):(N=ur(I),N.c(),b(N,1),N.m(a,f)):N&&(le(),D(N,1,1,()=>{N=null}),se()),I[7].content!==""?O?(O.p(I,C),C[0]&128&&b(O,1)):(O=hr(I),O.c(),b(O,1),O.m(a,null)):O&&(le(),D(O,1,1,()=>{O=null}),se()),(!h||C[0]&128&&u!==(u="chat-"+I[7].role+" w-full min-w-full markdown-prose"))&&d(a,"class",u),(!h||C[0]&32768&&c!==(c=I[15].chatDirection))&&d(s,"dir",c),(!h||C[0]&128&&g!==(g="message-"+I[7].id))&&d(s,"id",g)},i(I){h||(b(e.$$.fragment,I),b(v),b(y),b(N),b(O),h=!0)},o(I){D(e.$$.fragment,I),D(v),D(y),D(N),D(O),h=!1},d(I){I&&(m(l),m(s)),ee(e,I),v&&v.d(),y&&y.d(),N&&N.d(),O&&O.d()}}}const gf=r=>{r.target.style.height="",r.target.style.height=`${r.target.scrollHeight}px`},_f=r=>{r.target.select()},pf=r=>{r.target.select()};function bf(r,e,t){let l,s,n,i;Me(r,gt,ne=>t(15,s=ne)),Me(r,zt,ne=>t(16,n=ne)),Me(r,Ut,ne=>t(17,i=ne));const o=Ge("i18n");Me(r,o,ne=>t(14,l=ne)),ot.extend(Wr);let{user:a}=e,{history:f}=e,{messageId:u}=e,{siblings:c}=e,{gotoMessage:g}=e,{showPreviousMessage:h}=e,{showNextMessage:p}=e,{editMessage:w}=e,{deleteMessage:v}=e,{isFirstMessage:y}=e,{readOnly:N}=e,O=!1,P=!1,R=!1,I="",C=[],B,S=JSON.parse(JSON.stringify(f.messages[u]));const T=async ne=>{await Ur(ne)&&je.success(l.t("Copying to clipboard was successful!"))},z=async()=>{t(10,R=!0),t(11,I=S.content),t(12,C=S.files),await Ce(),B&&(t(13,B.style.height="",B),t(13,B.style.height=`${B.scrollHeight}px`,B),B==null||B.focus())},J=async(ne=!0)=>{w(S.id,{content:I,files:C},ne),t(10,R=!1),t(11,I=""),t(12,C=[])},H=()=>{t(10,R=!1),t(11,I=""),t(12,C=[])},re=async()=>{v(S.id)};kt(()=>{});function Q(ne){O=ne,t(8,O)}const ie=()=>{re()},ge=ne=>ne.id===S.user,he=ne=>{C.splice(ne,1),t(12,C)},ye=async ne=>{C.splice(ne,1),t(12,C)},Z=ne=>{console.log(ne)};function oe(ne){ze[ne?"unshift":"push"](()=>{B=ne,t(13,B)})}function pe(){I=this.value,t(11,I)}const ae=ne=>{var tt,Ke;ne.key==="Escape"&&((tt=document.getElementById("close-edit-message-button"))==null||tt.click());const We=ne.metaKey||ne.ctrlKey,et=ne.key==="Enter";We&&et&&((Ke=document.getElementById("confirm-edit-message-button"))==null||Ke.click())},ue=()=>{J(!1)},F=()=>{H()},_e=()=>{J()},fe=()=>{h(S)},be=ne=>{g(S,ne.target.value-1),t(9,P=!1)},L=ne=>{ne.key==="Enter"&&(g(S,ne.target.value-1),t(9,P=!1))},G=async()=>{t(9,P=!0),await Ce();const ne=document.getElementById(`message-index-input-${S.id}`);ne&&(ne.focus(),ne.select())},te=()=>{p(S)},Y=()=>{z()},ce=()=>{T(S.content)},ve=()=>{t(8,O=!0)},Ve=()=>{h(S)},De=ne=>{g(S,ne.target.value-1),t(9,P=!1)},Ae=ne=>{ne.key==="Enter"&&(g(S,ne.target.value-1),t(9,P=!1))},He=async()=>{t(9,P=!0),await Ce();const ne=document.getElementById(`message-index-input-${S.id}`);ne&&(ne.focus(),ne.select())},Ue=()=>{p(S)};return r.$$set=ne=>{"user"in ne&&t(0,a=ne.user),"history"in ne&&t(24,f=ne.history),"messageId"in ne&&t(25,u=ne.messageId),"siblings"in ne&&t(1,c=ne.siblings),"gotoMessage"in ne&&t(2,g=ne.gotoMessage),"showPreviousMessage"in ne&&t(3,h=ne.showPreviousMessage),"showNextMessage"in ne&&t(4,p=ne.showNextMessage),"editMessage"in ne&&t(26,w=ne.editMessage),"deleteMessage"in ne&&t(27,v=ne.deleteMessage),"isFirstMessage"in ne&&t(5,y=ne.isFirstMessage),"readOnly"in ne&&t(6,N=ne.readOnly)},r.$$.update=()=>{r.$$.dirty[0]&50331776&&f.messages&&JSON.stringify(S)!==JSON.stringify(f.messages[u])&&t(7,S=JSON.parse(JSON.stringify(f.messages[u])))},[a,c,g,h,p,y,N,S,O,P,R,I,C,B,l,s,n,i,o,T,z,J,H,re,f,u,w,v,Q,ie,ge,he,ye,Z,oe,pe,ae,ue,F,_e,fe,be,L,G,te,Y,ce,ve,Ve,De,Ae,He,Ue]}class vf extends Pe{constructor(e){super(),Le(this,e,bf,mf,Be,{user:0,history:24,messageId:25,siblings:1,gotoMessage:2,showPreviousMessage:3,showNextMessage:4,editMessage:26,deleteMessage:27,isFirstMessage:5,readOnly:6},null,[-1,-1])}}function Ir(r){let e,t,l,s;const n=[yf,wf,kf],i=[];function o(a,f){var u,c;return a[0].messages[a[3]].role==="user"?0:(((c=(u=a[0].messages[a[0].messages[a[3]].parentId])==null?void 0:u.models)==null?void 0:c.length)??1)===1?1:2}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),V(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),D(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){D(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function kf(r){var i;let e,t,l;function s(o){r[22](o)}let n={chatId:r[1],messageId:r[3],isLastMessage:r[3]===((i=r[0])==null?void 0:i.currentId),updateChat:r[8],editMessage:r[9],saveMessage:r[10],rateMessage:r[12],actionMessage:r[13],submitMessage:r[14],deleteMessage:r[11],continueResponse:r[16],regenerateResponse:r[15],mergeResponses:r[17],triggerScroll:r[19],addMessages:r[18],readOnly:r[20]};return r[0]!==void 0&&(n.history=r[0]),e=new Zo({props:n}),ze.push(()=>Ye(e,"history",s)),{c(){X(e.$$.fragment)},l(o){$(e.$$.fragment,o)},m(o,a){x(e,o,a),l=!0},p(o,a){var u;const f={};a&2&&(f.chatId=o[1]),a&8&&(f.messageId=o[3]),a&9&&(f.isLastMessage=o[3]===((u=o[0])==null?void 0:u.currentId)),a&256&&(f.updateChat=o[8]),a&512&&(f.editMessage=o[9]),a&1024&&(f.saveMessage=o[10]),a&4096&&(f.rateMessage=o[12]),a&8192&&(f.actionMessage=o[13]),a&16384&&(f.submitMessage=o[14]),a&2048&&(f.deleteMessage=o[11]),a&65536&&(f.continueResponse=o[16]),a&32768&&(f.regenerateResponse=o[15]),a&131072&&(f.mergeResponses=o[17]),a&524288&&(f.triggerScroll=o[19]),a&262144&&(f.addMessages=o[18]),a&1048576&&(f.readOnly=o[20]),!t&&a&1&&(t=!0,f.history=o[0],Qe(()=>t=!1)),e.$set(f)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){D(e.$$.fragment,o),l=!1},d(o){ee(e,o)}}}function wf(r){var l;let e,t;return e=new Qr({props:{chatId:r[1],history:r[0],messageId:r[3],isLastMessage:r[3]===r[0].currentId,siblings:((l=r[0].messages[r[0].messages[r[3]].parentId])==null?void 0:l.childrenIds)??[],gotoMessage:r[5],showPreviousMessage:r[6],showNextMessage:r[7],updateChat:r[8],editMessage:r[9],saveMessage:r[10],rateMessage:r[12],actionMessage:r[13],submitMessage:r[14],deleteMessage:r[11],continueResponse:r[16],regenerateResponse:r[15],addMessages:r[18],readOnly:r[20]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n&2&&(i.chatId=s[1]),n&1&&(i.history=s[0]),n&8&&(i.messageId=s[3]),n&9&&(i.isLastMessage=s[3]===s[0].currentId),n&9&&(i.siblings=((o=s[0].messages[s[0].messages[s[3]].parentId])==null?void 0:o.childrenIds)??[]),n&32&&(i.gotoMessage=s[5]),n&64&&(i.showPreviousMessage=s[6]),n&128&&(i.showNextMessage=s[7]),n&256&&(i.updateChat=s[8]),n&512&&(i.editMessage=s[9]),n&1024&&(i.saveMessage=s[10]),n&4096&&(i.rateMessage=s[12]),n&8192&&(i.actionMessage=s[13]),n&16384&&(i.submitMessage=s[14]),n&2048&&(i.deleteMessage=s[11]),n&65536&&(i.continueResponse=s[16]),n&32768&&(i.regenerateResponse=s[15]),n&262144&&(i.addMessages=s[18]),n&1048576&&(i.readOnly=s[20]),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function yf(r){var l;let e,t;return e=new vf({props:{user:r[4],history:r[0],messageId:r[3],isFirstMessage:r[2]===0,siblings:r[0].messages[r[3]].parentId!==null?((l=r[0].messages[r[0].messages[r[3]].parentId])==null?void 0:l.childrenIds)??[]:Object.values(r[0].messages).filter(Er).map(Mr)??[],gotoMessage:r[5],showPreviousMessage:r[6],showNextMessage:r[7],editMessage:r[9],deleteMessage:r[11],readOnly:r[20]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n&16&&(i.user=s[4]),n&1&&(i.history=s[0]),n&8&&(i.messageId=s[3]),n&4&&(i.isFirstMessage=s[2]===0),n&9&&(i.siblings=s[0].messages[s[3]].parentId!==null?((o=s[0].messages[s[0].messages[s[3]].parentId])==null?void 0:o.childrenIds)??[]:Object.values(s[0].messages).filter(Er).map(Mr)??[]),n&32&&(i.gotoMessage=s[5]),n&64&&(i.showPreviousMessage=s[6]),n&128&&(i.showNextMessage=s[7]),n&512&&(i.editMessage=s[9]),n&2048&&(i.deleteMessage=s[11]),n&1048576&&(i.readOnly=s[20]),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function If(r){let e,t,l,s=r[0].messages[r[3]]&&Ir(r);return{c(){e=E("div"),s&&s.c(),this.h()},l(n){e=M(n,"DIV",{class:!0});var i=k(e);s&&s.l(i),i.forEach(m),this.h()},h(){var n;d(e,"class",t="flex flex-col justify-between px-5 mb-3 w-full "+(((n=r[21])==null?void 0:n.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto rounded-lg group")},m(n,i){V(n,e,i),s&&s.m(e,null),l=!0},p(n,[i]){var o;n[0].messages[n[3]]?s?(s.p(n,i),i&9&&b(s,1)):(s=Ir(n),s.c(),b(s,1),s.m(e,null)):s&&(le(),D(s,1,1,()=>{s=null}),se()),(!l||i&2097152&&t!==(t="flex flex-col justify-between px-5 mb-3 w-full "+(((o=n[21])==null?void 0:o.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto rounded-lg group"))&&d(e,"class",t)},i(n){l||(b(s),l=!0)},o(n){D(s),l=!1},d(n){n&&m(e),s&&s.d()}}}const Er=r=>r.parentId===null,Mr=r=>r.id;function Ef(r,e,t){let l;Me(r,gt,T=>t(21,l=T)),vt(),Ge("i18n");let{chatId:s}=e,{idx:n=0}=e,{history:i}=e,{messageId:o}=e,{user:a}=e,{gotoMessage:f}=e,{showPreviousMessage:u}=e,{showNextMessage:c}=e,{updateChat:g}=e,{editMessage:h}=e,{saveMessage:p}=e,{deleteMessage:w}=e,{rateMessage:v}=e,{actionMessage:y}=e,{submitMessage:N}=e,{regenerateResponse:O}=e,{continueResponse:P}=e,{mergeResponses:R}=e,{addMessages:I}=e,{triggerScroll:C}=e,{readOnly:B=!1}=e;function S(T){i=T,t(0,i)}return r.$$set=T=>{"chatId"in T&&t(1,s=T.chatId),"idx"in T&&t(2,n=T.idx),"history"in T&&t(0,i=T.history),"messageId"in T&&t(3,o=T.messageId),"user"in T&&t(4,a=T.user),"gotoMessage"in T&&t(5,f=T.gotoMessage),"showPreviousMessage"in T&&t(6,u=T.showPreviousMessage),"showNextMessage"in T&&t(7,c=T.showNextMessage),"updateChat"in T&&t(8,g=T.updateChat),"editMessage"in T&&t(9,h=T.editMessage),"saveMessage"in T&&t(10,p=T.saveMessage),"deleteMessage"in T&&t(11,w=T.deleteMessage),"rateMessage"in T&&t(12,v=T.rateMessage),"actionMessage"in T&&t(13,y=T.actionMessage),"submitMessage"in T&&t(14,N=T.submitMessage),"regenerateResponse"in T&&t(15,O=T.regenerateResponse),"continueResponse"in T&&t(16,P=T.continueResponse),"mergeResponses"in T&&t(17,R=T.mergeResponses),"addMessages"in T&&t(18,I=T.addMessages),"triggerScroll"in T&&t(19,C=T.triggerScroll),"readOnly"in T&&t(20,B=T.readOnly)},[i,s,n,o,a,f,u,c,g,h,p,w,v,y,N,O,P,R,I,C,B,l,S]}class Mf extends Pe{constructor(e){super(),Le(this,e,Ef,If,Be,{chatId:1,idx:2,history:0,messageId:3,user:4,gotoMessage:5,showPreviousMessage:6,showNextMessage:7,updateChat:8,editMessage:9,saveMessage:10,deleteMessage:11,rateMessage:12,actionMessage:13,submitMessage:14,regenerateResponse:15,continueResponse:16,mergeResponses:17,addMessages:18,triggerScroll:19,readOnly:20})}}function Nr(r,e,t){const l=r.slice();return l[14]=e[t],l[16]=t,l}function Nf(r){let e,t,l,s,n;return{c(){e=E("div"),t=W(r[4]),l=W("  v"),s=W(bl),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);t=q(o,r[4]),l=q(o,"  v"),s=q(o,bl),o.forEach(m),this.h()},h(){var i;d(e,"class",n="flex w-full "+(((i=r[3])==null?void 0:i.landingPageMode)==="chat"?" -mt-1":"text-center items-center justify-center")+" self-start text-gray-600 dark:text-gray-400")},m(i,o){V(i,e,o),_(e,t),_(e,l),_(e,s)},p(i,o){var a;o&16&&K(t,i[4]),o&8&&n!==(n="flex w-full "+(((a=i[3])==null?void 0:a.landingPageMode)==="chat"?" -mt-1":"text-center items-center justify-center")+" self-start text-gray-600 dark:text-gray-400")&&d(e,"class",n)},i:Ee,o:Ee,d(i){i&&m(e)}}}function Df(r){let e,t,l=r[2].t("Suggested")+"",s,n;return e=new Zn({}),{c(){X(e.$$.fragment),t=A(),s=W(l)},l(i){$(e.$$.fragment,i),t=j(i),s=q(i,l)},m(i,o){x(e,i,o),V(i,t,o),V(i,s,o),n=!0},p(i,o){(!n||o&4)&&l!==(l=i[2].t("Suggested")+"")&&K(s,l)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),n=!1},d(i){i&&(m(t),m(s)),ee(e,i)}}}function Dr(r){let e,t=[],l=new Map,s,n=Ne(r[1]);const i=o=>o[14].id||o[14].content;for(let o=0;o<n.length;o+=1){let a=Nr(r,n,o),f=i(a);l.set(f,t[o]=Vr(f,a))}return{c(){e=E("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(m),this.h()},h(){d(e,"class",s="max-h-40 overflow-auto scrollbar-none items-start "+r[0]+" svelte-1co34if")},m(o,a){V(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(o,a){a&70&&(n=Ne(o[1]),t=Ht(t,a,i,1,o,n,l,e,Tn,Vr,null,Nr)),a&1&&s!==(s="max-h-40 overflow-auto scrollbar-none items-start "+o[0]+" svelte-1co34if")&&d(e,"class",s)},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Vf(r){let e,t=r[14].content+"",l,s,n,i=r[2].t("Prompt")+"",o;return{c(){e=E("div"),l=W(t),s=A(),n=E("div"),o=W(i),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=j(a),n=M(a,"DIV",{class:!0});var u=k(n);o=q(u,i),u.forEach(m),this.h()},h(){d(e,"class","font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1"),d(n,"class","text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1")},m(a,f){V(a,e,f),_(e,l),V(a,s,f),V(a,n,f),_(n,o)},p(a,f){f&2&&t!==(t=a[14].content+"")&&K(l,t),f&4&&i!==(i=a[2].t("Prompt")+"")&&K(o,i)},d(a){a&&(m(e),m(s),m(n))}}}function Cf(r){let e,t=r[14].title[0]+"",l,s,n,i=r[14].title[1]+"",o;return{c(){e=E("div"),l=W(t),s=A(),n=E("div"),o=W(i),this.h()},l(a){e=M(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=j(a),n=M(a,"DIV",{class:!0});var u=k(n);o=q(u,i),u.forEach(m),this.h()},h(){d(e,"class","font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1"),d(n,"class","text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1")},m(a,f){V(a,e,f),_(e,l),V(a,s,f),V(a,n,f),_(n,o)},p(a,f){f&2&&t!==(t=a[14].title[0]+"")&&K(l,t),f&2&&i!==(i=a[14].title[1]+"")&&K(o,i)},d(a){a&&(m(e),m(s),m(n))}}}function Vr(r,e){let t,l,s,n,i;function o(c,g){return c[14].title&&c[14].title[0]!==""?Cf:Vf}let a=o(e),f=a(e);function u(){return e[10](e[14])}return{key:r,first:null,c(){t=E("button"),l=E("div"),f.c(),s=A(),this.h()},l(c){t=M(c,"BUTTON",{class:!0,style:!0});var g=k(t);l=M(g,"DIV",{class:!0});var h=k(l);f.l(h),h.forEach(m),s=j(g),g.forEach(m),this.h()},h(){d(l,"class","flex flex-col text-left"),d(t,"class","waterfall flex flex-col flex-1 shrink-0 w-full justify-between px-3 py-2 rounded-xl bg-transparent hover:bg-black/5 dark:hover:bg-white/5 transition group svelte-1co34if"),Rt(t,"animation-delay",e[16]*60+"ms"),this.first=t},m(c,g){V(c,t,g),_(t,l),f.m(l,null),_(t,s),n||(i=me(t,"click",u),n=!0)},p(c,g){e=c,a===(a=o(e))&&f?f.p(e,g):(f.d(1),f=a(e),f&&(f.c(),f.m(l,null))),g&2&&Rt(t,"animation-delay",e[16]*60+"ms")},d(c){c&&m(t),f.d(),n=!1,i()}}}function Tf(r){let e,t,l,s,n,i;const o=[Df,Nf],a=[];function f(c,g){return c[1].length>0?0:1}t=f(r),l=a[t]=o[t](r);let u=r[1].length>0&&Dr(r);return{c(){e=E("div"),l.c(),s=A(),n=E("div"),u&&u.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var g=k(e);l.l(g),g.forEach(m),s=j(c),n=M(c,"DIV",{class:!0});var h=k(n);u&&u.l(h),h.forEach(m),this.h()},h(){d(e,"class","mb-1 flex gap-1 text-xs font-medium items-center text-gray-600 dark:text-gray-400"),d(n,"class","h-40 w-full")},m(c,g){V(c,e,g),a[t].m(e,null),V(c,s,g),V(c,n,g),u&&u.m(n,null),i=!0},p(c,[g]){let h=t;t=f(c),t===h?a[t].p(c,g):(le(),D(a[h],1,1,()=>{a[h]=null}),se(),l=a[t],l?l.p(c,g):(l=a[t]=o[t](c),l.c()),b(l,1),l.m(e,null)),c[1].length>0?u?u.p(c,g):(u=Dr(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i(c){i||(b(l),i=!0)},o(c){D(l),i=!1},d(c){c&&(m(e),m(s),m(n)),a[t].d(),u&&u.d()}}}function Bf(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if((r[t].id??r[t].content)!==(e[t].id??e[t].content))return!1;return!0}function Sf(r,e,t){let l,s,n;Me(r,gt,y=>t(3,s=y)),Me(r,Rn,y=>t(4,n=y));const i=Ge("i18n");Me(r,i,y=>t(2,l=y));const o=vt();let{suggestionPrompts:a=[]}=e,{className:f=""}=e,{inputValue:u=""}=e,c=[];const g={keys:["content","title"],threshold:.5};let h,p=[];const w=y=>{if(y.length>500)t(1,p=[]);else{const N=y.trim()&&h?h.search(y.trim()).map(O=>O.item):c;Bf(p,N)||t(1,p=N)}},v=y=>o("select",y.content);return r.$$set=y=>{"suggestionPrompts"in y&&t(7,a=y.suggestionPrompts),"className"in y&&t(0,f=y.className),"inputValue"in y&&t(8,u=y.inputValue)},r.$$.update=()=>{r.$$.dirty&384&&a&&(t(9,c=[...a??[]].sort(()=>Math.random()-.5)),w(u)),r.$$.dirty&512&&(h=new ti(c,g)),r.$$.dirty&256&&w(u)},[f,p,l,s,n,i,o,a,u,c,v]}class Of extends Pe{constructor(e){super(),Le(this,e,Sf,Tf,Be,{suggestionPrompts:7,className:0,inputValue:8})}}function Cr(r,e,t){const l=r.slice();return l[14]=e[t],l[16]=t,l}function Rf(r){let e,t;return{c(){e=E("img"),this.h()},l(l){e=M(l,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),this.h()},h(){var l,s,n;d(e,"crossorigin","anonymous"),Pt(e.src,t=((n=(s=(l=r[14])==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:n.profile_image_url)??(r[5].language==="dg-DG"?"/doge.png":`${Lt}/static/favicon.png`))||d(e,"src",t),d(e,"class","size-[2.7rem] rounded-full border-[1px] border-gray-100 dark:border-none"),d(e,"alt","logo"),d(e,"draggable","false")},m(l,s){V(l,e,s)},p(l,s){var n,i,o;s&33&&!Pt(e.src,t=((o=(i=(n=l[14])==null?void 0:n.info)==null?void 0:i.meta)==null?void 0:o.profile_image_url)??(l[5].language==="dg-DG"?"/doge.png":`${Lt}/static/favicon.png`))&&d(e,"src",t)},d(l){l&&m(e)}}}function Tr(r){var a,f,u;let e,t,l,s,n,i;t=new Oe({props:{content:jt.parse(bt(((u=(f=(a=r[0][r[4]])==null?void 0:a.info)==null?void 0:f.meta)==null?void 0:u.description)??"")),placement:"right",$$slots:{default:[Rf]},$$scope:{ctx:r}}});function o(){return r[12](r[16])}return{c(){e=E("button"),X(t.$$.fragment),l=A()},l(c){e=M(c,"BUTTON",{});var g=k(e);$(t.$$.fragment,g),l=j(g),g.forEach(m)},m(c,g){V(c,e,g),x(t,e,null),_(e,l),s=!0,n||(i=me(e,"click",o),n=!0)},p(c,g){var p,w,v;r=c;const h={};g&17&&(h.content=jt.parse(bt(((v=(w=(p=r[0][r[4]])==null?void 0:p.info)==null?void 0:w.meta)==null?void 0:v.description)??""))),g&131105&&(h.$$scope={dirty:g,ctx:r}),t.$set(h)},i(c){s||(b(t.$$.fragment,c),s=!0)},o(c){D(t.$$.fragment,c),s=!1},d(c){c&&m(e),ee(t),n=!1,i()}}}function Br(r){let e,t;return e=new Oe({props:{content:r[5].t("This chat wont appear in history and your messages will not be saved."),className:"w-full flex justify-start mb-0.5",placement:"top",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s&32&&(n.content=l[5].t("This chat wont appear in history and your messages will not be saved.")),s&131104&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Pf(r){let e,t,l=r[5].t("Temporary Chat")+"",s,n;return t=new li({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=E("div"),X(t.$$.fragment),s=W(l),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);$(t.$$.fragment,o),s=q(o,l),o.forEach(m),this.h()},h(){d(e,"class","flex items-center gap-2 text-gray-500 font-medium text-lg mt-2 w-fit")},m(i,o){V(i,e,o),x(t,e,null),_(e,s),n=!0},p(i,o){(!n||o&32)&&l!==(l=i[5].t("Temporary Chat")+"")&&K(s,l)},i(i){n||(b(t.$$.fragment,i),n=!0)},o(i){D(t.$$.fragment,i),n=!1},d(i){i&&m(e),ee(t)}}}function Lf(r){var l;let e=r[5].t("Hello, {{name}}",{name:(l=r[7])==null?void 0:l.name})+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){V(s,t,n)},p(s,n){var i;n&160&&e!==(e=s[5].t("Hello, {{name}}",{name:(i=s[7])==null?void 0:i.name})+"")&&K(t,e)},d(s){s&&m(t)}}}function Af(r){var l;let e=((l=r[0][r[4]])==null?void 0:l.name)+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){V(s,t,n)},p(s,n){var i;n&17&&e!==(e=((i=s[0][s[4]])==null?void 0:i.name)+"")&&K(t,e)},d(s){s&&m(t)}}}function jf(r){let e,t=r[5].t("How can I help you today?")+"",l;return{c(){e=E("div"),l=W(t),this.h()},l(s){e=M(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","font-medium text-gray-400 dark:text-gray-500 line-clamp-1 font-p")},m(s,n){V(s,e,n),_(e,l)},p(s,n){n&32&&t!==(t=s[5].t("How can I help you today?")+"")&&K(l,t)},d(s){s&&m(e)}}}function Hf(r){var o,a,f,u,c,g;let e,t,l=jt.parse(bt((f=(a=(o=r[0][r[4]])==null?void 0:o.info)==null?void 0:a.meta)==null?void 0:f.description))+"",s,n,i=((g=(c=(u=r[0][r[4]])==null?void 0:u.info)==null?void 0:c.meta)==null?void 0:g.user)&&Sr(r);return{c(){e=E("div"),t=new Vn(!1),s=A(),i&&i.c(),n=de(),this.h()},l(h){e=M(h,"DIV",{class:!0});var p=k(e);t=Cn(p,!1),p.forEach(m),s=j(h),i&&i.l(h),n=de(),this.h()},h(){t.a=null,d(e,"class","mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown")},m(h,p){V(h,e,p),t.m(l,e),V(h,s,p),i&&i.m(h,p),V(h,n,p)},p(h,p){var w,v,y,N,O,P;p&17&&l!==(l=jt.parse(bt((y=(v=(w=h[0][h[4]])==null?void 0:w.info)==null?void 0:v.meta)==null?void 0:y.description))+"")&&t.p(l),(P=(O=(N=h[0][h[4]])==null?void 0:N.info)==null?void 0:O.meta)!=null&&P.user?i?i.p(h,p):(i=Sr(h),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(h){h&&(m(e),m(s),m(n)),i&&i.d(h)}}}function Sr(r){let e,t;function l(i,o){var a,f,u;return(u=(f=(a=i[0][i[4]])==null?void 0:a.info)==null?void 0:f.meta)!=null&&u.user.community?Uf:zf}let s=l(r),n=s(r);return{c(){e=E("div"),t=W(`By
								`),n.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var o=k(e);t=q(o,`By
								`),n.l(o),o.forEach(m),this.h()},h(){d(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(i,o){V(i,e,o),_(e,t),n.m(e,null)},p(i,o){s===(s=l(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e,null)))},d(i){i&&m(e),n.d()}}}function zf(r){var l,s,n;let e=((n=(s=(l=r[0][r[4]])==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:n.user.name)+"",t;return{c(){t=W(e)},l(i){t=q(i,e)},m(i,o){V(i,t,o)},p(i,o){var a,f,u;o&17&&e!==(e=((u=(f=(a=i[0][i[4]])==null?void 0:a.info)==null?void 0:f.meta)==null?void 0:u.user.name)+"")&&K(t,e)},d(i){i&&m(t)}}}function Uf(r){var n,i,o,a,f,u,c,g,h;let e,t=((o=(i=(n=r[0][r[4]])==null?void 0:n.info)==null?void 0:i.meta)!=null&&o.user.name?(u=(f=(a=r[0][r[4]])==null?void 0:a.info)==null?void 0:f.meta)==null?void 0:u.user.name:`@${(h=(g=(c=r[0][r[4]])==null?void 0:c.info)==null?void 0:g.meta)==null?void 0:h.user.username}`)+"",l,s;return{c(){e=E("a"),l=W(t),this.h()},l(p){e=M(p,"A",{href:!0});var w=k(e);l=q(w,t),w.forEach(m),this.h()},h(){var p,w,v;d(e,"href",s="https://openwebui.com/m/"+((v=(w=(p=r[0][r[4]])==null?void 0:p.info)==null?void 0:w.meta)==null?void 0:v.user.username))},m(p,w){V(p,e,w),_(e,l)},p(p,w){var v,y,N,O,P,R,I,C,B,S,T,z;w&17&&t!==(t=((N=(y=(v=p[0][p[4]])==null?void 0:v.info)==null?void 0:y.meta)!=null&&N.user.name?(R=(P=(O=p[0][p[4]])==null?void 0:O.info)==null?void 0:P.meta)==null?void 0:R.user.name:`@${(B=(C=(I=p[0][p[4]])==null?void 0:I.info)==null?void 0:C.meta)==null?void 0:B.user.username}`)+"")&&K(l,t),w&17&&s!==(s="https://openwebui.com/m/"+((z=(T=(S=p[0][p[4]])==null?void 0:S.info)==null?void 0:T.meta)==null?void 0:z.user.username))&&d(e,"href",s)},d(p){p&&m(e)}}}function Or(r){var H,re,Q,ie,ge,he,ye;let e,t,l,s,n,i,o,a,f,u,c,g,h,p,w,v,y,N,O=Ne(r[0]),P=[];for(let Z=0;Z<O.length;Z+=1)P[Z]=Tr(Cr(r,O,Z));const R=Z=>D(P[Z],1,1,()=>{P[Z]=null});let I=r[6]&&Br(r);function C(Z,oe){var pe;return(pe=Z[0][Z[4]])!=null&&pe.name?Af:Lf}let B=C(r),S=B(r);function T(Z,oe){var pe,ae,ue;return((ue=(ae=(pe=Z[0][Z[4]])==null?void 0:pe.info)==null?void 0:ae.meta)==null?void 0:ue.description)??null?Hf:jf}let z=T(r),J=z(r);return v=new Of({props:{className:"grid grid-cols-2",suggestionPrompts:((Q=(re=(H=r[1])==null?void 0:H.info)==null?void 0:re.meta)==null?void 0:Q.suggestion_prompts)??((he=(ge=(ie=r[0][r[4]])==null?void 0:ie.info)==null?void 0:ge.meta)==null?void 0:he.suggestion_prompts)??((ye=r[8])==null?void 0:ye.default_prompt_suggestions)??[]}}),v.$on("select",r[13]),{c(){e=E("div"),t=E("div"),l=E("div");for(let Z=0;Z<P.length;Z+=1)P[Z].c();n=A(),I&&I.c(),i=A(),o=E("div"),a=E("div"),f=E("div"),S.c(),c=A(),g=E("div"),J.c(),p=A(),w=E("div"),X(v.$$.fragment),this.h()},l(Z){e=M(Z,"DIV",{class:!0});var oe=k(e);t=M(oe,"DIV",{class:!0});var pe=k(t);l=M(pe,"DIV",{class:!0});var ae=k(l);for(let L=0;L<P.length;L+=1)P[L].l(ae);ae.forEach(m),pe.forEach(m),n=j(oe),I&&I.l(oe),i=j(oe),o=M(oe,"DIV",{class:!0});var ue=k(o);a=M(ue,"DIV",{});var F=k(a);f=M(F,"DIV",{class:!0});var _e=k(f);S.l(_e),_e.forEach(m),c=j(F),g=M(F,"DIV",{});var fe=k(g);J.l(fe),fe.forEach(m),F.forEach(m),ue.forEach(m),p=j(oe),w=M(oe,"DIV",{class:!0});var be=k(w);$(v.$$.fragment,be),be.forEach(m),oe.forEach(m),this.h()},h(){d(l,"class","flex -space-x-4 mb-0.5"),d(t,"class","flex justify-start"),d(f,"class","capitalize line-clamp-1"),d(o,"class","mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 font-medium text-left flex items-center gap-4 font-primary"),d(w,"class","w-full font-primary"),d(e,"class","m-auto w-full max-w-6xl px-8 lg:px-20")},m(Z,oe){V(Z,e,oe),_(e,t),_(t,l);for(let pe=0;pe<P.length;pe+=1)P[pe]&&P[pe].m(l,null);_(e,n),I&&I.m(e,null),_(e,i),_(e,o),_(o,a),_(a,f),S.m(f,null),_(a,c),_(a,g),J.m(g,null),_(e,p),_(e,w),x(v,w,null),N=!0},p(Z,oe){var ae,ue,F,_e,fe,be,L;if(oe&49){O=Ne(Z[0]);let G;for(G=0;G<O.length;G+=1){const te=Cr(Z,O,G);P[G]?(P[G].p(te,oe),b(P[G],1)):(P[G]=Tr(te),P[G].c(),b(P[G],1),P[G].m(l,null))}for(le(),G=O.length;G<P.length;G+=1)R(G);se()}Z[6]?I?(I.p(Z,oe),oe&64&&b(I,1)):(I=Br(Z),I.c(),b(I,1),I.m(e,i)):I&&(le(),D(I,1,1,()=>{I=null}),se()),B===(B=C(Z))&&S?S.p(Z,oe):(S.d(1),S=B(Z),S&&(S.c(),S.m(f,null))),z===(z=T(Z))&&J?J.p(Z,oe):(J.d(1),J=z(Z),J&&(J.c(),J.m(g,null)));const pe={};oe&275&&(pe.suggestionPrompts=((F=(ue=(ae=Z[1])==null?void 0:ae.info)==null?void 0:ue.meta)==null?void 0:F.suggestion_prompts)??((be=(fe=(_e=Z[0][Z[4]])==null?void 0:_e.info)==null?void 0:fe.meta)==null?void 0:be.suggestion_prompts)??((L=Z[8])==null?void 0:L.default_prompt_suggestions)??[]),v.$set(pe)},i(Z){if(!N){for(let oe=0;oe<O.length;oe+=1)b(P[oe]);Z&&(s||It(()=>{s=Et(l,Mt,{duration:200}),s.start()})),b(I),Z&&(u||It(()=>{u=Et(f,Mt,{duration:200}),u.start()})),Z&&(h||It(()=>{h=Et(g,Mt,{duration:200,delay:200}),h.start()})),b(v.$$.fragment,Z),Z&&(y||It(()=>{y=Et(w,Mt,{duration:200,delay:300}),y.start()})),N=!0}},o(Z){P=P.filter(Boolean);for(let oe=0;oe<P.length;oe+=1)D(P[oe]);D(I),D(v.$$.fragment,Z),N=!1},d(Z){Z&&m(e),Je(P,Z),I&&I.d(),S.d(),J.d(),ee(v)}}}function Wf(r){let e=r[3],t,l,s=Or(r);return{c(){s.c(),t=de()},l(n){s.l(n),t=de()},m(n,i){s.m(n,i),V(n,t,i),l=!0},p(n,[i]){i&8&&Be(e,e=n[3])?(le(),D(s,1,1,Ee),se(),s=Or(n),s.c(),b(s,1),s.m(t.parentNode,t)):s.p(n,i)},i(n){l||(b(s),l=!0)},o(n){D(s),l=!1},d(n){n&&m(t),s.d(n)}}}function qf(r,e,t){let l,s,n,i,o;Me(r,zt,y=>t(11,l=y)),Me(r,Kt,y=>t(6,n=y)),Me(r,Ut,y=>t(7,i=y)),Me(r,zr,y=>t(8,o=y));const a=Ge("i18n");Me(r,a,y=>t(5,s=y));let{modelIds:f=[]}=e,{models:u=[]}=e,{atSelectedModel:c}=e,{submitPrompt:g}=e,h=!1,p=0;kt(()=>{t(3,h=!0)});const w=y=>{t(4,p=y)},v=y=>{g(y.detail)};return r.$$set=y=>{"modelIds"in y&&t(10,f=y.modelIds),"models"in y&&t(0,u=y.models),"atSelectedModel"in y&&t(1,c=y.atSelectedModel),"submitPrompt"in y&&t(2,g=y.submitPrompt)},r.$$.update=()=>{r.$$.dirty&3072&&t(0,u=f.map(y=>l.find(N=>N.id===y))),r.$$.dirty&1025&&f.length>0&&t(4,p=u.length-1)},[u,c,g,h,p,s,n,i,o,a,f,l,w,v]}class Ff extends Pe{constructor(e){super(),Le(this,e,qf,Wf,Be,{modelIds:10,models:0,atSelectedModel:1,submitPrompt:2})}}function Rr(r,e,t){const l=r.slice();return l[43]=e[t],l[45]=t,l}function Jf(r){let e,t=r[3],l,s=jr(r);return{c(){e=E("div"),s.c(),this.h()},l(n){e=M(n,"DIV",{class:!0});var i=k(e);s.l(i),i.forEach(m),this.h()},h(){d(e,"class","w-full pt-2")},m(n,i){V(n,e,i),s.m(e,null),l=!0},p(n,i){i[0]&8&&Be(t,t=n[3])?(le(),D(s,1,1,Ee),se(),s=jr(n),s.c(),b(s,1),s.m(e,null)):s.p(n,i)},i(n){l||(b(s),l=!0)},o(n){D(s),l=!1},d(n){n&&m(e),s.d(n)}}}function Gf(r){let e,t;return e=new Ff({props:{modelIds:r[5],atSelectedModel:r[6],submitPrompt:r[34]}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&32&&(n.modelIds=l[5]),s[0]&64&&(n.atSelectedModel=l[6]),s[0]&65538&&(n.submitPrompt=l[34]),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Pr(r){let e,t;return e=new ei({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),e.$on("visible",r[35]),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[1]&32768&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Kf(r){let e,t,l,s,n="Loading...",i;return t=new Yt({props:{className:" size-4"}}),{c(){e=E("div"),X(t.$$.fragment),l=A(),s=E("div"),s.textContent=n,this.h()},l(o){e=M(o,"DIV",{class:!0});var a=k(e);$(t.$$.fragment,a),l=j(a),s=M(a,"DIV",{class:!0,"data-svelte-h":!0}),Fe(s)!=="svelte-17uns3n"&&(s.textContent=n),a.forEach(m),this.h()},h(){d(s,"class",""),d(e,"class","w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2")},m(o,a){V(o,e,a),x(t,e,null),_(e,l),_(e,s),i=!0},p:Ee,i(o){i||(b(t.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),i=!1},d(o){o&&m(e),ee(t)}}}function Lr(r,e){let t,l,s,n;function i(a){e[36](a)}let o={chatId:e[3],messageId:e[43].id,idx:e[45],user:e[4],gotoMessage:e[20],showPreviousMessage:e[21],showNextMessage:e[22],updateChat:e[19],editMessage:e[24],deleteMessage:e[27],rateMessage:e[23],actionMessage:e[25],saveMessage:e[26],submitMessage:e[10],regenerateResponse:e[8],continueResponse:e[7],mergeResponses:e[9],addMessages:e[11],triggerScroll:e[28],readOnly:e[12]};return e[0]!==void 0&&(o.history=e[0]),l=new Mf({props:o}),ze.push(()=>Ye(l,"history",i)),{key:r,first:null,c(){t=de(),X(l.$$.fragment),this.h()},l(a){t=de(),$(l.$$.fragment,a),this.h()},h(){this.first=t},m(a,f){V(a,t,f),x(l,a,f),n=!0},p(a,f){e=a;const u={};f[0]&8&&(u.chatId=e[3]),f[0]&16384&&(u.messageId=e[43].id),f[0]&16384&&(u.idx=e[45]),f[0]&16&&(u.user=e[4]),f[0]&1024&&(u.submitMessage=e[10]),f[0]&256&&(u.regenerateResponse=e[8]),f[0]&128&&(u.continueResponse=e[7]),f[0]&512&&(u.mergeResponses=e[9]),f[0]&2048&&(u.addMessages=e[11]),f[0]&4096&&(u.readOnly=e[12]),!s&&f[0]&1&&(s=!0,u.history=e[0],Qe(()=>s=!1)),l.$set(u)},i(a){n||(b(l.$$.fragment,a),n=!0)},o(a){D(l.$$.fragment,a),n=!1},d(a){a&&m(t),ee(l,a)}}}function Ar(r){let e;return{c(){e=E("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","pb-6")},m(t,l){V(t,e,l)},d(t){t&&m(e)}}}function jr(r){var w;let e,t=((w=r[14].at(0))==null?void 0:w.parentId)!==null,l,s=[],n=new Map,i,o,a,f,u,c=t&&Pr(r),g=Ne(r[14]);const h=v=>v[43].id;for(let v=0;v<g.length;v+=1){let y=Rr(r,g,v),N=h(y);n.set(N,s[v]=Lr(N,y))}let p=r[13]&&Ar();return{c(){e=E("div"),c&&c.c(),l=A();for(let v=0;v<s.length;v+=1)s[v].c();i=A(),o=E("div"),a=A(),p&&p.c(),f=de(),this.h()},l(v){e=M(v,"DIV",{class:!0});var y=k(e);c&&c.l(y),l=j(y);for(let N=0;N<s.length;N+=1)s[N].l(y);y.forEach(m),i=j(v),o=M(v,"DIV",{class:!0}),k(o).forEach(m),a=j(v),p&&p.l(v),f=de(),this.h()},h(){d(e,"class","w-full"),d(o,"class","pb-12")},m(v,y){V(v,e,y),c&&c.m(e,null),_(e,l);for(let N=0;N<s.length;N+=1)s[N]&&s[N].m(e,null);V(v,i,y),V(v,o,y),V(v,a,y),p&&p.m(v,y),V(v,f,y),u=!0},p(v,y){var N;y[0]&16384&&(t=((N=v[14].at(0))==null?void 0:N.parentId)!==null),t?c?(c.p(v,y),y[0]&16384&&b(c,1)):(c=Pr(v),c.c(),b(c,1),c.m(e,l)):c&&(le(),D(c,1,1,()=>{c=null}),se()),y[0]&536371097&&(g=Ne(v[14]),le(),s=Ht(s,y,h,1,v,g,n,e,Gt,Lr,null,Rr),se()),v[13]?p||(p=Ar(),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},i(v){if(!u){b(c);for(let y=0;y<g.length;y+=1)b(s[y]);u=!0}},o(v){D(c);for(let y=0;y<s.length;y+=1)D(s[y]);u=!1},d(v){v&&(m(e),m(i),m(o),m(a),m(f)),c&&c.d();for(let y=0;y<s.length;y+=1)s[y].d();p&&p.d(v)}}}function Zf(r){let e,t,l,s,n;const i=[Gf,Jf],o=[];function a(f,u){var c;return u[0]&1&&(t=null),t==null&&(t=Object.keys(((c=f[0])==null?void 0:c.messages)??{}).length==0),t?0:1}return l=a(r,[-1,-1]),s=o[l]=i[l](r),{c(){e=E("div"),s.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var u=k(e);s.l(u),u.forEach(m),this.h()},h(){d(e,"class",r[2])},m(f,u){V(f,e,u),o[l].m(e,null),n=!0},p(f,u){let c=l;l=a(f,u),l===c?o[l].p(f,u):(le(),D(o[c],1,1,()=>{o[c]=null}),se(),s=o[l],s?s.p(f,u):(s=o[l]=i[l](f),s.c()),b(s,1),s.m(e,null)),(!n||u[0]&4)&&d(e,"class",f[2])},i(f){n||(b(s),n=!0)},o(f){D(s),n=!1},d(f){f&&m(e),o[l].d()}}}function Qf(r,e,t){let l,s,n,i,o;Me(r,gt,L=>t(37,l=L)),Me(r,vl,L=>t(38,s=L)),Me(r,Kt,L=>t(39,n=L)),Me(r,Ut,L=>t(40,i=L)),vt();const a=Ge("i18n");Me(r,a,L=>t(16,o=L));let{className:f="h-full flex pt-8"}=e,{chatId:u=""}=e,{user:c=i}=e,{prompt:g}=e,{history:h={}}=e,{selectedModels:p}=e,{atSelectedModel:w}=e,v=[],{sendPrompt:y}=e,{continueResponse:N}=e,{regenerateResponse:O}=e,{mergeResponses:P}=e,{chatActionHandler:R}=e,{showMessage:I=()=>{}}=e,{submitMessage:C=()=>{}}=e,{addMessages:B=()=>{}}=e,{readOnly:S=!1}=e,{bottomPadding:T=!1}=e,{autoScroll:z}=e,J=20,H=!1;const re=async()=>{const L=document.getElementById("messages-container");L.scrollTop=L.scrollTop+100,t(15,H=!0),t(33,J+=20),await Ce(),t(15,H=!1)},Q=()=>{const L=document.getElementById("messages-container");L.scrollTop=L.scrollHeight},ie=async()=>{n||(t(0,h),await Ce(),await An(localStorage.token,u,{history:h,messages:v}),vl.set(1),await Pn.set(await jn(localStorage.token,s)))},ge=async(L,G)=>{let te;L.parentId!==null?te=h.messages[L.parentId].childrenIds:te=Object.values(h.messages).filter(ce=>ce.parentId===null).map(ce=>ce.id),G=Math.max(0,Math.min(G,te.length-1));let Y=te[G];if(L.id!==Y){let ce=h.messages[Y].childrenIds;for(;ce.length!==0;)Y=ce.at(-1),ce=h.messages[Y].childrenIds;t(0,h.currentId=Y,h)}if(await Ce(),(l==null?void 0:l.scrollOnBranchChange)??!0){const ce=document.getElementById("messages-container");t(29,z=ce.scrollHeight-ce.scrollTop<=ce.clientHeight+50),setTimeout(()=>{Q()},100)}},he=async L=>{if(L.parentId!==null){let G=h.messages[L.parentId].childrenIds[Math.max(h.messages[L.parentId].childrenIds.indexOf(L.id)-1,0)];if(L.id!==G){let te=h.messages[G].childrenIds;for(;te.length!==0;)G=te.at(-1),te=h.messages[G].childrenIds;t(0,h.currentId=G,h)}}else{let G=Object.values(h.messages).filter(Y=>Y.parentId===null).map(Y=>Y.id),te=G[Math.max(G.indexOf(L.id)-1,0)];if(L.id!==te){let Y=h.messages[te].childrenIds;for(;Y.length!==0;)te=Y.at(-1),Y=h.messages[te].childrenIds;t(0,h.currentId=te,h)}}if(await Ce(),(l==null?void 0:l.scrollOnBranchChange)??!0){const G=document.getElementById("messages-container");t(29,z=G.scrollHeight-G.scrollTop<=G.clientHeight+50),setTimeout(()=>{Q()},100)}},ye=async L=>{if(L.parentId!==null){let G=h.messages[L.parentId].childrenIds[Math.min(h.messages[L.parentId].childrenIds.indexOf(L.id)+1,h.messages[L.parentId].childrenIds.length-1)];if(L.id!==G){let te=h.messages[G].childrenIds;for(;te.length!==0;)G=te.at(-1),te=h.messages[G].childrenIds;t(0,h.currentId=G,h)}}else{let G=Object.values(h.messages).filter(Y=>Y.parentId===null).map(Y=>Y.id),te=G[Math.min(G.indexOf(L.id)+1,G.length-1)];if(L.id!==te){let Y=h.messages[te].childrenIds;for(;Y.length!==0;)te=Y.at(-1),Y=h.messages[te].childrenIds;t(0,h.currentId=te,h)}}if(await Ce(),(l==null?void 0:l.scrollOnBranchChange)??!0){const G=document.getElementById("messages-container");t(29,z=G.scrollHeight-G.scrollTop<=G.clientHeight+50),setTimeout(()=>{Q()},100)}},Z=async(L,G)=>{t(0,h.messages[L].annotation={...h.messages[L].annotation,rating:G},h),await ie()},oe=async(L,{content:G,files:te},Y=!0)=>{if(h.messages[L].role==="user")if(Y){let ce=G,ve=wl(),Ve={id:ve,parentId:h.messages[L].parentId,childrenIds:[],role:"user",content:ce,...te&&{files:te},models:p,timestamp:Math.floor(Date.now()/1e3)},De=h.messages[L].parentId;De!==null&&t(0,h.messages[De].childrenIds=[...h.messages[De].childrenIds,ve],h),t(0,h.messages[ve]=Ve,h),t(0,h.currentId=ve,h),await Ce(),await y(h,ce,ve)}else t(0,h.messages[L].content=G,h),t(0,h.messages[L].files=te,h),await ie();else if(Y){const ce=wl(),ve=h.messages[L],Ve=ve.parentId,De={...ve,id:ce,parentId:Ve,childrenIds:[],files:void 0,content:G,timestamp:Math.floor(Date.now()/1e3)};t(0,h.messages[ce]=De,h),t(0,h.currentId=ce,h),Ve!==null&&t(0,h.messages[Ve].childrenIds=[...h.messages[Ve].childrenIds,ce],h),await ie()}else t(0,h.messages[L].originalContent=h.messages[L].content,h),t(0,h.messages[L].content=G,h),await ie()},pe=async(L,G,te=null)=>{await R(u,L,G.model,G.id,te)},ae=async(L,G)=>{t(0,h.messages[L]=G,h),await ie()},ue=async L=>{const G=h.messages[L],te=G.parentId,Y=G.childrenIds??[],ce=Y.flatMap(ve=>{var Ve;return((Ve=h.messages[ve])==null?void 0:Ve.childrenIds)??[]});te&&h.messages[te]&&t(0,h.messages[te].childrenIds=[...h.messages[te].childrenIds.filter(ve=>ve!==L),...ce],h),ce.forEach(ve=>{h.messages[ve]&&t(0,h.messages[ve].parentId=te,h)}),[L,...Y].forEach(ve=>{delete h.messages[ve]}),await Ce(),I({id:te}),await ie()},F=()=>{if(z){const L=document.getElementById("messages-container");t(29,z=L.scrollHeight-L.scrollTop<=L.clientHeight+50),setTimeout(()=>{Q()},100)}},_e=async L=>{let G=L;if(L.includes("{{CLIPBOARD}}")){const te=await navigator.clipboard.readText().catch(Y=>(je.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));G=L.replaceAll("{{CLIPBOARD}}",te)}t(1,g=G),await Ce()},fe=L=>{console.log("visible"),H||re()};function be(L){h=L,t(0,h)}return r.$$set=L=>{"className"in L&&t(2,f=L.className),"chatId"in L&&t(3,u=L.chatId),"user"in L&&t(4,c=L.user),"prompt"in L&&t(1,g=L.prompt),"history"in L&&t(0,h=L.history),"selectedModels"in L&&t(5,p=L.selectedModels),"atSelectedModel"in L&&t(6,w=L.atSelectedModel),"sendPrompt"in L&&t(30,y=L.sendPrompt),"continueResponse"in L&&t(7,N=L.continueResponse),"regenerateResponse"in L&&t(8,O=L.regenerateResponse),"mergeResponses"in L&&t(9,P=L.mergeResponses),"chatActionHandler"in L&&t(31,R=L.chatActionHandler),"showMessage"in L&&t(32,I=L.showMessage),"submitMessage"in L&&t(10,C=L.submitMessage),"addMessages"in L&&t(11,B=L.addMessages),"readOnly"in L&&t(12,S=L.readOnly),"bottomPadding"in L&&t(13,T=L.bottomPadding),"autoScroll"in L&&t(29,z=L.autoScroll)},r.$$.update=()=>{if(r.$$.dirty[0]&1|r.$$.dirty[1]&4)if(h.currentId){let L=[],G=h.messages[h.currentId];for(;G&&L.length<=J;)L.unshift({...G}),G=G.parentId!==null?h.messages[G.parentId]:null;t(14,v=L)}else t(14,v=[]);r.$$.dirty[0]&536879104&&z&&T&&(async()=>(await Ce(),Q()))()},[h,g,f,u,c,p,w,N,O,P,C,B,S,T,v,H,o,a,re,ie,ge,he,ye,Z,oe,pe,ae,ue,F,z,y,R,I,J,_e,fe,be]}class Pu extends Pe{constructor(e){super(),Le(this,e,Qf,Zf,Be,{className:2,chatId:3,user:4,prompt:1,history:0,selectedModels:5,atSelectedModel:6,sendPrompt:30,continueResponse:7,regenerateResponse:8,mergeResponses:9,chatActionHandler:31,showMessage:32,submitMessage:10,addMessages:11,readOnly:12,bottomPadding:13,autoScroll:29},null,[-1,-1])}}export{ri as K,Pu as M,Of as S};
//# sourceMappingURL=3REZROqk.js.map
