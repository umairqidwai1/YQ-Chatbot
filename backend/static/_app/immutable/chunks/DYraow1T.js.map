{"version":3,"file":"DYraow1T.js","sources":["../../../../../../src/lib/components/common/ConfirmDialog.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport DOMPurify from 'dompurify';\n\n\timport { onMount, getContext, createEventDispatcher, onDestroy } from 'svelte';\n\timport * as FocusTrap from 'focus-trap';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\timport { fade } from 'svelte/transition';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { marked } from 'marked';\n\n\texport let title = '';\n\texport let message = '';\n\n\texport let cancelLabel = $i18n.t('Cancel');\n\texport let confirmLabel = $i18n.t('Confirm');\n\n\texport let onConfirm = () => {};\n\n\texport let input = false;\n\texport let inputPlaceholder = '';\n\texport let inputValue = '';\n\n\texport let show = false;\n\n\tlet modalElement = null;\n\tlet mounted = false;\n\n\tlet focusTrap: FocusTrap.FocusTrap | null = null;\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tconsole.log('Escape');\n\t\t\tshow = false;\n\t\t}\n\n\t\tif (event.key === 'Enter') {\n\t\t\tconsole.log('Enter');\n\t\t\tconfirmHandler();\n\t\t}\n\t};\n\n\tconst confirmHandler = async () => {\n\t\tshow = false;\n\t\tawait onConfirm();\n\t\tdispatch('confirm', inputValue);\n\t};\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n\n\t$: if (mounted) {\n\t\tif (show && modalElement) {\n\t\t\tdocument.body.appendChild(modalElement);\n\t\t\tfocusTrap = FocusTrap.createFocusTrap(modalElement);\n\t\t\tfocusTrap.activate();\n\n\t\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else if (modalElement) {\n\t\t\tfocusTrap.deactivate();\n\n\t\t\twindow.removeEventListener('keydown', handleKeyDown);\n\t\t\tdocument.body.removeChild(modalElement);\n\n\t\t\tdocument.body.style.overflow = 'unset';\n\t\t}\n\t}\n\n\tonDestroy(() => {\n\t\tshow = false;\n\t\tif (focusTrap) {\n\t\t\tfocusTrap.deactivate();\n\t\t}\n\t\tif (modalElement) {\n\t\t\tdocument.body.removeChild(modalElement);\n\t\t}\n\t});\n</script>\n\n{#if show}\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<div\n\t\tbind:this={modalElement}\n\t\tclass=\" fixed top-0 right-0 left-0 bottom-0 bg-black/60 w-full h-screen max-h-[100dvh] flex justify-center z-99999999 overflow-hidden overscroll-contain\"\n\t\tin:fade={{ duration: 10 }}\n\t\ton:mousedown={() => {\n\t\t\tshow = false;\n\t\t}}\n\t>\n\t\t<div\n\t\t\tclass=\" m-auto rounded-2xl max-w-full w-[32rem] mx-2 bg-gray-50 dark:bg-gray-950 max-h-[100dvh] shadow-3xl\"\n\t\t\tin:flyAndScale\n\t\t\ton:mousedown={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\"px-[1.75rem] py-6 flex flex-col\">\n\t\t\t\t<div class=\" text-lg font-semibold dark:text-gray-200 mb-2.5\">\n\t\t\t\t\t{#if title !== ''}\n\t\t\t\t\t\t{title}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('Confirm your action')}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<slot>\n\t\t\t\t\t<div class=\" text-sm text-gray-500 flex-1\">\n\t\t\t\t\t\t{#if message !== ''}\n\t\t\t\t\t\t\t{@const html = DOMPurify.sanitize(marked.parse(message))}\n\t\t\t\t\t\t\t{@html html}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{$i18n.t('This action cannot be undone. Do you wish to continue?')}\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if input}\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tbind:value={inputValue}\n\t\t\t\t\t\t\t\tplaceholder={inputPlaceholder ? inputPlaceholder : $i18n.t('Enter your message')}\n\t\t\t\t\t\t\t\tclass=\"w-full mt-2 rounded-lg px-4 py-2 text-sm dark:text-gray-300 dark:bg-gray-900 outline-hidden resize-none\"\n\t\t\t\t\t\t\t\trows=\"3\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</slot>\n\n\t\t\t\t<div class=\"mt-6 flex justify-between gap-1.5\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white font-medium w-full py-2.5 rounded-lg transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t\tdispatch('cancel');\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{cancelLabel}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"bg-gray-900 hover:bg-gray-850 text-gray-100 dark:bg-gray-100 dark:hover:bg-white dark:text-gray-800 font-medium w-full py-2.5 rounded-lg transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tconfirmHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{confirmLabel}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.modal-content {\n\t\tanimation: scaleUp 0.1s ease-out forwards;\n\t}\n\n\t@keyframes scaleUp {\n\t\tfrom {\n\t\t\ttransform: scale(0.985);\n\t\t\topacity: 0;\n\t\t}\n\t\tto {\n\t\t\ttransform: scale(1);\n\t\t\topacity: 1;\n\t\t}\n\t}\n</style>\n"],"names":["constants_0","DOMPurify","marked","child_ctx","ctx","create_if_block_3","insert_hydration","target","div4","anchor","append_hydration","div3","div2","div0","div1","button0","button1","div4_intro","create_in_transition","fade","set_data","t_value","html_tag","raw_value","textarea","create_if_block_2","create_if_block_1","div","create_if_block","e","i18n","getContext","dispatch","createEventDispatcher","title","$$props","message","cancelLabel","$i18n","confirmLabel","onConfirm","input","inputPlaceholder","inputValue","show","modalElement","mounted","focusTrap","handleKeyDown","event","confirmHandler","onMount","onDestroy","$$invalidate","$$value","FocusTrap.createFocusTrap"],"mappings":"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"}