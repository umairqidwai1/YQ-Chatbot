var vn=Object.defineProperty;var kn=(r,e,t)=>e in r?vn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var pt=(r,e,t)=>kn(r,typeof e!="symbol"?e+"":e,t);import{s as Be,e as y,k as j,c as I,a as k,d as m,o as H,f as d,i as D,g as _,n as Ee,t as W,b as q,G as Fe,C as ot,u as me,h as J,S as Ge,H as Xe,j as Me,p as Je,W as kt,q as wt,z as ze,B as Qe,r as wn,v as yn,w as In,x as En,l as de,E as ke,F as we,V as Lt,D as Ce,Z as Mn,ao as Nn,R as Et,y as Pt,X as Dn,Y as Vn}from"./Bk--KVgx.js";import{S as Le,i as Pe,b as X,d as $,m as x,t as b,a as V,e as ee,f as Ye,g as le,c as se,j as Mt}from"./CoU9NT7-.js";import{e as Ne,u as Ht,o as Jt,d as Cn}from"./DOi8FfRu.js";import{m as zt,e as ml,n as jr,b as gt,i as Tn,F as gl,G as _l,H as Bn,J as Sn,c as Hr,T as pl,u as Ut,o as Kt,g as At,W as Rn,d as bl,z as vl,C as On}from"./Cx1AvSPh.js";import{t as Ae}from"./DXxu2l8m.js";import{h as Ln,u as Pn,j as An}from"./D7464H8B.js";import{a as Gt,x as kl,k as zr,y as jn,n as bt,w as vt,l as Ur,m as jt,v as wl}from"./BQs868cI.js";import{d as nt}from"./I1CDPYOB.js";import"./BFK-koEx.js";import{u as yl,c as Hn}from"./BdmwXn5G.js";import{d as zn}from"./Dl8uL88t.js";import{s as Un}from"./C7z_5WAu.js";import{i as Wn}from"./Dx1g-JMN.js";import{P as Wr,N as Zt}from"./CCL0U8b1.js";import{I as Qt}from"./Dz2bbB3I.js";import{T as Se}from"./CSMXUTi0.js";import{T as qn}from"./BT8wMJ15.js";import{C as qr}from"./hEaeE0lN.js";import{C as Fr}from"./DRvjGJhi.js";import{M as Fn}from"./B7dFjf2L.js";import{aF as Gr,aU as Gn,aK as Dt,aV as Jn,aW as Kn}from"./B4BdvOJx.js";import{S as Zn}from"./r6VQ1cZ2.js";import{C as Jr}from"./D_cgVhu-.js";import{I as Qn}from"./DfXhyh7T.js";import{M as Kr}from"./DuEzRzUF.js";import{S as Yt}from"./R3jnHhLu.js";import{B as Xt}from"./CZ7f6vLC.js";import{C as Yn}from"./CByx3Qer.js";import{X as Xn}from"./Bus0oop7.js";import{E as $n}from"./BIJPbqz7.js";import"./CF4_YkFU.js";import{c as Il}from"./BdYQM_9Z.js";import{F as $t}from"./D9EXU4hk.js";import{f as Nt}from"./Cgo5ewoa.js";import{L as xn}from"./CX6ZVZP8.js";import{F as ei}from"./CU2r43ac.js";import{E as ti}from"./LTqusBkU.js";function li(r){return new Worker(""+new URL("../workers/kokoro.worker-C3fj7GC4.js",import.meta.url).href,{type:"module",name:r==null?void 0:r.name})}class si{constructor(e="fp32"){pt(this,"worker",null);pt(this,"initialized",!1);pt(this,"dtype");pt(this,"requestQueue",[]);pt(this,"processing",!1);this.dtype=e}async init(){if(this.worker){console.warn("KokoroWorker is already initialized.");return}return this.worker=new li,this.worker.onmessage=e=>{const{status:t,error:l,audioUrl:s}=e.data;if(t==="init:complete")this.initialized=!0;else if(t==="init:error")console.error(l),this.initialized=!1;else if(t==="generate:complete"){const n=this.requestQueue.shift();n&&(n.resolve(s),this.processNextRequest())}else if(t==="generate:error"){const n=this.requestQueue.shift();n&&(n.reject(new Error(l)),this.processNextRequest())}},new Promise((e,t)=>{this.worker.postMessage({type:"init",payload:{dtype:this.dtype}});const l=s=>{s.data.status==="init:complete"?(this.worker.removeEventListener("message",l),this.initialized=!0,e()):s.data.status==="init:error"&&(this.worker.removeEventListener("message",l),t(new Error(s.data.error)))};this.worker.addEventListener("message",l)})}async generate({text:e,voice:t}){if(!this.initialized||!this.worker)throw new Error("KokoroTTS Worker is not initialized yet.");return new Promise((l,s)=>{this.requestQueue.push({text:e,voice:t,resolve:l,reject:s}),this.processing||this.processNextRequest()})}processNextRequest(){if(this.requestQueue.length===0){this.processing=!1;return}this.processing=!0;const{text:e,voice:t}=this.requestQueue[0];this.worker.postMessage({type:"generate",payload:{text:e,voice:t}})}terminate(){this.worker&&(this.worker.terminate(),this.worker=null,this.initialized=!1,this.requestQueue=[],this.processing=!1)}}function ri(r){let e,t,l,s,n,i,o,a,f,u,c,g,h,p,v,w,E,N,P,O,R,M,T,S,B,C;return{c(){e=y("div"),t=y("div"),l=y("div"),s=y("div"),i=j(),o=y("div"),a=y("div"),u=j(),c=y("div"),h=j(),p=y("div"),v=y("div"),E=j(),N=y("div"),O=j(),R=y("div"),T=j(),S=y("div"),this.h()},l(A){e=I(A,"DIV",{class:!0});var F=k(e);t=I(F,"DIV",{class:!0});var z=k(t);l=I(z,"DIV",{class:!0});var re=k(l);s=I(re,"DIV",{class:!0}),k(s).forEach(m),i=H(re),o=I(re,"DIV",{class:!0});var Q=k(o);a=I(Q,"DIV",{class:!0}),k(a).forEach(m),u=H(Q),c=I(Q,"DIV",{class:!0}),k(c).forEach(m),Q.forEach(m),h=H(re),p=I(re,"DIV",{class:!0});var ie=k(p);v=I(ie,"DIV",{class:!0}),k(v).forEach(m),E=H(ie),N=I(ie,"DIV",{class:!0}),k(N).forEach(m),O=H(ie),R=I(ie,"DIV",{class:!0}),k(R).forEach(m),ie.forEach(m),T=H(re),S=I(re,"DIV",{class:!0}),k(S).forEach(m),re.forEach(m),z.forEach(m),F.forEach(m),this.h()},h(){d(s,"class",n=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm mr-14"),d(a,"class",f=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2"),d(c,"class",g=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1"),d(o,"class","grid grid-cols-3 gap-4"),d(v,"class",w=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1"),d(N,"class",P=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2"),d(R,"class",M=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1 mr-4"),d(p,"class","grid grid-cols-4 gap-4"),d(S,"class",B=(r[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm"),d(l,"class",C=(r[0]==="md"?"space-y-2":"space-y-1.5")+" w-full"),d(t,"class","animate-pulse flex w-full"),d(e,"class","w-full mt-2 mb-2")},m(A,F){D(A,e,F),_(e,t),_(t,l),_(l,s),_(l,i),_(l,o),_(o,a),_(o,u),_(o,c),_(l,h),_(l,p),_(p,v),_(p,E),_(p,N),_(p,O),_(p,R),_(l,T),_(l,S)},p(A,[F]){F&1&&n!==(n=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm mr-14")&&d(s,"class",n),F&1&&f!==(f=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2")&&d(a,"class",f),F&1&&g!==(g=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1")&&d(c,"class",g),F&1&&w!==(w=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1")&&d(v,"class",w),F&1&&P!==(P=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2")&&d(N,"class",P),F&1&&M!==(M=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1 mr-4")&&d(R,"class",M),F&1&&B!==(B=(A[0]==="md"?"h-2":"h-1.5")+" bg-gray-200 dark:bg-gray-600 rounded-sm")&&d(S,"class",B),F&1&&C!==(C=(A[0]==="md"?"space-y-2":"space-y-1.5")+" w-full")&&d(l,"class",C)},i:Ee,o:Ee,d(A){A&&m(e)}}}function ni(r,e,t){let{size:l="md"}=e;return r.$$set=s=>{"size"in s&&t(0,l=s.size)},[l]}class xt extends Le{constructor(e){super(),Pe(this,e,ni,ri,Be,{size:0})}}function El(r,e,t){const l=r.slice();return l[23]=e[t],l}function Ml(r,e,t){const l=r.slice();return l[26]=e[t],l}function Nl(r){var s;let e,t=r[8].t('This response was generated by "{{model}}"',{model:r[7]?((s=r[7])==null?void 0:s.name)??r[7].id:r[1].selectedModelId})+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=k(e);l=q(i,t),i.forEach(m),this.h()},h(){d(e,"class","text-xs font-medium pt-1.5 -mb-0.5")},m(n,i){D(n,e,i),_(e,l)},p(n,i){var o;i&386&&t!==(t=n[8].t('This response was generated by "{{model}}"',{model:n[7]?((o=n[7])==null?void 0:o.name)??n[7].id:n[1].selectedModelId})+"")&&J(l,t)},d(n){n&&m(e)}}}function Dl(r){let e,t=r[26]+"",l,s,n,i,o,a;function f(){return r[12](r[26])}return{c(){e=y("button"),l=W(t),s=j(),this.h()},l(u){e=I(u,"BUTTON",{class:!0});var c=k(e);l=q(c,t),s=H(c),c.forEach(m),this.h()},h(){var u,c;d(e,"class",n="size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[6]===r[26]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900"),e.disabled=i=((c=(u=r[1])==null?void 0:u.annotation)==null?void 0:c.rating)===-1?r[26]>5:r[26]<6},m(u,c){D(u,e,c),_(e,l),_(e,s),o||(a=me(e,"click",f),o=!0)},p(u,c){var g,h;r=u,c&64&&n!==(n="size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[6]===r[26]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900")&&d(e,"class",n),c&2&&i!==(i=((h=(g=r[1])==null?void 0:g.annotation)==null?void 0:h.rating)===-1?r[26]>5:r[26]<6)&&(e.disabled=i)},d(u){u&&m(e),o=!1,a()}}}function Vl(r){let e,t=r[8].t("Why?")+"",l,s,n,i=Ne(r[3]),o=[];for(let a=0;a<i.length;a+=1)o[a]=Cl(El(r,i,a));return{c(){e=y("div"),l=W(t),s=j(),n=y("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=H(a),n=I(a,"DIV",{class:!0});var u=k(n);for(let c=0;c<o.length;c+=1)o[c].l(u);u.forEach(m),this.h()},h(){d(e,"class","text-sm mt-1.5 font-medium"),d(n,"class","flex flex-wrap gap-1.5 text-sm mt-1.5")},m(a,f){D(a,e,f),_(e,l),D(a,s,f),D(a,n,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null)},p(a,f){if(f&256&&t!==(t=a[8].t("Why?")+"")&&J(l,t),f&280){i=Ne(a[3]);let u;for(u=0;u<i.length;u+=1){const c=El(a,i,u);o[u]?o[u].p(c,f):(o[u]=Cl(c),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},d(a){a&&(m(e),m(s),m(n)),Ge(o,a)}}}function ii(r){let e=r[23]+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&8&&e!==(e=l[23]+"")&&J(t,e)},d(l){l&&m(t)}}}function ai(r){let e=r[8].t("Other")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Other")+"")&&J(t,e)},d(l){l&&m(t)}}}function oi(r){let e=r[8].t("Being lazy")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Being lazy")+"")&&J(t,e)},d(l){l&&m(t)}}}function fi(r){let e=r[8].t("Refused when it shouldn't have")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Refused when it shouldn't have")+"")&&J(t,e)},d(l){l&&m(t)}}}function ui(r){let e=r[8].t("Didn't fully follow instructions")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Didn't fully follow instructions")+"")&&J(t,e)},d(l){l&&m(t)}}}function ci(r){let e=r[8].t("Not factually correct")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Not factually correct")+"")&&J(t,e)},d(l){l&&m(t)}}}function di(r){let e=r[8].t("Not helpful")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Not helpful")+"")&&J(t,e)},d(l){l&&m(t)}}}function hi(r){let e=r[8].t("Too verbose")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Too verbose")+"")&&J(t,e)},d(l){l&&m(t)}}}function mi(r){let e=r[8].t("Don't like the style")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Don't like the style")+"")&&J(t,e)},d(l){l&&m(t)}}}function gi(r){let e=r[8].t("Thorough explanation")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Thorough explanation")+"")&&J(t,e)},d(l){l&&m(t)}}}function _i(r){let e=r[8].t("Attention to detail")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Attention to detail")+"")&&J(t,e)},d(l){l&&m(t)}}}function pi(r){let e=r[8].t("Positive attitude")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Positive attitude")+"")&&J(t,e)},d(l){l&&m(t)}}}function bi(r){let e=r[8].t("Showcased creativity")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Showcased creativity")+"")&&J(t,e)},d(l){l&&m(t)}}}function vi(r){let e=r[8].t("Followed instructions perfectly")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Followed instructions perfectly")+"")&&J(t,e)},d(l){l&&m(t)}}}function ki(r){let e=r[8].t("Accurate information")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&256&&e!==(e=l[8].t("Accurate information")+"")&&J(t,e)},d(l){l&&m(t)}}}function Cl(r){let e,t,l,s,n;function i(u,c){return u[23]==="accurate_information"?ki:u[23]==="followed_instructions_perfectly"?vi:u[23]==="showcased_creativity"?bi:u[23]==="positive_attitude"?pi:u[23]==="attention_to_detail"?_i:u[23]==="thorough_explanation"?gi:u[23]==="dont_like_the_style"?mi:u[23]==="too_verbose"?hi:u[23]==="not_helpful"?di:u[23]==="not_factually_correct"?ci:u[23]==="didnt_fully_follow_instructions"?ui:u[23]==="refused_when_it_shouldnt_have"?fi:u[23]==="being_lazy"?oi:u[23]==="other"?ai:ii}let o=i(r),a=o(r);function f(){return r[13](r[23])}return{c(){e=y("button"),a.c(),t=j(),this.h()},l(u){e=I(u,"BUTTON",{class:!0});var c=k(e);a.l(c),t=H(c),c.forEach(m),this.h()},h(){d(e,"class",l="px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[4]===r[23]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-xl")},m(u,c){D(u,e,c),a.m(e,null),_(e,t),s||(n=me(e,"click",f),s=!0)},p(u,c){r=u,o===(o=i(r))&&a?a.p(r,c):(a.d(1),a=o(r),a&&(a.c(),a.m(e,t))),c&24&&l!==(l="px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 "+(r[4]===r[23]?"bg-gray-100 dark:bg-gray-800":"")+" transition rounded-xl")&&d(e,"class",l)},d(u){u&&m(e),a.d(),s=!1,n()}}}function wi(r){var te;let e,t,l,s,n=r[8].t("How would you rate this response?")+"",i,o,a,f='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>',u,c,g,h,p,v,w,E,N=r[8].t("Awful")+"",P,O,R,M,T=r[8].t("Amazing")+"",S,B,C,A,F,z,re,Q,ie,ge,he,ye,Z,oe=r[8].t("Save")+"",pe,ae,ce,G,_e,fe=((te=r[1])==null?void 0:te.arena)&&Nl(r),be=Ne(Array.from({length:10}).map(Tl)),L=[];for(let Y=0;Y<be.length;Y+=1)L[Y]=Dl(Ml(r,be,Y));let K=r[3].length>0&&Vl(r);return he=new qn({props:{tags:r[2]}}),he.$on("delete",r[15]),he.$on("add",r[16]),{c(){fe&&fe.c(),e=j(),t=y("div"),l=y("div"),s=y("div"),i=W(n),o=j(),a=y("button"),a.innerHTML=f,u=j(),c=y("div"),g=y("div"),h=y("div");for(let Y=0;Y<L.length;Y+=1)L[Y].c();p=j(),v=y("div"),w=y("div"),E=W("1 - "),P=W(N),O=j(),R=y("div"),M=W("10 - "),S=W(T),B=j(),C=y("div"),K&&K.c(),A=j(),F=y("div"),z=y("textarea"),Q=j(),ie=y("div"),ge=y("div"),X(he.$$.fragment),ye=j(),Z=y("button"),pe=W(oe),this.h()},l(Y){fe&&fe.l(Y),e=H(Y),t=I(Y,"DIV",{class:!0,id:!0});var ue=k(t);l=I(ue,"DIV",{class:!0});var ve=k(l);s=I(ve,"DIV",{class:!0});var Ve=k(s);i=q(Ve,n),Ve.forEach(m),o=H(ve),a=I(ve,"BUTTON",{"data-svelte-h":!0}),Fe(a)!=="svelte-1ew22ui"&&(a.innerHTML=f),ve.forEach(m),u=H(ue),c=I(ue,"DIV",{class:!0});var De=k(c);g=I(De,"DIV",{class:!0});var je=k(g);h=I(je,"DIV",{class:!0});var He=k(h);for(let it=0;it<L.length;it+=1)L[it].l(He);He.forEach(m),p=H(je),v=I(je,"DIV",{class:!0});var Ue=k(v);w=I(Ue,"DIV",{});var ne=k(w);E=q(ne,"1 - "),P=q(ne,N),ne.forEach(m),O=H(Ue),R=I(Ue,"DIV",{});var We=k(R);M=q(We,"10 - "),S=q(We,T),We.forEach(m),Ue.forEach(m),je.forEach(m),De.forEach(m),B=H(ue),C=I(ue,"DIV",{});var et=k(C);K&&K.l(et),et.forEach(m),A=H(ue),F=I(ue,"DIV",{class:!0});var tt=k(F);z=I(tt,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),k(z).forEach(m),tt.forEach(m),Q=H(ue),ie=I(ue,"DIV",{class:!0});var Ke=k(ie);ge=I(Ke,"DIV",{class:!0});var ft=k(ge);$(he.$$.fragment,ft),ft.forEach(m),ye=H(Ke),Z=I(Ke,"BUTTON",{class:!0});var ut=k(Z);pe=q(ut,oe),ut.forEach(m),Ke.forEach(m),ue.forEach(m),this.h()},h(){d(s,"class","text-sm font-medium"),d(l,"class","flex justify-between items-center"),d(h,"class","mt-1.5 w-fit flex gap-1 pb-2"),d(v,"class","sticky top-0 bottom-0 left-0 right-0 flex justify-between text-xs"),d(g,"class","relative w-fit overflow-x-auto scrollbar-none"),d(c,"class","w-full flex justify-center"),d(z,"class","w-full text-sm px-1 py-2 bg-transparent outline-hidden resize-none rounded-xl"),d(z,"placeholder",re=r[8].t("Feel free to add specific details")),d(z,"rows","3"),d(F,"class","mt-2"),d(ge,"class","flex items-end group"),d(Z,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),d(ie,"class","mt-2 gap-1.5 flex justify-between"),d(t,"class","my-2.5 rounded-xl px-4 py-3 border border-gray-100 dark:border-gray-850"),d(t,"id",ae="message-feedback-"+r[1].id)},m(Y,ue){fe&&fe.m(Y,ue),D(Y,e,ue),D(Y,t,ue),_(t,l),_(l,s),_(s,i),_(l,o),_(l,a),_(t,u),_(t,c),_(c,g),_(g,h);for(let ve=0;ve<L.length;ve+=1)L[ve]&&L[ve].m(h,null);_(g,p),_(g,v),_(v,w),_(w,E),_(w,P),_(v,O),_(v,R),_(R,M),_(R,S),_(t,B),_(t,C),K&&K.m(C,null),_(t,A),_(t,F),_(F,z),ot(z,r[5]),_(t,Q),_(t,ie),_(ie,ge),x(he,ge,null),_(ie,ye),_(ie,Z),_(Z,pe),ce=!0,G||(_e=[me(a,"click",r[11]),me(z,"input",r[14]),me(Z,"click",r[17])],G=!0)},p(Y,[ue]){var Ve;if((Ve=Y[1])!=null&&Ve.arena?fe?fe.p(Y,ue):(fe=Nl(Y),fe.c(),fe.m(e.parentNode,e)):fe&&(fe.d(1),fe=null),(!ce||ue&256)&&n!==(n=Y[8].t("How would you rate this response?")+"")&&J(i,n),ue&66){be=Ne(Array.from({length:10}).map(Tl));let De;for(De=0;De<be.length;De+=1){const je=Ml(Y,be,De);L[De]?L[De].p(je,ue):(L[De]=Dl(je),L[De].c(),L[De].m(h,null))}for(;De<L.length;De+=1)L[De].d(1);L.length=be.length}(!ce||ue&256)&&N!==(N=Y[8].t("Awful")+"")&&J(P,N),(!ce||ue&256)&&T!==(T=Y[8].t("Amazing")+"")&&J(S,T),Y[3].length>0?K?K.p(Y,ue):(K=Vl(Y),K.c(),K.m(C,null)):K&&(K.d(1),K=null),(!ce||ue&256&&re!==(re=Y[8].t("Feel free to add specific details")))&&d(z,"placeholder",re),ue&32&&ot(z,Y[5]);const ve={};ue&4&&(ve.tags=Y[2]),he.$set(ve),(!ce||ue&256)&&oe!==(oe=Y[8].t("Save")+"")&&J(pe,oe),(!ce||ue&2&&ae!==(ae="message-feedback-"+Y[1].id))&&d(t,"id",ae)},i(Y){ce||(b(he.$$.fragment,Y),ce=!0)},o(Y){V(he.$$.fragment,Y),ce=!1},d(Y){Y&&(m(e),m(t)),fe&&fe.d(Y),Ge(L,Y),K&&K.d(),ee(he),G=!1,Xe(_e)}}}const Tl=(r,e)=>e+1;function yi(r,e,t){let l,s;Me(r,zt,C=>t(18,s=C));const n=Je("i18n");Me(r,n,C=>t(8,l=C));const i=kt();let{message:o}=e,{show:a=!1}=e,f=["accurate_information","followed_instructions_perfectly","showcased_creativity","positive_attitude","attention_to_detail","thorough_explanation","other"],u=["dont_like_the_style","too_verbose","not_helpful","not_factually_correct","didnt_fully_follow_instructions","refused_when_it_shouldnt_have","being_lazy","other"],c=[],g=[],h=null,p="",v=null,w=null;const E=()=>{var C,A,F,z,re;h||t(4,h=((C=o==null?void 0:o.annotation)==null?void 0:C.reason)??""),p||t(5,p=((A=o==null?void 0:o.annotation)==null?void 0:A.comment)??""),t(2,c=(((F=o==null?void 0:o.annotation)==null?void 0:F.tags)??[]).map(Q=>({name:Q}))),v||t(6,v=((re=(z=o==null?void 0:o.annotation)==null?void 0:z.details)==null?void 0:re.rating)??null)};wt(()=>{o!=null&&o.arena&&(t(7,w=s.find(C=>C.id===o.selectedModelId)),Ae.success(l.t('This response was generated by "{{model}}"',{model:w?(w==null?void 0:w.name)??w.id:o.selectedModelId})))});const N=()=>{i("save",{reason:h,comment:p,tags:c.map(C=>C.name),details:{rating:v}}),Ae.success(l.t("Thanks for your feedback!")),t(0,a=!1)},P=()=>{t(0,a=!1)},O=C=>{t(6,v=C)},R=C=>{t(4,h=C)};function M(){p=this.value,t(5,p)}const T=C=>{t(2,c=c.filter(A=>A.name.replaceAll(" ","_").toLowerCase()!==C.detail.replaceAll(" ","_").toLowerCase()))},S=C=>{t(2,c=[...c,{name:C.detail}])},B=()=>{N()};return r.$$set=C=>{"message"in C&&t(1,o=C.message),"show"in C&&t(0,a=C.show)},r.$$.update=()=>{var C,A;r.$$.dirty&2&&(((C=o==null?void 0:o.annotation)==null?void 0:C.rating)===1?t(3,g=f):((A=o==null?void 0:o.annotation)==null?void 0:A.rating)===-1&&t(3,g=u)),r.$$.dirty&2&&o&&E()},[a,o,c,g,h,p,v,w,l,n,N,P,O,R,M,T,S,B]}class Ii extends Le{constructor(e){super(),Pe(this,e,yi,wi,Be,{message:1,show:0})}}function Bl(r,e,t){const l=r.slice();return l[5]=e[t],l[7]=t,l}function Ei(r){let e,t;return e=new qr({props:{strokeWidth:"3.5",className:"size-3.5 "}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Mi(r){let e,t;return e=new Fr({props:{strokeWidth:"3.5",className:"size-3.5 "}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ni(r){let e,t,l,s,n;const i=r[2].default,o=wn(i,r,r[4],null),a=[Mi,Ei],f=[];function u(c,g){return c[1]?0:1}return l=u(r),s=f[l]=a[l](r),{c(){e=y("div"),o&&o.c(),t=j(),s.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=k(e);o&&o.l(g),t=H(g),s.l(g),g.forEach(m),this.h()},h(){d(e,"class","flex items-center gap-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition")},m(c,g){D(c,e,g),o&&o.m(e,null),_(e,t),f[l].m(e,null),n=!0},p(c,g){o&&o.p&&(!n||g&16)&&yn(o,i,c,c[4],n?En(i,c[4],g,null):In(c[4]),null);let h=l;l=u(c),l!==h&&(le(),V(f[h],1,1,()=>{f[h]=null}),se(),s=f[l],s||(s=f[l]=a[l](c),s.c()),b(s,1),s.m(e,null))},i(c){n||(b(o,c),b(s),n=!0)},o(c){V(o,c),V(s),n=!1},d(c){c&&m(e),o&&o.d(c),f[l].d()}}}function Sl(r){let e,t,l,s,n,i=r[0].query+"",o,a,f,u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',c,g;return l=new Fn({}),{c(){e=y("a"),t=y("div"),X(l.$$.fragment),s=j(),n=y("div"),o=W(i),a=j(),f=y("div"),f.innerHTML=u,this.h()},l(h){e=I(h,"A",{href:!0,target:!0,class:!0});var p=k(e);t=I(p,"DIV",{class:!0});var v=k(t);$(l.$$.fragment,v),s=H(v),n=I(v,"DIV",{class:!0});var w=k(n);o=q(w,i),w.forEach(m),v.forEach(m),a=H(p),f=I(p,"DIV",{class:!0,"data-svelte-h":!0}),Fe(f)!=="svelte-14xjows"&&(f.innerHTML=u),p.forEach(m),this.h()},h(){d(n,"class","line-clamp-1"),d(t,"class","flex gap-2 items-center"),d(f,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",c="https://www.google.com/search?q="+r[0].query),d(e,"target","_blank"),d(e,"class","flex w-full items-center p-3 px-4 border-b border-gray-300/30 dark:border-gray-700/50 group/item justify-between font-normal text-gray-800 dark:text-gray-300 no-underline")},m(h,p){D(h,e,p),_(e,t),x(l,t,null),_(t,s),_(t,n),_(n,o),_(e,a),_(e,f),g=!0},p(h,p){(!g||p&1)&&i!==(i=h[0].query+"")&&J(o,i),(!g||p&1&&c!==(c="https://www.google.com/search?q="+h[0].query))&&d(e,"href",c)},i(h){g||(b(l.$$.fragment,h),g=!0)},o(h){V(l.$$.fragment,h),g=!1},d(h){h&&m(e),ee(l)}}}function Rl(r){let e,t,l=r[5]+"",s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg>',a,f,u;return{c(){e=y("a"),t=y("div"),s=W(l),n=j(),i=y("div"),i.innerHTML=o,a=j(),this.h()},l(c){e=I(c,"A",{href:!0,target:!0,class:!0});var g=k(e);t=I(g,"DIV",{class:!0});var h=k(t);s=q(h,l),h.forEach(m),n=H(g),i=I(g,"DIV",{class:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-14xjows"&&(i.innerHTML=o),a=H(g),g.forEach(m),this.h()},h(){d(t,"class","line-clamp-1"),d(i,"class","ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition"),d(e,"href",f=r[5]),d(e,"target","_blank"),d(e,"class",u="flex w-full items-center p-3 px-4 "+(r[7]===r[0].urls.length-1?"":"border-b border-gray-300/30 dark:border-gray-700/50")+" group/item justify-between font-normal text-gray-800 dark:text-gray-300")},m(c,g){D(c,e,g),_(e,t),_(t,s),_(e,n),_(e,i),_(e,a)},p(c,g){g&1&&l!==(l=c[5]+"")&&J(s,l),g&1&&f!==(f=c[5])&&d(e,"href",f),g&1&&u!==(u="flex w-full items-center p-3 px-4 "+(c[7]===c[0].urls.length-1?"":"border-b border-gray-300/30 dark:border-gray-700/50")+" group/item justify-between font-normal text-gray-800 dark:text-gray-300")&&d(e,"class",u)},d(c){c&&m(e)}}}function Di(r){var o;let e,t,l,s=((o=r[0])==null?void 0:o.query)&&Sl(r),n=Ne(r[0].urls),i=[];for(let a=0;a<n.length;a+=1)i[a]=Rl(Bl(r,n,a));return{c(){e=y("div"),s&&s.c(),t=j();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0,slot:!0});var f=k(e);s&&s.l(f),t=H(f);for(let u=0;u<i.length;u+=1)i[u].l(f);f.forEach(m),this.h()},h(){d(e,"class","text-sm border border-gray-300/30 dark:border-gray-700/50 rounded-xl mb-1.5"),d(e,"slot","content")},m(a,f){D(a,e,f),s&&s.m(e,null),_(e,t);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);l=!0},p(a,f){var u;if((u=a[0])!=null&&u.query?s?(s.p(a,f),f&1&&b(s,1)):(s=Sl(a),s.c(),b(s,1),s.m(e,t)):s&&(le(),V(s,1,1,()=>{s=null}),se()),f&1){n=Ne(a[0].urls);let c;for(c=0;c<n.length;c+=1){const g=Bl(a,n,c);i[c]?i[c].p(g,f):(i[c]=Rl(g),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}},i(a){l||(b(s),l=!0)},o(a){V(s),l=!1},d(a){a&&m(e),s&&s.d(),Ge(i,a)}}}function Vi(r){let e,t,l;function s(i){r[3](i)}let n={className:"w-full space-y-1",$$slots:{content:[Di],default:[Ni]},$$scope:{ctx:r}};return r[1]!==void 0&&(n.open=r[1]),e=new Gr({props:n}),ze.push(()=>Ye(e,"open",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,[o]){const a={};o&19&&(a.$$scope={dirty:o,ctx:i}),!t&&o&2&&(t=!0,a.open=i[1],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){V(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function Ci(r,e,t){let{$$slots:l={},$$scope:s}=e,{status:n={urls:[],query:""}}=e,i=!1;function o(a){i=a,t(1,i)}return r.$$set=a=>{"status"in a&&t(0,n=a.status),"$$scope"in a&&t(4,s=a.$$scope)},[n,i,l,o,s]}class Ti extends Le{constructor(e){super(),Pe(this,e,Ci,Vi,Be,{status:0})}}function Bi(r){let e,t,l,s,n,i=(typeof r[0]=="string"?r[0]:JSON.stringify(r[0]))+"",o,a;return l=new Qn({props:{className:"size-5 text-red-700 dark:text-red-400"}}),{c(){e=y("div"),t=y("div"),X(l.$$.fragment),s=j(),n=y("div"),o=W(i),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);t=I(u,"DIV",{class:!0});var c=k(t);$(l.$$.fragment,c),c.forEach(m),s=H(u),n=I(u,"DIV",{class:!0});var g=k(n);o=q(g,i),g.forEach(m),u.forEach(m),this.h()},h(){d(t,"class","self-start mt-0.5"),d(n,"class","self-center text-sm"),d(e,"class","flex my-2 gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-lg")},m(f,u){D(f,e,u),_(e,t),x(l,t,null),_(e,s),_(e,n),_(n,o),a=!0},p(f,[u]){(!a||u&1)&&i!==(i=(typeof f[0]=="string"?f[0]:JSON.stringify(f[0]))+"")&&J(o,i)},i(f){a||(b(l.$$.fragment,f),a=!0)},o(f){V(l.$$.fragment,f),a=!1},d(f){f&&m(e),ee(l)}}}function Si(r,e,t){let{content:l=""}=e;return r.$$set=s=>{"content"in s&&t(0,l=s.content)},[l]}let Ri=class extends Le{constructor(e){super(),Pe(this,e,Si,Bi,Be,{content:0})}};function Ol(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function Oi(r){const e=r.slice(),t=Ji(e[10].distance);return e[13]=t,e}function Li(r){let e,t=r[4].t("No source available")+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n&16&&t!==(t=s[4].t("No source available")+"")&&J(l,t)},i:Ee,o:Ee,d(s){s&&m(e)}}}function Pi(r){var a;let e,t,l,s,n;e=new Se({props:{className:"w-fit",content:r[4].t("Open file"),placement:"top-start",tippyOptions:{duration:[500,0]},$$slots:{default:[Ai]},$$scope:{ctx:r}}});let i=((a=r[10].metadata)==null?void 0:a.parameters)&&Pl(r),o=r[2]&&Al(r);return{c(){X(e.$$.fragment),t=j(),i&&i.c(),l=j(),o&&o.c(),s=de()},l(f){$(e.$$.fragment,f),t=H(f),i&&i.l(f),l=H(f),o&&o.l(f),s=de()},m(f,u){x(e,f,u),D(f,t,u),i&&i.m(f,u),D(f,l,u),o&&o.m(f,u),D(f,s,u),n=!0},p(f,u){var g;const c={};u&16&&(c.content=f[4].t("Open file")),u&16408&&(c.$$scope={dirty:u,ctx:f}),e.$set(c),(g=f[10].metadata)!=null&&g.parameters?i?i.p(f,u):(i=Pl(f),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),f[2]?o?(o.p(f,u),u&4&&b(o,1)):(o=Al(f),o.c(),b(o,1),o.m(s.parentNode,s)):o&&(le(),V(o,1,1,()=>{o=null}),se())},i(f){n||(b(e.$$.fragment,f),b(o),n=!0)},o(f){V(e.$$.fragment,f),V(o),n=!1},d(f){f&&(m(t),m(l),m(s)),ee(e,f),i&&i.d(f),o&&o.d(f)}}}function Ll(r){let e,t,l=r[4].t("page")+"",s,n,i=r[10].metadata.page+1+"",o,a;return{c(){e=y("span"),t=W("("),s=W(l),n=j(),o=W(i),a=W(")"),this.h()},l(f){e=I(f,"SPAN",{class:!0});var u=k(e);t=q(u,"("),s=q(u,l),n=H(u),o=q(u,i),a=q(u,")"),u.forEach(m),this.h()},h(){d(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(f,u){D(f,e,u),_(e,t),_(e,s),_(e,n),_(e,o),_(e,a)},p(f,u){u&16&&l!==(l=f[4].t("page")+"")&&J(s,l),u&8&&i!==(i=f[10].metadata.page+1+"")&&J(o,i)},d(f){f&&m(e)}}}function Ai(r){var f,u,c,g;let e,t,l=r[6](((u=(f=r[10])==null?void 0:f.metadata)==null?void 0:u.name)??r[10].source.name)+"",s,n,i,o=Number.isInteger((g=(c=r[10])==null?void 0:c.metadata)==null?void 0:g.page),a=o&&Ll(r);return{c(){e=y("div"),t=y("a"),s=W(l),i=j(),a&&a.c(),this.h()},l(h){e=I(h,"DIV",{class:!0});var p=k(e);t=I(p,"A",{class:!0,href:!0,target:!0});var v=k(t);s=q(v,l),v.forEach(m),i=H(p),a&&a.l(p),p.forEach(m),this.h()},h(){var h,p,v,w,E,N,P,O;d(t,"class","hover:text-gray-500 dark:hover:text-gray-100 underline grow"),d(t,"href",n=(p=(h=r[10])==null?void 0:h.metadata)!=null&&p.file_id?`${ml}/files/${(w=(v=r[10])==null?void 0:v.metadata)==null?void 0:w.file_id}/content${((N=(E=r[10])==null?void 0:E.metadata)==null?void 0:N.page)!==void 0?`#page=${r[10].metadata.page+1}`:""}`:(O=(P=r[10].source)==null?void 0:P.url)!=null&&O.includes("http")?r[10].source.url:"#"),d(t,"target","_blank"),d(e,"class","text-sm dark:text-gray-400 flex items-center gap-2 w-fit")},m(h,p){D(h,e,p),_(e,t),_(t,s),_(e,i),a&&a.m(e,null)},p(h,p){var v,w,E,N,P,O,R,M,T,S,B,C;p&8&&l!==(l=h[6](((w=(v=h[10])==null?void 0:v.metadata)==null?void 0:w.name)??h[10].source.name)+"")&&J(s,l),p&8&&n!==(n=(N=(E=h[10])==null?void 0:E.metadata)!=null&&N.file_id?`${ml}/files/${(O=(P=h[10])==null?void 0:P.metadata)==null?void 0:O.file_id}/content${((M=(R=h[10])==null?void 0:R.metadata)==null?void 0:M.page)!==void 0?`#page=${h[10].metadata.page+1}`:""}`:(S=(T=h[10].source)==null?void 0:T.url)!=null&&S.includes("http")?h[10].source.url:"#")&&d(t,"href",n),p&8&&(o=Number.isInteger((C=(B=h[10])==null?void 0:B.metadata)==null?void 0:C.page)),o?a?a.p(h,p):(a=Ll(h),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(h){h&&m(e),a&&a.d()}}}function Pl(r){let e,t=r[4].t("Parameters")+"",l,s,n,i=JSON.stringify(r[10].metadata.parameters,null,2)+"",o;return{c(){e=y("div"),l=W(t),s=j(),n=y("pre"),o=W(i),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=H(a),n=I(a,"PRE",{class:!0});var u=k(n);o=q(u,i),u.forEach(m),this.h()},h(){d(e,"class","text-sm font-medium dark:text-gray-300 mt-2"),d(n,"class","text-sm dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-2 rounded-md overflow-auto max-h-40")},m(a,f){D(a,e,f),_(e,l),D(a,s,f),D(a,n,f),_(n,o)},p(a,f){f&16&&t!==(t=a[4].t("Parameters")+"")&&J(l,t),f&8&&i!==(i=JSON.stringify(a[10].metadata.parameters,null,2)+"")&&J(o,i)},d(a){a&&(m(e),m(s),m(n))}}}function Al(r){let e,t=r[4].t("Relevance")+"",l,s,n,i,o,a;const f=[Hi,ji],u=[];function c(g,h){return g[10].distance!==void 0?0:1}return n=c(r),i=u[n]=f[n](r),{c(){e=y("div"),l=W(t),s=j(),i.c(),o=de(),this.h()},l(g){e=I(g,"DIV",{class:!0});var h=k(e);l=q(h,t),h.forEach(m),s=H(g),i.l(g),o=de(),this.h()},h(){d(e,"class","text-sm font-medium dark:text-gray-300 mt-2")},m(g,h){D(g,e,h),_(e,l),D(g,s,h),u[n].m(g,h),D(g,o,h),a=!0},p(g,h){(!a||h&16)&&t!==(t=g[4].t("Relevance")+"")&&J(l,t);let p=n;n=c(g),n===p?u[n].p(g,h):(le(),V(u[p],1,1,()=>{u[p]=null}),se(),i=u[n],i?i.p(g,h):(i=u[n]=f[n](g),i.c()),b(i,1),i.m(o.parentNode,o))},i(g){a||(b(i),a=!0)},o(g){V(i),a=!1},d(g){g&&(m(e),m(s),m(o)),u[n].d(g)}}}function ji(r){let e,t=r[4].t("No distance available")+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n&16&&t!==(t=s[4].t("No distance available")+"")&&J(l,t)},i:Ee,o:Ee,d(s){s&&m(e)}}}function Hi(r){let e,t;return e=new Se({props:{className:"w-fit",content:r[4].t("Semantic distance to query"),placement:"top-start",tippyOptions:{duration:[500,0]},$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s&16&&(n.content=l[4].t("Semantic distance to query")),s&16394&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function zi(r){var i;let e,t,l=(((i=r[10])==null?void 0:i.distance)??0).toFixed(4)+"",s,n;return{c(){e=y("span"),t=W("("),s=W(l),n=W(")"),this.h()},l(o){e=I(o,"SPAN",{class:!0});var a=k(e);t=q(a,"("),s=q(a,l),n=q(a,")"),a.forEach(m),this.h()},h(){d(e,"class","text-gray-500 dark:text-gray-500")},m(o,a){D(o,e,a),_(e,t),_(e,s),_(e,n)},p(o,a){var f;a&8&&l!==(l=(((f=o[10])==null?void 0:f.distance)??0).toFixed(4)+"")&&J(s,l)},d(o){o&&m(e)}}}function jl(r){var n;let e,t,l=typeof r[13]=="number"&&Hl(r),s=typeof((n=r[10])==null?void 0:n.distance)=="number"&&zl(r);return{c(){l&&l.c(),e=j(),s&&s.c(),t=de()},l(i){l&&l.l(i),e=H(i),s&&s.l(i),t=de()},m(i,o){l&&l.m(i,o),D(i,e,o),s&&s.m(i,o),D(i,t,o)},p(i,o){var a;typeof i[13]=="number"?l?l.p(i,o):(l=Hl(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),typeof((a=i[10])==null?void 0:a.distance)=="number"?s?s.p(i,o):(s=zl(i),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(i){i&&(m(e),m(t)),l&&l.d(i),s&&s.d(i)}}}function Hl(r){let e,t=r[13].toFixed(2)+"",l,s,n;return{c(){e=y("span"),l=W(t),s=W("%"),this.h()},l(i){e=I(i,"SPAN",{class:!0});var o=k(e);l=q(o,t),s=q(o,"%"),o.forEach(m),this.h()},h(){d(e,"class",n=`px-1 rounded-sm font-medium ${ql(r[13])}`)},m(i,o){D(i,e,o),_(e,l),_(e,s)},p(i,o){o&8&&t!==(t=i[13].toFixed(2)+"")&&J(l,t),o&8&&n!==(n=`px-1 rounded-sm font-medium ${ql(i[13])}`)&&d(e,"class",n)},d(i){i&&m(e)}}}function zl(r){var i;let e,t,l=(((i=r[10])==null?void 0:i.distance)??0).toFixed(4)+"",s,n;return{c(){e=y("span"),t=W("("),s=W(l),n=W(")"),this.h()},l(o){e=I(o,"SPAN",{class:!0});var a=k(e);t=q(a,"("),s=q(a,l),n=q(a,")"),a.forEach(m),this.h()},h(){d(e,"class","text-gray-500 dark:text-gray-500")},m(o,a){D(o,e,a),_(e,t),_(e,s),_(e,n)},p(o,a){var f;a&8&&l!==(l=(((f=o[10])==null?void 0:f.distance)??0).toFixed(4)+"")&&J(s,l)},d(o){o&&m(e)}}}function Ui(r){let e;function t(i,o){var a;if(i[1])return jl;if(typeof((a=i[10])==null?void 0:a.distance)=="number")return zi}function l(i,o){return o===jl?Oi(i):i}let s=t(r),n=s&&s(l(r,s));return{c(){e=y("div"),n&&n.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);n&&n.l(o),o.forEach(m),this.h()},h(){d(e,"class","text-sm my-1 dark:text-gray-400 flex items-center gap-2 w-fit")},m(i,o){D(i,e,o),n&&n.m(e,null)},p(i,o){s===(s=t(i))&&n?n.p(l(i,s),o):(n&&n.d(1),n=s&&s(l(i,s)),n&&(n.c(),n.m(e,null)))},d(i){i&&m(e),n&&n.d()}}}function Wi(r){let e,t,l=r[10].document+"",s,n;return{c(){e=y("pre"),t=W("                "),s=W(l),n=W(`
              `),this.h()},l(i){e=I(i,"PRE",{class:!0});var o=k(e);t=q(o,"                "),s=q(o,l),n=q(o,`
              `),o.forEach(m),this.h()},h(){d(e,"class","text-sm dark:text-gray-400 whitespace-pre-line")},m(i,o){D(i,e,o),_(e,t),_(e,s),_(e,n)},p(i,o){o&8&&l!==(l=i[10].document+"")&&J(s,l)},d(i){i&&m(e)}}}function qi(r){let e,t,l;return{c(){e=y("iframe"),this.h()},l(s){e=I(s,"IFRAME",{class:!0,sandbox:!0,srcdoc:!0,title:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","w-full border-0 h-auto rounded-none"),d(e,"sandbox","allow-scripts allow-forms allow-same-origin"),d(e,"srcdoc",t=r[10].document),d(e,"title",l=r[4].t("Content"))},m(s,n){D(s,e,n)},p(s,n){n&8&&t!==(t=s[10].document)&&d(e,"srcdoc",t),n&16&&l!==(l=s[4].t("Content"))&&d(e,"title",l)},d(s){s&&m(e)}}}function Ul(r){let e;return{c(){e=y("hr"),this.h()},l(t){e=I(t,"HR",{class:!0}),this.h()},h(){d(e,"class","border-gray-100 dark:border-gray-850 my-3")},m(t,l){D(t,e,l)},d(t){t&&m(e)}}}function Wl(r){let e,t,l=r[4].t("Source")+"",s,n,i,o,a,f,u,c=r[4].t("Content")+"",g,h,p,v,w;const E=[Pi,Li],N=[];function P(S,B){var C;return(C=S[10].source)!=null&&C.name?0:1}i=P(r),o=N[i]=E[i](r);function O(S,B){var C;return(C=S[10].metadata)!=null&&C.html?qi:Wi}let R=O(r),M=R(r),T=r[12]!==r[3].length-1&&Ul();return{c(){e=y("div"),t=y("div"),s=W(l),n=j(),o.c(),a=j(),f=y("div"),u=y("div"),g=W(c),h=j(),M.c(),p=j(),T&&T.c(),v=de(),this.h()},l(S){e=I(S,"DIV",{class:!0});var B=k(e);t=I(B,"DIV",{class:!0});var C=k(t);s=q(C,l),C.forEach(m),n=H(B),o.l(B),B.forEach(m),a=H(S),f=I(S,"DIV",{class:!0});var A=k(f);u=I(A,"DIV",{class:!0});var F=k(u);g=q(F,c),F.forEach(m),h=H(A),M.l(A),A.forEach(m),p=H(S),T&&T.l(S),v=de(),this.h()},h(){d(t,"class","text-sm font-medium dark:text-gray-300"),d(e,"class","flex flex-col w-full"),d(u,"class","text-sm font-medium dark:text-gray-300 mt-2"),d(f,"class","flex flex-col w-full")},m(S,B){D(S,e,B),_(e,t),_(t,s),_(e,n),N[i].m(e,null),D(S,a,B),D(S,f,B),_(f,u),_(u,g),_(f,h),M.m(f,null),D(S,p,B),T&&T.m(S,B),D(S,v,B),w=!0},p(S,B){(!w||B&16)&&l!==(l=S[4].t("Source")+"")&&J(s,l);let C=i;i=P(S),i===C?N[i].p(S,B):(le(),V(N[C],1,1,()=>{N[C]=null}),se(),o=N[i],o?o.p(S,B):(o=N[i]=E[i](S),o.c()),b(o,1),o.m(e,null)),(!w||B&16)&&c!==(c=S[4].t("Content")+"")&&J(g,c),R===(R=O(S))&&M?M.p(S,B):(M.d(1),M=R(S),M&&(M.c(),M.m(f,null))),S[12]!==S[3].length-1?T||(T=Ul(),T.c(),T.m(v.parentNode,v)):T&&(T.d(1),T=null)},i(S){w||(b(o),w=!0)},o(S){V(o),w=!1},d(S){S&&(m(e),m(a),m(f),m(p),m(v)),N[i].d(),M.d(),T&&T.d(S)}}}function Fi(r){let e,t,l,s=r[4].t("Citation")+"",n,i,o,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,u,c,g,h,p,v=Ne(r[3]),w=[];for(let N=0;N<v.length;N+=1)w[N]=Wl(Ol(r,v,N));const E=N=>V(w[N],1,1,()=>{w[N]=null});return{c(){e=y("div"),t=y("div"),l=y("div"),n=W(s),i=j(),o=y("button"),o.innerHTML=a,f=j(),u=y("div"),c=y("div");for(let N=0;N<w.length;N+=1)w[N].c();this.h()},l(N){e=I(N,"DIV",{});var P=k(e);t=I(P,"DIV",{class:!0});var O=k(t);l=I(O,"DIV",{class:!0});var R=k(l);n=q(R,s),R.forEach(m),i=H(O),o=I(O,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(o)!=="svelte-745w2y"&&(o.innerHTML=a),O.forEach(m),f=H(P),u=I(P,"DIV",{class:!0});var M=k(u);c=I(M,"DIV",{class:!0});var T=k(c);for(let S=0;S<w.length;S+=1)w[S].l(T);T.forEach(m),M.forEach(m),P.forEach(m),this.h()},h(){d(l,"class","text-lg font-medium self-center capitalize"),d(o,"class","self-center"),d(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"),d(c,"class","flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden"),d(u,"class","flex flex-col md:flex-row w-full px-6 pb-5 md:space-x-4")},m(N,P){D(N,e,P),_(e,t),_(t,l),_(l,n),_(t,i),_(t,o),_(e,f),_(e,u),_(u,c);for(let O=0;O<w.length;O+=1)w[O]&&w[O].m(c,null);g=!0,h||(p=me(o,"click",r[8]),h=!0)},p(N,P){if((!g||P&16)&&s!==(s=N[4].t("Citation")+"")&&J(n,s),P&94){v=Ne(N[3]);let O;for(O=0;O<v.length;O+=1){const R=Ol(N,v,O);w[O]?(w[O].p(R,P),b(w[O],1)):(w[O]=Wl(R),w[O].c(),b(w[O],1),w[O].m(c,null))}for(le(),O=v.length;O<w.length;O+=1)E(O);se()}},i(N){if(!g){for(let P=0;P<v.length;P+=1)b(w[P]);g=!0}},o(N){w=w.filter(Boolean);for(let P=0;P<w.length;P+=1)V(w[P]);g=!1},d(N){N&&m(e),Ge(w,N),h=!1,p()}}}function Gi(r){let e,t,l;function s(i){r[9](i)}let n={size:"lg",$$slots:{default:[Fi]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.show=r[0]),e=new Kr({props:n}),ze.push(()=>Ye(e,"show",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,[o]){const a={};o&16415&&(a.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,a.show=i[0],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){V(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function Ji(r){return typeof r!="number"?null:r<0?0:r>1?100:Math.round(r*1e4)/100}function ql(r){return r>=80?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":r>=60?"bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200":r>=40?"bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200":"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200"}function Ki(r,e,t){let l;const s=Je("i18n");Me(r,s,h=>t(4,l=h));let{show:n=!1}=e,{citation:i}=e,{showPercentage:o=!1}=e,{showRelevance:a=!0}=e,f=[];const u=h=>{try{return decodeURIComponent(h)}catch{return h}},c=()=>{t(0,n=!1)};function g(h){n=h,t(0,n)}return r.$$set=h=>{"show"in h&&t(0,n=h.show),"citation"in h&&t(7,i=h.citation),"showPercentage"in h&&t(1,o=h.showPercentage),"showRelevance"in h&&t(2,a=h.showRelevance)},r.$$.update=()=>{var h;r.$$.dirty&136&&i&&(t(3,f=(h=i.document)==null?void 0:h.map((p,v)=>{var w,E;return{source:i.source,document:p,metadata:(w=i.metadata)==null?void 0:w[v],distance:(E=i.distances)==null?void 0:E[v]}})),f.every(p=>p.distance!==void 0)&&t(3,f=f.sort((p,v)=>(v.distance??1/0)-(p.distance??1/0))))},[n,o,a,f,l,s,u,i,c,g]}class Zi extends Le{constructor(e){super(),Pe(this,e,Ki,Gi,Be,{show:0,citation:7,showPercentage:1,showRelevance:2})}}function Fl(r,e,t){const l=r.slice();return l[19]=e[t],l[21]=t,l}function Gl(r,e,t){const l=r.slice();return l[19]=e[t],l[21]=t,l}function Jl(r,e,t){const l=r.slice();return l[19]=e[t],l[21]=t,l}function Kl(r){let e,t,l,s;const n=[Yi,Qi],i=[];function o(a,f){return a[1].length<=3?0:1}return t=o(r),l=i[t]=n[t](r),{c(){e=y("div"),l.c(),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);l.l(f),f.forEach(m),this.h()},h(){d(e,"class","py-0.5 -mx-0.5 w-full flex gap-1 items-center flex-wrap")},m(a,f){D(a,e,f),i[t].m(e,null),s=!0},p(a,f){let u=t;t=o(a),t===u?i[t].p(a,f):(le(),V(i[u],1,1,()=>{i[u]=null}),se(),l=i[t],l?l.p(a,f):(l=i[t]=n[t](a),l.c()),b(l,1),l.m(e,null))},i(a){s||(b(l),s=!0)},o(a){V(l),s=!1},d(a){a&&m(e),i[t].d()}}}function Qi(r){let e,t,l;function s(i){r[18](i)}let n={id:`collapsible-${r[0]}`,className:"w-full max-w-full ",buttonClassName:"w-fit max-w-full",$$slots:{content:[ea],default:[xi]},$$scope:{ctx:r}};return r[6]!==void 0&&(n.open=r[6]),e=new Gr({props:n}),ze.push(()=>Ye(e,"open",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,o){const a={};o&1&&(a.id=`collapsible-${i[0]}`),o&16777458&&(a.$$scope={dirty:o,ctx:i}),!t&&o&64&&(t=!0,a.open=i[6],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){V(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function Yi(r){let e,t=Ne(r[1]),l=[];for(let s=0;s<t.length;s+=1)l[s]=xl(Jl(r,t,s));return{c(){e=y("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);for(let i=0;i<l.length;i+=1)l[i].l(n);n.forEach(m),this.h()},h(){d(e,"class","flex text-xs font-medium flex-wrap")},m(s,n){D(s,e,n);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,n){if(n&563){t=Ne(s[1]);let i;for(i=0;i<t.length;i+=1){const o=Jl(s,t,i);l[i]?l[i].p(o,n):(l[i]=xl(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},i:Ee,o:Ee,d(s){s&&m(e),Ge(l,s)}}}function Zl(r){let e,t=r[21]+1+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","bg-gray-50 dark:bg-gray-800 rounded-full size-4")},m(s,n){D(s,e,n),_(e,l)},d(s){s&&m(e)}}}function Ql(r){let e,t=r[1].every(r[13]),l,s,n=r[9](r[19].source.name)+"",i,o,a,f,u=t&&Zl(r);function c(){return r[17](r[19])}return{c(){e=y("button"),u&&u.c(),l=j(),s=y("div"),i=W(n),o=j(),this.h()},l(g){e=I(g,"BUTTON",{class:!0});var h=k(e);u&&u.l(h),l=H(h),s=I(h,"DIV",{class:!0});var p=k(s);i=q(p,n),p.forEach(m),o=H(h),h.forEach(m),this.h()},h(){d(s,"class","flex-1 mx-1 truncate"),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition rounded-xl max-w-96")},m(g,h){D(g,e,h),u&&u.m(e,null),_(e,l),_(e,s),_(s,i),_(e,o),a||(f=[me(e,"click",c),me(e,"pointerup",ra)],a=!0)},p(g,h){r=g,h&2&&(t=r[1].every(r[13])),t?u||(u=Zl(r),u.c(),u.m(e,l)):u&&(u.d(1),u=null),h&2&&n!==(n=r[9](r[19].source.name)+"")&&J(i,n)},d(g){g&&m(e),u&&u.d(),a=!1,Xe(f)}}}function Xi(r){let e,t;return e=new qr({props:{strokeWidth:"3.5",className:"size-3.5"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function $i(r){let e,t;return e=new Fr({props:{strokeWidth:"3.5",className:"size-3.5"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function xi(r){let e,t,l,s=r[7].t("References from")+"",n,i,o,a,f,u,c,g=r[7].t("and")+"",h,p,v=r[1].length-2+"",w,E,N,P=r[7].t("more")+"",O,R,M,T,S,B,C=Ne(r[1].slice(0,2)),A=[];for(let Q=0;Q<C.length;Q+=1)A[Q]=Ql(Fl(r,C,Q));const F=[$i,Xi],z=[];function re(Q,ie){return Q[6]?0:1}return T=re(r),S=z[T]=F[T](r),{c(){e=y("div"),t=y("div"),l=y("span"),n=W(s),i=j(),o=y("div"),a=y("div");for(let Q=0;Q<A.length;Q+=1)A[Q].c();f=j(),u=y("div"),c=y("span"),h=W(g),p=j(),w=W(v),E=j(),N=y("span"),O=W(P),R=j(),M=y("div"),S.c(),this.h()},l(Q){e=I(Q,"DIV",{class:!0});var ie=k(e);t=I(ie,"DIV",{class:!0});var ge=k(t);l=I(ge,"SPAN",{class:!0});var he=k(l);n=q(he,s),he.forEach(m),i=H(ge),o=I(ge,"DIV",{class:!0});var ye=k(o);a=I(ye,"DIV",{class:!0});var Z=k(a);for(let G=0;G<A.length;G+=1)A[G].l(Z);Z.forEach(m),ye.forEach(m),f=H(ge),u=I(ge,"DIV",{class:!0});var oe=k(u);c=I(oe,"SPAN",{class:!0});var pe=k(c);h=q(pe,g),pe.forEach(m),p=H(oe),w=q(oe,v),E=H(oe),N=I(oe,"SPAN",{});var ae=k(N);O=q(ae,P),ae.forEach(m),oe.forEach(m),ge.forEach(m),R=H(ie),M=I(ie,"DIV",{class:!0});var ce=k(M);S.l(ce),ce.forEach(m),ie.forEach(m),this.h()},h(){d(l,"class","whitespace-nowrap hidden sm:inline shrink-0"),d(a,"class","flex text-xs font-medium items-center"),d(o,"class","flex items-center overflow-auto scrollbar-none w-full max-w-full flex-1"),d(c,"class","hidden sm:inline"),d(u,"class","flex items-center gap-1 whitespace-nowrap shrink-0"),d(t,"class","flex-1 flex items-center gap-1 overflow-auto scrollbar-none w-full max-w-full"),d(M,"class","shrink-0"),d(e,"class","flex w-full overflow-auto items-center gap-2 text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition cursor-pointer")},m(Q,ie){D(Q,e,ie),_(e,t),_(t,l),_(l,n),_(t,i),_(t,o),_(o,a);for(let ge=0;ge<A.length;ge+=1)A[ge]&&A[ge].m(a,null);_(t,f),_(t,u),_(u,c),_(c,h),_(u,p),_(u,w),_(u,E),_(u,N),_(N,O),_(e,R),_(e,M),z[T].m(M,null),B=!0},p(Q,ie){if((!B||ie&128)&&s!==(s=Q[7].t("References from")+"")&&J(n,s),ie&562){C=Ne(Q[1].slice(0,2));let he;for(he=0;he<C.length;he+=1){const ye=Fl(Q,C,he);A[he]?A[he].p(ye,ie):(A[he]=Ql(ye),A[he].c(),A[he].m(a,null))}for(;he<A.length;he+=1)A[he].d(1);A.length=C.length}(!B||ie&128)&&g!==(g=Q[7].t("and")+"")&&J(h,g),(!B||ie&2)&&v!==(v=Q[1].length-2+"")&&J(w,v),(!B||ie&128)&&P!==(P=Q[7].t("more")+"")&&J(O,P);let ge=T;T=re(Q),T!==ge&&(le(),V(z[ge],1,1,()=>{z[ge]=null}),se(),S=z[T],S||(S=z[T]=F[T](Q),S.c()),b(S,1),S.m(M,null))},i(Q){B||(b(S),B=!0)},o(Q){V(S),B=!1},d(Q){Q&&m(e),Ge(A,Q),z[T].d()}}}function Yl(r){let e,t=r[21]+3+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","bg-gray-50 dark:bg-gray-800 rounded-full size-4")},m(s,n){D(s,e,n),_(e,l)},d(s){s&&m(e)}}}function Xl(r){let e,t=r[1].every(r[12]),l,s,n=r[9](r[19].source.name)+"",i,o,a,f,u=t&&Yl(r);function c(){return r[16](r[19])}return{c(){e=y("button"),u&&u.c(),l=j(),s=y("div"),i=W(n),o=j(),this.h()},l(g){e=I(g,"BUTTON",{class:!0});var h=k(e);u&&u.l(h),l=H(h),s=I(h,"DIV",{class:!0});var p=k(s);i=q(p,n),p.forEach(m),o=H(h),h.forEach(m),this.h()},h(){d(s,"class","flex-1 mx-1 truncate"),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition rounded-xl max-w-96")},m(g,h){D(g,e,h),u&&u.m(e,null),_(e,l),_(e,s),_(s,i),_(e,o),a||(f=me(e,"click",c),a=!0)},p(g,h){r=g,h&2&&(t=r[1].every(r[12])),t?u||(u=Yl(r),u.c(),u.m(e,l)):u&&(u.d(1),u=null),h&2&&n!==(n=r[9](r[19].source.name)+"")&&J(i,n)},d(g){g&&m(e),u&&u.d(),a=!1,f()}}}function ea(r){let e,t,l=Ne(r[1].slice(2)),s=[];for(let n=0;n<l.length;n+=1)s[n]=Xl(Gl(r,l,n));return{c(){e=y("div"),t=y("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=I(n,"DIV",{slot:!0});var i=k(e);t=I(i,"DIV",{class:!0});var o=k(t);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),i.forEach(m),this.h()},h(){d(t,"class","flex text-xs font-medium flex-wrap"),d(e,"slot","content")},m(n,i){D(n,e,i),_(e,t);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null)},p(n,i){if(i&562){l=Ne(n[1].slice(2));let o;for(o=0;o<l.length;o+=1){const a=Gl(n,l,o);s[o]?s[o].p(a,i):(s[o]=Xl(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(n){n&&m(e),Ge(s,n)}}}function $l(r){let e,t=r[21]+1+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","bg-gray-50 dark:bg-gray-800 rounded-full size-4")},m(s,n){D(s,e,n),_(e,l)},d(s){s&&m(e)}}}function xl(r){let e,t=r[1].every(r[11]),l,s,n=r[9](r[19].source.name)+"",i,o,a,f,u,c=t&&$l(r);function g(){return r[15](r[19])}return{c(){e=y("button"),c&&c.c(),l=j(),s=y("div"),i=W(n),o=j(),this.h()},l(h){e=I(h,"BUTTON",{id:!0,class:!0});var p=k(e);c&&c.l(p),l=H(p),s=I(p,"DIV",{class:!0});var v=k(s);i=q(v,n),v.forEach(m),o=H(p),p.forEach(m),this.h()},h(){d(s,"class","flex-1 mx-1 truncate text-black/60 hover:text-black dark:text-white/60 dark:hover:text-white transition"),d(e,"id",a=`source-${r[0]}-${r[21]+1}`),d(e,"class","no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-white dark:bg-gray-900 rounded-xl max-w-96")},m(h,p){D(h,e,p),c&&c.m(e,null),_(e,l),_(e,s),_(s,i),_(e,o),f||(u=me(e,"click",g),f=!0)},p(h,p){r=h,p&2&&(t=r[1].every(r[11])),t?c||(c=$l(r),c.c(),c.m(e,l)):c&&(c.d(1),c=null),p&2&&n!==(n=r[9](r[19].source.name)+"")&&J(i,n),p&1&&a!==(a=`source-${r[0]}-${r[21]+1}`)&&d(e,"id",a)},d(h){h&&m(e),c&&c.d(),f=!1,u()}}}function ta(r){let e,t,l,s,n;function i(f){r[14](f)}let o={citation:r[5],showPercentage:r[2],showRelevance:r[3]};r[4]!==void 0&&(o.show=r[4]),e=new Zi({props:o}),ze.push(()=>Ye(e,"show",i));let a=r[1].length>0&&Kl(r);return{c(){X(e.$$.fragment),l=j(),a&&a.c(),s=de()},l(f){$(e.$$.fragment,f),l=H(f),a&&a.l(f),s=de()},m(f,u){x(e,f,u),D(f,l,u),a&&a.m(f,u),D(f,s,u),n=!0},p(f,[u]){const c={};u&32&&(c.citation=f[5]),u&4&&(c.showPercentage=f[2]),u&8&&(c.showRelevance=f[3]),!t&&u&16&&(t=!0,c.show=f[4],Qe(()=>t=!1)),e.$set(c),f[1].length>0?a?(a.p(f,u),u&2&&b(a,1)):(a=Kl(f),a.c(),b(a,1),a.m(s.parentNode,s)):a&&(le(),V(a,1,1,()=>{a=null}),se())},i(f){n||(b(e.$$.fragment,f),b(a),n=!0)},o(f){V(e.$$.fragment,f),V(a),n=!1},d(f){f&&(m(l),m(s)),ee(e,f),a&&a.d(f)}}}function la(r){const e=r.flatMap(s=>s.distances??[]),t=e.filter(s=>s!==void 0&&s>=-1&&s<=1).length,l=e.filter(s=>s!==void 0&&(s<-1||s>1)).length;return!(e.length===0||t===e.length-1&&l===1||l===e.length-1&&t===1)}function sa(r){return r.flatMap(t=>t.distances??[]).every(t=>t!==void 0&&t>=-1&&t<=1)}const ra=r=>{r.stopPropagation()};function na(r,e,t){let l;const s=Je("i18n");Me(r,s,M=>t(7,l=M));let{id:n=""}=e,{sources:i=[]}=e,o=[],a=!1,f=!0,u=!1,c=null,g=!1;const h=M=>{try{return decodeURIComponent(M)}catch{return M}},p=M=>M.distances!==void 0,v=M=>M.distances!==void 0,w=M=>M.distances!==void 0;function E(M){u=M,t(4,u)}const N=M=>{t(4,u=!0),t(5,c=M)},P=M=>{t(4,u=!0),t(5,c=M)},O=M=>{t(4,u=!0),t(5,c=M)};function R(M){g=M,t(6,g)}return r.$$set=M=>{"id"in M&&t(0,n=M.id),"sources"in M&&t(10,i=M.sources)},r.$$.update=()=>{r.$$.dirty&1026&&(t(1,o=i.reduce((M,T)=>(Object.keys(T).length===0||T.document.forEach((S,B)=>{var Q,ie,ge;const C=(Q=T.metadata)==null?void 0:Q[B],A=(ie=T.distances)==null?void 0:ie[B],F=(C==null?void 0:C.source)??((ge=T==null?void 0:T.source)==null?void 0:ge.id)??"N/A";let z=T==null?void 0:T.source;C!=null&&C.name&&(z={...z,name:C.name}),(F.startsWith("http://")||F.startsWith("https://"))&&(z={...z,name:F,url:F});const re=M.find(he=>he.id===F);re?(re.document.push(S),re.metadata.push(C),A!==void 0&&re.distances.push(A)):M.push({id:F,source:z,document:[S],metadata:C?[C]:[],distances:A!==void 0?[A]:void 0})}),M),[])),t(3,f=la(o)),t(2,a=sa(o)))},[n,o,a,f,u,c,g,l,s,h,i,p,v,w,E,N,P,O,R]}class ia extends Le{constructor(e){super(),Pe(this,e,na,ta,Be,{id:0,sources:10})}}function es(r,e,t){const l=r.slice();return l[6]=e[t],l}function ts(r){let e,t,l,s;const n=[fa,oa,aa],i=[];function o(a,f){var u,c;return(u=a[1].result)!=null&&u.error?0:(c=a[1].result)!=null&&c.output?1:2}return t=o(r),l=i[t]=n[t](r),{c(){e=y("div"),l.c()},l(a){e=I(a,"DIV",{});var f=k(e);l.l(f),f.forEach(m)},m(a,f){D(a,e,f),i[t].m(e,null),s=!0},p(a,f){let u=t;t=o(a),t!==u&&(le(),V(i[u],1,1,()=>{i[u]=null}),se(),l=i[t],l||(l=i[t]=n[t](a),l.c()),b(l,1),l.m(e,null))},i(a){s||(b(l),s=!0)},o(a){V(l),s=!1},d(a){a&&m(e),i[t].d()}}}function aa(r){let e,t;return e=new Xt({props:{type:"warning",content:"incomplete"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function oa(r){let e,t;return e=new Xt({props:{type:"success",content:"success"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function fa(r){let e,t;return e=new Xt({props:{type:"error",content:"error"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ls(r){let e,t,l;return t=new Yt({props:{className:"size-4"}}),{c(){e=y("div"),X(t.$$.fragment)},l(s){e=I(s,"DIV",{});var n=k(e);$(t.$$.fragment,n),n.forEach(m)},m(s,n){D(s,e,n),x(t,e,null),l=!0},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){V(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function ua(r){let e=r[2].t("Code execution")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s&4&&e!==(e=l[2].t("Code execution")+"")&&J(t,e)},d(l){l&&m(t)}}}function ca(r){var i;let e=r[2].t("Code execution")+"",t,l,s=((i=r[1])==null?void 0:i.name)+"",n;return{c(){t=W(e),l=W(": "),n=W(s)},l(o){t=q(o,e),l=q(o,": "),n=q(o,s)},m(o,a){D(o,t,a),D(o,l,a),D(o,n,a)},p(o,a){var f;a&4&&e!==(e=o[2].t("Code execution")+"")&&J(t,e),a&2&&s!==(s=((f=o[1])==null?void 0:f.name)+"")&&J(n,s)},d(o){o&&(m(t),m(l),m(n))}}}function ss(r){var n,i,o,a;let e,t,l=((i=(n=r[1])==null?void 0:n.result)==null?void 0:i.error)&&rs(r),s=((a=(o=r[1])==null?void 0:o.result)==null?void 0:a.output)&&ns(r);return{c(){e=y("div"),l&&l.c(),t=j(),s&&s.c(),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);l&&l.l(u),t=H(u),s&&s.l(u),u.forEach(m),this.h()},h(){d(e,"class","dark:bg-[#202123] dark:text-white px-4 py-4 rounded-b-lg flex flex-col gap-3")},m(f,u){D(f,e,u),l&&l.m(e,null),_(e,t),s&&s.m(e,null)},p(f,u){var c,g,h,p;(g=(c=f[1])==null?void 0:c.result)!=null&&g.error?l?l.p(f,u):(l=rs(f),l.c(),l.m(e,t)):l&&(l.d(1),l=null),(p=(h=f[1])==null?void 0:h.result)!=null&&p.output?s?s.p(f,u):(s=ns(f),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(f){f&&m(e),l&&l.d(),s&&s.d()}}}function rs(r){var f,u;let e,t,l=r[2].t("ERROR")+"",s,n,i,o=((u=(f=r[1])==null?void 0:f.result)==null?void 0:u.error)+"",a;return{c(){e=y("div"),t=y("div"),s=W(l),n=j(),i=y("div"),a=W(o),this.h()},l(c){e=I(c,"DIV",{});var g=k(e);t=I(g,"DIV",{class:!0});var h=k(t);s=q(h,l),h.forEach(m),n=H(g),i=I(g,"DIV",{class:!0});var p=k(i);a=q(p,o),p.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-gray-500 text-xs mb-1"),d(i,"class","text-sm")},m(c,g){D(c,e,g),_(e,t),_(t,s),_(e,n),_(e,i),_(i,a)},p(c,g){var h,p;g&4&&l!==(l=c[2].t("ERROR")+"")&&J(s,l),g&2&&o!==(o=((p=(h=c[1])==null?void 0:h.result)==null?void 0:p.error)+"")&&J(a,o)},d(c){c&&m(e)}}}function ns(r){var f,u;let e,t,l=r[2].t("OUTPUT")+"",s,n,i,o=((u=(f=r[1])==null?void 0:f.result)==null?void 0:u.output)+"",a;return{c(){e=y("div"),t=y("div"),s=W(l),n=j(),i=y("div"),a=W(o),this.h()},l(c){e=I(c,"DIV",{});var g=k(e);t=I(g,"DIV",{class:!0});var h=k(t);s=q(h,l),h.forEach(m),n=H(g),i=I(g,"DIV",{class:!0});var p=k(i);a=q(p,o),p.forEach(m),g.forEach(m),this.h()},h(){d(t,"class","text-gray-500 text-xs mb-1"),d(i,"class","text-sm")},m(c,g){D(c,e,g),_(e,t),_(t,s),_(e,n),_(e,i),_(i,a)},p(c,g){var h,p;g&4&&l!==(l=c[2].t("OUTPUT")+"")&&J(s,l),g&2&&o!==(o=((p=(h=c[1])==null?void 0:h.result)==null?void 0:p.output)+"")&&J(a,o)},d(c){c&&m(e)}}}function is(r){var c,g;let e,t,l,s,n=r[2].t("Files")+"",i,o,a,f=Ne((g=(c=r[1])==null?void 0:c.result)==null?void 0:g.files),u=[];for(let h=0;h<f.length;h+=1)u[h]=as(es(r,f,h));return{c(){e=y("div"),t=y("hr"),l=j(),s=y("div"),i=W(n),o=j(),a=y("ul");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=I(h,"DIV",{class:!0});var p=k(e);t=I(p,"HR",{class:!0}),l=H(p),s=I(p,"DIV",{class:!0});var v=k(s);i=q(v,n),v.forEach(m),o=H(p),a=I(p,"UL",{class:!0});var w=k(a);for(let E=0;E<u.length;E+=1)u[E].l(w);w.forEach(m),p.forEach(m),this.h()},h(){d(t,"class","border-gray-100 dark:border-gray-850 my-2"),d(s,"class","text-sm font-medium dark:text-gray-300"),d(a,"class","mt-1 list-disc pl-4 text-xs"),d(e,"class","flex flex-col w-full")},m(h,p){D(h,e,p),_(e,t),_(e,l),_(e,s),_(s,i),_(e,o),_(e,a);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(a,null)},p(h,p){var v,w;if(p&4&&n!==(n=h[2].t("Files")+"")&&J(i,n),p&2){f=Ne((w=(v=h[1])==null?void 0:v.result)==null?void 0:w.files);let E;for(E=0;E<f.length;E+=1){const N=es(h,f,E);u[E]?u[E].p(N,p):(u[E]=as(N),u[E].c(),u[E].m(a,null))}for(;E<u.length;E+=1)u[E].d(1);u.length=f.length}},d(h){h&&m(e),Ge(u,h)}}}function as(r){let e,t,l=r[6].name+"",s,n,i;return{c(){e=y("li"),t=y("a"),s=W(l),i=j(),this.h()},l(o){e=I(o,"LI",{});var a=k(e);t=I(a,"A",{href:!0,target:!0});var f=k(t);s=q(f,l),f.forEach(m),i=H(a),a.forEach(m),this.h()},h(){d(t,"href",n=r[6].url),d(t,"target","_blank")},m(o,a){D(o,e,a),_(e,t),_(t,s),_(e,i)},p(o,a){a&2&&l!==(l=o[6].name+"")&&J(s,l),a&2&&n!==(n=o[6].url)&&d(t,"href",n)},d(o){o&&m(e)}}}function da(r){var F,z,re,Q,ie,ge,he,ye,Z,oe,pe,ae,ce,G,_e,fe,be,L,K;let e,t,l,s,n,i,o,a,f,u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,g,h,p,v,w,E,N,P,O,R=((F=r[1])==null?void 0:F.result)&&ts(r),M=!((z=r[1])!=null&&z.result)&&ls();function T(te,Y){var ue;return(ue=te[1])!=null&&ue.name?ca:ua}let S=T(r),B=S(r);v=new Gn({props:{id:"code-exec-"+((re=r[1])==null?void 0:re.id)+"-code",lang:((Q=r[1])==null?void 0:Q.language)??"",code:((ie=r[1])==null?void 0:ie.code)??"",className:"",editorClassName:(ge=r[1])!=null&&ge.result&&((ye=(he=r[1])==null?void 0:he.result)!=null&&ye.error||(oe=(Z=r[1])==null?void 0:Z.result)!=null&&oe.output)?"rounded-b-none":"",stickyButtonsClassName:"top-0",run:!1}});let C=((pe=r[1])==null?void 0:pe.result)&&(((ce=(ae=r[1])==null?void 0:ae.result)==null?void 0:ce.error)||((_e=(G=r[1])==null?void 0:G.result)==null?void 0:_e.output))&&ss(r),A=((be=(fe=r[1])==null?void 0:fe.result)==null?void 0:be.files)&&((K=(L=r[1])==null?void 0:L.result)==null?void 0:K.files.length)>0&&is(r);return{c(){e=y("div"),t=y("div"),l=y("div"),R&&R.c(),s=j(),n=y("div"),M&&M.c(),i=j(),o=y("div"),B.c(),a=j(),f=y("button"),f.innerHTML=u,c=j(),g=y("div"),h=y("div"),p=y("div"),X(v.$$.fragment),w=j(),C&&C.c(),E=j(),A&&A.c(),this.h()},l(te){e=I(te,"DIV",{});var Y=k(e);t=I(Y,"DIV",{class:!0});var ue=k(t);l=I(ue,"DIV",{class:!0});var ve=k(l);R&&R.l(ve),s=H(ve),n=I(ve,"DIV",{class:!0});var Ve=k(n);M&&M.l(Ve),i=H(Ve),o=I(Ve,"DIV",{});var De=k(o);B.l(De),De.forEach(m),Ve.forEach(m),ve.forEach(m),a=H(ue),f=I(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(f)!=="svelte-vnrwun"&&(f.innerHTML=u),ue.forEach(m),c=H(Y),g=I(Y,"DIV",{class:!0});var je=k(g);h=I(je,"DIV",{class:!0});var He=k(h);p=I(He,"DIV",{class:!0});var Ue=k(p);$(v.$$.fragment,Ue),Ue.forEach(m),w=H(He),C&&C.l(He),E=H(He),A&&A.l(He),He.forEach(m),je.forEach(m),Y.forEach(m),this.h()},h(){d(n,"class","flex gap-2 items-center"),d(l,"class","text-lg font-medium self-center flex flex-col gap-0.5 capitalize"),d(f,"class","self-center"),d(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"),d(p,"class","flex flex-col w-full"),d(h,"class","flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden"),d(g,"class","flex flex-col md:flex-row w-full px-4 pb-5")},m(te,Y){D(te,e,Y),_(e,t),_(t,l),R&&R.m(l,null),_(l,s),_(l,n),M&&M.m(n,null),_(n,i),_(n,o),B.m(o,null),_(t,a),_(t,f),_(e,c),_(e,g),_(g,h),_(h,p),x(v,p,null),_(h,w),C&&C.m(h,null),_(h,E),A&&A.m(h,null),N=!0,P||(O=me(f,"click",r[4]),P=!0)},p(te,Y){var ve,Ve,De,je,He,Ue,ne,We,et,tt,Ke,ft,ut,it,Vt,Ct,Tt,Bt,St;(ve=te[1])!=null&&ve.result?R?(R.p(te,Y),Y&2&&b(R,1)):(R=ts(te),R.c(),b(R,1),R.m(l,s)):R&&(le(),V(R,1,1,()=>{R=null}),se()),(Ve=te[1])!=null&&Ve.result?M&&(le(),V(M,1,1,()=>{M=null}),se()):M?Y&2&&b(M,1):(M=ls(),M.c(),b(M,1),M.m(n,i)),S===(S=T(te))&&B?B.p(te,Y):(B.d(1),B=S(te),B&&(B.c(),B.m(o,null)));const ue={};Y&2&&(ue.id="code-exec-"+((De=te[1])==null?void 0:De.id)+"-code"),Y&2&&(ue.lang=((je=te[1])==null?void 0:je.language)??""),Y&2&&(ue.code=((He=te[1])==null?void 0:He.code)??""),Y&2&&(ue.editorClassName=(Ue=te[1])!=null&&Ue.result&&((We=(ne=te[1])==null?void 0:ne.result)!=null&&We.error||(tt=(et=te[1])==null?void 0:et.result)!=null&&tt.output)?"rounded-b-none":""),v.$set(ue),(Ke=te[1])!=null&&Ke.result&&((ut=(ft=te[1])==null?void 0:ft.result)!=null&&ut.error||(Vt=(it=te[1])==null?void 0:it.result)!=null&&Vt.output)?C?C.p(te,Y):(C=ss(te),C.c(),C.m(h,E)):C&&(C.d(1),C=null),(Tt=(Ct=te[1])==null?void 0:Ct.result)!=null&&Tt.files&&((St=(Bt=te[1])==null?void 0:Bt.result)==null?void 0:St.files.length)>0?A?A.p(te,Y):(A=is(te),A.c(),A.m(h,null)):A&&(A.d(1),A=null)},i(te){N||(b(R),b(M),b(v.$$.fragment,te),N=!0)},o(te){V(R),V(M),V(v.$$.fragment,te),N=!1},d(te){te&&m(e),R&&R.d(),M&&M.d(),B.d(),ee(v),C&&C.d(),A&&A.d(),P=!1,O()}}}function ha(r){let e,t,l;function s(i){r[5](i)}let n={size:"lg",$$slots:{default:[da]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.show=r[0]),e=new Kr({props:n}),ze.push(()=>Ye(e,"show",s)),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),l=!0},p(i,[o]){const a={};o&519&&(a.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,a.show=i[0],Qe(()=>t=!1)),e.$set(a)},i(i){l||(b(e.$$.fragment,i),l=!0)},o(i){V(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function ma(r,e,t){let l;const s=Je("i18n");Me(r,s,f=>t(2,l=f));let{show:n=!1}=e,{codeExecution:i=null}=e;const o=()=>{t(0,n=!1),t(1,i=null)};function a(f){n=f,t(0,n)}return r.$$set=f=>{"show"in f&&t(0,n=f.show),"codeExecution"in f&&t(1,i=f.codeExecution)},[n,i,l,s,o,a]}class ga extends Le{constructor(e){super(),Pe(this,e,ma,ha,Be,{show:0,codeExecution:1})}}function os(r,e,t){const l=r.slice();return l[6]=e[t],l}function fs(r){let e,t=[],l=new Map,s,n=Ne(r[0]);const i=o=>o[6].id;for(let o=0;o<n.length;o+=1){let a=os(r,n,o),f=i(a);l.set(f,t[o]=us(f,a))}return{c(){e=y("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0});var a=k(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(m),this.h()},h(){d(e,"class","mt-1 mb-2 w-full flex gap-1 items-center flex-wrap")},m(o,a){D(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(o,a){a&7&&(n=Ne(o[0]),le(),t=Ht(t,a,i,1,o,n,l,e,Jt,us,null,os),se())},i(o){if(!s){for(let a=0;a<n.length;a+=1)b(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)V(t[a]);s=!1},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function _a(r){let e,t;return e=new Yt({props:{className:"size-4"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function pa(r){let e,t,l,s;const n=[ka,va,ba],i=[];function o(a,f){var u,c;return(u=a[6].result)!=null&&u.error?0:(c=a[6].result)!=null&&c.output?1:2}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),D(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e!==u&&(le(),V(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t||(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){V(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function ba(r){let e,t;return e=new $n({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function va(r){let e,t;return e=new Yn({props:{strokeWidth:"3",className:"size-3"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ka(r){let e,t;return e=new Xn({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function us(r,e){let t,l,s,n,i,o,a,f=e[6].name+"",u,c,g,h,p,v;const w=[pa,_a],E=[];function N(O,R){var M;return(M=O[6])!=null&&M.result?0:1}n=N(e),i=E[n]=w[n](e);function P(){return e[4](e[6])}return{key:r,first:null,c(){t=y("div"),l=y("button"),s=y("div"),i.c(),o=j(),a=y("div"),u=W(f),g=j(),this.h()},l(O){t=I(O,"DIV",{class:!0});var R=k(t);l=I(R,"BUTTON",{class:!0});var M=k(l);s=I(M,"DIV",{class:!0});var T=k(s);i.l(T),T.forEach(m),o=H(M),a=I(M,"DIV",{class:!0});var S=k(a);u=q(S,f),S.forEach(m),M.forEach(m),g=H(R),R.forEach(m),this.h()},h(){var O;d(s,"class","bg-white dark:bg-gray-700 rounded-full size-4 flex items-center justify-center"),d(a,"class",c="flex-1 mx-2 line-clamp-1 code-execution-name "+((O=e[6])!=null&&O.result?"":"pulse")+" svelte-1gvtig2"),d(l,"class","flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl max-w-96"),d(t,"class","flex gap-1 text-xs font-semibold"),this.first=t},m(O,R){D(O,t,R),_(t,l),_(l,s),E[n].m(s,null),_(l,o),_(l,a),_(a,u),_(t,g),h=!0,p||(v=me(l,"click",P),p=!0)},p(O,R){var T;e=O;let M=n;n=N(e),n===M?E[n].p(e,R):(le(),V(E[M],1,1,()=>{E[M]=null}),se(),i=E[n],i?i.p(e,R):(i=E[n]=w[n](e),i.c()),b(i,1),i.m(s,null)),(!h||R&1)&&f!==(f=e[6].name+"")&&J(u,f),(!h||R&1&&c!==(c="flex-1 mx-2 line-clamp-1 code-execution-name "+((T=e[6])!=null&&T.result?"":"pulse")+" svelte-1gvtig2"))&&d(a,"class",c)},i(O){h||(b(i),h=!0)},o(O){V(i),h=!1},d(O){O&&m(t),E[n].d(),p=!1,v()}}}function wa(r){let e,t,l,s,n;function i(f){r[3](f)}let o={codeExecution:r[1]};r[2]!==void 0&&(o.show=r[2]),e=new ga({props:o}),ze.push(()=>Ye(e,"show",i));let a=r[0].length>0&&fs(r);return{c(){X(e.$$.fragment),l=j(),a&&a.c(),s=de()},l(f){$(e.$$.fragment,f),l=H(f),a&&a.l(f),s=de()},m(f,u){x(e,f,u),D(f,l,u),a&&a.m(f,u),D(f,s,u),n=!0},p(f,[u]){const c={};u&2&&(c.codeExecution=f[1]),!t&&u&4&&(t=!0,c.show=f[2],Qe(()=>t=!1)),e.$set(c),f[0].length>0?a?(a.p(f,u),u&1&&b(a,1)):(a=fs(f),a.c(),b(a,1),a.m(s.parentNode,s)):a&&(le(),V(a,1,1,()=>{a=null}),se())},i(f){n||(b(e.$$.fragment,f),b(a),n=!0)},o(f){V(e.$$.fragment,f),V(a),n=!1},d(f){f&&(m(l),m(s)),ee(e,f),a&&a.d(f)}}}function ya(r,e,t){let{codeExecutions:l=[]}=e,s=null,n=!1;const i=()=>{s&&t(1,s=l.find(f=>f.id===s.id))};function o(f){n=f,t(2,n)}const a=f=>{t(1,s=f),t(2,n=!0)};return r.$$set=f=>{"codeExecutions"in f&&t(0,l=f.codeExecutions)},r.$$.update=()=>{r.$$.dirty&1&&l&&i()},[l,s,n,o,a]}class Ia extends Le{constructor(e){super(),Pe(this,e,ya,wa,Be,{codeExecutions:0})}}function Ea(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",r[1]),d(e,"stroke","currentColor"),d(e,"class",r[0])},m(l,s){D(l,e,s),_(e,t)},p(l,[s]){s&2&&d(e,"stroke-width",l[1]),s&1&&d(e,"class",l[0])},i:Ee,o:Ee,d(l){l&&m(e)}}}function Ma(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,s=n.strokeWidth)},[l,s]}class Na extends Le{constructor(e){super(),Pe(this,e,Ma,Ea,Be,{className:0,strokeWidth:1})}}function Da(r){let e,t,l,s,n,i,o,a,f,u,c,g;s=new Dt({props:{id:`${r[0]}-float-prompt`,content:r[4]}});const h=[Ta,Ca],p=[];function v(E,N){return N&32&&(a=null),a==null&&(a=E[5].trim()===""),a?0:1}f=v(r,-1),u=p[f]=h[f](r);let w=r[6]&&cs(r);return{c(){e=y("div"),t=y("div"),l=y("div"),X(s.$$.fragment),n=j(),i=y("div"),o=y("div"),u.c(),c=j(),w&&w.c(),this.h()},l(E){e=I(E,"DIV",{class:!0});var N=k(e);t=I(N,"DIV",{class:!0});var P=k(t);l=I(P,"DIV",{class:!0});var O=k(l);$(s.$$.fragment,O),O.forEach(m),P.forEach(m),n=H(N),i=I(N,"DIV",{class:!0});var R=k(i);o=I(R,"DIV",{class:!0,id:!0});var M=k(o);u.l(M),c=H(M),w&&w.l(M),M.forEach(m),R.forEach(m),N.forEach(m),this.h()},h(){d(l,"class","font-medium"),d(t,"class","bg-gray-50/50 dark:bg-gray-800 dark:text-gray-100 text-medium rounded-xl px-3.5 py-3 w-full"),d(o,"class","max-h-80 overflow-y-auto w-full markdown-prose-xs"),d(o,"id","response-container"),d(i,"class","bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-xl px-3.5 py-3 w-full"),d(e,"class","bg-white dark:bg-gray-850 dark:text-gray-100 rounded-xl shadow-xl w-80 max-w-full")},m(E,N){D(E,e,N),_(e,t),_(t,l),x(s,l,null),_(e,n),_(e,i),_(i,o),p[f].m(o,null),_(o,c),w&&w.m(o,null),g=!0},p(E,N){const P={};N&1&&(P.id=`${E[0]}-float-prompt`),N&16&&(P.content=E[4]),s.$set(P);let O=f;f=v(E,N),f===O?p[f].p(E,N):(le(),V(p[O],1,1,()=>{p[O]=null}),se(),u=p[f],u?u.p(E,N):(u=p[f]=h[f](E),u.c()),b(u,1),u.m(o,c)),E[6]?w?w.p(E,N):(w=cs(E),w.c(),w.m(o,null)):w&&(w.d(1),w=null)},i(E){g||(b(s.$$.fragment,E),b(u),g=!0)},o(E){V(s.$$.fragment,E),V(u),g=!1},d(E){E&&m(e),ee(s),p[f].d(),w&&w.d()}}}function Va(r){let e,t,l,s;const n=[Sa,Ba],i=[];function o(a,f){return a[1]?1:0}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),D(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),V(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){V(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function Ca(r){let e,t;return e=new Dt({props:{id:`${r[0]}-float-response`,content:r[5]}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s&1&&(n.id=`${l[0]}-float-response`),s&32&&(n.content=l[5]),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ta(r){let e,t;return e=new xt({props:{size:"sm"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function cs(r){let e,t,l=r[7].t("Add")+"",s,n,i;return{c(){e=y("div"),t=y("button"),s=W(l),this.h()},l(o){e=I(o,"DIV",{class:!0});var a=k(e);t=I(a,"BUTTON",{class:!0});var f=k(t);s=q(f,l),f.forEach(m),a.forEach(m),this.h()},h(){d(t,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),d(e,"class","flex justify-end pt-3 text-sm font-medium")},m(o,a){D(o,e,a),_(e,t),_(t,s),n||(i=me(t,"click",r[11]),n=!0)},p(o,a){a&128&&l!==(l=o[7].t("Add")+"")&&J(s,l)},d(o){o&&m(e),n=!1,i()}}}function Ba(r){let e,t,l,s,n,i,o,a,f,u,c;return{c(){e=y("div"),t=y("input"),s=j(),n=y("div"),i=y("button"),o=ke("svg"),a=ke("path"),this.h()},l(g){e=I(g,"DIV",{class:!0});var h=k(e);t=I(h,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),s=H(h),n=I(h,"DIV",{class:!0});var p=k(n);i=I(p,"BUTTON",{class:!0});var v=k(i);o=we(v,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var w=k(o);a=we(w,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(a).forEach(m),w.forEach(m),v.forEach(m),p.forEach(m),h.forEach(m),this.h()},h(){d(t,"type","text"),d(t,"id","floating-message-input"),d(t,"class","ml-5 bg-transparent outline-hidden w-full flex-1 text-sm"),d(t,"placeholder",l=r[7].t("Ask a question")),d(a,"fill-rule","evenodd"),d(a,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),d(a,"clip-rule","evenodd"),d(o,"xmlns","http://www.w3.org/2000/svg"),d(o,"viewBox","0 0 16 16"),d(o,"fill","currentColor"),d(o,"class","size-4"),d(i,"class",f=(r[3]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center"),d(n,"class","ml-1 mr-2"),d(e,"class","py-1 flex dark:text-gray-100 bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-850 w-72 rounded-full shadow-xl")},m(g,h){D(g,e,h),_(e,t),ot(t,r[3]),_(e,s),_(e,n),_(n,i),_(i,o),_(o,a),u||(c=[me(t,"input",r[18]),me(t,"keydown",r[19]),me(i,"click",r[20])],u=!0)},p(g,h){h&128&&l!==(l=g[7].t("Ask a question"))&&d(t,"placeholder",l),h&8&&t.value!==g[3]&&ot(t,g[3]),h&8&&f!==(f=(g[3]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center")&&d(i,"class",f)},i:Ee,o:Ee,d(g){g&&m(e),u=!1,Xe(c)}}}function Sa(r){let e,t,l,s,n,i=r[7].t("Ask")+"",o,a,f,u,c,g,h=r[7].t("Explain")+"",p,v,w,E;return l=new Na({props:{className:"size-3 shrink-0"}}),u=new Jn({props:{className:"size-3 shrink-0"}}),{c(){e=y("div"),t=y("button"),X(l.$$.fragment),s=j(),n=y("div"),o=W(i),a=j(),f=y("button"),X(u.$$.fragment),c=j(),g=y("div"),p=W(h),this.h()},l(N){e=I(N,"DIV",{class:!0});var P=k(e);t=I(P,"BUTTON",{class:!0});var O=k(t);$(l.$$.fragment,O),s=H(O),n=I(O,"DIV",{class:!0});var R=k(n);o=q(R,i),R.forEach(m),O.forEach(m),a=H(P),f=I(P,"BUTTON",{class:!0});var M=k(f);$(u.$$.fragment,M),c=H(M),g=I(M,"DIV",{class:!0});var T=k(g);p=q(T,h),T.forEach(m),M.forEach(m),P.forEach(m),this.h()},h(){d(n,"class","shrink-0"),d(t,"class","px-1 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-sm flex items-center gap-1 min-w-fit"),d(g,"class","shrink-0"),d(f,"class","px-1 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-sm flex items-center gap-1 min-w-fit"),d(e,"class","flex flex-row gap-0.5 shrink-0 p-1 bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-lg shadow-xl")},m(N,P){D(N,e,P),_(e,t),x(l,t,null),_(t,s),_(t,n),_(n,o),_(e,a),_(e,f),x(u,f,null),_(f,c),_(f,g),_(g,p),v=!0,w||(E=[me(t,"click",r[16]),me(f,"click",r[17])],w=!0)},p(N,P){(!v||P&128)&&i!==(i=N[7].t("Ask")+"")&&J(o,i),(!v||P&128)&&h!==(h=N[7].t("Explain")+"")&&J(p,h)},i(N){v||(b(l.$$.fragment,N),b(u.$$.fragment,N),v=!0)},o(N){V(l.$$.fragment,N),V(u.$$.fragment,N),v=!1},d(N){N&&m(e),ee(l),ee(u),w=!1,Xe(E)}}}function Ra(r){let e,t,l,s,n;const i=[Va,Da],o=[];function a(f,u){return f[5]===null?0:1}return t=a(r),l=o[t]=i[t](r),{c(){e=y("div"),l.c(),this.h()},l(f){e=I(f,"DIV",{id:!0,class:!0,style:!0});var u=k(e);l.l(u),u.forEach(m),this.h()},h(){d(e,"id",s=`floating-buttons-${r[0]}`),d(e,"class","absolute rounded-lg mt-1 text-xs z-9999"),Lt(e,"display","none")},m(f,u){D(f,e,u),o[t].m(e,null),n=!0},p(f,[u]){let c=t;t=a(f),t===c?o[t].p(f,u):(le(),V(o[c],1,1,()=>{o[c]=null}),se(),l=o[t],l?l.p(f,u):(l=o[t]=i[t](f),l.c()),b(l,1),l.m(e,null)),(!n||u&1&&s!==(s=`floating-buttons-${f[0]}`))&&d(e,"id",s)},i(f){n||(b(l),n=!0)},o(f){V(l),n=!1},d(f){f&&m(e),o[t].d()}}}function Oa(r,e,t){let l;const s=Je("i18n");Me(r,s,B=>t(7,l=B));let{id:n=""}=e,{model:i=null}=e,{messages:o=[]}=e,{onAdd:a=()=>{}}=e,f=!1,u="",c="",g="",h=null,p=!1;const v=async()=>{const B=document.getElementById("response-container");B.scrollHeight-B.clientHeight<=B.scrollTop+50&&(B.scrollTop=B.scrollHeight)},w=async()=>{if(!i){Ae.error("Model not selected");return}t(4,g=[...u.split(`
`).map(A=>`> ${A}`),"",c].join(`
`)),t(3,c=""),t(5,h="");const[B,C]=await Il(localStorage.token,{model:i,messages:[...o,{role:"user",content:g}].map(A=>({role:A.role,content:A.content})),stream:!0});if(B&&B.ok){const A=B.body.getReader(),F=new TextDecoder;await(async()=>{var re,Q;for(;;){const{done:ie,value:ge}=await A.read();if(ie)break;const ye=F.decode(ge,{stream:!0}).split(`
`).filter(Z=>Z.trim()!=="");for(const Z of ye)if(Z.startsWith("data: "))if(Z.startsWith("data: [DONE]")){t(6,p=!0),await Ce(),v();continue}else try{const oe=JSON.parse(Z.slice(6));oe.choices&&((Q=(re=oe.choices[0])==null?void 0:re.delta)!=null&&Q.content)&&(t(5,h+=oe.choices[0].delta.content),v())}catch(oe){console.error(oe)}}})()}else Ae.error("An error occurred while fetching the explanation")},E=async()=>{if(!i){Ae.error("Model not selected");return}const B=u.split(`
`).map(F=>`> ${F}`).join(`
`);t(4,g=`${B}

Explain`),t(5,h="");const[C,A]=await Il(localStorage.token,{model:i,messages:[...o,{role:"user",content:g}].map(F=>({role:F.role,content:F.content})),stream:!0});if(C&&C.ok){const F=C.body.getReader(),z=new TextDecoder;await(async()=>{var Q,ie;for(;;){const{done:ge,value:he}=await F.read();if(ge)break;const Z=z.decode(he,{stream:!0}).split(`
`).filter(oe=>oe.trim()!=="");for(const oe of Z)if(oe.startsWith("data: "))if(oe.startsWith("data: [DONE]")){t(6,p=!0),await Ce(),v();continue}else try{const pe=JSON.parse(oe.slice(6));pe.choices&&((ie=(Q=pe.choices[0])==null?void 0:Q.delta)!=null&&ie.content)&&(t(5,h+=pe.choices[0].delta.content),v())}catch(pe){console.error(pe)}}})()}else Ae.error("An error occurred while fetching the explanation")},N=async()=>{a({modelId:i,parentId:n,messages:[{role:"user",content:g},{role:"assistant",content:h}]})},P=()=>{t(5,h=null),t(6,p=!1),t(1,f=!1),t(3,c="")},O=async()=>{t(2,u=window.getSelection().toString()),t(1,f=!0),await Ce(),setTimeout(()=>{const B=document.getElementById("floating-message-input");B&&B.focus()},0)},R=()=>{t(2,u=window.getSelection().toString()),E()};function M(){c=this.value,t(3,c)}const T=B=>{B.key==="Enter"&&w()},S=()=>{w()};return r.$$set=B=>{"id"in B&&t(0,n=B.id),"model"in B&&t(12,i=B.model),"messages"in B&&t(13,o=B.messages),"onAdd"in B&&t(14,a=B.onAdd)},[n,f,u,c,g,h,p,l,s,w,E,N,i,o,a,P,O,R,M,T,S]}class La extends Le{constructor(e){super(),Pe(this,e,Oa,Ra,Be,{id:0,model:12,messages:13,onAdd:14,closeHandler:15})}get closeHandler(){return this.$$.ctx[15]}}function ds(r){var s;let e,t,l={id:r[0],model:(s=r[3])==null?void 0:s.id,messages:Gt(r[2],r[0]),onAdd:r[22]};return e=new La({props:l}),r[23](e),{c(){X(e.$$.fragment)},l(n){$(e.$$.fragment,n)},m(n,i){x(e,n,i),t=!0},p(n,i){var a;const o={};i&1&&(o.id=n[0]),i&8&&(o.model=(a=n[3])==null?void 0:a.id),i&5&&(o.messages=Gt(n[2],n[0])),i&2048&&(o.onAdd=n[22]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){r[23](null),ee(e,n)}}}function Pa(r){let e,t,l,s,n;t=new Dt({props:{id:r[0],content:r[1],model:r[3],save:r[5],preview:r[6],sourceIds:(r[4]??[]).reduce(r[18],[]),onSourceClick:r[9],onTaskClick:r[10],onSave:r[8],onUpdate:r[19],onPreview:r[20]}});let i=r[7]&&r[3]&&ds(r);return{c(){e=y("div"),X(t.$$.fragment),l=j(),i&&i.c(),s=de()},l(o){e=I(o,"DIV",{});var a=k(e);$(t.$$.fragment,a),a.forEach(m),l=H(o),i&&i.l(o),s=de()},m(o,a){D(o,e,a),x(t,e,null),r[21](e),D(o,l,a),i&&i.m(o,a),D(o,s,a),n=!0},p(o,[a]){const f={};a&1&&(f.id=o[0]),a&2&&(f.content=o[1]),a&8&&(f.model=o[3]),a&32&&(f.save=o[5]),a&64&&(f.preview=o[6]),a&24&&(f.sourceIds=(o[4]??[]).reduce(o[18],[])),a&512&&(f.onSourceClick=o[9]),a&1024&&(f.onTaskClick=o[10]),a&256&&(f.onSave=o[8]),a&114688&&(f.onUpdate=o[19]),t.$set(f),o[7]&&o[3]?i?(i.p(o,a),a&136&&b(i,1)):(i=ds(o),i.c(),b(i,1),i.m(s.parentNode,s)):i&&(le(),V(i,1,1,()=>{i=null}),se())},i(o){n||(b(t.$$.fragment,o),b(i),n=!0)},o(o){V(t.$$.fragment,o),V(i),n=!1},d(o){o&&(m(e),m(l),m(s)),ee(t),r[21](null),i&&i.d(o)}}}function Aa(r,e,t){let l,s,n;Me(r,jr,z=>t(14,l=z)),Me(r,gt,z=>t(15,s=z)),Me(r,Tn,z=>t(16,n=z)),Je("i18n");let{id:i}=e,{content:o}=e,{history:a}=e,{model:f=null}=e,{sources:u=null}=e,{save:c=!1}=e,{preview:g=!1}=e,{floatingButtons:h=!0}=e,{onSave:p=()=>{}}=e,{onSourceClick:v=()=>{}}=e,{onTaskClick:w=()=>{}}=e,{onAddMessages:E=()=>{}}=e,N,P;const O=z=>{const re=document.getElementById(`floating-buttons-${i}`);if(!(N!=null&&N.contains(z.target))&&!(re!=null&&re.contains(z.target))){R();return}setTimeout(async()=>{if(await Ce(),!(N!=null&&N.contains(z.target)))return;let Q=window.getSelection();if(Q.toString().trim().length>0){const ge=Q.getRangeAt(0).getBoundingClientRect(),he=N.getBoundingClientRect(),ye=ge.bottom-he.top,Z=ge.left-he.left;if(re){re.style.display="block";const oe=he.width-Z;let pe=l?window.innerWidth/2:window.innerWidth/3;if(oe<pe){const ae=he.right-ge.right;re.style.right=`${ae}px`,re.style.left="auto"}else re.style.left=`${Z}px`,re.style.right="auto";re.style.top=`${ye+5}px`}}else R()},0)},R=()=>{const z=document.getElementById(`floating-buttons-${i}`);z&&(z.style.display="none"),P&&typeof(P==null?void 0:P.closeHandler)=="function"&&(P==null||P.closeHandler())},M=z=>{z.key==="Escape"&&R()};wt(()=>{h&&(N==null||N.addEventListener("mouseup",O),document.addEventListener("mouseup",O),document.addEventListener("keydown",M))}),Mn(()=>{h&&(N==null||N.removeEventListener("mouseup",O),document.removeEventListener("mouseup",O),document.removeEventListener("keydown",M))});const T=(z,re)=>{let Q=[];return re.document.forEach((ie,ge)=>{var Z,oe,pe,ae,ce;if(((pe=(oe=(Z=f==null?void 0:f.info)==null?void 0:Z.meta)==null?void 0:oe.capabilities)==null?void 0:pe.citations)==!1)return Q.push("N/A"),Q;const he=(ae=re.metadata)==null?void 0:ae[ge],ye=(he==null?void 0:he.source)??"N/A";return he!=null&&he.name?(Q.push(he.name),Q):(ye.startsWith("http://")||ye.startsWith("https://")?Q.push(ye):Q.push(((ce=re==null?void 0:re.source)==null?void 0:ce.name)??ye),Q)}),z=[...z,...Q],z.filter((ie,ge)=>z.indexOf(ie)===ge)},S=z=>{const{lang:re,text:Q}=z;((s==null?void 0:s.detectArtifacts)??!0)&&(["html","svg"].includes(re)||re==="xml"&&Q.includes("svg"))&&!l&&n&&(gl.set(!0),_l.set(!0))},B=async z=>{await Bn.set(z),await _l.set(!0),await gl.set(!0),await Sn.set(!1)};function C(z){ze[z?"unshift":"push"](()=>{N=z,t(12,N)})}const A=({modelId:z,parentId:re,messages:Q})=>{E({modelId:z,parentId:re,messages:Q}),R()};function F(z){ze[z?"unshift":"push"](()=>{P=z,t(13,P)})}return r.$$set=z=>{"id"in z&&t(0,i=z.id),"content"in z&&t(1,o=z.content),"history"in z&&t(2,a=z.history),"model"in z&&t(3,f=z.model),"sources"in z&&t(4,u=z.sources),"save"in z&&t(5,c=z.save),"preview"in z&&t(6,g=z.preview),"floatingButtons"in z&&t(7,h=z.floatingButtons),"onSave"in z&&t(8,p=z.onSave),"onSourceClick"in z&&t(9,v=z.onSourceClick),"onTaskClick"in z&&t(10,w=z.onTaskClick),"onAddMessages"in z&&t(11,E=z.onAddMessages)},[i,o,a,f,u,c,g,h,p,v,w,E,N,P,l,s,n,R,T,S,B,C,A,F]}class ja extends Le{constructor(e){super(),Pe(this,e,Aa,Pa,Be,{id:0,content:1,history:2,model:3,sources:4,save:5,preview:6,floatingButtons:7,onSave:8,onSourceClick:9,onTaskClick:10,onAddMessages:11})}}function Ha(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=k(e);t=we(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M2.75 2a.75.75 0 0 1 .75.75v6.5h7.94l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H2.75A.75.75 0 0 1 2 10V2.75A.75.75 0 0 1 2.75 2Z"),d(t,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16"),d(e,"fill","currentColor"),d(e,"class",r[0])},m(l,s){D(l,e,s),_(e,t)},p(l,[s]){s&1&&d(e,"class",l[0])},i:Ee,o:Ee,d(l){l&&m(e)}}}function za(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,s=n.strokeWidth)},[l,s]}class Ua extends Le{constructor(e){super(),Pe(this,e,za,Ha,Be,{className:0,strokeWidth:1})}}function hs(r,e,t){const l=r.slice();return l[5]=e[t],l[7]=t,l}function ms(r){let e;return{c(){e=y("hr"),this.h()},l(t){e=I(t,"HR",{class:!0}),this.h()},h(){d(e,"class","border-gray-100 dark:border-gray-850")},m(t,l){D(t,e,l)},d(t){t&&m(e)}}}function gs(r,e){let t,l,s,n,i=e[5]+"",o,a,f,u,c,g,h,p;l=new Ua({props:{className:"size-3.5"}});function v(){return e[4](e[5])}let w=e[7]<e[0].length-1&&ms();return{key:r,first:null,c(){t=y("div"),X(l.$$.fragment),s=j(),n=y("div"),o=W(i),u=j(),w&&w.c(),c=de(),this.h()},l(E){t=I(E,"DIV",{class:!0,title:!0,"aria-label":!0});var N=k(t);$(l.$$.fragment,N),s=H(N),n=I(N,"DIV",{class:!0});var P=k(n);o=q(P,i),P.forEach(m),N.forEach(m),u=H(E),w&&w.l(E),c=de(),this.h()},h(){d(n,"class","line-clamp-1"),d(t,"class","mr-2 py-1.5 bg-transparent text-left text-sm flex items-center gap-2 px-1.5 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition cursor-pointer"),d(t,"title",a=e[5]),d(t,"aria-label",f=e[5]),this.first=t},m(E,N){D(E,t,N),x(l,t,null),_(t,s),_(t,n),_(n,o),D(E,u,N),w&&w.m(E,N),D(E,c,N),g=!0,h||(p=me(t,"click",v),h=!0)},p(E,N){e=E,(!g||N&1)&&i!==(i=e[5]+"")&&J(o,i),(!g||N&1&&a!==(a=e[5]))&&d(t,"title",a),(!g||N&1&&f!==(f=e[5]))&&d(t,"aria-label",f),e[7]<e[0].length-1?w||(w=ms(),w.c(),w.m(c.parentNode,c)):w&&(w.d(1),w=null)},i(E){g||(b(l.$$.fragment,E),g=!0)},o(E){V(l.$$.fragment,E),g=!1},d(E){E&&(m(t),m(u),m(c)),ee(l),w&&w.d(E),h=!1,p()}}}function Wa(r){let e,t,l=r[2].t("Follow up")+"",s,n,i,o=[],a=new Map,f,u=Ne(r[0]);const c=g=>g[7];for(let g=0;g<u.length;g+=1){let h=hs(r,u,g),p=c(h);a.set(p,o[g]=gs(p,h))}return{c(){e=y("div"),t=y("div"),s=W(l),n=j(),i=y("div");for(let g=0;g<o.length;g+=1)o[g].c();this.h()},l(g){e=I(g,"DIV",{class:!0});var h=k(e);t=I(h,"DIV",{class:!0});var p=k(t);s=q(p,l),p.forEach(m),n=H(h),i=I(h,"DIV",{class:!0});var v=k(i);for(let w=0;w<o.length;w+=1)o[w].l(v);v.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","text-sm font-medium"),d(i,"class","flex flex-col text-left gap-1 mt-1.5"),d(e,"class","mt-4")},m(g,h){D(g,e,h),_(e,t),_(t,s),_(e,n),_(e,i);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(i,null);f=!0},p(g,[h]){(!f||h&4)&&l!==(l=g[2].t("Follow up")+"")&&J(s,l),h&3&&(u=Ne(g[0]),le(),o=Ht(o,h,c,1,g,u,a,i,Jt,gs,null,hs),se())},i(g){if(!f){for(let h=0;h<u.length;h+=1)b(o[h]);f=!0}},o(g){for(let h=0;h<o.length;h+=1)V(o[h]);f=!1},d(g){g&&m(e);for(let h=0;h<o.length;h+=1)o[h].d()}}}function qa(r,e,t){let l;const s=Je("i18n");Me(r,s,a=>t(2,l=a));let{followUps:n=[]}=e,{onClick:i=()=>{}}=e;const o=a=>i(a);return r.$$set=a=>{"followUps"in a&&t(0,n=a.followUps),"onClick"in a&&t(1,i=a.onClick)},[n,i,l,s,o]}class Fa extends Le{constructor(e){super(),Pe(this,e,qa,Wa,Be,{followUps:0,onClick:1})}}function _s(r,e,t){const l=r.slice();return l[89]=e[t],l}function ps(r,e,t){const l=r.slice();return l[92]=e[t],l}function Wt(r){var l,s,n;const e=r.slice(),t=(((l=e[13])==null?void 0:l.statusHistory)??[...(s=e[13])!=null&&s.status?[(n=e[13])==null?void 0:n.status]:[]]).at(-1);return e[95]=t,e}function Ga(r){var s;let e,t=(((s=r[17])==null?void 0:s.name)??r[13].model)+"",l;return{c(){e=y("span"),l=W(t),this.h()},l(n){e=I(n,"SPAN",{class:!0});var i=k(e);l=q(i,t),i.forEach(m),this.h()},h(){d(e,"class","line-clamp-1 text-black dark:text-white")},m(n,i){D(n,e,i),_(e,l)},p(n,i){var o;i[0]&139264&&t!==(t=(((o=n[17])==null?void 0:o.name)??n[13].model)+"")&&J(l,t)},d(n){n&&m(e)}}}function bs(r){let e,t,l;return t=new Se({props:{content:nt(r[13].timestamp*1e3).format("LLLL"),$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=y("div"),X(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){d(e,"class","self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]")},m(s,n){D(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&8192&&(i.content=nt(s[13].timestamp*1e3).format("LLLL")),n[0]&8192|n[3]&8&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){V(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function Ja(r){let e,t=vt(r[13].timestamp*1e3)+"",l;return{c(){e=y("span"),l=W(t),this.h()},l(s){e=I(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n[0]&8192&&t!==(t=vt(s[13].timestamp*1e3)+"")&&J(l,t)},d(s){s&&m(e)}}}function Ka(r){var i;let e,t,l,s;e=new Se({props:{content:((i=r[17])==null?void 0:i.name)??r[13].model,placement:"top-start",$$slots:{default:[Ga]},$$scope:{ctx:r}}});let n=r[13].timestamp&&bs(r);return{c(){X(e.$$.fragment),t=j(),n&&n.c(),l=de()},l(o){$(e.$$.fragment,o),t=H(o),n&&n.l(o),l=de()},m(o,a){x(e,o,a),D(o,t,a),n&&n.m(o,a),D(o,l,a),s=!0},p(o,a){var u;const f={};a[0]&139264&&(f.content=((u=o[17])==null?void 0:u.name)??o[13].model),a[0]&139264|a[3]&8&&(f.$$scope={dirty:a,ctx:o}),e.$set(f),o[13].timestamp?n?(n.p(o,a),a[0]&8192&&b(n,1)):(n=bs(o),n.c(),b(n,1),n.m(l.parentNode,l)):n&&(le(),V(n,1,1,()=>{n=null}),se())},i(o){s||(b(e.$$.fragment,o),b(n),s=!0)},o(o){V(e.$$.fragment,o),V(n),s=!1},d(o){o&&(m(t),m(l)),ee(e,o),n&&n.d(o)}}}function vs(r){var s;let e,t,l=!((s=r[95])!=null&&s.hidden)&&ks(r);return{c(){l&&l.c(),e=de()},l(n){l&&l.l(n),e=de()},m(n,i){l&&l.m(n,i),D(n,e,i),t=!0},p(n,i){var o;(o=n[95])!=null&&o.hidden?l&&(le(),V(l,1,1,()=>{l=null}),se()):l?(l.p(n,i),i[0]&8192&&b(l,1)):(l=ks(n),l.c(),b(l,1),l.m(e.parentNode,e))},i(n){t||(b(l),t=!0)},o(n){V(l),t=!1},d(n){n&&m(e),l&&l.d(n)}}}function ks(r){let e,t,l,s;const n=[Ya,Qa,Za],i=[];function o(a,f){var u,c,g;return((u=a[95])==null?void 0:u.action)==="web_search"&&((c=a[95])!=null&&c.urls)?0:((g=a[95])==null?void 0:g.action)==="knowledge_search"?1:2}return t=o(r),l=i[t]=n[t](r),{c(){e=y("div"),l.c(),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);l.l(f),f.forEach(m),this.h()},h(){d(e,"class","status-description flex items-center gap-2 py-0.5")},m(a,f){D(a,e,f),i[t].m(e,null),s=!0},p(a,f){let u=t;t=o(a),t===u?i[t].p(a,f):(le(),V(i[u],1,1,()=>{i[u]=null}),se(),l=i[t],l?l.p(a,f):(l=i[t]=n[t](a),l.c()),b(l,1),l.m(e,null))},i(a){s||(b(l),s=!0)},o(a){V(l),s=!1},d(a){a&&m(e),i[t].d()}}}function Za(r){let e,t,l,s;function n(a,f){var u,c,g,h;return f[0]&8192&&(l=null),l==null&&(l=!!((u=a[95])!=null&&u.description.includes("{{searchQuery}}"))),l?to:((c=a[95])==null?void 0:c.description)==="No search query generated"?eo:((g=a[95])==null?void 0:g.description)==="Generating search query"?xa:((h=a[95])==null?void 0:h.description)==="Searching the web"?$a:Xa}let i=n(r,[-1,-1,-1,-1]),o=i(r);return{c(){e=y("div"),t=y("div"),o.c(),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);t=I(f,"DIV",{class:!0});var u=k(t);o.l(u),u.forEach(m),f.forEach(m),this.h()},h(){var a;d(t,"class",s=(((a=r[95])==null?void 0:a.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(a,f){D(a,e,f),_(e,t),o.m(t,null)},p(a,f){var u;i===(i=n(a,f))&&o?o.p(a,f):(o.d(1),o=i(a),o&&(o.c(),o.m(t,null))),f[0]&8192&&s!==(s=(((u=a[95])==null?void 0:u.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",s)},i:Ee,o:Ee,d(a){a&&m(e),o.d()}}}function Qa(r){let e,t,l=r[28].t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:r[95].query})+"",s,n;return{c(){e=y("div"),t=y("div"),s=W(l),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);t=I(o,"DIV",{class:!0});var a=k(t);s=q(a,l),a.forEach(m),o.forEach(m),this.h()},h(){var i;d(t,"class",n=(((i=r[95])==null?void 0:i.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(i,o){D(i,e,o),_(e,t),_(t,s)},p(i,o){var a;o[0]&268443648&&l!==(l=i[28].t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:i[95].query})+"")&&J(s,l),o[0]&8192&&n!==(n=(((a=i[95])==null?void 0:a.done)===!1?"shimmer":"")+" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap")&&d(t,"class",n)},i:Ee,o:Ee,d(i){i&&m(e)}}}function Ya(r){let e,t;return e=new Ti({props:{status:r[95],$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.status=l[95]),s[0]&268443648|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Xa(r){var l;let e=((l=r[95])==null?void 0:l.description)+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){D(s,t,n)},p(s,n){var i;n[0]&8192&&e!==(e=((i=s[95])==null?void 0:i.description)+"")&&J(t,e)},d(s){s&&m(t)}}}function $a(r){let e=r[28].t("Searching the web...")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("Searching the web...")+"")&&J(t,e)},d(l){l&&m(t)}}}function xa(r){let e=r[28].t("Generating search query")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("Generating search query")+"")&&J(t,e)},d(l){l&&m(t)}}}function eo(r){let e=r[28].t("No search query generated")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("No search query generated")+"")&&J(t,e)},d(l){l&&m(t)}}}function to(r){var l,s;let e=r[28].t((l=r[95])==null?void 0:l.description,{searchQuery:(s=r[95])==null?void 0:s.query})+"",t;return{c(){t=W(e)},l(n){t=q(n,e)},m(n,i){D(n,t,i)},p(n,i){var o,a;i[0]&268443648&&e!==(e=n[28].t((o=n[95])==null?void 0:o.description,{searchQuery:(a=n[95])==null?void 0:a.query})+"")&&J(t,e)},d(n){n&&m(t)}}}function lo(r){var l;let e=((l=r[95])==null?void 0:l.description)+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){D(s,t,n)},p(s,n){var i;n[0]&8192&&e!==(e=((i=s[95])==null?void 0:i.description)+"")&&J(t,e)},d(s){s&&m(t)}}}function so(r){let e=r[28].t("Generating search query")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("Generating search query")+"")&&J(t,e)},d(l){l&&m(t)}}}function ro(r){let e=r[28].t("No search query generated")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&268435456&&e!==(e=l[28].t("No search query generated")+"")&&J(t,e)},d(l){l&&m(t)}}}function no(r){var l,s;let e=r[28].t((l=r[95])==null?void 0:l.description,{count:(s=r[95])==null?void 0:s.urls.length})+"",t;return{c(){t=W(e)},l(n){t=q(n,e)},m(n,i){D(n,t,i)},p(n,i){var o,a;i[0]&268443648&&e!==(e=n[28].t((o=n[95])==null?void 0:o.description,{count:(a=n[95])==null?void 0:a.urls.length})+"")&&J(t,e)},d(n){n&&m(t)}}}function io(r){let e,t,l,s;function n(a,f){var u,c,g;return f[0]&8192&&(l=null),l==null&&(l=!!((u=a[95])!=null&&u.description.includes("{{count}}"))),l?no:((c=a[95])==null?void 0:c.description)==="No search query generated"?ro:((g=a[95])==null?void 0:g.description)==="Generating search query"?so:lo}let i=n(r,[-1,-1,-1,-1]),o=i(r);return{c(){e=y("div"),t=y("div"),o.c(),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);t=I(f,"DIV",{class:!0});var u=k(t);o.l(u),u.forEach(m),f.forEach(m),this.h()},h(){var a;d(t,"class",s=(((a=r[95])==null?void 0:a.done)===!1?"shimmer":"")+" text-base line-clamp-1 text-wrap"),d(e,"class","flex flex-col justify-center -space-y-0.5")},m(a,f){D(a,e,f),_(e,t),o.m(t,null)},p(a,f){var u;i===(i=n(a,f))&&o?o.p(a,f):(o.d(1),o=i(a),o&&(o.c(),o.m(t,null))),f[0]&8192&&s!==(s=(((u=a[95])==null?void 0:u.done)===!1?"shimmer":"")+" text-base line-clamp-1 text-wrap")&&d(t,"class",s)},d(a){a&&m(e),o.d()}}}function ws(r){let e,t,l=Ne(r[13].files),s=[];for(let i=0;i<l.length;i+=1)s[i]=ys(ps(r,l,i));const n=i=>V(s[i],1,1,()=>{s[i]=null});return{c(){e=y("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","my-1 w-full flex overflow-x-auto gap-2 flex-wrap")},m(i,o){D(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,o){if(o[0]&8192){l=Ne(i[13].files);let a;for(a=0;a<l.length;a+=1){const f=ps(i,l,a);s[a]?(s[a].p(f,o),b(s[a],1)):(s[a]=ys(f),s[a].c(),b(s[a],1),s[a].m(e,null))}for(le(),a=l.length;a<s.length;a+=1)n(a);se()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)b(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)V(s[o]);t=!1},d(i){i&&m(e),Ge(s,i)}}}function ao(r){var l;let e,t;return e=new $t({props:{item:r[92],url:r[92].url,name:r[92].name,type:r[92].type,size:(l=r[92])==null?void 0:l.size,colorClassName:"bg-white dark:bg-gray-850 "}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n[0]&8192&&(i.item=s[92]),n[0]&8192&&(i.url=s[92].url),n[0]&8192&&(i.name=s[92].name),n[0]&8192&&(i.type=s[92].type),n[0]&8192&&(i.size=(o=s[92])==null?void 0:o.size),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function oo(r){let e,t;return e=new Qt({props:{src:r[92].url,alt:r[13].content}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.src=l[92].url),s[0]&8192&&(n.alt=l[13].content),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ys(r){let e,t,l,s,n;const i=[oo,ao],o=[];function a(f,u){return f[92].type==="image"?0:1}return t=a(r),l=o[t]=i[t](r),{c(){e=y("div"),l.c(),s=j()},l(f){e=I(f,"DIV",{});var u=k(e);l.l(u),s=H(u),u.forEach(m)},m(f,u){D(f,e,u),o[t].m(e,null),_(e,s),n=!0},p(f,u){let c=t;t=a(f),t===c?o[t].p(f,u):(le(),V(o[c],1,1,()=>{o[c]=null}),se(),l=o[t],l?l.p(f,u):(l=o[t]=i[t](f),l.c()),b(l,1),l.m(e,s))},i(f){n||(b(l),n=!0)},o(f){V(l),n=!1},d(f){f&&m(e),o[t].d()}}}function fo(r){var p,v,w,E,N,P,O;let e,t,l,s,n,i,o;const a=[ho,co],f=[];function u(R,M){var T,S,B;return R[13].content===""&&!R[13].error&&(((T=R[13])==null?void 0:T.statusHistory)??[...(S=R[13])!=null&&S.status?[(B=R[13])==null?void 0:B.status]:[]]).length===0?0:R[13].content&&R[13].error!==!0?1:-1}~(t=u(r))&&(l=f[t]=a[t](r));let c=((p=r[13])==null?void 0:p.error)&&Is(r),g=(((v=r[13])==null?void 0:v.sources)||((w=r[13])==null?void 0:w.citations))&&(((O=(P=(N=(E=r[17])==null?void 0:E.info)==null?void 0:N.meta)==null?void 0:P.capabilities)==null?void 0:O.citations)??!0)&&Es(r),h=r[13].code_executions&&Ms(r);return{c(){e=y("div"),l&&l.c(),s=j(),c&&c.c(),n=j(),g&&g.c(),i=j(),h&&h.c(),this.h()},l(R){e=I(R,"DIV",{class:!0,id:!0});var M=k(e);l&&l.l(M),s=H(M),c&&c.l(M),n=H(M),g&&g.l(M),i=H(M),h&&h.l(M),M.forEach(m),this.h()},h(){d(e,"class","w-full flex flex-col relative"),d(e,"id","response-content-container")},m(R,M){D(R,e,M),~t&&f[t].m(e,null),_(e,s),c&&c.m(e,null),_(e,n),g&&g.m(e,null),_(e,i),h&&h.m(e,null),o=!0},p(R,M){var S,B,C,A,F,z,re;let T=t;t=u(R),t===T?~t&&f[t].p(R,M):(l&&(le(),V(f[T],1,1,()=>{f[T]=null}),se()),~t?(l=f[t],l?l.p(R,M):(l=f[t]=a[t](R),l.c()),b(l,1),l.m(e,s)):l=null),(S=R[13])!=null&&S.error?c?(c.p(R,M),M[0]&8192&&b(c,1)):(c=Is(R),c.c(),b(c,1),c.m(e,n)):c&&(le(),V(c,1,1,()=>{c=null}),se()),((B=R[13])!=null&&B.sources||(C=R[13])!=null&&C.citations)&&(((re=(z=(F=(A=R[17])==null?void 0:A.info)==null?void 0:F.meta)==null?void 0:z.capabilities)==null?void 0:re.citations)??!0)?g?(g.p(R,M),M[0]&139264&&b(g,1)):(g=Es(R),g.c(),b(g,1),g.m(e,i)):g&&(le(),V(g,1,1,()=>{g=null}),se()),R[13].code_executions?h?(h.p(R,M),M[0]&8192&&b(h,1)):(h=Ms(R),h.c(),b(h,1),h.m(e,null)):h&&(le(),V(h,1,1,()=>{h=null}),se())},i(R){o||(b(l),b(c),b(g),b(h),o=!0)},o(R){V(l),V(c),V(g),V(h),o=!1},d(R){R&&m(e),~t&&f[t].d(),c&&c.d(),g&&g.d(),h&&h.d()}}}function uo(r){let e,t,l,s,n,i,o,a=r[28].t("Save As Copy")+"",f,u,c,g,h=r[28].t("Cancel")+"",p,v,w,E=r[28].t("Save")+"",N,P,O;return{c(){e=y("div"),t=y("textarea"),s=j(),n=y("div"),i=y("div"),o=y("button"),f=W(a),u=j(),c=y("div"),g=y("button"),p=W(h),v=j(),w=y("button"),N=W(E),this.h()},l(R){e=I(R,"DIV",{class:!0});var M=k(e);t=I(M,"TEXTAREA",{id:!0,class:!0}),k(t).forEach(m),s=H(M),n=I(M,"DIV",{class:!0});var T=k(n);i=I(T,"DIV",{});var S=k(i);o=I(S,"BUTTON",{id:!0,class:!0});var B=k(o);f=q(B,a),B.forEach(m),S.forEach(m),u=H(T),c=I(T,"DIV",{class:!0});var C=k(c);g=I(C,"BUTTON",{id:!0,class:!0});var A=k(g);p=q(A,h),A.forEach(m),v=H(C),w=I(C,"BUTTON",{id:!0,class:!0});var F=k(w);N=q(F,E),F.forEach(m),C.forEach(m),T.forEach(m),M.forEach(m),this.h()},h(){d(t,"id",l="message-edit-"+r[13].id),d(t,"class","bg-transparent outline-hidden w-full resize-none"),d(o,"id","save-new-message-button"),d(o,"class","px-4 py-2 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl"),d(g,"id","close-edit-message-button"),d(g,"class","px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl"),d(w,"id","confirm-edit-message-button"),d(w,"class","px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl"),d(c,"class","flex space-x-1.5"),d(n,"class","mt-2 mb-1 flex justify-between text-sm font-medium"),d(e,"class","w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2")},m(R,M){D(R,e,M),_(e,t),r[51](t),ot(t,r[18]),_(e,s),_(e,n),_(n,i),_(i,o),_(o,f),_(n,u),_(n,c),_(c,g),_(g,p),_(c,v),_(c,w),_(w,N),P||(O=[me(t,"input",r[52]),me(t,"input",Lo),me(t,"keydown",r[53]),me(o,"click",r[54]),me(g,"click",r[55]),me(w,"click",r[56])],P=!0)},p(R,M){M[0]&8192&&l!==(l="message-edit-"+R[13].id)&&d(t,"id",l),M[0]&262144&&ot(t,R[18]),M[0]&268435456&&a!==(a=R[28].t("Save As Copy")+"")&&J(f,a),M[0]&268435456&&h!==(h=R[28].t("Cancel")+"")&&J(p,h),M[0]&268435456&&E!==(E=R[28].t("Save")+"")&&J(N,E)},i:Ee,o:Ee,d(R){R&&m(e),r[51](null),P=!1,Xe(O)}}}function co(r){var l;let e,t;return e=new ja({props:{id:r[13].id,history:r[0],content:r[13].content,sources:r[13].sources,floatingButtons:((l=r[13])==null?void 0:l.done)&&!r[12],save:!r[12],preview:!r[12],model:r[17],onTaskClick:r[57],onSourceClick:r[58],onAddMessages:r[59],onSave:r[60]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n[0]&8192&&(i.id=s[13].id),n[0]&1&&(i.history=s[0]),n[0]&8192&&(i.content=s[13].content),n[0]&8192&&(i.sources=s[13].sources),n[0]&12288&&(i.floatingButtons=((o=s[13])==null?void 0:o.done)&&!s[12]),n[0]&4096&&(i.save=!s[12]),n[0]&4096&&(i.preview=!s[12]),n[0]&131072&&(i.model=s[17]),n[0]&8192&&(i.onSourceClick=s[58]),n[0]&1024&&(i.onAddMessages=s[59]),n[0]&8225&&(i.onSave=s[60]),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function ho(r){let e,t;return e=new xt({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Is(r){var l,s;let e,t;return e=new Ri({props:{content:((s=(l=r[13])==null?void 0:l.error)==null?void 0:s.content)??r[13].content}}),{c(){X(e.$$.fragment)},l(n){$(e.$$.fragment,n)},m(n,i){x(e,n,i),t=!0},p(n,i){var a,f;const o={};i[0]&8192&&(o.content=((f=(a=n[13])==null?void 0:a.error)==null?void 0:f.content)??n[13].content),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Es(r){var l,s,n;let e,t;return e=new ia({props:{id:(l=r[13])==null?void 0:l.id,sources:((s=r[13])==null?void 0:s.sources)??((n=r[13])==null?void 0:n.citations)}}),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),t=!0},p(i,o){var f,u,c;const a={};o[0]&8192&&(a.id=(f=i[13])==null?void 0:f.id),o[0]&8192&&(a.sources=((u=i[13])==null?void 0:u.sources)??((c=i[13])==null?void 0:c.citations)),e.$set(a)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){V(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function Ms(r){let e,t;return e=new Ia({props:{codeExecutions:r[13].code_executions}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.codeExecutions=l[13].code_executions),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ns(r){var f;let e,t,l,s,n,i=(r[13].done||r[1].length>1)&&Ds(r),o=r[13].done&&r[24]&&Us(r),a=r[11]&&r[13].done&&!r[12]&&(((f=r[13])==null?void 0:f.followUps)??[]).length>0&&Ws(r);return{c(){e=y("div"),i&&i.c(),t=j(),o&&o.c(),l=j(),a&&a.c(),s=de(),this.h()},l(u){e=I(u,"DIV",{class:!0});var c=k(e);i&&i.l(c),c.forEach(m),t=H(u),o&&o.l(u),l=H(u),a&&a.l(u),s=de(),this.h()},h(){d(e,"class","flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500 mt-0.5 svelte-1u5gq5j")},m(u,c){D(u,e,c),i&&i.m(e,null),r[77](e),D(u,t,c),o&&o.m(u,c),D(u,l,c),a&&a.m(u,c),D(u,s,c),n=!0},p(u,c){var g;u[13].done||u[1].length>1?i?(i.p(u,c),c[0]&8194&&b(i,1)):(i=Ds(u),i.c(),b(i,1),i.m(e,null)):i&&(le(),V(i,1,1,()=>{i=null}),se()),u[13].done&&u[24]?o?(o.p(u,c),c[0]&16785408&&b(o,1)):(o=Us(u),o.c(),b(o,1),o.m(l.parentNode,l)):o&&(le(),V(o,1,1,()=>{o=null}),se()),u[11]&&u[13].done&&!u[12]&&(((g=u[13])==null?void 0:g.followUps)??[]).length>0?a?(a.p(u,c),c[0]&14336&&b(a,1)):(a=Ws(u),a.c(),b(a,1),a.m(s.parentNode,s)):a&&(le(),V(a,1,1,()=>{a=null}),se())},i(u){n||(b(i),b(o),b(a),n=!0)},o(u){V(i),V(o),V(a),n=!1},d(u){u&&(m(e),m(t),m(l),m(s)),i&&i.d(),r[77](null),o&&o.d(u),a&&a.d(u)}}}function Ds(r){let e,t,l,s=r[1].length>1&&Vs(r),n=r[13].done&&Cs(r);return{c(){s&&s.c(),e=j(),n&&n.c(),t=de()},l(i){s&&s.l(i),e=H(i),n&&n.l(i),t=de()},m(i,o){s&&s.m(i,o),D(i,e,o),n&&n.m(i,o),D(i,t,o),l=!0},p(i,o){i[1].length>1?s?s.p(i,o):(s=Vs(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[13].done?n?(n.p(i,o),o[0]&8192&&b(n,1)):(n=Cs(i),n.c(),b(n,1),n.m(t.parentNode,t)):n&&(le(),V(n,1,1,()=>{n=null}),se())},i(i){l||(b(n),l=!0)},o(i){V(n),l=!1},d(i){i&&(m(e),m(t)),s&&s.d(i),n&&n.d(i)}}}function Vs(r){let e,t,l,s,n,i,o,a,f,u,c,g,h;function p(E,N){return E[20]?go:mo}let v=p(r),w=v(r);return{c(){e=y("div"),t=y("button"),l=ke("svg"),s=ke("path"),i=j(),w.c(),o=j(),a=y("button"),f=ke("svg"),u=ke("path"),this.h()},l(E){e=I(E,"DIV",{class:!0,dir:!0});var N=k(e);t=I(N,"BUTTON",{"aria-label":!0,class:!0});var P=k(t);l=we(P,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var O=k(l);s=we(O,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(s).forEach(m),O.forEach(m),P.forEach(m),i=H(N),w.l(N),o=H(N),a=I(N,"BUTTON",{class:!0,"aria-label":!0});var R=k(a);f=we(R,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var M=k(f);u=we(M,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(u).forEach(m),M.forEach(m),R.forEach(m),N.forEach(m),this.h()},h(){d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(s,"d","M15.75 19.5 8.25 12l7.5-7.5"),d(l,"aria-hidden","true"),d(l,"xmlns","http://www.w3.org/2000/svg"),d(l,"fill","none"),d(l,"viewBox","0 0 24 24"),d(l,"stroke","currentColor"),d(l,"stroke-width","2.5"),d(l,"class","size-3.5"),d(t,"aria-label",n=r[28].t("Previous message")),d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(u,"stroke-linecap","round"),d(u,"stroke-linejoin","round"),d(u,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),d(f,"xmlns","http://www.w3.org/2000/svg"),d(f,"fill","none"),d(f,"aria-hidden","true"),d(f,"viewBox","0 0 24 24"),d(f,"stroke","currentColor"),d(f,"stroke-width","2.5"),d(f,"class","size-3.5"),d(a,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(a,"aria-label",c=r[28].t("Next message")),d(e,"class","flex self-center min-w-fit"),d(e,"dir","ltr")},m(E,N){D(E,e,N),_(e,t),_(t,l),_(l,s),_(e,i),w.m(e,null),_(e,o),_(e,a),_(a,f),_(f,u),g||(h=[me(t,"click",r[61]),me(a,"click",r[65])],g=!0)},p(E,N){N[0]&268435456&&n!==(n=E[28].t("Previous message"))&&d(t,"aria-label",n),v===(v=p(E))&&w?w.p(E,N):(w.d(1),w=v(E),w&&(w.c(),w.m(e,o))),N[0]&268435456&&c!==(c=E[28].t("Next message"))&&d(a,"aria-label",c)},d(E){E&&m(e),w.d(),g=!1,Xe(h)}}}function mo(r){let e,t=r[1].indexOf(r[13].id)+1+"",l,s,n=r[1].length+"",i,o,a;return{c(){e=y("div"),l=W(t),s=W("/"),i=W(n),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);l=q(u,t),s=q(u,"/"),i=q(u,n),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){D(f,e,u),_(e,l),_(e,s),_(e,i),o||(a=me(e,"dblclick",r[64]),o=!0)},p(f,u){u[0]&8194&&t!==(t=f[1].indexOf(f[13].id)+1+"")&&J(l,t),u[0]&2&&n!==(n=f[1].length+"")&&J(i,n)},d(f){f&&m(e),o=!1,a()}}}function go(r){let e,t,l,s,n,i,o=r[1].length+"",a,f,u;return{c(){e=y("div"),t=y("input"),i=W("/"),a=W(o),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=k(e);t=I(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),i=q(g,"/"),a=q(g,o),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+r[13].id),d(t,"type","number"),t.value=s=r[1].indexOf(r[13].id)+1,d(t,"min","1"),d(t,"max",n=r[1].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){D(c,e,g),_(e,t),_(e,i),_(e,a),f||(u=[me(t,"focus",Po),me(t,"blur",r[62]),me(t,"keydown",r[63])],f=!0)},p(c,g){g[0]&8192&&l!==(l="message-index-input-"+c[13].id)&&d(t,"id",l),g[0]&8194&&s!==(s=c[1].indexOf(c[13].id)+1)&&t.value!==s&&(t.value=s),g[0]&2&&n!==(n=c[1].length)&&d(t,"max",n),g[0]&2&&o!==(o=c[1].length+"")&&J(a,o)},d(c){c&&m(e),f=!1,Xe(u)}}}function Cs(r){var p,v,w,E,N,P,O,R,M;let e,t,l,s,n,i,o,a,f=!r[12]&&Ts(r);t=new Se({props:{content:r[28].t("Copy"),placement:"bottom",$$slots:{default:[po]},$$scope:{ctx:r}}});let u=(((p=r[29])==null?void 0:p.role)==="admin"||(((E=(w=(v=r[29])==null?void 0:v.permissions)==null?void 0:w.chat)==null?void 0:E.tts)??!0))&&Ss(r),c=((N=r[27])==null?void 0:N.features.enable_image_generation)&&(((P=r[29])==null?void 0:P.role)==="admin"||((M=(R=(O=r[29])==null?void 0:O.permissions)==null?void 0:R.features)==null?void 0:M.image_generation))&&!r[12]&&Rs(r),g=r[13].usage&&Os(r),h=!r[12]&&Ls(r);return{c(){f&&f.c(),e=j(),X(t.$$.fragment),l=j(),u&&u.c(),s=j(),c&&c.c(),n=j(),g&&g.c(),i=j(),h&&h.c(),o=de()},l(T){f&&f.l(T),e=H(T),$(t.$$.fragment,T),l=H(T),u&&u.l(T),s=H(T),c&&c.l(T),n=H(T),g&&g.l(T),i=H(T),h&&h.l(T),o=de()},m(T,S){f&&f.m(T,S),D(T,e,S),x(t,T,S),D(T,l,S),u&&u.m(T,S),D(T,s,S),c&&c.m(T,S),D(T,n,S),g&&g.m(T,S),D(T,i,S),h&&h.m(T,S),D(T,o,S),a=!0},p(T,S){var C,A,F,z,re,Q,ie,ge,he;T[12]?f&&(le(),V(f,1,1,()=>{f=null}),se()):f?(f.p(T,S),S[0]&4096&&b(f,1)):(f=Ts(T),f.c(),b(f,1),f.m(e.parentNode,e));const B={};S[0]&268435456&&(B.content=T[28].t("Copy")),S[0]&268445696|S[3]&8&&(B.$$scope={dirty:S,ctx:T}),t.$set(B),((C=T[29])==null?void 0:C.role)==="admin"||(((z=(F=(A=T[29])==null?void 0:A.permissions)==null?void 0:F.chat)==null?void 0:z.tts)??!0)?u?(u.p(T,S),S[0]&536870912&&b(u,1)):(u=Ss(T),u.c(),b(u,1),u.m(s.parentNode,s)):u&&(le(),V(u,1,1,()=>{u=null}),se()),(re=T[27])!=null&&re.features.enable_image_generation&&(((Q=T[29])==null?void 0:Q.role)==="admin"||(he=(ge=(ie=T[29])==null?void 0:ie.permissions)==null?void 0:ge.features)!=null&&he.image_generation)&&!T[12]?c?(c.p(T,S),S[0]&671092736&&b(c,1)):(c=Rs(T),c.c(),b(c,1),c.m(n.parentNode,n)):c&&(le(),V(c,1,1,()=>{c=null}),se()),T[13].usage?g?(g.p(T,S),S[0]&8192&&b(g,1)):(g=Os(T),g.c(),b(g,1),g.m(i.parentNode,i)):g&&(le(),V(g,1,1,()=>{g=null}),se()),T[12]?h&&(le(),V(h,1,1,()=>{h=null}),se()):h?(h.p(T,S),S[0]&4096&&b(h,1)):(h=Ls(T),h.c(),b(h,1),h.m(o.parentNode,o))},i(T){a||(b(f),b(t.$$.fragment,T),b(u),b(c),b(g),b(h),a=!0)},o(T){V(f),V(t.$$.fragment,T),V(u),V(c),V(g),V(h),a=!1},d(T){T&&(m(e),m(l),m(s),m(n),m(i),m(o)),f&&f.d(T),ee(t,T),u&&u.d(T),c&&c.d(T),g&&g.d(T),h&&h.d(T)}}}function Ts(r){var s,n,i,o;let e,t,l=(((s=r[29])==null?void 0:s.role)==="user"?((o=(i=(n=r[29])==null?void 0:n.permissions)==null?void 0:i.chat)==null?void 0:o.edit)??!0:!0)&&Bs(r);return{c(){l&&l.c(),e=de()},l(a){l&&l.l(a),e=de()},m(a,f){l&&l.m(a,f),D(a,e,f),t=!0},p(a,f){var u,c,g,h;((u=a[29])==null?void 0:u.role)!=="user"||(((h=(g=(c=a[29])==null?void 0:c.permissions)==null?void 0:g.chat)==null?void 0:h.edit)??!0)?l?(l.p(a,f),f[0]&536870912&&b(l,1)):(l=Bs(a),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),V(l,1,1,()=>{l=null}),se())},i(a){t||(b(l),t=!0)},o(a){V(l),t=!1},d(a){a&&m(e),l&&l.d(a)}}}function Bs(r){let e,t;return e=new Se({props:{content:r[28].t("Edit"),placement:"bottom",$$slots:{default:[_o]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Edit")),s[0]&268437504|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function _o(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=r[28].t("Edit")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[66]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Edit"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function po(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"aria-hidden","true"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",s=r[28].t("Copy")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button")},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[67]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Copy"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function Ss(r){let e,t;return e=new Se({props:{content:r[28].t("Read Aloud"),placement:"bottom",$$slots:{default:[wo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Read Aloud")),s[0]&274737152|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function bo(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"aria-hidden":!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){D(l,e,s),_(e,t)},d(l){l&&m(e)}}}function vo(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"aria-hidden":!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){D(l,e,s),_(e,t)},d(l){l&&m(e)}}}function ko(r){let e,t,l,s,n,i;return{c(){e=ke("svg"),t=ke("style"),l=W(`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),s=ke("circle"),n=ke("circle"),i=ke("circle"),this.h()},l(o){e=we(o,"svg",{class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,xmlns:!0});var a=k(e);t=we(a,"style",{});var f=k(t);l=q(f,`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),f.forEach(m),s=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(s).forEach(m),n=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(n).forEach(m),i=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(i).forEach(m),a.forEach(m),this.h()},h(){d(s,"class","spinner_S1WN"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","3"),d(n,"class","spinner_S1WN spinner_Km9P"),d(n,"cx","12"),d(n,"cy","12"),d(n,"r","3"),d(i,"class","spinner_S1WN spinner_JApP"),d(i,"cx","20"),d(i,"cy","12"),d(i,"r","3"),d(e,"class","w-4 h-4"),d(e,"fill","currentColor"),d(e,"viewBox","0 0 24 24"),d(e,"aria-hidden","true"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(o,a){D(o,e,a),_(e,t),_(t,l),_(e,s),_(e,n),_(e,i)},d(o){o&&m(e)}}}function wo(r){let e,t,l,s,n,i;function o(u,c){return u[22]?ko:u[21]?vo:bo}let a=o(r),f=a(r);return{c(){e=y("button"),f.c(),this.h()},l(u){e=I(u,"BUTTON",{"aria-label":!0,id:!0,class:!0});var c=k(e);f.l(c),c.forEach(m),this.h()},h(){d(e,"aria-label",t=r[28].t("Read Aloud")),d(e,"id",l="speak-button-"+r[13].id),d(e,"class",s=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(u,c){D(u,e,c),f.m(e,null),n||(i=me(e,"click",r[68]),n=!0)},p(u,c){a!==(a=o(u))&&(f.d(1),f=a(u),f&&(f.c(),f.m(e,null))),c[0]&268435456&&t!==(t=u[28].t("Read Aloud"))&&d(e,"aria-label",t),c[0]&8192&&l!==(l="speak-button-"+u[13].id)&&d(e,"id",l),c[0]&2048&&s!==(s=(u[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",s)},d(u){u&&m(e),f.d(),n=!1,i()}}}function Rs(r){let e,t;return e=new Se({props:{content:r[28].t("Generate Image"),placement:"bottom",$$slots:{default:[Eo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Generate Image")),s[0]&276834304|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function yo(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,"aria-hidden":!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"aria-hidden","true"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","2.3"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4")},m(l,s){D(l,e,s),_(e,t)},d(l){l&&m(e)}}}function Io(r){let e,t,l,s,n,i;return{c(){e=ke("svg"),t=ke("style"),l=W(`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),s=ke("circle"),n=ke("circle"),i=ke("circle"),this.h()},l(o){e=we(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=k(e);t=we(a,"style",{});var f=k(t);l=q(f,`.spinner_S1WN {
															animation: spinner_MGfb 0.8s linear infinite;
															animation-delay: -0.8s;
														}

														.spinner_Km9P {
															animation-delay: -0.65s;
														}

														.spinner_JApP {
															animation-delay: -0.5s;
														}

														@keyframes spinner_MGfb {
															93.75%,
															100% {
																opacity: 0.2;
															}
														}
													`),f.forEach(m),s=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(s).forEach(m),n=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(n).forEach(m),i=we(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),k(i).forEach(m),a.forEach(m),this.h()},h(){d(s,"class","spinner_S1WN"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","3"),d(n,"class","spinner_S1WN spinner_Km9P"),d(n,"cx","12"),d(n,"cy","12"),d(n,"r","3"),d(i,"class","spinner_S1WN spinner_JApP"),d(i,"cx","20"),d(i,"cy","12"),d(i,"r","3"),d(e,"aria-hidden","true"),d(e,"class","w-4 h-4"),d(e,"fill","currentColor"),d(e,"viewBox","0 0 24 24"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(o,a){D(o,e,a),_(e,t),_(t,l),_(e,s),_(e,n),_(e,i)},d(o){o&&m(e)}}}function Eo(r){let e,t,l,s,n;function i(f,u){return f[23]?Io:yo}let o=i(r),a=o(r);return{c(){e=y("button"),a.c(),this.h()},l(f){e=I(f,"BUTTON",{"aria-label":!0,class:!0});var u=k(e);a.l(u),u.forEach(m),this.h()},h(){d(e,"aria-label",t=r[28].t("Generate Image")),d(e,"class",l=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(f,u){D(f,e,u),a.m(e,null),s||(n=me(e,"click",r[69]),s=!0)},p(f,u){o!==(o=i(f))&&(a.d(1),a=o(f),a&&(a.c(),a.m(e,null))),u[0]&268435456&&t!==(t=f[28].t("Generate Image"))&&d(e,"aria-label",t),u[0]&2048&&l!==(l=(f[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")&&d(e,"class",l)},d(f){f&&m(e),a.d(),s=!1,n()}}}function Os(r){let e,t;return e=new Se({props:{content:r[13].usage?`<pre>${bt(JSON.stringify(r[13].usage,null,2).replace(/"([^(")"]+)":/g,"$1:").slice(1,-1).split(`
`).map(Js).map(Ks).join(`
`))}</pre>`:"",placement:"bottom",$$slots:{default:[Mo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&8192&&(n.content=l[13].usage?`<pre>${bt(JSON.stringify(l[13].usage,null,2).replace(/"([^(")"]+)":/g,"$1:").slice(1,-1).split(`
`).map(Js).map(Ks).join(`
`))}</pre>`:""),s[0]&10240|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Mo(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{"aria-hidden":!0,class:!0,id:!0});var f=k(e);t=we(f,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"),d(t,"aria-hidden","true"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-hidden","true"),d(e,"class",s=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap"),d(e,"id",n="info-"+r[13].id)},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[70]),i=!0)},p(a,f){f[0]&2048&&s!==(s=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap")&&d(e,"class",s),f[0]&8192&&n!==(n="info-"+a[13].id)&&d(e,"id",n)},d(a){a&&m(e),i=!1,o()}}}function Ls(r){var g;let e,t,l,s,n,i,o,a=!r[30]&&(((g=r[27])==null?void 0:g.features.enable_message_rating)??!0)&&Ps(r),f=r[11]&&As(r);l=new Se({props:{content:r[28].t("Regenerate"),placement:"bottom",$$slots:{default:[Co]},$$scope:{ctx:r}}});let u=r[1].length>1&&js(r),c=r[11]&&Hs(r);return{c(){a&&a.c(),e=j(),f&&f.c(),t=j(),X(l.$$.fragment),s=j(),u&&u.c(),n=j(),c&&c.c(),i=de()},l(h){a&&a.l(h),e=H(h),f&&f.l(h),t=H(h),$(l.$$.fragment,h),s=H(h),u&&u.l(h),n=H(h),c&&c.l(h),i=de()},m(h,p){a&&a.m(h,p),D(h,e,p),f&&f.m(h,p),D(h,t,p),x(l,h,p),D(h,s,p),u&&u.m(h,p),D(h,n,p),c&&c.m(h,p),D(h,i,p),o=!0},p(h,p){var w;!h[30]&&(((w=h[27])==null?void 0:w.features.enable_message_rating)??!0)?a?(a.p(h,p),p[0]&1207959552&&b(a,1)):(a=Ps(h),a.c(),b(a,1),a.m(e.parentNode,e)):a&&(le(),V(a,1,1,()=>{a=null}),se()),h[11]?f?(f.p(h,p),p[0]&2048&&b(f,1)):(f=As(h),f.c(),b(f,1),f.m(t.parentNode,t)):f&&(le(),V(f,1,1,()=>{f=null}),se());const v={};p[0]&268435456&&(v.content=h[28].t("Regenerate")),p[0]&285354496|p[3]&8&&(v.$$scope={dirty:p,ctx:h}),l.$set(v),h[1].length>1?u?(u.p(h,p),p[0]&2&&b(u,1)):(u=js(h),u.c(),b(u,1),u.m(n.parentNode,n)):u&&(le(),V(u,1,1,()=>{u=null}),se()),h[11]?c?(c.p(h,p),p[0]&2048&&b(c,1)):(c=Hs(h),c.c(),b(c,1),c.m(i.parentNode,i)):c&&(le(),V(c,1,1,()=>{c=null}),se())},i(h){o||(b(a),b(f),b(l.$$.fragment,h),b(u),b(c),o=!0)},o(h){V(a),V(f),V(l.$$.fragment,h),V(u),V(c),o=!1},d(h){h&&(m(e),m(t),m(s),m(n),m(i)),a&&a.d(h),f&&f.d(h),ee(l,h),u&&u.d(h),c&&c.d(h)}}}function Ps(r){let e,t,l,s;return e=new Se({props:{content:r[28].t("Good Response"),placement:"bottom",$$slots:{default:[No]},$$scope:{ctx:r}}}),l=new Se({props:{content:r[28].t("Bad Response"),placement:"bottom",$$slots:{default:[Do]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment),t=j(),X(l.$$.fragment)},l(n){$(e.$$.fragment,n),t=H(n),$(l.$$.fragment,n)},m(n,i){x(e,n,i),D(n,t,i),x(l,n,i),s=!0},p(n,i){const o={};i[0]&268435456&&(o.content=n[28].t("Good Response")),i[0]&302000128|i[3]&8&&(o.$$scope={dirty:i,ctx:n}),e.$set(o);const a={};i[0]&268435456&&(a.content=n[28].t("Bad Response")),i[0]&302000128|i[3]&8&&(a.$$scope={dirty:i,ctx:n}),l.$set(a)},i(n){s||(b(e.$$.fragment,n),b(l.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),V(l.$$.fragment,n),s=!1},d(n){n&&m(t),ee(e,n),ee(l,n)}}}function No(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{"aria-hidden":!0,stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0,xmlns:!0});var u=k(t);l=we(u,"path",{d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var a,f;d(l,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"fill","none"),d(t,"stroke-width","2.3"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class","w-4 h-4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(e,"aria-label",s=r[28].t("Good Response")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((f=(a=r[13])==null?void 0:a.annotation)==null?void 0:f.rating)??"").toString()==="1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent"),e.disabled=r[25]},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[71]),i=!0)},p(a,f){var u,c;f[0]&268435456&&s!==(s=a[28].t("Good Response"))&&d(e,"aria-label",s),f[0]&10240&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((c=(u=a[13])==null?void 0:u.annotation)==null?void 0:c.rating)??"").toString()==="1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent")&&d(e,"class",n),f[0]&33554432&&(e.disabled=a[25])},d(a){a&&m(e),i=!1,o()}}}function Do(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{"aria-hidden":!0,stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0,xmlns:!0});var u=k(t);l=we(u,"path",{d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){var a,f;d(l,"d","M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"fill","none"),d(t,"stroke-width","2.3"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class","w-4 h-4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(e,"aria-label",s=r[28].t("Bad Response")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((f=(a=r[13])==null?void 0:a.annotation)==null?void 0:f.rating)??"").toString()==="-1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent"),e.disabled=r[25]},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[72]),i=!0)},p(a,f){var u,c;f[0]&268435456&&s!==(s=a[28].t("Bad Response"))&&d(e,"aria-label",s),f[0]&10240&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg "+((((c=(u=a[13])==null?void 0:u.annotation)==null?void 0:c.rating)??"").toString()==="-1"?"bg-gray-100 dark:bg-gray-800":"")+" dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent")&&d(e,"class",n),f[0]&33554432&&(e.disabled=a[25])},d(a){a&&m(e),i=!1,o()}}}function As(r){let e,t;return e=new Se({props:{content:r[28].t("Continue Response"),placement:"bottom",$$slots:{default:[Vo]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Continue Response")),s[0]&268437760|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Vo(r){let e,t,l,s,n,i,o,a;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),s=ke("path"),this.h()},l(f){e=I(f,"BUTTON",{"aria-label":!0,type:!0,id:!0,class:!0});var u=k(e);t=we(u,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=k(t);l=we(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),s=we(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(s).forEach(m),c.forEach(m),u.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),d(s,"stroke-linecap","round"),d(s,"stroke-linejoin","round"),d(s,"d","M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"),d(t,"aria-hidden","true"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"aria-label",n=r[28].t("Continue Response")),d(e,"type","button"),d(e,"id","continue-response-button"),d(e,"class",i=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(f,u){D(f,e,u),_(e,t),_(t,l),_(t,s),o||(a=me(e,"click",r[73]),o=!0)},p(f,u){u[0]&268435456&&n!==(n=f[28].t("Continue Response"))&&d(e,"aria-label",n),u[0]&2048&&i!==(i=(f[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",i)},d(f){f&&m(e),o=!1,a()}}}function Co(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{type:!0,"aria-label":!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,"aria-hidden":!0,stroke:!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2.3"),d(t,"aria-hidden","true"),d(t,"stroke","currentColor"),d(t,"class","w-4 h-4"),d(e,"type","button"),d(e,"aria-label",s=r[28].t("Regenerate")),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[74]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Regenerate"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function js(r){let e,t;return e=new Se({props:{content:r[28].t("Delete"),placement:"bottom",$$slots:{default:[To]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&268435456&&(n.content=l[28].t("Delete")),s[0]&268503040|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function To(r){let e,t,l,s,n,i,o;return{c(){e=y("button"),t=ke("svg"),l=ke("path"),this.h()},l(a){e=I(a,"BUTTON",{type:!0,"aria-label":!0,id:!0,class:!0});var f=k(e);t=we(f,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,"aria-hidden":!0,class:!0});var u=k(t);l=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(l).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","2"),d(t,"stroke","currentColor"),d(t,"aria-hidden","true"),d(t,"class","w-4 h-4"),d(e,"type","button"),d(e,"aria-label",s=r[28].t("Delete")),d(e,"id","delete-response-button"),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(a,f){D(a,e,f),_(e,t),_(t,l),i||(o=me(e,"click",r[75]),i=!0)},p(a,f){f[0]&268435456&&s!==(s=a[28].t("Delete"))&&d(e,"aria-label",s),f[0]&2048&&n!==(n=(a[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")&&d(e,"class",n)},d(a){a&&m(e),i=!1,o()}}}function Hs(r){var i;let e,t,l=Ne(((i=r[17])==null?void 0:i.actions)??[]),s=[];for(let o=0;o<l.length;o+=1)s[o]=zs(_s(r,l,o));const n=o=>V(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=de()},l(o){for(let a=0;a<s.length;a+=1)s[a].l(o);e=de()},m(o,a){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(o,a);D(o,e,a),t=!0},p(o,a){var f;if(a[0]&141376){l=Ne(((f=o[17])==null?void 0:f.actions)??[]);let u;for(u=0;u<l.length;u+=1){const c=_s(o,l,u);s[u]?(s[u].p(c,a),b(s[u],1)):(s[u]=zs(c),s[u].c(),b(s[u],1),s[u].m(e.parentNode,e))}for(le(),u=l.length;u<s.length;u+=1)n(u);se()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)b(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)V(s[a]);t=!1},d(o){o&&m(e),Ge(s,o)}}}function Bo(r){let e,t;return e=new Zn({props:{strokeWidth:"2.1",className:"size-4"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function So(r){let e,t,l,s,n;return{c(){e=y("div"),t=y("img"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);t=I(o,"IMG",{src:!0,class:!0,style:!0,alt:!0}),o.forEach(m),this.h()},h(){Pt(t.src,l=r[89].icon)||d(t,"src",l),d(t,"class",s="w-4 h-4 "+(r[89].icon.includes("svg")?"dark:invert-[80%]":"")),Lt(t,"fill","currentColor"),d(t,"alt",n=r[89].name),d(e,"class","size-4")},m(i,o){D(i,e,o),_(e,t)},p(i,o){o[0]&131072&&!Pt(t.src,l=i[89].icon)&&d(t,"src",l),o[0]&131072&&s!==(s="w-4 h-4 "+(i[89].icon.includes("svg")?"dark:invert-[80%]":""))&&d(t,"class",s),o[0]&131072&&n!==(n=i[89].name)&&d(t,"alt",n)},i:Ee,o:Ee,d(i){i&&m(e)}}}function Ro(r){let e,t,l,s,n,i,o,a,f;const u=[So,Bo],c=[];function g(p,v){var w;return(w=p[89])!=null&&w.icon?0:1}t=g(r),l=c[t]=u[t](r);function h(){return r[76](r[89])}return{c(){e=y("button"),l.c(),i=j(),this.h()},l(p){e=I(p,"BUTTON",{type:!0,"aria-label":!0,class:!0});var v=k(e);l.l(v),v.forEach(m),i=H(p),this.h()},h(){d(e,"type","button"),d(e,"aria-label",s=r[89].name),d(e,"class",n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(p,v){D(p,e,v),c[t].m(e,null),D(p,i,v),o=!0,a||(f=me(e,"click",h),a=!0)},p(p,v){r=p;let w=t;t=g(r),t===w?c[t].p(r,v):(le(),V(c[w],1,1,()=>{c[w]=null}),se(),l=c[t],l?l.p(r,v):(l=c[t]=u[t](r),l.c()),b(l,1),l.m(e,null)),(!o||v[0]&131072&&s!==(s=r[89].name))&&d(e,"aria-label",s),(!o||v[0]&2048&&n!==(n=(r[11]?"visible":"invisible group-hover:visible")+" p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition"))&&d(e,"class",n)},i(p){o||(b(l),o=!0)},o(p){V(l),o=!1},d(p){p&&(m(e),m(i)),c[t].d(),a=!1,f()}}}function zs(r){let e,t;return e=new Se({props:{content:r[89].name,placement:"bottom",$$slots:{default:[Ro]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&131072&&(n.content=l[89].name),s[0]&141376|s[3]&8&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Us(r){let e,t,l,s;function n(a){r[78](a)}function i(a){r[79](a)}let o={};return r[13]!==void 0&&(o.message=r[13]),r[24]!==void 0&&(o.show=r[24]),e=new Ii({props:o}),ze.push(()=>Ye(e,"message",n)),ze.push(()=>Ye(e,"show",i)),e.$on("save",r[80]),{c(){X(e.$$.fragment)},l(a){$(e.$$.fragment,a)},m(a,f){x(e,a,f),s=!0},p(a,f){const u={};!t&&f[0]&8192&&(t=!0,u.message=a[13],Qe(()=>t=!1)),!l&&f[0]&16777216&&(l=!0,u.show=a[24],Qe(()=>l=!1)),e.$set(u)},i(a){s||(b(e.$$.fragment,a),s=!0)},o(a){V(e.$$.fragment,a),s=!1},d(a){ee(e,a)}}}function Ws(r){var n;let e,t,l,s;return t=new Fa({props:{followUps:(n=r[13])==null?void 0:n.followUps,onClick:r[81]}}),{c(){e=y("div"),X(t.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);$(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","mt-2.5")},m(i,o){D(i,e,o),x(t,e,null),s=!0},p(i,o){var f;const a={};o[0]&8192&&(a.followUps=(f=i[13])==null?void 0:f.followUps),o[0]&8320&&(a.onClick=i[81]),t.$set(a)},i(i){s||(b(t.$$.fragment,i),i&&(l||Et(()=>{l=Mt(e,Nt,{duration:100}),l.start()})),s=!0)},o(i){V(t.$$.fragment,i),s=!1},d(i){i&&m(e),ee(t)}}}function qs(r){var s;let e,t=(((s=r[13])==null?void 0:s.content)??"")+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(n){e=I(n,"DIV",{"aria-live":!0,class:!0});var i=k(e);l=q(i,t),i.forEach(m),this.h()},h(){d(e,"aria-live","polite"),d(e,"class","sr-only")},m(n,i){D(n,e,i),_(e,l)},p(n,i){var o;i[0]&8192&&t!==(t=(((o=n[13])==null?void 0:o.content)??"")+"")&&J(l,t)},d(n){n&&m(e)}}}function Fs(r){var re,Q,ie,ge,he,ye,Z,oe,pe;let e,t,l,s,n,i,o,a,f,u,c,g=((re=r[13])==null?void 0:re.files)&&((Q=r[13].files)==null?void 0:Q.filter(Gs).length)>0,h,p,v,w,E,N,P,O,R,M;l=new Wr({props:{src:((he=(ge=(ie=r[17])==null?void 0:ie.info)==null?void 0:ge.meta)==null?void 0:he.profile_image_url)??(r[28].language==="dg-DG"?"/doge.png":`${At}/static/favicon.png`),className:"size-8 assistant-message-profile-image"}}),i=new Zt({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}});let T=(((ye=r[13])==null?void 0:ye.statusHistory)??[...(Z=r[13])!=null&&Z.status?[(oe=r[13])==null?void 0:oe.status]:[]]).length>0&&vs(Wt(r)),S=g&&ws(r);const B=[uo,fo],C=[];function A(ae,ce){return ae[14]===!0?0:1}p=A(r),v=C[p]=B[p](r);let F=!r[14]&&Ns(r),z=((pe=r[13])==null?void 0:pe.done)&&qs(r);return{c(){e=y("div"),t=y("div"),X(l.$$.fragment),s=j(),n=y("div"),X(i.$$.fragment),o=j(),a=y("div"),f=y("div"),u=y("div"),T&&T.c(),c=j(),S&&S.c(),h=j(),v.c(),E=j(),F&&F.c(),N=j(),z&&z.c(),this.h()},l(ae){e=I(ae,"DIV",{class:!0,id:!0,dir:!0});var ce=k(e);t=I(ce,"DIV",{class:!0});var G=k(t);$(l.$$.fragment,G),G.forEach(m),s=H(ce),n=I(ce,"DIV",{class:!0});var _e=k(n);$(i.$$.fragment,_e),o=H(_e),a=I(_e,"DIV",{});var fe=k(a);f=I(fe,"DIV",{class:!0});var be=k(f);u=I(be,"DIV",{});var L=k(u);T&&T.l(L),c=H(L),S&&S.l(L),h=H(L),v.l(L),L.forEach(m),be.forEach(m),E=H(fe),F&&F.l(fe),fe.forEach(m),N=H(_e),z&&z.l(_e),_e.forEach(m),ce.forEach(m),this.h()},h(){d(t,"class",Nn("shrink-0 ltr:mr-3 rtl:ml-3 hidden @lg:flex ")+" svelte-1u5gq5j"),d(f,"class",w="chat-"+r[13].role+" w-full min-w-full markdown-prose svelte-1u5gq5j"),d(n,"class","flex-auto w-0 pl-1 relative -translate-y-0.5"),d(e,"class",P="flex w-full message-"+r[13].id+" svelte-1u5gq5j"),d(e,"id",O="message-"+r[13].id),d(e,"dir",R=r[26].chatDirection)},m(ae,ce){D(ae,e,ce),_(e,t),x(l,t,null),_(e,s),_(e,n),x(i,n,null),_(n,o),_(n,a),_(a,f),_(f,u),T&&T.m(u,null),_(u,c),S&&S.m(u,null),_(u,h),C[p].m(u,null),_(a,E),F&&F.m(a,null),_(n,N),z&&z.m(n,null),M=!0},p(ae,ce){var be,L,K,te,Y,ue,ve,Ve,De;const G={};ce[0]&268566528&&(G.src=((K=(L=(be=ae[17])==null?void 0:be.info)==null?void 0:L.meta)==null?void 0:K.profile_image_url)??(ae[28].language==="dg-DG"?"/doge.png":`${At}/static/favicon.png`)),l.$set(G);const _e={};ce[0]&139264|ce[3]&8&&(_e.$$scope={dirty:ce,ctx:ae}),i.$set(_e),(((te=ae[13])==null?void 0:te.statusHistory)??[...(Y=ae[13])!=null&&Y.status?[(ue=ae[13])==null?void 0:ue.status]:[]]).length>0?T?(T.p(Wt(ae),ce),ce[0]&8192&&b(T,1)):(T=vs(Wt(ae)),T.c(),b(T,1),T.m(u,c)):T&&(le(),V(T,1,1,()=>{T=null}),se()),ce[0]&8192&&(g=((ve=ae[13])==null?void 0:ve.files)&&((Ve=ae[13].files)==null?void 0:Ve.filter(Gs).length)>0),g?S?(S.p(ae,ce),ce[0]&8192&&b(S,1)):(S=ws(ae),S.c(),b(S,1),S.m(u,h)):S&&(le(),V(S,1,1,()=>{S=null}),se());let fe=p;p=A(ae),p===fe?C[p].p(ae,ce):(le(),V(C[fe],1,1,()=>{C[fe]=null}),se(),v=C[p],v?v.p(ae,ce):(v=C[p]=B[p](ae),v.c()),b(v,1),v.m(u,null)),(!M||ce[0]&8192&&w!==(w="chat-"+ae[13].role+" w-full min-w-full markdown-prose svelte-1u5gq5j"))&&d(f,"class",w),ae[14]?F&&(le(),V(F,1,1,()=>{F=null}),se()):F?(F.p(ae,ce),ce[0]&16384&&b(F,1)):(F=Ns(ae),F.c(),b(F,1),F.m(a,null)),(De=ae[13])!=null&&De.done?z?z.p(ae,ce):(z=qs(ae),z.c(),z.m(n,null)):z&&(z.d(1),z=null),(!M||ce[0]&8192&&P!==(P="flex w-full message-"+ae[13].id+" svelte-1u5gq5j"))&&d(e,"class",P),(!M||ce[0]&8192&&O!==(O="message-"+ae[13].id))&&d(e,"id",O),(!M||ce[0]&67108864&&R!==(R=ae[26].chatDirection))&&d(e,"dir",R)},i(ae){M||(b(l.$$.fragment,ae),b(i.$$.fragment,ae),b(T),b(S),b(v),b(F),M=!0)},o(ae){V(l.$$.fragment,ae),V(i.$$.fragment,ae),V(T),V(S),V(v),V(F),M=!1},d(ae){ae&&m(e),ee(l),ee(i),T&&T.d(),S&&S.d(),C[p].d(),F&&F.d(),z&&z.d()}}}function Oo(r){let e,t,l,s=r[13].id,n,i;function o(u){r[49](u)}let a={title:r[28].t("Delete message?")};r[16]!==void 0&&(a.show=r[16]),e=new Jr({props:a}),ze.push(()=>Ye(e,"show",o)),e.$on("confirm",r[50]);let f=Fs(r);return{c(){X(e.$$.fragment),l=j(),f.c(),n=de()},l(u){$(e.$$.fragment,u),l=H(u),f.l(u),n=de()},m(u,c){x(e,u,c),D(u,l,c),f.m(u,c),D(u,n,c),i=!0},p(u,c){const g={};c[0]&268435456&&(g.title=u[28].t("Delete message?")),!t&&c[0]&65536&&(t=!0,g.show=u[16],Qe(()=>t=!1)),e.$set(g),c[0]&8192&&Be(s,s=u[13].id)?(le(),V(f,1,1,Ee),se(),f=Fs(u),f.c(),b(f,1),f.m(n.parentNode,n)):f.p(u,c)},i(u){i||(b(e.$$.fragment,u),b(f),i=!0)},o(u){V(e.$$.fragment,u),V(f),i=!1},d(u){u&&(m(l),m(n)),ee(e,u),f.d(u)}}}const Gs=r=>r.type==="image",Lo=r=>{r.target.style.height="",r.target.style.height=`${r.target.scrollHeight}px`},Po=r=>{r.target.select()},Js=r=>r.slice(2),Ks=r=>r.endsWith(",")?r.slice(0,-1):r;function Ao(r,e,t){let l,s,n,i,o,a,f;Me(r,zt,U=>t(48,l=U)),Me(r,gt,U=>t(26,s=U)),Me(r,Hr,U=>t(27,n=U)),Me(r,pl,U=>t(85,i=U)),Me(r,Ut,U=>t(29,a=U)),Me(r,Kt,U=>t(30,f=U));const u=Je("i18n");Me(r,u,U=>t(28,o=U));const c=kt();let{chatId:g=""}=e,{history:h}=e,{messageId:p}=e,v=JSON.parse(JSON.stringify(h.messages[p])),{siblings:w}=e,{gotoMessage:E=()=>{}}=e,{showPreviousMessage:N}=e,{showNextMessage:P}=e,{updateChat:O}=e,{editMessage:R}=e,{saveMessage:M}=e,{rateMessage:T}=e,{actionMessage:S}=e,{deleteMessage:B}=e,{submitMessage:C}=e,{continueResponse:A}=e,{regenerateResponse:F}=e,{addMessages:z}=e,{isLastMessage:re=!0}=e,{readOnly:Q=!1}=e,ie,ge=!1,he=null,ye=!1,Z="",oe,pe=!1,ae={},ce=!1,G,_e=!1,fe=!1,be=!1;const L=async U=>{var Ie,Re;U=kl(U),(((Ie=n==null?void 0:n.ui)==null?void 0:Ie.response_watermark)??"").trim()!==""&&(U=`${U}

${(Re=n==null?void 0:n.ui)==null?void 0:Re.response_watermark}`),await zr(U,(s==null?void 0:s.copyFormatted)??!1)&&Ae.success(o.t("Copying to clipboard was successful!"))},K=U=>new Promise(Te=>{G=U;const Ie=ae[U];if(!Ie)return Te();Ie.play(),Ie.onended=async()=>{await new Promise(Re=>setTimeout(Re,300)),Object.keys(ae).length-1===U&&t(21,ce=!1),Te()}}),te=async()=>{var Te,Ie,Re,lt,st,Rt,ct,yt,Oe,Ze,at,It,Ot,el,tl,ll,sl,rl,nl,il,al,ol,fl;if(ce){try{speechSynthesis.cancel(),G!==void 0&&ae[G]&&(ae[G].pause(),ae[G].currentTime=0)}catch{}t(21,ce=!1),G=void 0;return}if(!((v==null?void 0:v.content)??"").trim().length){Ae.info(o.t("No content to speak"));return}t(21,ce=!0);const U=kl(v.content);if(n.audio.tts.engine===""){let $e=[];const _t=setInterval(()=>{var xe,dt,rt;if($e=speechSynthesis.getVoices(),$e.length>0){clearInterval(_t);const qe=((xe=$e==null?void 0:$e.filter(mt=>{var ul,cl,dl,hl;return mt.voiceURI===(((cl=(ul=s==null?void 0:s.audio)==null?void 0:ul.tts)==null?void 0:cl.voice)??((hl=(dl=n==null?void 0:n.audio)==null?void 0:dl.tts)==null?void 0:hl.voice))}))==null?void 0:xe.at(0))??void 0,ht=new SpeechSynthesisUtterance(U);ht.rate=((rt=(dt=s.audio)==null?void 0:dt.tts)==null?void 0:rt.playbackRate)??1,ht.onend=()=>{var mt;t(21,ce=!1),s.conversationMode&&((mt=document.getElementById("voice-input-button"))==null||mt.click())},qe&&(ht.voice=qe),speechSynthesis.speak(ht)}},100)}else{t(22,_e=!0);const $e=jn(U,((Ie=(Te=n==null?void 0:n.audio)==null?void 0:Te.tts)==null?void 0:Ie.split_on)??"punctuation");if(!$e.length){Ae.info(o.t("No content to speak")),t(21,ce=!1),t(22,_e=!1);return}ae=$e.reduce((xe,dt,rt)=>(xe[rt]=null,xe),{});let _t=Promise.resolve();if(((lt=(Re=s.audio)==null?void 0:Re.tts)==null?void 0:lt.engine)==="browser-kokoro"){i||(await pl.set(new si({dtype:((ct=(Rt=(st=s.audio)==null?void 0:st.tts)==null?void 0:Rt.engineConfig)==null?void 0:ct.dtype)??"fp32"})),await i.init());for(const[xe,dt]of $e.entries()){const rt=await i.generate({text:dt,voice:((Oe=(yt=s==null?void 0:s.audio)==null?void 0:yt.tts)==null?void 0:Oe.voice)??((at=(Ze=n==null?void 0:n.audio)==null?void 0:Ze.tts)==null?void 0:at.voice)}).catch(qe=>{console.error(qe),Ae.error(`${qe}`),t(21,ce=!1),t(22,_e=!1)});if(rt){const qe=new Audio(rt);qe.playbackRate=((Ot=(It=s.audio)==null?void 0:It.tts)==null?void 0:Ot.playbackRate)??1,ae[xe]=qe,t(22,_e=!1),_t=_t.then(()=>K(xe))}}}else for(const[xe,dt]of $e.entries()){const rt=await Un(localStorage.token,((tl=(el=s==null?void 0:s.audio)==null?void 0:el.tts)==null?void 0:tl.defaultVoice)===n.audio.tts.voice?((sl=(ll=s==null?void 0:s.audio)==null?void 0:ll.tts)==null?void 0:sl.voice)??((nl=(rl=n==null?void 0:n.audio)==null?void 0:rl.tts)==null?void 0:nl.voice):(al=(il=n==null?void 0:n.audio)==null?void 0:il.tts)==null?void 0:al.voice,dt).catch(qe=>{console.error(qe),Ae.error(`${qe}`),t(21,ce=!1),t(22,_e=!1)});if(rt){const qe=await rt.blob(),ht=URL.createObjectURL(qe),mt=new Audio(ht);mt.playbackRate=((fl=(ol=s.audio)==null?void 0:ol.tts)==null?void 0:fl.playbackRate)??1,ae[xe]=mt,t(22,_e=!1),_t=_t.then(()=>K(xe))}}}};let Y=[];function ue(U){const Te=[];let Ie=0;return U=U.replace(/<details[\s\S]*?<\/details>/gi,Re=>(Te.push(Re),`<details id="__DETAIL_${Ie++}__"/>`)),Y=Te,U}function ve(U){return U.replace(/<details id="__DETAIL_(\d+)__"\/>/g,(Ie,Re)=>Y[parseInt(Re)]||"")}const Ve=async()=>{t(14,ye=!0),t(18,Z=ue(v.content)),await Ce(),t(19,oe.style.height="",oe),t(19,oe.style.height=`${oe.scrollHeight}px`,oe)},De=async()=>{const U=ve(Z||"");R(v.id,{content:U},!1),t(14,ye=!1),t(18,Z=""),await Ce()},je=async()=>{const U=ve(Z||"");R(v.id,{content:U}),t(14,ye=!1),t(18,Z=""),await Ce()},He=async()=>{t(14,ye=!1),t(18,Z=""),await Ce()},Ue=async U=>{t(23,fe=!0);const Te=await Wn(localStorage.token,U.content).catch(Ie=>{Ae.error(`${Ie}`)});if(Te){const Ie=Te.map(Re=>({type:"image",url:`${Re.url}`}));M(U.id,{...U,files:Ie})}t(23,fe=!1)};let ne=!1;const We=async(U=null,Te=null)=>{var yt;t(25,ne=!0);const Ie={...v,annotation:{...(v==null?void 0:v.annotation)??{},...U!==null?{rating:U}:{},...Te||{}}},Re=await Ln(localStorage.token,g).catch(Oe=>{Ae.error(`${Oe}`)});if(!Re)return;const lt=Gt(h,v.id);let st={type:"rating",data:{...Ie!=null&&Ie.annotation?Ie.annotation:{},model_id:(v==null?void 0:v.selectedModelId)??v.model,...h.messages[v.parentId].childrenIds.length>1?{sibling_model_ids:h.messages[v.parentId].childrenIds.filter(Oe=>Oe!==v.id).map(Oe=>{var Ze;return((Ze=h.messages[Oe])==null?void 0:Ze.selectedModelId)??h.messages[Oe].model})}:{}},meta:{arena:v?v.arena:!1,model_id:v.model,message_id:v.id,message_index:lt.length,chat_id:g},snapshot:{chat:Re}};const Rt=[st.data.model_id,...st.data.sibling_model_ids??[]].reduce((Oe,Ze)=>{var It;const at=l.find(Ot=>Ot.id===Ze);return at?Oe[at.id]=((It=at==null?void 0:at.info)==null?void 0:It.base_model_id)??null:console.warn(`Model with ID ${Ze} not found`),Oe},{});st.meta.base_models=Rt;let ct=null;if(v!=null&&v.feedbackId?ct=await yl(localStorage.token,v.feedbackId,st).catch(Oe=>{Ae.error(`${Oe}`)}):(ct=await Hn(localStorage.token,st).catch(Oe=>{Ae.error(`${Oe}`)}),ct&&(Ie.feedbackId=ct.id)),M(v.id,Ie),await Ce(),!Te&&(t(24,be=!0),!((yt=Ie.annotation)!=null&&yt.tags))){const Oe=await zn(localStorage.token,v.model,lt,g).catch(Ze=>(console.error(Ze),[]));Oe&&(Ie.annotation.tags=Oe,st.data.tags=Oe,M(v.id,Ie),await yl(localStorage.token,Ie.feedbackId,st).catch(Ze=>{Ae.error(`${Ze}`)}))}t(25,ne=!1)},et=async()=>{B(v.id)};wt(async()=>{await Ce(),ie&&ie.addEventListener("wheel",function(U){ie.scrollWidth<=ie.clientWidth||(U.preventDefault(),U.deltaY!==0&&t(15,ie.scrollLeft+=U.deltaY,ie))})});function tt(U){ge=U,t(16,ge)}const Ke=()=>{et()};function ft(U){ze[U?"unshift":"push"](()=>{oe=U,t(19,oe)})}function ut(){Z=this.value,t(18,Z)}const it=U=>{var Re,lt;U.key==="Escape"&&((Re=document.getElementById("close-edit-message-button"))==null||Re.click());const Te=U.metaKey||U.ctrlKey,Ie=U.key==="Enter";Te&&Ie&&((lt=document.getElementById("confirm-edit-message-button"))==null||lt.click())},Vt=()=>{je()},Ct=()=>{He()},Tt=()=>{De()},Bt=async U=>{},St=async(U,Te)=>{let Ie=document.getElementById(`source-${v.id}-${Te}`);const Re=document.getElementById(`collapsible-${v.id}`);Ie?Ie.click():Re&&(Re.querySelector("div:first-child").dispatchEvent(new PointerEvent("pointerup",{})),await new Promise(lt=>{requestAnimationFrame(()=>{requestAnimationFrame(lt)})}),Ie=document.getElementById(`source-${v.id}-${Te}`),Ie&&Ie.click())},Qr=({modelId:U,parentId:Te,messages:Ie})=>{z({modelId:U,parentId:Te,messages:Ie})},Yr=({raw:U,oldContent:Te,newContent:Ie})=>{t(0,h.messages[v.id].content=h.messages[v.id].content.replace(U,U.replace(Te,Ie)),h),O()},Xr=()=>{N(v)},$r=U=>{E(v,U.target.value-1),t(20,pe=!1)},xr=U=>{U.key==="Enter"&&(E(v,U.target.value-1),t(20,pe=!1))},en=async()=>{t(20,pe=!0),await Ce();const U=document.getElementById(`message-index-input-${v.id}`);U&&(U.focus(),U.select())},tn=()=>{P(v)},ln=()=>{Ve()},sn=()=>{L(v.content)},rn=()=>{_e||te()},nn=()=>{fe||Ue(v)},an=()=>{},on=async()=>{await We(1),window.setTimeout(()=>{var U;(U=document.getElementById(`message-feedback-${v.id}`))==null||U.scrollIntoView()},0)},fn=async()=>{await We(-1),window.setTimeout(()=>{var U;(U=document.getElementById(`message-feedback-${v.id}`))==null||U.scrollIntoView()},0)},un=()=>{A()},cn=()=>{t(24,be=!1),F(v),((he==null?void 0:he.actions)??[]).forEach(U=>{c("action",{id:U.id,event:{id:"regenerate-response",data:{messageId:v.id}}})})},dn=()=>{t(16,ge=!0)},hn=U=>{S(U.id,v)};function mn(U){ze[U?"unshift":"push"](()=>{ie=U,t(15,ie)})}function gn(U){v=U,t(13,v),t(0,h),t(43,p)}function _n(U){be=U,t(24,be)}const pn=async U=>{await We(null,{...U.detail})},bn=U=>{C(v==null?void 0:v.id,U)};return r.$$set=U=>{"chatId"in U&&t(42,g=U.chatId),"history"in U&&t(0,h=U.history),"messageId"in U&&t(43,p=U.messageId),"siblings"in U&&t(1,w=U.siblings),"gotoMessage"in U&&t(2,E=U.gotoMessage),"showPreviousMessage"in U&&t(3,N=U.showPreviousMessage),"showNextMessage"in U&&t(4,P=U.showNextMessage),"updateChat"in U&&t(5,O=U.updateChat),"editMessage"in U&&t(44,R=U.editMessage),"saveMessage"in U&&t(45,M=U.saveMessage),"rateMessage"in U&&t(46,T=U.rateMessage),"actionMessage"in U&&t(6,S=U.actionMessage),"deleteMessage"in U&&t(47,B=U.deleteMessage),"submitMessage"in U&&t(7,C=U.submitMessage),"continueResponse"in U&&t(8,A=U.continueResponse),"regenerateResponse"in U&&t(9,F=U.regenerateResponse),"addMessages"in U&&t(10,z=U.addMessages),"isLastMessage"in U&&t(11,re=U.isLastMessage),"readOnly"in U&&t(12,Q=U.readOnly)},r.$$.update=()=>{r.$$.dirty[0]&8193|r.$$.dirty[1]&4096&&h.messages&&JSON.stringify(v)!==JSON.stringify(h.messages[p])&&t(13,v=JSON.parse(JSON.stringify(h.messages[p]))),r.$$.dirty[0]&8192|r.$$.dirty[1]&131072&&t(17,he=l.find(U=>U.id===v.model)),r.$$.dirty[0]&16384&&(ye||(async()=>await Ce())())},[h,w,E,N,P,O,S,C,A,F,z,re,Q,v,ye,ie,ge,he,Z,oe,pe,ce,_e,fe,be,ne,s,n,o,a,f,u,c,L,te,Ve,De,je,He,Ue,We,et,g,p,R,M,T,B,l,tt,Ke,ft,ut,it,Vt,Ct,Tt,Bt,St,Qr,Yr,Xr,$r,xr,en,tn,ln,sn,rn,nn,an,on,fn,un,cn,dn,hn,mn,gn,_n,pn,bn]}class Zr extends Le{constructor(e){super(),Pe(this,e,Ao,Oo,Be,{chatId:42,history:0,messageId:43,siblings:1,gotoMessage:2,showPreviousMessage:3,showNextMessage:4,updateChat:5,editMessage:44,saveMessage:45,rateMessage:46,actionMessage:6,deleteMessage:47,submitMessage:7,continueResponse:8,regenerateResponse:9,addMessages:10,isLastMessage:11,readOnly:12},null,[-1,-1,-1,-1])}}function jo(r){let e,t;return{c(){e=ke("svg"),t=ke("path"),this.h()},l(l){e=we(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=we(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm6-2a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm0 0h-1a5 5 0 0 1-5-5v-.5"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width",r[1]),d(e,"stroke","currentColor"),d(e,"class",r[0])},m(l,s){D(l,e,s),_(e,t)},p(l,[s]){s&2&&d(e,"stroke-width",l[1]),s&1&&d(e,"class",l[0])},i:Ee,o:Ee,d(l){l&&m(e)}}}function Ho(r,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,s=n.strokeWidth)},[l,s]}class zo extends Le{constructor(e){super(),Pe(this,e,Ho,jo,Be,{className:0,strokeWidth:1})}}function qt(r){var l;const e=r.slice(),t=(l=e[0].messages[e[2]])==null?void 0:l.merged;return e[15]=t,e}function Zs(r,e,t){const l=r.slice();return l[39]=e[t],l}function Ft(r){const e=r.slice(),t=e[18][e[39]].messageIds[e[19][e[39]]];return e[42]=t,e}function Qs(r){let e,t,l,s,n,i=Ne(Object.keys(r[18])),o=[];for(let u=0;u<i.length;u+=1)o[u]=xs(Zs(r,i,u));const a=u=>V(o[u],1,1,()=>{o[u]=null});let f=!r[4]&&er(r);return{c(){e=y("div"),t=y("div");for(let u=0;u<o.length;u+=1)o[u].c();s=j(),f&&f.c(),this.h()},l(u){e=I(u,"DIV",{});var c=k(e);t=I(c,"DIV",{class:!0,id:!0});var g=k(t);for(let h=0;h<o.length;h+=1)o[h].l(g);g.forEach(m),s=H(c),f&&f.l(c),c.forEach(m),this.h()},h(){d(t,"class","flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden"),d(t,"id",l="responses-container-"+r[1]+"-"+r[17].id)},m(u,c){D(u,e,c),_(e,t);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(t,null);_(e,s),f&&f.m(e,null),n=!0},p(u,c){if(c[0]&60620791){i=Ne(Object.keys(u[18]));let g;for(g=0;g<i.length;g+=1){const h=Zs(u,i,g);o[g]?(o[g].p(h,c),b(o[g],1)):(o[g]=xs(h),o[g].c(),b(o[g],1),o[g].m(t,null))}for(le(),g=i.length;g<o.length;g+=1)a(g);se()}(!n||c[0]&131074&&l!==(l="responses-container-"+u[1]+"-"+u[17].id))&&d(t,"id",l),u[4]?f&&(le(),V(f,1,1,()=>{f=null}),se()):f?(f.p(u,c),c[0]&16&&b(f,1)):(f=er(u),f.c(),b(f,1),f.m(e,null))},i(u){if(!n){for(let c=0;c<i.length;c+=1)b(o[c]);b(f),n=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)V(o[c]);V(f),n=!1},d(u){u&&m(e),Ge(o,u),f&&f.d()}}}function Ys(r){let e,t=r[0].currentId,l,s,n,i,o,a=$s(r);function f(){return r[34](r[42])}return{c(){e=y("div"),a.c(),l=j(),this.h()},l(u){e=I(u,"DIV",{class:!0});var c=k(e);a.l(c),l=H(c),c.forEach(m),this.h()},h(){var u;d(e,"class",s="snap-center w-full max-w-full m-1 border "+(((u=r[0].messages[r[2]])==null?void 0:u.modelIdx)==r[39]?`bg-gray-50 dark:bg-gray-850 border-gray-100 dark:border-gray-800 border-2 ${r[20]?"min-w-full":"min-w-80"}`:`border-gray-100 dark:border-gray-850 border-dashed ${r[20]?"min-w-full":"min-w-80"}`)+" transition-all p-5 rounded-2xl")},m(u,c){D(u,e,c),a.m(e,null),_(e,l),n=!0,i||(o=me(e,"click",f),i=!0)},p(u,c){var g;r=u,c[0]&1&&Be(t,t=r[0].currentId)?(le(),V(a,1,1,Ee),se(),a=$s(r),a.c(),b(a,1),a.m(e,l)):a.p(r,c),(!n||c[0]&1310725&&s!==(s="snap-center w-full max-w-full m-1 border "+(((g=r[0].messages[r[2]])==null?void 0:g.modelIdx)==r[39]?`bg-gray-50 dark:bg-gray-850 border-gray-100 dark:border-gray-800 border-2 ${r[20]?"min-w-full":"min-w-80"}`:`border-gray-100 dark:border-gray-850 border-dashed ${r[20]?"min-w-full":"min-w-80"}`)+" transition-all p-5 rounded-2xl"))&&d(e,"class",s)},i(u){n||(b(a),n=!0)},o(u){V(a),n=!1},d(u){u&&m(e),a.d(u),i=!1,o()}}}function Xs(r){let e,t;function l(...o){return r[30](r[39],...o)}function s(){return r[31](r[39])}function n(){return r[32](r[39])}function i(...o){return r[33](r[39],...o)}return e=new Zr({props:{chatId:r[1],history:r[0],messageId:r[42],isLastMessage:!0,siblings:r[18][r[39]].messageIds,gotoMessage:l,showPreviousMessage:s,showNextMessage:n,updateChat:r[5],editMessage:r[6],saveMessage:r[7],rateMessage:r[8],deleteMessage:r[11],actionMessage:r[9],submitMessage:r[10],continueResponse:r[12],regenerateResponse:i,addMessages:r[14],readOnly:r[4]}}),{c(){X(e.$$.fragment)},l(o){$(e.$$.fragment,o)},m(o,a){x(e,o,a),t=!0},p(o,a){r=o;const f={};a[0]&2&&(f.chatId=r[1]),a[0]&1&&(f.history=r[0]),a[0]&786432&&(f.messageId=r[42]),a[0]&262144&&(f.siblings=r[18][r[39]].messageIds),a[0]&262144&&(f.gotoMessage=l),a[0]&262144&&(f.showPreviousMessage=s),a[0]&262144&&(f.showNextMessage=n),a[0]&32&&(f.updateChat=r[5]),a[0]&64&&(f.editMessage=r[6]),a[0]&128&&(f.saveMessage=r[7]),a[0]&256&&(f.rateMessage=r[8]),a[0]&2048&&(f.deleteMessage=r[11]),a[0]&512&&(f.actionMessage=r[9]),a[0]&1024&&(f.submitMessage=r[10]),a[0]&4096&&(f.continueResponse=r[12]),a[0]&794624&&(f.regenerateResponse=i),a[0]&16384&&(f.addMessages=r[14]),a[0]&16&&(f.readOnly=r[4]),e.$set(f)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){V(e.$$.fragment,o),t=!1},d(o){ee(e,o)}}}function $s(r){let e,t,l=r[15]&&Xs(r);return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),D(s,e,n),t=!0},p(s,n){s[15]?l?(l.p(s,n),n[0]&32768&&b(l,1)):(l=Xs(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),V(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){V(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function xs(r){let e,t,l=r[19][r[39]]!==void 0&&r[18][r[39]].messageIds.length>0&&Ys(Ft(r));return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),D(s,e,n),t=!0},p(s,n){s[19][s[39]]!==void 0&&s[18][s[39]].messageIds.length>0?l?(l.p(Ft(s),n),n[0]&786432&&b(l,1)):(l=Ys(Ft(s)),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),V(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){V(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function er(r){let e=!Object.keys(r[18]).find(r[29]),t,l,s=e&&tr(r);return{c(){s&&s.c(),t=de()},l(n){s&&s.l(n),t=de()},m(n,i){s&&s.m(n,i),D(n,t,i),l=!0},p(n,i){i[0]&786433&&(e=!Object.keys(n[18]).find(n[29])),e?s?(s.p(n,i),i[0]&786433&&b(s,1)):(s=tr(n),s.c(),b(s,1),s.m(t.parentNode,t)):s&&(le(),V(s,1,1,()=>{s=null}),se())},i(n){l||(b(s),l=!0)},o(n){V(s),l=!1},d(n){n&&m(t),s&&s.d(n)}}}function tr(r){var o,a;let e,t,l,s,n=((a=(o=r[0].messages[r[2]])==null?void 0:o.merged)==null?void 0:a.status)&&lr(qt(r)),i=r[3]&&rr(r);return{c(){e=y("div"),t=y("div"),n&&n.c(),l=j(),i&&i.c(),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);t=I(u,"DIV",{class:!0});var c=k(t);n&&n.l(c),c.forEach(m),l=H(u),i&&i.l(u),u.forEach(m),this.h()},h(){d(t,"class","w-full"),d(e,"class","flex justify-end")},m(f,u){D(f,e,u),_(e,t),n&&n.m(t,null),_(e,l),i&&i.m(e,null),s=!0},p(f,u){var c,g;(g=(c=f[0].messages[f[2]])==null?void 0:c.merged)!=null&&g.status?n?(n.p(qt(f),u),u[0]&5&&b(n,1)):(n=lr(qt(f)),n.c(),b(n,1),n.m(t,null)):n&&(le(),V(n,1,1,()=>{n=null}),se()),f[3]?i?(i.p(f,u),u[0]&8&&b(i,1)):(i=rr(f),i.c(),b(i,1),i.m(e,null)):i&&(le(),V(i,1,1,()=>{i=null}),se())},i(f){s||(b(n),b(i),s=!0)},o(f){V(n),V(i),s=!1},d(f){f&&m(e),n&&n.d(),i&&i.d()}}}function lr(r){let e,t,l,s,n,i,o;t=new Zt({props:{$$slots:{default:[Uo]},$$scope:{ctx:r}}});const a=[qo,Wo],f=[];function u(c,g){var h;return(((h=c[15])==null?void 0:h.content)??"")===""?0:1}return n=u(r),i=f[n]=a[n](r),{c(){e=y("div"),X(t.$$.fragment),l=j(),s=y("div"),i.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=k(e);$(t.$$.fragment,g),l=H(g),s=I(g,"DIV",{class:!0});var h=k(s);i.l(h),h.forEach(m),g.forEach(m),this.h()},h(){d(s,"class","mt-1 markdown-prose w-full min-w-full"),d(e,"class","w-full rounded-xl pl-5 pr-2 py-2")},m(c,g){D(c,e,g),x(t,e,null),_(e,l),_(e,s),f[n].m(s,null),o=!0},p(c,g){const h={};g[0]&2097157|g[1]&4096&&(h.$$scope={dirty:g,ctx:c}),t.$set(h);let p=n;n=u(c),n===p?f[n].p(c,g):(le(),V(f[p],1,1,()=>{f[p]=null}),se(),i=f[n],i?i.p(c,g):(i=f[n]=a[n](c),i.c()),b(i,1),i.m(s,null))},i(c){o||(b(t.$$.fragment,c),b(i),o=!0)},o(c){V(t.$$.fragment,c),V(i),o=!1},d(c){c&&m(e),ee(t),f[n].d()}}}function sr(r){let e,t=nt(r[15].timestamp*1e3).format("LT")+"",l;return{c(){e=y("span"),l=W(t),this.h()},l(s){e=I(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase ml-0.5 -mt-0.5")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n[0]&5&&t!==(t=nt(s[15].timestamp*1e3).format("LT")+"")&&J(l,t)},d(s){s&&m(e)}}}function Uo(r){let e=r[21].t("Merged Response")+"",t,l,s,n=r[15].timestamp&&sr(r);return{c(){t=W(e),l=j(),n&&n.c(),s=de()},l(i){t=q(i,e),l=H(i),n&&n.l(i),s=de()},m(i,o){D(i,t,o),D(i,l,o),n&&n.m(i,o),D(i,s,o)},p(i,o){o[0]&2097152&&e!==(e=i[21].t("Merged Response")+"")&&J(t,e),i[15].timestamp?n?n.p(i,o):(n=sr(i),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(i){i&&(m(t),m(l),m(s)),n&&n.d(i)}}}function Wo(r){let e,t;return e=new Dt({props:{id:"merged",content:r[15].content??""}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&5&&(n.content=l[15].content??""),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function qo(r){let e,t;return e=new xt({}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:Ee,i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function rr(r){let e,t,l;return t=new Se({props:{content:r[21].t("Merge Responses"),placement:"bottom",$$slots:{default:[Fo]},$$scope:{ctx:r}}}),{c(){e=y("div"),X(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){d(e,"class","shrink-0 text-gray-600 dark:text-gray-500 mt-1")},m(s,n){D(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&2097152&&(i.content=s[21].t("Merge Responses")),n[1]&4096&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){V(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function Fo(r){let e,t,l,s,n;return t=new zo({props:{className:" size-5 "}}),{c(){e=y("button"),X(t.$$.fragment),this.h()},l(i){e=I(i,"BUTTON",{type:!0,id:!0,class:!0});var o=k(e);$(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"type","button"),d(e,"id","merge-response-button"),d(e,"class","visible p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button")},m(i,o){D(i,e,o),x(t,e,null),l=!0,s||(n=me(e,"click",r[35]),s=!0)},p:Ee,i(i){l||(b(t.$$.fragment,i),l=!0)},o(i){V(t.$$.fragment,i),l=!1},d(i){i&&m(e),ee(t),s=!1,n()}}}function Go(r){let e,t,l=r[17]&&Qs(r);return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),D(s,e,n),t=!0},p(s,n){s[17]?l?(l.p(s,n),n[0]&131072&&b(l,1)):(l=Qs(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),V(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){V(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function Jo(r,e,t){let l,s,n;Me(r,gt,G=>t(36,l=G)),Me(r,jr,G=>t(20,s=G));const i=Je("i18n");Me(r,i,G=>t(21,n=G)),nt.extend(Ur);let{chatId:o}=e,{history:a}=e,{messageId:f}=e,{isLastMessage:u}=e,{readOnly:c=!1}=e,{updateChat:g}=e,{editMessage:h}=e,{saveMessage:p}=e,{rateMessage:v}=e,{actionMessage:w}=e,{submitMessage:E}=e,{deleteMessage:N}=e,{continueResponse:P}=e,{regenerateResponse:O}=e,{mergeResponses:R}=e,{addMessages:M}=e,{triggerScroll:T}=e;kt();let S,B,C={},A={},F=JSON.parse(JSON.stringify(a.messages[f]));const z=async(G,_e)=>{t(19,A[G]=Math.max(0,Math.min(_e,C[G].messageIds.length-1)),A);let fe=C[G].messageIds[A[G]],be=a.messages[fe].childrenIds;for(;be.length!==0;)fe=be.at(-1),be=a.messages[fe].childrenIds;t(0,a.currentId=fe,a),await Ce(),await g(),T()},re=async G=>{t(19,A[G]=Math.max(0,A[G]-1),A);let _e=C[G].messageIds[A[G]],fe=a.messages[_e].childrenIds;for(;fe.length!==0;)_e=fe.at(-1),fe=a.messages[_e].childrenIds;t(0,a.currentId=_e,a),await Ce(),await g(),T()},Q=async G=>{t(19,A[G]=Math.min(C[G].messageIds.length-1,A[G]+1),A);let _e=C[G].messageIds[A[G]],fe=a.messages[_e].childrenIds;for(;fe.length!==0;)_e=fe.at(-1),fe=a.messages[_e].childrenIds;t(0,a.currentId=_e,a),await Ce(),await g(),T()},ie=async()=>{await Ce(),t(16,S=f),t(17,B=a.messages[f].parentId?a.messages[a.messages[f].parentId]:null),t(18,C=B==null?void 0:B.models.reduce((G,_e,fe)=>{let be=B==null?void 0:B.childrenIds.map(L=>a.messages[L]).filter(L=>(L==null?void 0:L.modelIdx)===fe).map(L=>L.id);if(be.length===0){let L=B==null?void 0:B.childrenIds.map(K=>a.messages[K]).filter(K=>(K==null?void 0:K.model)===_e);L.forEach(K=>{K.modelIdx=fe}),be=L.map(K=>K.id)}return{...G,[fe]:{messageIds:be}}},{})),t(19,A=B==null?void 0:B.models.reduce((G,_e,fe)=>{const be=C[fe].messageIds.findIndex(L=>L===f);return be!==-1?{...G,[fe]:be}:{...G,[fe]:C[fe].messageIds.length-1}},{})),await Ce()},ge=async()=>{const G=Object.keys(C).map(_e=>{const{messageIds:fe}=C[_e],be=fe[A[_e]];return a.messages[be].content});R(f,G,o)};wt(async()=>{if(await ie(),await Ce(),(l==null?void 0:l.scrollOnBranchChange)??!0){const G=document.getElementById(`message-${f}`);G&&G.scrollIntoView({block:"start"})}});const he=G=>{var be;const{messageIds:_e}=C[G],fe=_e[A[G]];return!((be=a.messages[fe])!=null&&be.done)},ye=(G,_e,fe)=>z(G,fe),Z=G=>re(G),oe=G=>Q(G),pe=async(G,_e)=>{O(_e),await Ce(),t(19,A[G]=C[G].messageIds.length-1,A)},ae=async G=>{if(f!=G){let _e=G,fe=a.messages[_e].childrenIds;for(;fe.length!==0;)_e=fe.at(-1),fe=a.messages[_e].childrenIds;t(0,a.currentId=_e,a)}},ce=()=>{ge()};return r.$$set=G=>{"chatId"in G&&t(1,o=G.chatId),"history"in G&&t(0,a=G.history),"messageId"in G&&t(2,f=G.messageId),"isLastMessage"in G&&t(3,u=G.isLastMessage),"readOnly"in G&&t(4,c=G.readOnly),"updateChat"in G&&t(5,g=G.updateChat),"editMessage"in G&&t(6,h=G.editMessage),"saveMessage"in G&&t(7,p=G.saveMessage),"rateMessage"in G&&t(8,v=G.rateMessage),"actionMessage"in G&&t(9,w=G.actionMessage),"submitMessage"in G&&t(10,E=G.submitMessage),"deleteMessage"in G&&t(11,N=G.deleteMessage),"continueResponse"in G&&t(12,P=G.continueResponse),"regenerateResponse"in G&&t(13,O=G.regenerateResponse),"mergeResponses"in G&&t(27,R=G.mergeResponses),"addMessages"in G&&t(14,M=G.addMessages),"triggerScroll"in G&&t(28,T=G.triggerScroll)},r.$$.update=()=>{r.$$.dirty[0]&32773&&a.messages&&JSON.stringify(F)!==JSON.stringify(a.messages[f])&&t(15,F=JSON.parse(JSON.stringify(a.messages[f])))},[a,o,f,u,c,g,h,p,v,w,E,N,P,O,M,F,S,B,C,A,s,n,i,z,re,Q,ge,R,T,he,ye,Z,oe,pe,ae,ce]}class Ko extends Le{constructor(e){super(),Pe(this,e,Jo,Go,Be,{chatId:1,history:0,messageId:2,isLastMessage:3,readOnly:4,updateChat:5,editMessage:6,saveMessage:7,rateMessage:8,actionMessage:9,submitMessage:10,deleteMessage:11,continueResponse:12,regenerateResponse:13,mergeResponses:27,addMessages:14,triggerScroll:28},null,[-1,-1])}}function nr(r,e,t){const l=r.slice();return l[53]=e[t],l[55]=t,l}function ir(r,e,t){const l=r.slice();return l[53]=e[t],l}function ar(r){var s,n,i,o;let e,t,l;return t=new Wr({props:{src:r[7].user?((i=(n=(s=r[16].find(r[30]))==null?void 0:s.info)==null?void 0:n.meta)==null?void 0:i.profile_image_url)??"/user.png":((o=r[0])==null?void 0:o.profile_image_url)??"/user.png",className:"size-8 user-message-profile-image"}}),{c(){e=y("div"),X(t.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);$(t.$$.fragment,f),f.forEach(m),this.h()},h(){d(e,"class","shrink-0 ltr:mr-3 rtl:ml-3")},m(a,f){D(a,e,f),x(t,e,null),l=!0},p(a,f){var c,g,h,p;const u={};f[0]&65665&&(u.src=a[7].user?((h=(g=(c=a[16].find(a[30]))==null?void 0:c.info)==null?void 0:g.meta)==null?void 0:h.profile_image_url)??"/user.png":((p=a[0])==null?void 0:p.profile_image_url)??"/user.png"),t.$set(u)},i(a){l||(b(t.$$.fragment,a),l=!0)},o(a){V(t.$$.fragment,a),l=!1},d(a){a&&m(e),ee(t)}}}function Zo(r){let e,t,l,s;return l=new Se({props:{content:nt(r[7].timestamp*1e3).format("LLLL"),$$slots:{default:[Yo]},$$scope:{ctx:r}}}),{c(){e=y("div"),t=y("div"),X(l.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=k(e);t=I(i,"DIV",{class:!0});var o=k(t);$(l.$$.fragment,o),o.forEach(m),i.forEach(m),this.h()},h(){d(t,"class","text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize translate-y-[1px]"),d(e,"class","flex justify-end pb-1 pr-2")},m(n,i){D(n,e,i),_(e,t),x(l,t,null),s=!0},p(n,i){const o={};i[0]&128&&(o.content=nt(n[7].timestamp*1e3).format("LLLL")),i[0]&128|i[1]&134217728&&(o.$$scope={dirty:i,ctx:n}),l.$set(o)},i(n){s||(b(l.$$.fragment,n),s=!0)},o(n){V(l.$$.fragment,n),s=!1},d(n){n&&m(e),ee(l)}}}function Qo(r){let e,t,l;return t=new Zt({props:{$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){e=y("div"),X(t.$$.fragment)},l(s){e=I(s,"DIV",{});var n=k(e);$(t.$$.fragment,n),n.forEach(m)},m(s,n){D(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&180353|n[1]&134217728&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){V(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function Yo(r){let e,t=vt(r[7].timestamp*1e3)+"",l;return{c(){e=y("span"),l=W(t),this.h()},l(s){e=I(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n[0]&128&&t!==(t=vt(s[7].timestamp*1e3)+"")&&J(l,t)},d(s){s&&m(e)}}}function Xo(r){let e=r[14].t("You")+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&16384&&e!==(e=l[14].t("You")+"")&&J(t,e)},d(l){l&&m(t)}}}function $o(r){let e=r[0].name+"",t;return{c(){t=W(e)},l(l){t=q(l,e)},m(l,s){D(l,t,s)},p(l,s){s[0]&1&&e!==(e=l[0].name+"")&&J(t,e)},d(l){l&&m(t)}}}function xo(r){var o;let e=r[14].t("You")+"",t,l,s,n=(((o=r[7])==null?void 0:o.user)??"")+"",i;return{c(){t=W(e),l=j(),s=y("span"),i=W(n),this.h()},l(a){t=q(a,e),l=H(a),s=I(a,"SPAN",{class:!0});var f=k(s);i=q(f,n),f.forEach(m),this.h()},h(){d(s,"class","text-gray-500 text-sm font-medium")},m(a,f){D(a,t,f),D(a,l,f),D(a,s,f),_(s,i)},p(a,f){var u;f[0]&16384&&e!==(e=a[14].t("You")+"")&&J(t,e),f[0]&128&&n!==(n=(((u=a[7])==null?void 0:u.user)??"")+"")&&J(i,n)},d(a){a&&(m(t),m(l),m(s))}}}function or(r){let e,t,l;return t=new Se({props:{content:nt(r[7].timestamp*1e3).format("LLLL"),$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){e=y("div"),X(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){d(e,"class","self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]")},m(s,n){D(s,e,n),x(t,e,null),l=!0},p(s,n){const i={};n[0]&128&&(i.content=nt(s[7].timestamp*1e3).format("LLLL")),n[0]&128|n[1]&134217728&&(i.$$scope={dirty:n,ctx:s}),t.$set(i)},i(s){l||(b(t.$$.fragment,s),l=!0)},o(s){V(t.$$.fragment,s),l=!1},d(s){s&&m(e),ee(t)}}}function ef(r){let e,t=vt(r[7].timestamp*1e3)+"",l;return{c(){e=y("span"),l=W(t),this.h()},l(s){e=I(s,"SPAN",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","line-clamp-1")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n[0]&128&&t!==(t=vt(s[7].timestamp*1e3)+"")&&J(l,t)},d(s){s&&m(e)}}}function tf(r){let e,t,l;function s(a,f){return a[7].user?xo:a[15].showUsername||a[17].name!==a[0].name?$o:Xo}let n=s(r),i=n(r),o=r[7].timestamp&&or(r);return{c(){i.c(),e=j(),o&&o.c(),t=de()},l(a){i.l(a),e=H(a),o&&o.l(a),t=de()},m(a,f){i.m(a,f),D(a,e,f),o&&o.m(a,f),D(a,t,f),l=!0},p(a,f){n===(n=s(a))&&i?i.p(a,f):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e))),a[7].timestamp?o?(o.p(a,f),f[0]&128&&b(o,1)):(o=or(a),o.c(),b(o,1),o.m(t.parentNode,t)):o&&(le(),V(o,1,1,()=>{o=null}),se())},i(a){l||(b(o),l=!0)},o(a){V(o),l=!1},d(a){a&&(m(e),m(t)),i.d(a),o&&o.d(a)}}}function fr(r){let e,t,l=r[7].files&&ur(r);return{c(){l&&l.c(),e=de()},l(s){l&&l.l(s),e=de()},m(s,n){l&&l.m(s,n),D(s,e,n),t=!0},p(s,n){s[7].files?l?(l.p(s,n),n[0]&128&&b(l,1)):(l=ur(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(le(),V(l,1,1,()=>{l=null}),se())},i(s){t||(b(l),t=!0)},o(s){V(l),t=!1},d(s){s&&m(e),l&&l.d(s)}}}function ur(r){let e,t,l=Ne(r[7].files),s=[];for(let i=0;i<l.length;i+=1)s[i]=cr(ir(r,l,i));const n=i=>V(s[i],1,1,()=>{s[i]=null});return{c(){e=y("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","mt-2.5 mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap")},m(i,o){D(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,o){if(o[0]&32896){l=Ne(i[7].files);let a;for(a=0;a<l.length;a+=1){const f=ir(i,l,a);s[a]?(s[a].p(f,o),b(s[a],1)):(s[a]=cr(f),s[a].c(),b(s[a],1),s[a].m(e,null))}for(le(),a=l.length;a<s.length;a+=1)n(a);se()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)b(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)V(s[o]);t=!1},d(i){i&&m(e),Ge(s,i)}}}function lf(r){var l;let e,t;return e=new $t({props:{item:r[53],url:r[53].url,name:r[53].name,type:r[53].type,size:(l=r[53])==null?void 0:l.size,colorClassName:"bg-white dark:bg-gray-850 "}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n[0]&128&&(i.item=s[53]),n[0]&128&&(i.url=s[53].url),n[0]&128&&(i.name=s[53].name),n[0]&128&&(i.type=s[53].type),n[0]&128&&(i.size=(o=s[53])==null?void 0:o.size),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function sf(r){let e,t;return e=new Qt({props:{src:r[53].url,imageClassName:" max-h-96 rounded-lg"}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&128&&(n.src=l[53].url),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function cr(r){let e,t,l,s,n,i;const o=[sf,lf],a=[];function f(u,c){return u[53].type==="image"?0:1}return t=f(r),l=a[t]=o[t](r),{c(){e=y("div"),l.c(),s=j(),this.h()},l(u){e=I(u,"DIV",{class:!0});var c=k(e);l.l(c),s=H(c),c.forEach(m),this.h()},h(){var u;d(e,"class",n=((u=r[15])==null?void 0:u.chatBubble)??!0?"self-end":"")},m(u,c){D(u,e,c),a[t].m(e,null),_(e,s),i=!0},p(u,c){var h;let g=t;t=f(u),t===g?a[t].p(u,c):(le(),V(a[g],1,1,()=>{a[g]=null}),se(),l=a[t],l?l.p(u,c):(l=a[t]=o[t](u),l.c()),b(l,1),l.m(e,s)),(!i||c[0]&32768&&n!==(n=((h=u[15])==null?void 0:h.chatBubble)??!0?"self-end":""))&&d(e,"class",n)},i(u){i||(b(l),i=!0)},o(u){V(l),i=!1},d(u){u&&m(e),a[t].d()}}}function dr(r){let e,t,l,s;const n=[nf,rf],i=[];function o(a,f){return a[10]===!0?0:1}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),D(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),V(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){V(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function rf(r){var O,R;let e,t,l,s,n,i,o,a,f,u,c,g,h,p,v=r[7].content&&hr(r),w=!(((O=r[15])==null?void 0:O.chatBubble)??!0)&&mr(r),E=!r[6]&&_r(r);u=new Se({props:{content:r[14].t("Copy"),placement:"bottom",$$slots:{default:[uf]},$$scope:{ctx:r}}});let N=!r[6]&&(!r[5]||r[1].length>1)&&pr(r),P=(((R=r[15])==null?void 0:R.chatBubble)??!0)&&br(r);return{c(){e=y("div"),t=y("div"),l=y("div"),v&&v.c(),i=j(),o=y("div"),w&&w.c(),a=j(),E&&E.c(),f=j(),X(u.$$.fragment),c=j(),N&&N.c(),g=j(),P&&P.c(),this.h()},l(M){e=I(M,"DIV",{class:!0});var T=k(e);t=I(T,"DIV",{class:!0});var S=k(t);l=I(S,"DIV",{class:!0});var B=k(l);v&&v.l(B),B.forEach(m),S.forEach(m),i=H(T),o=I(T,"DIV",{class:!0});var C=k(o);w&&w.l(C),a=H(C),E&&E.l(C),f=H(C),$(u.$$.fragment,C),c=H(C),N&&N.l(C),g=H(C),P&&P.l(C),C.forEach(m),T.forEach(m),this.h()},h(){var M,T,S;d(l,"class",s="rounded-3xl "+(((M=r[15])==null?void 0:M.chatBubble)??!0?`max-w-[90%] px-5 py-2  bg-gray-50 dark:bg-gray-850 ${r[7].files?"rounded-tr-lg":""}`:" w-full")),d(t,"class",n="flex "+(((T=r[15])==null?void 0:T.chatBubble)??!0?"justify-end pb-1":"w-full")),d(o,"class",h="flex "+(((S=r[15])==null?void 0:S.chatBubble)??!0?"justify-end":"")+" text-gray-600 dark:text-gray-500"),d(e,"class","w-full")},m(M,T){D(M,e,T),_(e,t),_(t,l),v&&v.m(l,null),_(e,i),_(e,o),w&&w.m(o,null),_(o,a),E&&E.m(o,null),_(o,f),x(u,o,null),_(o,c),N&&N.m(o,null),_(o,g),P&&P.m(o,null),p=!0},p(M,T){var B,C,A,F,z;M[7].content?v?(v.p(M,T),T[0]&128&&b(v,1)):(v=hr(M),v.c(),b(v,1),v.m(l,null)):v&&(le(),V(v,1,1,()=>{v=null}),se()),(!p||T[0]&32896&&s!==(s="rounded-3xl "+(((B=M[15])==null?void 0:B.chatBubble)??!0?`max-w-[90%] px-5 py-2  bg-gray-50 dark:bg-gray-850 ${M[7].files?"rounded-tr-lg":""}`:" w-full")))&&d(l,"class",s),(!p||T[0]&32768&&n!==(n="flex "+(((C=M[15])==null?void 0:C.chatBubble)??!0?"justify-end pb-1":"w-full")))&&d(t,"class",n),((A=M[15])==null?void 0:A.chatBubble)??!0?w&&(w.d(1),w=null):w?w.p(M,T):(w=mr(M),w.c(),w.m(o,a)),M[6]?E&&(le(),V(E,1,1,()=>{E=null}),se()):E?(E.p(M,T),T[0]&64&&b(E,1)):(E=_r(M),E.c(),b(E,1),E.m(o,f));const S={};T[0]&16384&&(S.content=M[14].t("Copy")),T[0]&128|T[1]&134217728&&(S.$$scope={dirty:T,ctx:M}),u.$set(S),!M[6]&&(!M[5]||M[1].length>1)?N?(N.p(M,T),T[0]&98&&b(N,1)):(N=pr(M),N.c(),b(N,1),N.m(o,g)):N&&(le(),V(N,1,1,()=>{N=null}),se()),((F=M[15])==null?void 0:F.chatBubble)??!0?P?P.p(M,T):(P=br(M),P.c(),P.m(o,null)):P&&(P.d(1),P=null),(!p||T[0]&32768&&h!==(h="flex "+(((z=M[15])==null?void 0:z.chatBubble)??!0?"justify-end":"")+" text-gray-600 dark:text-gray-500"))&&d(o,"class",h)},i(M){p||(b(v),b(E),b(u.$$.fragment,M),b(N),p=!0)},o(M){V(v),V(E),V(u.$$.fragment,M),V(N),p=!1},d(M){M&&m(e),v&&v.d(),w&&w.d(),E&&E.d(),ee(u),N&&N.d(),P&&P.d()}}}function nf(r){let e,t,l,s,n,i,o,a,f,u=r[14].t("Save")+"",c,g,h,p,v=r[14].t("Cancel")+"",w,E,N,P=r[14].t("Send")+"",O,R,M,T,S=(r[12]??[]).length>0&&kr(r);return{c(){e=y("div"),S&&S.c(),t=j(),l=y("div"),s=y("textarea"),i=j(),o=y("div"),a=y("div"),f=y("button"),c=W(u),g=j(),h=y("div"),p=y("button"),w=W(v),E=j(),N=y("button"),O=W(P),this.h()},l(B){e=I(B,"DIV",{class:!0});var C=k(e);S&&S.l(C),t=H(C),l=I(C,"DIV",{class:!0});var A=k(l);s=I(A,"TEXTAREA",{id:!0,class:!0}),k(s).forEach(m),A.forEach(m),i=H(C),o=I(C,"DIV",{class:!0});var F=k(o);a=I(F,"DIV",{});var z=k(a);f=I(z,"BUTTON",{id:!0,class:!0});var re=k(f);c=q(re,u),re.forEach(m),z.forEach(m),g=H(F),h=I(F,"DIV",{class:!0});var Q=k(h);p=I(Q,"BUTTON",{id:!0,class:!0});var ie=k(p);w=q(ie,v),ie.forEach(m),E=H(Q),N=I(Q,"BUTTON",{id:!0,class:!0});var ge=k(N);O=q(ge,P),ge.forEach(m),Q.forEach(m),F.forEach(m),C.forEach(m),this.h()},h(){d(s,"id",n="message-edit-"+r[7].id),d(s,"class","bg-transparent outline-hidden w-full resize-none"),d(l,"class","max-h-96 overflow-auto"),d(f,"id","save-edit-message-button"),d(f,"class","px-4 py-2 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl"),d(p,"id","close-edit-message-button"),d(p,"class","px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl"),d(N,"id","confirm-edit-message-button"),d(N,"class","px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl"),d(h,"class","flex space-x-1.5"),d(o,"class","mt-2 mb-1 flex justify-between text-sm font-medium"),d(e,"class","w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2")},m(B,C){D(B,e,C),S&&S.m(e,null),_(e,t),_(e,l),_(l,s),r[34](s),ot(s,r[11]),_(e,i),_(e,o),_(o,a),_(a,f),_(f,c),_(o,g),_(o,h),_(h,p),_(p,w),_(h,E),_(h,N),_(N,O),R=!0,M||(T=[me(s,"input",r[35]),me(s,"input",pf),me(s,"keydown",r[36]),me(f,"click",r[37]),me(p,"click",r[38]),me(N,"click",r[39])],M=!0)},p(B,C){(B[12]??[]).length>0?S?(S.p(B,C),C[0]&4096&&b(S,1)):(S=kr(B),S.c(),b(S,1),S.m(e,t)):S&&(le(),V(S,1,1,()=>{S=null}),se()),(!R||C[0]&128&&n!==(n="message-edit-"+B[7].id))&&d(s,"id",n),C[0]&2048&&ot(s,B[11]),(!R||C[0]&16384)&&u!==(u=B[14].t("Save")+"")&&J(c,u),(!R||C[0]&16384)&&v!==(v=B[14].t("Cancel")+"")&&J(w,v),(!R||C[0]&16384)&&P!==(P=B[14].t("Send")+"")&&J(O,P)},i(B){R||(b(S),R=!0)},o(B){V(S),R=!1},d(B){B&&m(e),S&&S.d(),r[34](null),M=!1,Xe(T)}}}function hr(r){let e,t;return e=new Dt({props:{id:r[7].id,content:r[7].content}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&128&&(n.id=l[7].id),s[0]&128&&(n.content=l[7].content),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function mr(r){let e,t=r[1].length>1&&gr(r);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,s){t&&t.m(l,s),D(l,e,s)},p(l,s){l[1].length>1?t?t.p(l,s):(t=gr(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function gr(r){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg>',a,f;function u(h,p){return h[9]?of:af}let c=u(r),g=c(r);return{c(){e=y("div"),t=y("button"),t.innerHTML=l,s=j(),g.c(),n=j(),i=y("button"),i.innerHTML=o,this.h()},l(h){e=I(h,"DIV",{class:!0,dir:!0});var p=k(e);t=I(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(t)!=="svelte-buado9"&&(t.innerHTML=l),s=H(p),g.l(p),n=H(p),i=I(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-4phel2"&&(i.innerHTML=o),p.forEach(m),this.h()},h(){d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(i,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(e,"class","flex self-center"),d(e,"dir","ltr")},m(h,p){D(h,e,p),_(e,t),_(e,s),g.m(e,null),_(e,n),_(e,i),a||(f=[me(t,"click",r[40]),me(i,"click",r[44])],a=!0)},p(h,p){c===(c=u(h))&&g?g.p(h,p):(g.d(1),g=c(h),g&&(g.c(),g.m(e,n)))},d(h){h&&m(e),g.d(),a=!1,Xe(f)}}}function af(r){let e,t=r[1].indexOf(r[7].id)+1+"",l,s,n=r[1].length+"",i,o,a;return{c(){e=y("div"),l=W(t),s=W("/"),i=W(n),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);l=q(u,t),s=q(u,"/"),i=q(u,n),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){D(f,e,u),_(e,l),_(e,s),_(e,i),o||(a=me(e,"dblclick",r[43]),o=!0)},p(f,u){u[0]&130&&t!==(t=f[1].indexOf(f[7].id)+1+"")&&J(l,t),u[0]&2&&n!==(n=f[1].length+"")&&J(i,n)},d(f){f&&m(e),o=!1,a()}}}function of(r){let e,t,l,s,n,i,o=r[1].length+"",a,f,u;return{c(){e=y("div"),t=y("input"),i=W("/"),a=W(o),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=k(e);t=I(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),i=q(g,"/"),a=q(g,o),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+r[7].id),d(t,"type","number"),t.value=s=r[1].indexOf(r[7].id)+1,d(t,"min","1"),d(t,"max",n=r[1].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){D(c,e,g),_(e,t),_(e,i),_(e,a),f||(u=[me(t,"focus",bf),me(t,"blur",r[41]),me(t,"keydown",r[42])],f=!0)},p(c,g){g[0]&128&&l!==(l="message-index-input-"+c[7].id)&&d(t,"id",l),g[0]&130&&s!==(s=c[1].indexOf(c[7].id)+1)&&t.value!==s&&(t.value=s),g[0]&2&&n!==(n=c[1].length)&&d(t,"max",n),g[0]&2&&o!==(o=c[1].length+"")&&J(a,o)},d(c){c&&m(e),f=!1,Xe(u)}}}function _r(r){let e,t;return e=new Se({props:{content:r[14].t("Edit"),placement:"bottom",$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&16384&&(n.content=l[14].t("Edit")),s[1]&134217728&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ff(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.3" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg>',l,s;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(n){e=I(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-tlrz1q"&&(e.innerHTML=t),this.h()},h(){d(e,"class","invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button")},m(n,i){D(n,e,i),l||(s=me(e,"click",r[45]),l=!0)},p:Ee,d(n){n&&m(e),l=!1,s()}}}function uf(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.3" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"></path></svg>',l,s;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(n){e=I(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-1ivgdx2"&&(e.innerHTML=t),this.h()},h(){d(e,"class","invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition")},m(n,i){D(n,e,i),l||(s=me(e,"click",r[46]),l=!0)},p:Ee,d(n){n&&m(e),l=!1,s()}}}function pr(r){let e,t;return e=new Se({props:{content:r[14].t("Delete"),placement:"bottom",$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&16384&&(n.content=l[14].t("Delete")),s[0]&256|s[1]&134217728&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function cf(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',l,s;return{c(){e=y("button"),e.innerHTML=t,this.h()},l(n){e=I(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(e)!=="svelte-146x2zz"&&(e.innerHTML=t),this.h()},h(){d(e,"class","invisible group-hover:visible p-1 rounded-sm dark:hover:text-white hover:text-black transition")},m(n,i){D(n,e,i),l||(s=me(e,"click",r[47]),l=!0)},p:Ee,d(n){n&&m(e),l=!1,s()}}}function br(r){let e,t=r[1].length>1&&vr(r);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,s){t&&t.m(l,s),D(l,e,s)},p(l,s){l[1].length>1?t?t.p(l,s):(t=vr(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&m(e),t&&t.d(l)}}}function vr(r){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path></svg>',s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" class="size-3.5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path></svg>',a,f;function u(h,p){return h[9]?hf:df}let c=u(r),g=c(r);return{c(){e=y("div"),t=y("button"),t.innerHTML=l,s=j(),g.c(),n=j(),i=y("button"),i.innerHTML=o,this.h()},l(h){e=I(h,"DIV",{class:!0,dir:!0});var p=k(e);t=I(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(t)!=="svelte-buado9"&&(t.innerHTML=l),s=H(p),g.l(p),n=H(p),i=I(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-4phel2"&&(i.innerHTML=o),p.forEach(m),this.h()},h(){d(t,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(i,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition"),d(e,"class","flex self-center"),d(e,"dir","ltr")},m(h,p){D(h,e,p),_(e,t),_(e,s),g.m(e,null),_(e,n),_(e,i),a||(f=[me(t,"click",r[48]),me(i,"click",r[52])],a=!0)},p(h,p){c===(c=u(h))&&g?g.p(h,p):(g.d(1),g=c(h),g&&(g.c(),g.m(e,n)))},d(h){h&&m(e),g.d(),a=!1,Xe(f)}}}function df(r){let e,t=r[1].indexOf(r[7].id)+1+"",l,s,n=r[1].length+"",i,o,a;return{c(){e=y("div"),l=W(t),s=W("/"),i=W(n),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);l=q(u,t),s=q(u,"/"),i=q(u,n),u.forEach(m),this.h()},h(){d(e,"class","text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit")},m(f,u){D(f,e,u),_(e,l),_(e,s),_(e,i),o||(a=me(e,"dblclick",r[51]),o=!0)},p(f,u){u[0]&130&&t!==(t=f[1].indexOf(f[7].id)+1+"")&&J(l,t),u[0]&2&&n!==(n=f[1].length+"")&&J(i,n)},d(f){f&&m(e),o=!1,a()}}}function hf(r){let e,t,l,s,n,i,o=r[1].length+"",a,f,u;return{c(){e=y("div"),t=y("input"),i=W("/"),a=W(o),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=k(e);t=I(g,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),i=q(g,"/"),a=q(g,o),g.forEach(m),this.h()},h(){d(t,"id",l="message-index-input-"+r[7].id),d(t,"type","number"),t.value=s=r[1].indexOf(r[7].id)+1,d(t,"min","1"),d(t,"max",n=r[1].length),d(t,"class","bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden"),d(e,"class","text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit")},m(c,g){D(c,e,g),_(e,t),_(e,i),_(e,a),f||(u=[me(t,"focus",vf),me(t,"blur",r[49]),me(t,"keydown",r[50])],f=!0)},p(c,g){g[0]&128&&l!==(l="message-index-input-"+c[7].id)&&d(t,"id",l),g[0]&130&&s!==(s=c[1].indexOf(c[7].id)+1)&&t.value!==s&&(t.value=s),g[0]&2&&n!==(n=c[1].length)&&d(t,"max",n),g[0]&2&&o!==(o=c[1].length+"")&&J(a,o)},d(c){c&&m(e),f=!1,Xe(u)}}}function kr(r){let e,t,l=Ne(r[12]),s=[];for(let i=0;i<l.length;i+=1)s[i]=wr(nr(r,l,i));const n=i=>V(s[i],1,1,()=>{s[i]=null});return{c(){e=y("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","flex items-center flex-wrap gap-2 -mx-2 mb-1")},m(i,o){D(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,o){if(o[0]&4096){l=Ne(i[12]);let a;for(a=0;a<l.length;a+=1){const f=nr(i,l,a);s[a]?(s[a].p(f,o),b(s[a],1)):(s[a]=wr(f),s[a].c(),b(s[a],1),s[a].m(e,null))}for(le(),a=l.length;a<s.length;a+=1)n(a);se()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)b(s[o]);t=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)V(s[o]);t=!1},d(i){i&&m(e),Ge(s,i)}}}function mf(r){var n;let e,t;function l(){return r[32](r[55])}function s(){return r[33](r[53])}return e=new $t({props:{item:r[53],name:r[53].name,type:r[53].type,size:(n=r[53])==null?void 0:n.size,loading:r[53].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",l),e.$on("click",s),{c(){X(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,o){x(e,i,o),t=!0},p(i,o){var f;r=i;const a={};o[0]&4096&&(a.item=r[53]),o[0]&4096&&(a.name=r[53].name),o[0]&4096&&(a.type=r[53].type),o[0]&4096&&(a.size=(f=r[53])==null?void 0:f.size),o[0]&4096&&(a.loading=r[53].status==="uploading"),e.$set(a)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){V(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function gf(r){let e,t,l,s,n,i,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',a,f,u,c;l=new Qt({props:{src:r[53].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});function g(){return r[31](r[55])}return{c(){e=y("div"),t=y("div"),X(l.$$.fragment),s=j(),n=y("div"),i=y("button"),i.innerHTML=o,a=j(),this.h()},l(h){e=I(h,"DIV",{class:!0});var p=k(e);t=I(p,"DIV",{class:!0});var v=k(t);$(l.$$.fragment,v),v.forEach(m),s=H(p),n=I(p,"DIV",{class:!0});var w=k(n);i=I(w,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Fe(i)!=="svelte-1ki5d3w"&&(i.innerHTML=o),w.forEach(m),a=H(p),p.forEach(m),this.h()},h(){d(t,"class","relative flex items-center"),d(i,"class","bg-white text-black border border-white rounded-full group-hover:visible invisible transition"),d(i,"type","button"),d(n,"class","absolute -top-1 -right-1"),d(e,"class","relative group")},m(h,p){D(h,e,p),_(e,t),x(l,t,null),_(e,s),_(e,n),_(n,i),_(e,a),f=!0,u||(c=me(i,"click",g),u=!0)},p(h,p){r=h;const v={};p[0]&4096&&(v.src=r[53].url),l.$set(v)},i(h){f||(b(l.$$.fragment,h),f=!0)},o(h){V(l.$$.fragment,h),f=!1},d(h){h&&m(e),ee(l),u=!1,c()}}}function wr(r){let e,t,l,s;const n=[gf,mf],i=[];function o(a,f){return a[53].type==="image"?0:1}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),D(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),V(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){V(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function _f(r){var S;let e,t,l,s,n,i,o,a,f,u,c,g,h,p,v;function w(B){r[28](B)}let E={title:r[14].t("Delete message?")};r[8]!==void 0&&(E.show=r[8]),e=new Jr({props:E}),ze.push(()=>Ye(e,"show",w)),e.$on("confirm",r[29]);let N=!(((S=r[15])==null?void 0:S.chatBubble)??!0)&&ar(r);const P=[Qo,Zo],O=[];function R(B,C){var A;return((A=B[15])==null?void 0:A.chatBubble)??!0?B[7].timestamp?1:-1:0}~(o=R(r))&&(a=O[o]=P[o](r));let M=r[10]!==!0&&fr(r),T=r[7].content!==""&&dr(r);return{c(){X(e.$$.fragment),l=j(),s=y("div"),N&&N.c(),n=j(),i=y("div"),a&&a.c(),f=j(),u=y("div"),M&&M.c(),c=j(),T&&T.c(),this.h()},l(B){$(e.$$.fragment,B),l=H(B),s=I(B,"DIV",{class:!0,dir:!0,id:!0});var C=k(s);N&&N.l(C),n=H(C),i=I(C,"DIV",{class:!0});var A=k(i);a&&a.l(A),f=H(A),u=I(A,"DIV",{class:!0});var F=k(u);M&&M.l(F),c=H(F),T&&T.l(F),F.forEach(m),A.forEach(m),C.forEach(m),this.h()},h(){d(u,"class",g="chat-"+r[7].role+" w-full min-w-full markdown-prose"),d(i,"class","flex-auto w-0 max-w-full pl-1"),d(s,"class","flex w-full user-message group"),d(s,"dir",h=r[15].chatDirection),d(s,"id",p="message-"+r[7].id)},m(B,C){x(e,B,C),D(B,l,C),D(B,s,C),N&&N.m(s,null),_(s,n),_(s,i),~o&&O[o].m(i,null),_(i,f),_(i,u),M&&M.m(u,null),_(u,c),T&&T.m(u,null),v=!0},p(B,C){var z;const A={};C[0]&16384&&(A.title=B[14].t("Delete message?")),!t&&C[0]&256&&(t=!0,A.show=B[8],Qe(()=>t=!1)),e.$set(A),((z=B[15])==null?void 0:z.chatBubble)??!0?N&&(le(),V(N,1,1,()=>{N=null}),se()):N?(N.p(B,C),C[0]&32768&&b(N,1)):(N=ar(B),N.c(),b(N,1),N.m(s,n));let F=o;o=R(B),o===F?~o&&O[o].p(B,C):(a&&(le(),V(O[F],1,1,()=>{O[F]=null}),se()),~o?(a=O[o],a?a.p(B,C):(a=O[o]=P[o](B),a.c()),b(a,1),a.m(i,f)):a=null),B[10]!==!0?M?(M.p(B,C),C[0]&1024&&b(M,1)):(M=fr(B),M.c(),b(M,1),M.m(u,c)):M&&(le(),V(M,1,1,()=>{M=null}),se()),B[7].content!==""?T?(T.p(B,C),C[0]&128&&b(T,1)):(T=dr(B),T.c(),b(T,1),T.m(u,null)):T&&(le(),V(T,1,1,()=>{T=null}),se()),(!v||C[0]&128&&g!==(g="chat-"+B[7].role+" w-full min-w-full markdown-prose"))&&d(u,"class",g),(!v||C[0]&32768&&h!==(h=B[15].chatDirection))&&d(s,"dir",h),(!v||C[0]&128&&p!==(p="message-"+B[7].id))&&d(s,"id",p)},i(B){v||(b(e.$$.fragment,B),b(N),b(a),b(M),b(T),v=!0)},o(B){V(e.$$.fragment,B),V(N),V(a),V(M),V(T),v=!1},d(B){B&&(m(l),m(s)),ee(e,B),N&&N.d(),~o&&O[o].d(),M&&M.d(),T&&T.d()}}}const pf=r=>{r.target.style.height="",r.target.style.height=`${r.target.scrollHeight}px`},bf=r=>{r.target.select()},vf=r=>{r.target.select()};function kf(r,e,t){let l,s,n,i;Me(r,gt,ne=>t(15,s=ne)),Me(r,zt,ne=>t(16,n=ne)),Me(r,Ut,ne=>t(17,i=ne));const o=Je("i18n");Me(r,o,ne=>t(14,l=ne)),nt.extend(Ur);let{user:a}=e,{history:f}=e,{messageId:u}=e,{siblings:c}=e,{gotoMessage:g}=e,{showPreviousMessage:h}=e,{showNextMessage:p}=e,{editMessage:v}=e,{deleteMessage:w}=e,{isFirstMessage:E}=e,{readOnly:N}=e,P=!1,O=!1,R=!1,M="",T=[],S,B=JSON.parse(JSON.stringify(f.messages[u]));const C=async ne=>{await zr(ne)&&Ae.success(l.t("Copying to clipboard was successful!"))},A=async()=>{t(10,R=!0),t(11,M=B.content),t(12,T=B.files),await Ce(),S&&(t(13,S.style.height="",S),t(13,S.style.height=`${S.scrollHeight}px`,S),S==null||S.focus())},F=async(ne=!0)=>{v(B.id,{content:M,files:T},ne),t(10,R=!1),t(11,M=""),t(12,T=[])},z=()=>{t(10,R=!1),t(11,M=""),t(12,T=[])},re=async()=>{w(B.id)};wt(()=>{});function Q(ne){P=ne,t(8,P)}const ie=()=>{re()},ge=ne=>ne.id===B.user,he=ne=>{T.splice(ne,1),t(12,T)},ye=async ne=>{T.splice(ne,1),t(12,T)},Z=ne=>{};function oe(ne){ze[ne?"unshift":"push"](()=>{S=ne,t(13,S)})}function pe(){M=this.value,t(11,M)}const ae=ne=>{var tt,Ke;ne.key==="Escape"&&((tt=document.getElementById("close-edit-message-button"))==null||tt.click());const We=ne.metaKey||ne.ctrlKey,et=ne.key==="Enter";We&&et&&((Ke=document.getElementById("confirm-edit-message-button"))==null||Ke.click())},ce=()=>{F(!1)},G=()=>{z()},_e=()=>{F()},fe=()=>{h(B)},be=ne=>{g(B,ne.target.value-1),t(9,O=!1)},L=ne=>{ne.key==="Enter"&&(g(B,ne.target.value-1),t(9,O=!1))},K=async()=>{t(9,O=!0),await Ce();const ne=document.getElementById(`message-index-input-${B.id}`);ne&&(ne.focus(),ne.select())},te=()=>{p(B)},Y=()=>{A()},ue=()=>{C(B.content)},ve=()=>{t(8,P=!0)},Ve=()=>{h(B)},De=ne=>{g(B,ne.target.value-1),t(9,O=!1)},je=ne=>{ne.key==="Enter"&&(g(B,ne.target.value-1),t(9,O=!1))},He=async()=>{t(9,O=!0),await Ce();const ne=document.getElementById(`message-index-input-${B.id}`);ne&&(ne.focus(),ne.select())},Ue=()=>{p(B)};return r.$$set=ne=>{"user"in ne&&t(0,a=ne.user),"history"in ne&&t(24,f=ne.history),"messageId"in ne&&t(25,u=ne.messageId),"siblings"in ne&&t(1,c=ne.siblings),"gotoMessage"in ne&&t(2,g=ne.gotoMessage),"showPreviousMessage"in ne&&t(3,h=ne.showPreviousMessage),"showNextMessage"in ne&&t(4,p=ne.showNextMessage),"editMessage"in ne&&t(26,v=ne.editMessage),"deleteMessage"in ne&&t(27,w=ne.deleteMessage),"isFirstMessage"in ne&&t(5,E=ne.isFirstMessage),"readOnly"in ne&&t(6,N=ne.readOnly)},r.$$.update=()=>{r.$$.dirty[0]&50331776&&f.messages&&JSON.stringify(B)!==JSON.stringify(f.messages[u])&&t(7,B=JSON.parse(JSON.stringify(f.messages[u])))},[a,c,g,h,p,E,N,B,P,O,R,M,T,S,l,s,n,i,o,C,A,F,z,re,f,u,v,w,Q,ie,ge,he,ye,Z,oe,pe,ae,ce,G,_e,fe,be,L,K,te,Y,ue,ve,Ve,De,je,He,Ue]}class wf extends Le{constructor(e){super(),Pe(this,e,kf,_f,Be,{user:0,history:24,messageId:25,siblings:1,gotoMessage:2,showPreviousMessage:3,showNextMessage:4,editMessage:26,deleteMessage:27,isFirstMessage:5,readOnly:6},null,[-1,-1])}}function yr(r){let e,t,l,s;const n=[Ef,If,yf],i=[];function o(a,f){var u,c;return a[0].messages[a[3]].role==="user"?0:(((c=(u=a[0].messages[a[0].messages[a[3]].parentId])==null?void 0:u.models)==null?void 0:c.length)??1)===1?1:2}return e=o(r),t=i[e]=n[e](r),{c(){t.c(),l=de()},l(a){t.l(a),l=de()},m(a,f){i[e].m(a,f),D(a,l,f),s=!0},p(a,f){let u=e;e=o(a),e===u?i[e].p(a,f):(le(),V(i[u],1,1,()=>{i[u]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){s||(b(t),s=!0)},o(a){V(t),s=!1},d(a){a&&m(l),i[e].d(a)}}}function yf(r){var i;let e,t,l;function s(o){r[22](o)}let n={chatId:r[1],messageId:r[3],isLastMessage:r[3]===((i=r[0])==null?void 0:i.currentId),updateChat:r[8],editMessage:r[9],saveMessage:r[10],rateMessage:r[12],actionMessage:r[13],submitMessage:r[14],deleteMessage:r[11],continueResponse:r[16],regenerateResponse:r[15],mergeResponses:r[17],triggerScroll:r[19],addMessages:r[18],readOnly:r[20]};return r[0]!==void 0&&(n.history=r[0]),e=new Ko({props:n}),ze.push(()=>Ye(e,"history",s)),{c(){X(e.$$.fragment)},l(o){$(e.$$.fragment,o)},m(o,a){x(e,o,a),l=!0},p(o,a){var u;const f={};a&2&&(f.chatId=o[1]),a&8&&(f.messageId=o[3]),a&9&&(f.isLastMessage=o[3]===((u=o[0])==null?void 0:u.currentId)),a&256&&(f.updateChat=o[8]),a&512&&(f.editMessage=o[9]),a&1024&&(f.saveMessage=o[10]),a&4096&&(f.rateMessage=o[12]),a&8192&&(f.actionMessage=o[13]),a&16384&&(f.submitMessage=o[14]),a&2048&&(f.deleteMessage=o[11]),a&65536&&(f.continueResponse=o[16]),a&32768&&(f.regenerateResponse=o[15]),a&131072&&(f.mergeResponses=o[17]),a&524288&&(f.triggerScroll=o[19]),a&262144&&(f.addMessages=o[18]),a&1048576&&(f.readOnly=o[20]),!t&&a&1&&(t=!0,f.history=o[0],Qe(()=>t=!1)),e.$set(f)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){V(e.$$.fragment,o),l=!1},d(o){ee(e,o)}}}function If(r){var l;let e,t;return e=new Zr({props:{chatId:r[1],history:r[0],messageId:r[3],isLastMessage:r[3]===r[0].currentId,siblings:((l=r[0].messages[r[0].messages[r[3]].parentId])==null?void 0:l.childrenIds)??[],gotoMessage:r[5],showPreviousMessage:r[6],showNextMessage:r[7],updateChat:r[8],editMessage:r[9],saveMessage:r[10],rateMessage:r[12],actionMessage:r[13],submitMessage:r[14],deleteMessage:r[11],continueResponse:r[16],regenerateResponse:r[15],addMessages:r[18],readOnly:r[20]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n&2&&(i.chatId=s[1]),n&1&&(i.history=s[0]),n&8&&(i.messageId=s[3]),n&9&&(i.isLastMessage=s[3]===s[0].currentId),n&9&&(i.siblings=((o=s[0].messages[s[0].messages[s[3]].parentId])==null?void 0:o.childrenIds)??[]),n&32&&(i.gotoMessage=s[5]),n&64&&(i.showPreviousMessage=s[6]),n&128&&(i.showNextMessage=s[7]),n&256&&(i.updateChat=s[8]),n&512&&(i.editMessage=s[9]),n&1024&&(i.saveMessage=s[10]),n&4096&&(i.rateMessage=s[12]),n&8192&&(i.actionMessage=s[13]),n&16384&&(i.submitMessage=s[14]),n&2048&&(i.deleteMessage=s[11]),n&65536&&(i.continueResponse=s[16]),n&32768&&(i.regenerateResponse=s[15]),n&262144&&(i.addMessages=s[18]),n&1048576&&(i.readOnly=s[20]),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function Ef(r){var l;let e,t;return e=new wf({props:{user:r[4],history:r[0],messageId:r[3],isFirstMessage:r[2]===0,siblings:r[0].messages[r[3]].parentId!==null?((l=r[0].messages[r[0].messages[r[3]].parentId])==null?void 0:l.childrenIds)??[]:Object.values(r[0].messages).filter(Ir).map(Er)??[],gotoMessage:r[5],showPreviousMessage:r[6],showNextMessage:r[7],editMessage:r[9],deleteMessage:r[11],readOnly:r[20]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,n){x(e,s,n),t=!0},p(s,n){var o;const i={};n&16&&(i.user=s[4]),n&1&&(i.history=s[0]),n&8&&(i.messageId=s[3]),n&4&&(i.isFirstMessage=s[2]===0),n&9&&(i.siblings=s[0].messages[s[3]].parentId!==null?((o=s[0].messages[s[0].messages[s[3]].parentId])==null?void 0:o.childrenIds)??[]:Object.values(s[0].messages).filter(Ir).map(Er)??[]),n&32&&(i.gotoMessage=s[5]),n&64&&(i.showPreviousMessage=s[6]),n&128&&(i.showNextMessage=s[7]),n&512&&(i.editMessage=s[9]),n&2048&&(i.deleteMessage=s[11]),n&1048576&&(i.readOnly=s[20]),e.$set(i)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function Mf(r){let e,t,l,s=r[0].messages[r[3]]&&yr(r);return{c(){e=y("div"),s&&s.c(),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=k(e);s&&s.l(i),i.forEach(m),this.h()},h(){var n;d(e,"class",t="flex flex-col justify-between px-5 mb-3 w-full "+(((n=r[21])==null?void 0:n.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto rounded-lg group")},m(n,i){D(n,e,i),s&&s.m(e,null),l=!0},p(n,[i]){var o;n[0].messages[n[3]]?s?(s.p(n,i),i&9&&b(s,1)):(s=yr(n),s.c(),b(s,1),s.m(e,null)):s&&(le(),V(s,1,1,()=>{s=null}),se()),(!l||i&2097152&&t!==(t="flex flex-col justify-between px-5 mb-3 w-full "+(((o=n[21])==null?void 0:o.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto rounded-lg group"))&&d(e,"class",t)},i(n){l||(b(s),l=!0)},o(n){V(s),l=!1},d(n){n&&m(e),s&&s.d()}}}const Ir=r=>r.parentId===null,Er=r=>r.id;function Nf(r,e,t){let l;Me(r,gt,C=>t(21,l=C)),kt(),Je("i18n");let{chatId:s}=e,{idx:n=0}=e,{history:i}=e,{messageId:o}=e,{user:a}=e,{gotoMessage:f}=e,{showPreviousMessage:u}=e,{showNextMessage:c}=e,{updateChat:g}=e,{editMessage:h}=e,{saveMessage:p}=e,{deleteMessage:v}=e,{rateMessage:w}=e,{actionMessage:E}=e,{submitMessage:N}=e,{regenerateResponse:P}=e,{continueResponse:O}=e,{mergeResponses:R}=e,{addMessages:M}=e,{triggerScroll:T}=e,{readOnly:S=!1}=e;function B(C){i=C,t(0,i)}return r.$$set=C=>{"chatId"in C&&t(1,s=C.chatId),"idx"in C&&t(2,n=C.idx),"history"in C&&t(0,i=C.history),"messageId"in C&&t(3,o=C.messageId),"user"in C&&t(4,a=C.user),"gotoMessage"in C&&t(5,f=C.gotoMessage),"showPreviousMessage"in C&&t(6,u=C.showPreviousMessage),"showNextMessage"in C&&t(7,c=C.showNextMessage),"updateChat"in C&&t(8,g=C.updateChat),"editMessage"in C&&t(9,h=C.editMessage),"saveMessage"in C&&t(10,p=C.saveMessage),"deleteMessage"in C&&t(11,v=C.deleteMessage),"rateMessage"in C&&t(12,w=C.rateMessage),"actionMessage"in C&&t(13,E=C.actionMessage),"submitMessage"in C&&t(14,N=C.submitMessage),"regenerateResponse"in C&&t(15,P=C.regenerateResponse),"continueResponse"in C&&t(16,O=C.continueResponse),"mergeResponses"in C&&t(17,R=C.mergeResponses),"addMessages"in C&&t(18,M=C.addMessages),"triggerScroll"in C&&t(19,T=C.triggerScroll),"readOnly"in C&&t(20,S=C.readOnly)},[i,s,n,o,a,f,u,c,g,h,p,v,w,E,N,P,O,R,M,T,S,l,B]}class Df extends Le{constructor(e){super(),Pe(this,e,Nf,Mf,Be,{chatId:1,idx:2,history:0,messageId:3,user:4,gotoMessage:5,showPreviousMessage:6,showNextMessage:7,updateChat:8,editMessage:9,saveMessage:10,deleteMessage:11,rateMessage:12,actionMessage:13,submitMessage:14,regenerateResponse:15,continueResponse:16,mergeResponses:17,addMessages:18,triggerScroll:19,readOnly:20})}}function Mr(r,e,t){const l=r.slice();return l[14]=e[t],l[16]=t,l}function Vf(r){let e,t,l,s,n;return{c(){e=y("div"),t=W(r[4]),l=W("  v"),s=W(bl),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);t=q(o,r[4]),l=q(o,"  v"),s=q(o,bl),o.forEach(m),this.h()},h(){var i;d(e,"class",n="flex w-full "+(((i=r[3])==null?void 0:i.landingPageMode)==="chat"?" -mt-1":"text-center items-center justify-center")+" self-start text-gray-600 dark:text-gray-400")},m(i,o){D(i,e,o),_(e,t),_(e,l),_(e,s)},p(i,o){var a;o&16&&J(t,i[4]),o&8&&n!==(n="flex w-full "+(((a=i[3])==null?void 0:a.landingPageMode)==="chat"?" -mt-1":"text-center items-center justify-center")+" self-start text-gray-600 dark:text-gray-400")&&d(e,"class",n)},i:Ee,o:Ee,d(i){i&&m(e)}}}function Cf(r){let e,t,l=r[2].t("Suggested")+"",s,n;return e=new Kn({}),{c(){X(e.$$.fragment),t=j(),s=W(l)},l(i){$(e.$$.fragment,i),t=H(i),s=q(i,l)},m(i,o){x(e,i,o),D(i,t,o),D(i,s,o),n=!0},p(i,o){(!n||o&4)&&l!==(l=i[2].t("Suggested")+"")&&J(s,l)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){V(e.$$.fragment,i),n=!1},d(i){i&&(m(t),m(s)),ee(e,i)}}}function Nr(r){let e,t=[],l=new Map,s,n=Ne(r[1]);const i=o=>o[14].id||o[14].content;for(let o=0;o<n.length;o+=1){let a=Mr(r,n,o),f=i(a);l.set(f,t[o]=Dr(f,a))}return{c(){e=y("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0});var a=k(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(m),this.h()},h(){d(e,"class",s="max-h-40 overflow-auto scrollbar-none items-start "+r[0]+" svelte-1co34if")},m(o,a){D(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(o,a){a&70&&(n=Ne(o[1]),t=Ht(t,a,i,1,o,n,l,e,Cn,Dr,null,Mr)),a&1&&s!==(s="max-h-40 overflow-auto scrollbar-none items-start "+o[0]+" svelte-1co34if")&&d(e,"class",s)},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Tf(r){let e,t=r[14].content+"",l,s,n,i=r[2].t("Prompt")+"",o;return{c(){e=y("div"),l=W(t),s=j(),n=y("div"),o=W(i),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=H(a),n=I(a,"DIV",{class:!0});var u=k(n);o=q(u,i),u.forEach(m),this.h()},h(){d(e,"class","font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1"),d(n,"class","text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1")},m(a,f){D(a,e,f),_(e,l),D(a,s,f),D(a,n,f),_(n,o)},p(a,f){f&2&&t!==(t=a[14].content+"")&&J(l,t),f&4&&i!==(i=a[2].t("Prompt")+"")&&J(o,i)},d(a){a&&(m(e),m(s),m(n))}}}function Bf(r){let e,t=r[14].title[0]+"",l,s,n,i=r[14].title[1]+"",o;return{c(){e=y("div"),l=W(t),s=j(),n=y("div"),o=W(i),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=k(e);l=q(f,t),f.forEach(m),s=H(a),n=I(a,"DIV",{class:!0});var u=k(n);o=q(u,i),u.forEach(m),this.h()},h(){d(e,"class","font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1"),d(n,"class","text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1")},m(a,f){D(a,e,f),_(e,l),D(a,s,f),D(a,n,f),_(n,o)},p(a,f){f&2&&t!==(t=a[14].title[0]+"")&&J(l,t),f&2&&i!==(i=a[14].title[1]+"")&&J(o,i)},d(a){a&&(m(e),m(s),m(n))}}}function Dr(r,e){let t,l,s,n,i;function o(c,g){return c[14].title&&c[14].title[0]!==""?Bf:Tf}let a=o(e),f=a(e);function u(){return e[10](e[14])}return{key:r,first:null,c(){t=y("button"),l=y("div"),f.c(),s=j(),this.h()},l(c){t=I(c,"BUTTON",{class:!0,style:!0});var g=k(t);l=I(g,"DIV",{class:!0});var h=k(l);f.l(h),h.forEach(m),s=H(g),g.forEach(m),this.h()},h(){d(l,"class","flex flex-col text-left"),d(t,"class","waterfall flex flex-col flex-1 shrink-0 w-full justify-between px-3 py-2 rounded-xl bg-transparent hover:bg-black/5 dark:hover:bg-white/5 transition group svelte-1co34if"),Lt(t,"animation-delay",e[16]*60+"ms"),this.first=t},m(c,g){D(c,t,g),_(t,l),f.m(l,null),_(t,s),n||(i=me(t,"click",u),n=!0)},p(c,g){e=c,a===(a=o(e))&&f?f.p(e,g):(f.d(1),f=a(e),f&&(f.c(),f.m(l,null))),g&2&&Lt(t,"animation-delay",e[16]*60+"ms")},d(c){c&&m(t),f.d(),n=!1,i()}}}function Sf(r){let e,t,l,s,n,i;const o=[Cf,Vf],a=[];function f(c,g){return c[1].length>0?0:1}t=f(r),l=a[t]=o[t](r);let u=r[1].length>0&&Nr(r);return{c(){e=y("div"),l.c(),s=j(),n=y("div"),u&&u.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=k(e);l.l(g),g.forEach(m),s=H(c),n=I(c,"DIV",{class:!0});var h=k(n);u&&u.l(h),h.forEach(m),this.h()},h(){d(e,"class","mb-1 flex gap-1 text-xs font-medium items-center text-gray-600 dark:text-gray-400"),d(n,"class","h-40 w-full")},m(c,g){D(c,e,g),a[t].m(e,null),D(c,s,g),D(c,n,g),u&&u.m(n,null),i=!0},p(c,[g]){let h=t;t=f(c),t===h?a[t].p(c,g):(le(),V(a[h],1,1,()=>{a[h]=null}),se(),l=a[t],l?l.p(c,g):(l=a[t]=o[t](c),l.c()),b(l,1),l.m(e,null)),c[1].length>0?u?u.p(c,g):(u=Nr(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i(c){i||(b(l),i=!0)},o(c){V(l),i=!1},d(c){c&&(m(e),m(s),m(n)),a[t].d(),u&&u.d()}}}function Rf(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if((r[t].id??r[t].content)!==(e[t].id??e[t].content))return!1;return!0}function Of(r,e,t){let l,s,n;Me(r,gt,E=>t(3,s=E)),Me(r,Rn,E=>t(4,n=E));const i=Je("i18n");Me(r,i,E=>t(2,l=E));const o=kt();let{suggestionPrompts:a=[]}=e,{className:f=""}=e,{inputValue:u=""}=e,c=[];const g={keys:["content","title"],threshold:.5};let h,p=[];const v=E=>{if(E.length>500)t(1,p=[]);else{const N=E.trim()&&h?h.search(E.trim()).map(P=>P.item):c;Rf(p,N)||t(1,p=N)}},w=E=>o("select",E.content);return r.$$set=E=>{"suggestionPrompts"in E&&t(7,a=E.suggestionPrompts),"className"in E&&t(0,f=E.className),"inputValue"in E&&t(8,u=E.inputValue)},r.$$.update=()=>{r.$$.dirty&384&&a&&(t(9,c=[...a??[]].sort(()=>Math.random()-.5)),v(u)),r.$$.dirty&512&&(h=new ei(c,g)),r.$$.dirty&256&&v(u)},[f,p,l,s,n,i,o,a,u,c,w]}class Lf extends Le{constructor(e){super(),Pe(this,e,Of,Sf,Be,{suggestionPrompts:7,className:0,inputValue:8})}}function Vr(r,e,t){const l=r.slice();return l[14]=e[t],l[16]=t,l}function Pf(r){let e,t;return{c(){e=y("img"),this.h()},l(l){e=I(l,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),this.h()},h(){var l,s,n;d(e,"crossorigin","anonymous"),Pt(e.src,t=((n=(s=(l=r[14])==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:n.profile_image_url)??(r[5].language==="dg-DG"?"/doge.png":`${At}/static/favicon.png`))||d(e,"src",t),d(e,"class","size-[2.7rem] rounded-full border-[1px] border-gray-100 dark:border-none"),d(e,"alt","logo"),d(e,"draggable","false")},m(l,s){D(l,e,s)},p(l,s){var n,i,o;s&33&&!Pt(e.src,t=((o=(i=(n=l[14])==null?void 0:n.info)==null?void 0:i.meta)==null?void 0:o.profile_image_url)??(l[5].language==="dg-DG"?"/doge.png":`${At}/static/favicon.png`))&&d(e,"src",t)},d(l){l&&m(e)}}}function Cr(r){var a,f,u;let e,t,l,s,n,i;t=new Se({props:{content:jt.parse(bt(((u=(f=(a=r[0][r[4]])==null?void 0:a.info)==null?void 0:f.meta)==null?void 0:u.description)??"")),placement:"right",$$slots:{default:[Pf]},$$scope:{ctx:r}}});function o(){return r[12](r[16])}return{c(){e=y("button"),X(t.$$.fragment),l=j()},l(c){e=I(c,"BUTTON",{});var g=k(e);$(t.$$.fragment,g),l=H(g),g.forEach(m)},m(c,g){D(c,e,g),x(t,e,null),_(e,l),s=!0,n||(i=me(e,"click",o),n=!0)},p(c,g){var p,v,w;r=c;const h={};g&17&&(h.content=jt.parse(bt(((w=(v=(p=r[0][r[4]])==null?void 0:p.info)==null?void 0:v.meta)==null?void 0:w.description)??""))),g&131105&&(h.$$scope={dirty:g,ctx:r}),t.$set(h)},i(c){s||(b(t.$$.fragment,c),s=!0)},o(c){V(t.$$.fragment,c),s=!1},d(c){c&&m(e),ee(t),n=!1,i()}}}function Tr(r){let e,t;return e=new Se({props:{content:r[5].t("This chat wont appear in history and your messages will not be saved."),className:"w-full flex justify-start mb-0.5",placement:"top",$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s&32&&(n.content=l[5].t("This chat wont appear in history and your messages will not be saved.")),s&131104&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Af(r){let e,t,l=r[5].t("Temporary Chat")+"",s,n;return t=new ti({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=y("div"),X(t.$$.fragment),s=W(l),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);$(t.$$.fragment,o),s=q(o,l),o.forEach(m),this.h()},h(){d(e,"class","flex items-center gap-2 text-gray-500 font-medium text-lg mt-2 w-fit")},m(i,o){D(i,e,o),x(t,e,null),_(e,s),n=!0},p(i,o){(!n||o&32)&&l!==(l=i[5].t("Temporary Chat")+"")&&J(s,l)},i(i){n||(b(t.$$.fragment,i),n=!0)},o(i){V(t.$$.fragment,i),n=!1},d(i){i&&m(e),ee(t)}}}function jf(r){var l;let e=r[5].t("Hello, {{name}}",{name:(l=r[7])==null?void 0:l.name})+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){D(s,t,n)},p(s,n){var i;n&160&&e!==(e=s[5].t("Hello, {{name}}",{name:(i=s[7])==null?void 0:i.name})+"")&&J(t,e)},d(s){s&&m(t)}}}function Hf(r){var l;let e=((l=r[0][r[4]])==null?void 0:l.name)+"",t;return{c(){t=W(e)},l(s){t=q(s,e)},m(s,n){D(s,t,n)},p(s,n){var i;n&17&&e!==(e=((i=s[0][s[4]])==null?void 0:i.name)+"")&&J(t,e)},d(s){s&&m(t)}}}function zf(r){let e,t=r[5].t("How can I help you today?")+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=k(e);l=q(n,t),n.forEach(m),this.h()},h(){d(e,"class","font-medium text-gray-400 dark:text-gray-500 line-clamp-1 font-p")},m(s,n){D(s,e,n),_(e,l)},p(s,n){n&32&&t!==(t=s[5].t("How can I help you today?")+"")&&J(l,t)},d(s){s&&m(e)}}}function Uf(r){var o,a,f,u,c,g;let e,t,l=jt.parse(bt((f=(a=(o=r[0][r[4]])==null?void 0:o.info)==null?void 0:a.meta)==null?void 0:f.description))+"",s,n,i=((g=(c=(u=r[0][r[4]])==null?void 0:u.info)==null?void 0:c.meta)==null?void 0:g.user)&&Br(r);return{c(){e=y("div"),t=new Dn(!1),s=j(),i&&i.c(),n=de(),this.h()},l(h){e=I(h,"DIV",{class:!0});var p=k(e);t=Vn(p,!1),p.forEach(m),s=H(h),i&&i.l(h),n=de(),this.h()},h(){t.a=null,d(e,"class","mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown")},m(h,p){D(h,e,p),t.m(l,e),D(h,s,p),i&&i.m(h,p),D(h,n,p)},p(h,p){var v,w,E,N,P,O;p&17&&l!==(l=jt.parse(bt((E=(w=(v=h[0][h[4]])==null?void 0:v.info)==null?void 0:w.meta)==null?void 0:E.description))+"")&&t.p(l),(O=(P=(N=h[0][h[4]])==null?void 0:N.info)==null?void 0:P.meta)!=null&&O.user?i?i.p(h,p):(i=Br(h),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(h){h&&(m(e),m(s),m(n)),i&&i.d(h)}}}function Br(r){let e,t;function l(i,o){var a,f,u;return(u=(f=(a=i[0][i[4]])==null?void 0:a.info)==null?void 0:f.meta)!=null&&u.user.community?qf:Wf}let s=l(r),n=s(r);return{c(){e=y("div"),t=W(`By
								`),n.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=k(e);t=q(o,`By
								`),n.l(o),o.forEach(m),this.h()},h(){d(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(i,o){D(i,e,o),_(e,t),n.m(e,null)},p(i,o){s===(s=l(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e,null)))},d(i){i&&m(e),n.d()}}}function Wf(r){var l,s,n;let e=((n=(s=(l=r[0][r[4]])==null?void 0:l.info)==null?void 0:s.meta)==null?void 0:n.user.name)+"",t;return{c(){t=W(e)},l(i){t=q(i,e)},m(i,o){D(i,t,o)},p(i,o){var a,f,u;o&17&&e!==(e=((u=(f=(a=i[0][i[4]])==null?void 0:a.info)==null?void 0:f.meta)==null?void 0:u.user.name)+"")&&J(t,e)},d(i){i&&m(t)}}}function qf(r){var n,i,o,a,f,u,c,g,h;let e,t=((o=(i=(n=r[0][r[4]])==null?void 0:n.info)==null?void 0:i.meta)!=null&&o.user.name?(u=(f=(a=r[0][r[4]])==null?void 0:a.info)==null?void 0:f.meta)==null?void 0:u.user.name:`@${(h=(g=(c=r[0][r[4]])==null?void 0:c.info)==null?void 0:g.meta)==null?void 0:h.user.username}`)+"",l,s;return{c(){e=y("a"),l=W(t),this.h()},l(p){e=I(p,"A",{href:!0});var v=k(e);l=q(v,t),v.forEach(m),this.h()},h(){var p,v,w;d(e,"href",s="https://openwebui.com/m/"+((w=(v=(p=r[0][r[4]])==null?void 0:p.info)==null?void 0:v.meta)==null?void 0:w.user.username))},m(p,v){D(p,e,v),_(e,l)},p(p,v){var w,E,N,P,O,R,M,T,S,B,C,A;v&17&&t!==(t=((N=(E=(w=p[0][p[4]])==null?void 0:w.info)==null?void 0:E.meta)!=null&&N.user.name?(R=(O=(P=p[0][p[4]])==null?void 0:P.info)==null?void 0:O.meta)==null?void 0:R.user.name:`@${(S=(T=(M=p[0][p[4]])==null?void 0:M.info)==null?void 0:T.meta)==null?void 0:S.user.username}`)+"")&&J(l,t),v&17&&s!==(s="https://openwebui.com/m/"+((A=(C=(B=p[0][p[4]])==null?void 0:B.info)==null?void 0:C.meta)==null?void 0:A.user.username))&&d(e,"href",s)},d(p){p&&m(e)}}}function Sr(r){var z,re,Q,ie,ge,he,ye;let e,t,l,s,n,i,o,a,f,u,c,g,h,p,v,w,E,N,P=Ne(r[0]),O=[];for(let Z=0;Z<P.length;Z+=1)O[Z]=Cr(Vr(r,P,Z));const R=Z=>V(O[Z],1,1,()=>{O[Z]=null});let M=r[6]&&Tr(r);function T(Z,oe){var pe;return(pe=Z[0][Z[4]])!=null&&pe.name?Hf:jf}let S=T(r),B=S(r);function C(Z,oe){var pe,ae,ce;return((ce=(ae=(pe=Z[0][Z[4]])==null?void 0:pe.info)==null?void 0:ae.meta)==null?void 0:ce.description)??null?Uf:zf}let A=C(r),F=A(r);return w=new Lf({props:{className:"grid grid-cols-2",suggestionPrompts:((Q=(re=(z=r[1])==null?void 0:z.info)==null?void 0:re.meta)==null?void 0:Q.suggestion_prompts)??((he=(ge=(ie=r[0][r[4]])==null?void 0:ie.info)==null?void 0:ge.meta)==null?void 0:he.suggestion_prompts)??((ye=r[8])==null?void 0:ye.default_prompt_suggestions)??[]}}),w.$on("select",r[13]),{c(){e=y("div"),t=y("div"),l=y("div");for(let Z=0;Z<O.length;Z+=1)O[Z].c();n=j(),M&&M.c(),i=j(),o=y("div"),a=y("div"),f=y("div"),B.c(),c=j(),g=y("div"),F.c(),p=j(),v=y("div"),X(w.$$.fragment),this.h()},l(Z){e=I(Z,"DIV",{class:!0});var oe=k(e);t=I(oe,"DIV",{class:!0});var pe=k(t);l=I(pe,"DIV",{class:!0});var ae=k(l);for(let L=0;L<O.length;L+=1)O[L].l(ae);ae.forEach(m),pe.forEach(m),n=H(oe),M&&M.l(oe),i=H(oe),o=I(oe,"DIV",{class:!0});var ce=k(o);a=I(ce,"DIV",{});var G=k(a);f=I(G,"DIV",{class:!0});var _e=k(f);B.l(_e),_e.forEach(m),c=H(G),g=I(G,"DIV",{});var fe=k(g);F.l(fe),fe.forEach(m),G.forEach(m),ce.forEach(m),p=H(oe),v=I(oe,"DIV",{class:!0});var be=k(v);$(w.$$.fragment,be),be.forEach(m),oe.forEach(m),this.h()},h(){d(l,"class","flex -space-x-4 mb-0.5"),d(t,"class","flex justify-start"),d(f,"class","capitalize line-clamp-1"),d(o,"class","mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 font-medium text-left flex items-center gap-4 font-primary"),d(v,"class","w-full font-primary"),d(e,"class","m-auto w-full max-w-6xl px-8 lg:px-20")},m(Z,oe){D(Z,e,oe),_(e,t),_(t,l);for(let pe=0;pe<O.length;pe+=1)O[pe]&&O[pe].m(l,null);_(e,n),M&&M.m(e,null),_(e,i),_(e,o),_(o,a),_(a,f),B.m(f,null),_(a,c),_(a,g),F.m(g,null),_(e,p),_(e,v),x(w,v,null),N=!0},p(Z,oe){var ae,ce,G,_e,fe,be,L;if(oe&49){P=Ne(Z[0]);let K;for(K=0;K<P.length;K+=1){const te=Vr(Z,P,K);O[K]?(O[K].p(te,oe),b(O[K],1)):(O[K]=Cr(te),O[K].c(),b(O[K],1),O[K].m(l,null))}for(le(),K=P.length;K<O.length;K+=1)R(K);se()}Z[6]?M?(M.p(Z,oe),oe&64&&b(M,1)):(M=Tr(Z),M.c(),b(M,1),M.m(e,i)):M&&(le(),V(M,1,1,()=>{M=null}),se()),S===(S=T(Z))&&B?B.p(Z,oe):(B.d(1),B=S(Z),B&&(B.c(),B.m(f,null))),A===(A=C(Z))&&F?F.p(Z,oe):(F.d(1),F=A(Z),F&&(F.c(),F.m(g,null)));const pe={};oe&275&&(pe.suggestionPrompts=((G=(ce=(ae=Z[1])==null?void 0:ae.info)==null?void 0:ce.meta)==null?void 0:G.suggestion_prompts)??((be=(fe=(_e=Z[0][Z[4]])==null?void 0:_e.info)==null?void 0:fe.meta)==null?void 0:be.suggestion_prompts)??((L=Z[8])==null?void 0:L.default_prompt_suggestions)??[]),w.$set(pe)},i(Z){if(!N){for(let oe=0;oe<P.length;oe+=1)b(O[oe]);Z&&(s||Et(()=>{s=Mt(l,Nt,{duration:200}),s.start()})),b(M),Z&&(u||Et(()=>{u=Mt(f,Nt,{duration:200}),u.start()})),Z&&(h||Et(()=>{h=Mt(g,Nt,{duration:200,delay:200}),h.start()})),b(w.$$.fragment,Z),Z&&(E||Et(()=>{E=Mt(v,Nt,{duration:200,delay:300}),E.start()})),N=!0}},o(Z){O=O.filter(Boolean);for(let oe=0;oe<O.length;oe+=1)V(O[oe]);V(M),V(w.$$.fragment,Z),N=!1},d(Z){Z&&m(e),Ge(O,Z),M&&M.d(),B.d(),F.d(),ee(w)}}}function Ff(r){let e=r[3],t,l,s=Sr(r);return{c(){s.c(),t=de()},l(n){s.l(n),t=de()},m(n,i){s.m(n,i),D(n,t,i),l=!0},p(n,[i]){i&8&&Be(e,e=n[3])?(le(),V(s,1,1,Ee),se(),s=Sr(n),s.c(),b(s,1),s.m(t.parentNode,t)):s.p(n,i)},i(n){l||(b(s),l=!0)},o(n){V(s),l=!1},d(n){n&&m(t),s.d(n)}}}function Gf(r,e,t){let l,s,n,i,o;Me(r,zt,E=>t(11,l=E)),Me(r,Kt,E=>t(6,n=E)),Me(r,Ut,E=>t(7,i=E)),Me(r,Hr,E=>t(8,o=E));const a=Je("i18n");Me(r,a,E=>t(5,s=E));let{modelIds:f=[]}=e,{models:u=[]}=e,{atSelectedModel:c}=e,{submitPrompt:g}=e,h=!1,p=0;wt(()=>{t(3,h=!0)});const v=E=>{t(4,p=E)},w=E=>{g(E.detail)};return r.$$set=E=>{"modelIds"in E&&t(10,f=E.modelIds),"models"in E&&t(0,u=E.models),"atSelectedModel"in E&&t(1,c=E.atSelectedModel),"submitPrompt"in E&&t(2,g=E.submitPrompt)},r.$$.update=()=>{r.$$.dirty&3072&&t(0,u=f.map(E=>l.find(N=>N.id===E))),r.$$.dirty&1025&&f.length>0&&t(4,p=u.length-1)},[u,c,g,h,p,s,n,i,o,a,f,l,v,w]}class Jf extends Le{constructor(e){super(),Pe(this,e,Gf,Ff,Be,{modelIds:10,models:0,atSelectedModel:1,submitPrompt:2})}}function Rr(r,e,t){const l=r.slice();return l[43]=e[t],l[45]=t,l}function Kf(r){let e,t=r[3],l,s=Ar(r);return{c(){e=y("div"),s.c(),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=k(e);s.l(i),i.forEach(m),this.h()},h(){d(e,"class","w-full pt-2")},m(n,i){D(n,e,i),s.m(e,null),l=!0},p(n,i){i[0]&8&&Be(t,t=n[3])?(le(),V(s,1,1,Ee),se(),s=Ar(n),s.c(),b(s,1),s.m(e,null)):s.p(n,i)},i(n){l||(b(s),l=!0)},o(n){V(s),l=!1},d(n){n&&m(e),s.d(n)}}}function Zf(r){let e,t;return e=new Jf({props:{modelIds:r[5],atSelectedModel:r[6],submitPrompt:r[34]}}),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[0]&32&&(n.modelIds=l[5]),s[0]&64&&(n.atSelectedModel=l[6]),s[0]&65538&&(n.submitPrompt=l[34]),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Or(r){let e,t;return e=new xn({props:{$$slots:{default:[Qf]},$$scope:{ctx:r}}}),e.$on("visible",r[35]),{c(){X(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const n={};s[1]&32768&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Qf(r){let e,t,l,s,n="Loading...",i;return t=new Yt({props:{className:" size-4"}}),{c(){e=y("div"),X(t.$$.fragment),l=j(),s=y("div"),s.textContent=n,this.h()},l(o){e=I(o,"DIV",{class:!0});var a=k(e);$(t.$$.fragment,a),l=H(a),s=I(a,"DIV",{class:!0,"data-svelte-h":!0}),Fe(s)!=="svelte-17uns3n"&&(s.textContent=n),a.forEach(m),this.h()},h(){d(s,"class",""),d(e,"class","w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2")},m(o,a){D(o,e,a),x(t,e,null),_(e,l),_(e,s),i=!0},p:Ee,i(o){i||(b(t.$$.fragment,o),i=!0)},o(o){V(t.$$.fragment,o),i=!1},d(o){o&&m(e),ee(t)}}}function Lr(r,e){let t,l,s,n;function i(a){e[36](a)}let o={chatId:e[3],messageId:e[43].id,idx:e[45],user:e[4],gotoMessage:e[20],showPreviousMessage:e[21],showNextMessage:e[22],updateChat:e[19],editMessage:e[24],deleteMessage:e[27],rateMessage:e[23],actionMessage:e[25],saveMessage:e[26],submitMessage:e[10],regenerateResponse:e[8],continueResponse:e[7],mergeResponses:e[9],addMessages:e[11],triggerScroll:e[28],readOnly:e[12]};return e[0]!==void 0&&(o.history=e[0]),l=new Df({props:o}),ze.push(()=>Ye(l,"history",i)),{key:r,first:null,c(){t=de(),X(l.$$.fragment),this.h()},l(a){t=de(),$(l.$$.fragment,a),this.h()},h(){this.first=t},m(a,f){D(a,t,f),x(l,a,f),n=!0},p(a,f){e=a;const u={};f[0]&8&&(u.chatId=e[3]),f[0]&16384&&(u.messageId=e[43].id),f[0]&16384&&(u.idx=e[45]),f[0]&16&&(u.user=e[4]),f[0]&1024&&(u.submitMessage=e[10]),f[0]&256&&(u.regenerateResponse=e[8]),f[0]&128&&(u.continueResponse=e[7]),f[0]&512&&(u.mergeResponses=e[9]),f[0]&2048&&(u.addMessages=e[11]),f[0]&4096&&(u.readOnly=e[12]),!s&&f[0]&1&&(s=!0,u.history=e[0],Qe(()=>s=!1)),l.$set(u)},i(a){n||(b(l.$$.fragment,a),n=!0)},o(a){V(l.$$.fragment,a),n=!1},d(a){a&&m(t),ee(l,a)}}}function Pr(r){let e;return{c(){e=y("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),k(e).forEach(m),this.h()},h(){d(e,"class","pb-6")},m(t,l){D(t,e,l)},d(t){t&&m(e)}}}function Ar(r){var v;let e,t=((v=r[14].at(0))==null?void 0:v.parentId)!==null,l,s=[],n=new Map,i,o,a,f,u,c=t&&Or(r),g=Ne(r[14]);const h=w=>w[43].id;for(let w=0;w<g.length;w+=1){let E=Rr(r,g,w),N=h(E);n.set(N,s[w]=Lr(N,E))}let p=r[13]&&Pr();return{c(){e=y("div"),c&&c.c(),l=j();for(let w=0;w<s.length;w+=1)s[w].c();i=j(),o=y("div"),a=j(),p&&p.c(),f=de(),this.h()},l(w){e=I(w,"DIV",{class:!0});var E=k(e);c&&c.l(E),l=H(E);for(let N=0;N<s.length;N+=1)s[N].l(E);E.forEach(m),i=H(w),o=I(w,"DIV",{class:!0}),k(o).forEach(m),a=H(w),p&&p.l(w),f=de(),this.h()},h(){d(e,"class","w-full"),d(o,"class","pb-12")},m(w,E){D(w,e,E),c&&c.m(e,null),_(e,l);for(let N=0;N<s.length;N+=1)s[N]&&s[N].m(e,null);D(w,i,E),D(w,o,E),D(w,a,E),p&&p.m(w,E),D(w,f,E),u=!0},p(w,E){var N;E[0]&16384&&(t=((N=w[14].at(0))==null?void 0:N.parentId)!==null),t?c?(c.p(w,E),E[0]&16384&&b(c,1)):(c=Or(w),c.c(),b(c,1),c.m(e,l)):c&&(le(),V(c,1,1,()=>{c=null}),se()),E[0]&536371097&&(g=Ne(w[14]),le(),s=Ht(s,E,h,1,w,g,n,e,Jt,Lr,null,Rr),se()),w[13]?p||(p=Pr(),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},i(w){if(!u){b(c);for(let E=0;E<g.length;E+=1)b(s[E]);u=!0}},o(w){V(c);for(let E=0;E<s.length;E+=1)V(s[E]);u=!1},d(w){w&&(m(e),m(i),m(o),m(a),m(f)),c&&c.d();for(let E=0;E<s.length;E+=1)s[E].d();p&&p.d(w)}}}function Yf(r){let e,t,l,s,n;const i=[Zf,Kf],o=[];function a(f,u){var c;return u[0]&1&&(t=null),t==null&&(t=Object.keys(((c=f[0])==null?void 0:c.messages)??{}).length==0),t?0:1}return l=a(r,[-1,-1]),s=o[l]=i[l](r),{c(){e=y("div"),s.c(),this.h()},l(f){e=I(f,"DIV",{class:!0});var u=k(e);s.l(u),u.forEach(m),this.h()},h(){d(e,"class",r[2])},m(f,u){D(f,e,u),o[l].m(e,null),n=!0},p(f,u){let c=l;l=a(f,u),l===c?o[l].p(f,u):(le(),V(o[c],1,1,()=>{o[c]=null}),se(),s=o[l],s?s.p(f,u):(s=o[l]=i[l](f),s.c()),b(s,1),s.m(e,null)),(!n||u[0]&4)&&d(e,"class",f[2])},i(f){n||(b(s),n=!0)},o(f){V(s),n=!1},d(f){f&&m(e),o[l].d()}}}function Xf(r,e,t){let l,s,n,i,o;Me(r,gt,L=>t(37,s=L)),Me(r,vl,L=>t(38,n=L)),Me(r,Kt,L=>t(39,i=L)),Me(r,Ut,L=>t(40,o=L)),kt();const a=Je("i18n");Me(r,a,L=>t(16,l=L));let{className:f="h-full flex pt-8"}=e,{chatId:u=""}=e,{user:c=o}=e,{prompt:g}=e,{history:h={}}=e,{selectedModels:p}=e,{atSelectedModel:v}=e,w=[],{sendPrompt:E}=e,{continueResponse:N}=e,{regenerateResponse:P}=e,{mergeResponses:O}=e,{chatActionHandler:R}=e,{showMessage:M=()=>{}}=e,{submitMessage:T=()=>{}}=e,{addMessages:S=()=>{}}=e,{readOnly:B=!1}=e,{bottomPadding:C=!1}=e,{autoScroll:A}=e,F=20,z=!1;const re=async()=>{const L=document.getElementById("messages-container");L.scrollTop=L.scrollTop+100,t(15,z=!0),t(33,F+=20),await Ce(),t(15,z=!1)},Q=()=>{const L=document.getElementById("messages-container");L.scrollTop=L.scrollHeight},ie=async()=>{i||(t(0,h),await Ce(),await Pn(localStorage.token,u,{history:h,messages:w}),vl.set(1),await On.set(await An(localStorage.token,n)))},ge=async(L,K)=>{let te;L.parentId!==null?te=h.messages[L.parentId].childrenIds:te=Object.values(h.messages).filter(ue=>ue.parentId===null).map(ue=>ue.id),K=Math.max(0,Math.min(K,te.length-1));let Y=te[K];if(L.id!==Y){let ue=h.messages[Y].childrenIds;for(;ue.length!==0;)Y=ue.at(-1),ue=h.messages[Y].childrenIds;t(0,h.currentId=Y,h)}if(await Ce(),(s==null?void 0:s.scrollOnBranchChange)??!0){const ue=document.getElementById("messages-container");t(29,A=ue.scrollHeight-ue.scrollTop<=ue.clientHeight+50),setTimeout(()=>{Q()},100)}},he=async L=>{if(L.parentId!==null){let K=h.messages[L.parentId].childrenIds[Math.max(h.messages[L.parentId].childrenIds.indexOf(L.id)-1,0)];if(L.id!==K){let te=h.messages[K].childrenIds;for(;te.length!==0;)K=te.at(-1),te=h.messages[K].childrenIds;t(0,h.currentId=K,h)}}else{let K=Object.values(h.messages).filter(Y=>Y.parentId===null).map(Y=>Y.id),te=K[Math.max(K.indexOf(L.id)-1,0)];if(L.id!==te){let Y=h.messages[te].childrenIds;for(;Y.length!==0;)te=Y.at(-1),Y=h.messages[te].childrenIds;t(0,h.currentId=te,h)}}if(await Ce(),(s==null?void 0:s.scrollOnBranchChange)??!0){const K=document.getElementById("messages-container");t(29,A=K.scrollHeight-K.scrollTop<=K.clientHeight+50),setTimeout(()=>{Q()},100)}},ye=async L=>{if(L.parentId!==null){let K=h.messages[L.parentId].childrenIds[Math.min(h.messages[L.parentId].childrenIds.indexOf(L.id)+1,h.messages[L.parentId].childrenIds.length-1)];if(L.id!==K){let te=h.messages[K].childrenIds;for(;te.length!==0;)K=te.at(-1),te=h.messages[K].childrenIds;t(0,h.currentId=K,h)}}else{let K=Object.values(h.messages).filter(Y=>Y.parentId===null).map(Y=>Y.id),te=K[Math.min(K.indexOf(L.id)+1,K.length-1)];if(L.id!==te){let Y=h.messages[te].childrenIds;for(;Y.length!==0;)te=Y.at(-1),Y=h.messages[te].childrenIds;t(0,h.currentId=te,h)}}if(await Ce(),(s==null?void 0:s.scrollOnBranchChange)??!0){const K=document.getElementById("messages-container");t(29,A=K.scrollHeight-K.scrollTop<=K.clientHeight+50),setTimeout(()=>{Q()},100)}},Z=async(L,K)=>{t(0,h.messages[L].annotation={...h.messages[L].annotation,rating:K},h),await ie()},oe=async(L,{content:K,files:te},Y=!0)=>{if((p??[]).filter(ue=>ue).length===0){Ae.error(l.t("Model not selected"));return}if(h.messages[L].role==="user")if(Y){let ue=K,ve=wl(),Ve={id:ve,parentId:h.messages[L].parentId,childrenIds:[],role:"user",content:ue,...te&&{files:te},models:p,timestamp:Math.floor(Date.now()/1e3)},De=h.messages[L].parentId;De!==null&&t(0,h.messages[De].childrenIds=[...h.messages[De].childrenIds,ve],h),t(0,h.messages[ve]=Ve,h),t(0,h.currentId=ve,h),await Ce(),await E(h,ue,ve)}else t(0,h.messages[L].content=K,h),t(0,h.messages[L].files=te,h),await ie();else if(Y){const ue=wl(),ve=h.messages[L],Ve=ve.parentId,De={...ve,id:ue,parentId:Ve,childrenIds:[],files:void 0,content:K,timestamp:Math.floor(Date.now()/1e3)};t(0,h.messages[ue]=De,h),t(0,h.currentId=ue,h),Ve!==null&&t(0,h.messages[Ve].childrenIds=[...h.messages[Ve].childrenIds,ue],h),await ie()}else t(0,h.messages[L].originalContent=h.messages[L].content,h),t(0,h.messages[L].content=K,h),await ie()},pe=async(L,K,te=null)=>{await R(u,L,K.model,K.id,te)},ae=async(L,K)=>{t(0,h.messages[L]=K,h),await ie()},ce=async L=>{const K=h.messages[L],te=K.parentId,Y=K.childrenIds??[],ue=Y.flatMap(ve=>{var Ve;return((Ve=h.messages[ve])==null?void 0:Ve.childrenIds)??[]});te&&h.messages[te]&&t(0,h.messages[te].childrenIds=[...h.messages[te].childrenIds.filter(ve=>ve!==L),...ue],h),ue.forEach(ve=>{h.messages[ve]&&t(0,h.messages[ve].parentId=te,h)}),[L,...Y].forEach(ve=>{delete h.messages[ve]}),await Ce(),M({id:te}),await ie()},G=()=>{if(A){const L=document.getElementById("messages-container");t(29,A=L.scrollHeight-L.scrollTop<=L.clientHeight+50),setTimeout(()=>{Q()},100)}},_e=async L=>{let K=L;if(L.includes("{{CLIPBOARD}}")){const te=await navigator.clipboard.readText().catch(Y=>(Ae.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));K=L.replaceAll("{{CLIPBOARD}}",te)}t(1,g=K),await Ce()},fe=L=>{z||re()};function be(L){h=L,t(0,h)}return r.$$set=L=>{"className"in L&&t(2,f=L.className),"chatId"in L&&t(3,u=L.chatId),"user"in L&&t(4,c=L.user),"prompt"in L&&t(1,g=L.prompt),"history"in L&&t(0,h=L.history),"selectedModels"in L&&t(5,p=L.selectedModels),"atSelectedModel"in L&&t(6,v=L.atSelectedModel),"sendPrompt"in L&&t(30,E=L.sendPrompt),"continueResponse"in L&&t(7,N=L.continueResponse),"regenerateResponse"in L&&t(8,P=L.regenerateResponse),"mergeResponses"in L&&t(9,O=L.mergeResponses),"chatActionHandler"in L&&t(31,R=L.chatActionHandler),"showMessage"in L&&t(32,M=L.showMessage),"submitMessage"in L&&t(10,T=L.submitMessage),"addMessages"in L&&t(11,S=L.addMessages),"readOnly"in L&&t(12,B=L.readOnly),"bottomPadding"in L&&t(13,C=L.bottomPadding),"autoScroll"in L&&t(29,A=L.autoScroll)},r.$$.update=()=>{if(r.$$.dirty[0]&1|r.$$.dirty[1]&4)if(h.currentId){let L=[],K=h.messages[h.currentId];for(;K&&L.length<=F;)L.unshift({...K}),K=K.parentId!==null?h.messages[K.parentId]:null;t(14,w=L)}else t(14,w=[]);r.$$.dirty[0]&536879104&&A&&C&&(async()=>(await Ce(),Q()))()},[h,g,f,u,c,p,v,N,P,O,T,S,B,C,w,z,l,a,re,ie,ge,he,ye,Z,oe,pe,ae,ce,G,A,E,R,M,F,_e,fe,be]}class Au extends Le{constructor(e){super(),Pe(this,e,Xf,Yf,Be,{className:2,chatId:3,user:4,prompt:1,history:0,selectedModels:5,atSelectedModel:6,sendPrompt:30,continueResponse:7,regenerateResponse:8,mergeResponses:9,chatActionHandler:31,showMessage:32,submitMessage:10,addMessages:11,readOnly:12,bottomPadding:13,autoScroll:29},null,[-1,-1])}}export{si as K,Au as M,Lf as S};
//# sourceMappingURL=B74Rqbdy.js.map
