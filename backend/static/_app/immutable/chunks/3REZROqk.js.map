{"version":3,"file":"3REZROqk.js","sources":["../../../../../../src/lib/workers/KokoroWorker.ts","../../../../../../src/lib/components/chat/Messages/Skeleton.svelte","../../../../../../src/lib/components/chat/Messages/RateComment.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/WebSearchResults.svelte","../../../../../../src/lib/components/chat/Messages/Error.svelte","../../../../../../src/lib/components/chat/Messages/CitationsModal.svelte","../../../../../../src/lib/components/chat/Messages/Citations.svelte","../../../../../../src/lib/components/chat/Messages/CodeExecutionModal.svelte","../../../../../../src/lib/components/chat/Messages/CodeExecutions.svelte","../../../../../../src/lib/components/icons/ChatBubble.svelte","../../../../../../src/lib/components/chat/ContentRenderer/FloatingButtons.svelte","../../../../../../src/lib/components/chat/Messages/ContentRenderer.svelte","../../../../../../src/lib/components/icons/ArrowTurnDownRight.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/FollowUps.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage.svelte","../../../../../../src/lib/components/icons/Merge.svelte","../../../../../../src/lib/components/chat/Messages/MultiResponseMessages.svelte","../../../../../../src/lib/components/chat/Messages/UserMessage.svelte","../../../../../../src/lib/components/chat/Messages/Message.svelte","../../../../../../src/lib/components/chat/Suggestions.svelte","../../../../../../src/lib/components/chat/ChatPlaceholder.svelte","../../../../../../src/lib/components/chat/Messages.svelte"],"sourcesContent":["import WorkerInstance from '$lib/workers/kokoro.worker?worker';\n\nexport class KokoroWorker {\n\tprivate worker: Worker | null = null;\n\tprivate initialized: boolean = false;\n\tprivate dtype: string;\n\tprivate requestQueue: Array<{\n\t\ttext: string;\n\t\tvoice: string;\n\t\tresolve: (value: string) => void;\n\t\treject: (reason: any) => void;\n\t}> = [];\n\tprivate processing = false; // To track if a request is being processed\n\n\tconstructor(dtype: string = 'fp32') {\n\t\tthis.dtype = dtype;\n\t}\n\n\tpublic async init() {\n\t\tif (this.worker) {\n\t\t\tconsole.warn('KokoroWorker is already initialized.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.worker = new WorkerInstance();\n\n\t\t// Handle worker messages\n\t\tthis.worker.onmessage = (event) => {\n\t\t\tconst { status, error, audioUrl } = event.data;\n\n\t\t\tif (status === 'init:complete') {\n\t\t\t\tthis.initialized = true;\n\t\t\t} else if (status === 'init:error') {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.initialized = false;\n\t\t\t} else if (status === 'generate:complete') {\n\t\t\t\t// Resolve promise from queue\n\t\t\t\tconst request = this.requestQueue.shift();\n\t\t\t\tif (request) {\n\t\t\t\t\trequest.resolve(audioUrl);\n\t\t\t\t\tthis.processNextRequest(); // Process next request in queue\n\t\t\t\t}\n\t\t\t} else if (status === 'generate:error') {\n\t\t\t\tconst request = this.requestQueue.shift();\n\t\t\t\tif (request) {\n\t\t\t\t\trequest.reject(new Error(error));\n\t\t\t\t\tthis.processNextRequest(); // Continue processing next in queue\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tthis.worker!.postMessage({\n\t\t\t\ttype: 'init',\n\t\t\t\tpayload: { dtype: this.dtype }\n\t\t\t});\n\n\t\t\tconst handleMessage = (event: MessageEvent) => {\n\t\t\t\tif (event.data.status === 'init:complete') {\n\t\t\t\t\tthis.worker!.removeEventListener('message', handleMessage);\n\t\t\t\t\tthis.initialized = true;\n\t\t\t\t\tresolve();\n\t\t\t\t} else if (event.data.status === 'init:error') {\n\t\t\t\t\tthis.worker!.removeEventListener('message', handleMessage);\n\t\t\t\t\treject(new Error(event.data.error));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.worker!.addEventListener('message', handleMessage);\n\t\t});\n\t}\n\n\tpublic async generate({ text, voice }: { text: string; voice: string }): Promise<string> {\n\t\tif (!this.initialized || !this.worker) {\n\t\t\tthrow new Error('KokoroTTS Worker is not initialized yet.');\n\t\t}\n\n\t\treturn new Promise<string>((resolve, reject) => {\n\t\t\tthis.requestQueue.push({ text, voice, resolve, reject });\n\t\t\tif (!this.processing) {\n\t\t\t\tthis.processNextRequest();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate processNextRequest() {\n\t\tif (this.requestQueue.length === 0) {\n\t\t\tthis.processing = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.processing = true;\n\t\tconst { text, voice } = this.requestQueue[0]; // Get first request but don't remove yet\n\t\tthis.worker!.postMessage({ type: 'generate', payload: { text, voice } });\n\t}\n\n\tpublic terminate() {\n\t\tif (this.worker) {\n\t\t\tthis.worker.terminate();\n\t\t\tthis.worker = null;\n\t\t\tthis.initialized = false;\n\t\t\tthis.requestQueue = [];\n\t\t\tthis.processing = false;\n\t\t}\n\t}\n}\n","<script lang=\"ts\">\n\texport let size = 'md';\n</script>\n\n<div class=\"w-full mt-2 mb-2\">\n\t<div class=\"animate-pulse flex w-full\">\n\t\t<div class=\"{size === 'md' ? 'space-y-2' : 'space-y-1.5'} w-full\">\n\t\t\t<div\n\t\t\t\tclass=\"{size === 'md' ? 'h-2' : 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm mr-14\"\n\t\t\t/>\n\n\t\t\t<div class=\"grid grid-cols-3 gap-4\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{size === 'md'\n\t\t\t\t\t\t? 'h-2'\n\t\t\t\t\t\t: 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{size === 'md'\n\t\t\t\t\t\t? 'h-2'\n\t\t\t\t\t\t: 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"grid grid-cols-4 gap-4\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{size === 'md'\n\t\t\t\t\t\t? 'h-2'\n\t\t\t\t\t\t: 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{size === 'md'\n\t\t\t\t\t\t? 'h-2'\n\t\t\t\t\t\t: 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm col-span-2\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{size === 'md'\n\t\t\t\t\t\t? 'h-2'\n\t\t\t\t\t\t: 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm col-span-1 mr-4\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div class=\"{size === 'md' ? 'h-2' : 'h-1.5'} bg-gray-200 dark:bg-gray-600 rounded-sm\" />\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\n\timport { config, models } from '$lib/stores';\n\timport Tags from '$lib/components/common/Tags.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let message;\n\texport let show = false;\n\n\tlet LIKE_REASONS = [\n\t\t'accurate_information',\n\t\t'followed_instructions_perfectly',\n\t\t'showcased_creativity',\n\t\t'positive_attitude',\n\t\t'attention_to_detail',\n\t\t'thorough_explanation',\n\t\t'other'\n\t];\n\tlet DISLIKE_REASONS = [\n\t\t'dont_like_the_style',\n\t\t'too_verbose',\n\t\t'not_helpful',\n\t\t'not_factually_correct',\n\t\t'didnt_fully_follow_instructions',\n\t\t'refused_when_it_shouldnt_have',\n\t\t'being_lazy',\n\t\t'other'\n\t];\n\n\tlet tags = [];\n\n\tlet reasons = [];\n\tlet selectedReason = null;\n\tlet comment = '';\n\n\tlet detailedRating = null;\n\tlet selectedModel = null;\n\n\t$: if (message?.annotation?.rating === 1) {\n\t\treasons = LIKE_REASONS;\n\t} else if (message?.annotation?.rating === -1) {\n\t\treasons = DISLIKE_REASONS;\n\t}\n\n\t$: if (message) {\n\t\tinit();\n\t}\n\n\tconst init = () => {\n\t\tif (!selectedReason) {\n\t\t\tselectedReason = message?.annotation?.reason ?? '';\n\t\t}\n\n\t\tif (!comment) {\n\t\t\tcomment = message?.annotation?.comment ?? '';\n\t\t}\n\n\t\ttags = (message?.annotation?.tags ?? []).map((tag) => ({\n\t\t\tname: tag\n\t\t}));\n\n\t\tif (!detailedRating) {\n\t\t\tdetailedRating = message?.annotation?.details?.rating ?? null;\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (message?.arena) {\n\t\t\tselectedModel = $models.find((m) => m.id === message.selectedModelId);\n\t\t\ttoast.success(\n\t\t\t\t$i18n.t('This response was generated by \"{{model}}\"', {\n\t\t\t\t\tmodel: selectedModel ? (selectedModel?.name ?? selectedModel.id) : message.selectedModelId\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tconst saveHandler = () => {\n\t\tconsole.log('saveHandler');\n\t\t// if (!selectedReason) {\n\t\t// \ttoast.error($i18n.t('Please select a reason'));\n\t\t// \treturn;\n\t\t// }\n\n\t\tdispatch('save', {\n\t\t\treason: selectedReason,\n\t\t\tcomment: comment,\n\t\t\ttags: tags.map((tag) => tag.name),\n\t\t\tdetails: {\n\t\t\t\trating: detailedRating\n\t\t\t}\n\t\t});\n\n\t\ttoast.success($i18n.t('Thanks for your feedback!'));\n\t\tshow = false;\n\t};\n</script>\n\n{#if message?.arena}\n\t<div class=\"text-xs font-medium pt-1.5 -mb-0.5\">\n\t\t{$i18n.t('This response was generated by \"{{model}}\"', {\n\t\t\tmodel: selectedModel ? (selectedModel?.name ?? selectedModel.id) : message.selectedModelId\n\t\t})}\n\t</div>\n{/if}\n\n<div\n\tclass=\" my-2.5 rounded-xl px-4 py-3 border border-gray-100 dark:border-gray-850\"\n\tid=\"message-feedback-{message.id}\"\n>\n\t<div class=\"flex justify-between items-center\">\n\t\t<div class=\"text-sm font-medium\">{$i18n.t('How would you rate this response?')}</div>\n\n\t\t<!-- <div class=\" text-sm\">{$i18n.t('Tell us more:')}</div> -->\n\n\t\t<button\n\t\t\ton:click={() => {\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tclass=\"size-4\"\n\t\t\t>\n\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\" />\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n\n\t<div class=\"w-full flex justify-center\">\n\t\t<div class=\" relative w-fit overflow-x-auto scrollbar-none\">\n\t\t\t<div class=\"mt-1.5 w-fit flex gap-1 pb-2\">\n\t\t\t\t<!-- 1-10 scale -->\n\t\t\t\t{#each Array.from({ length: 10 }).map((_, i) => i + 1) as rating}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"size-7 text-sm border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 {detailedRating ===\n\t\t\t\t\t\trating\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t: ''} transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tdetailedRating = rating;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={message?.annotation?.rating === -1 ? rating > 5 : rating < 6}\n\t\t\t\t\t>\n\t\t\t\t\t\t{rating}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\n\t\t\t<div class=\"sticky top-0 bottom-0 left-0 right-0 flex justify-between text-xs\">\n\t\t\t\t<div>\n\t\t\t\t\t1 - {$i18n.t('Awful')}\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t10 - {$i18n.t('Amazing')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div>\n\t\t{#if reasons.length > 0}\n\t\t\t<div class=\"text-sm mt-1.5 font-medium\">{$i18n.t('Why?')}</div>\n\n\t\t\t<div class=\"flex flex-wrap gap-1.5 text-sm mt-1.5\">\n\t\t\t\t{#each reasons as reason}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"px-3 py-0.5 border border-gray-100 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 {selectedReason ===\n\t\t\t\t\t\treason\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t: ''} transition rounded-xl\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedReason = reason;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if reason === 'accurate_information'}\n\t\t\t\t\t\t\t{$i18n.t('Accurate information')}\n\t\t\t\t\t\t{:else if reason === 'followed_instructions_perfectly'}\n\t\t\t\t\t\t\t{$i18n.t('Followed instructions perfectly')}\n\t\t\t\t\t\t{:else if reason === 'showcased_creativity'}\n\t\t\t\t\t\t\t{$i18n.t('Showcased creativity')}\n\t\t\t\t\t\t{:else if reason === 'positive_attitude'}\n\t\t\t\t\t\t\t{$i18n.t('Positive attitude')}\n\t\t\t\t\t\t{:else if reason === 'attention_to_detail'}\n\t\t\t\t\t\t\t{$i18n.t('Attention to detail')}\n\t\t\t\t\t\t{:else if reason === 'thorough_explanation'}\n\t\t\t\t\t\t\t{$i18n.t('Thorough explanation')}\n\t\t\t\t\t\t{:else if reason === 'dont_like_the_style'}\n\t\t\t\t\t\t\t{$i18n.t(\"Don't like the style\")}\n\t\t\t\t\t\t{:else if reason === 'too_verbose'}\n\t\t\t\t\t\t\t{$i18n.t('Too verbose')}\n\t\t\t\t\t\t{:else if reason === 'not_helpful'}\n\t\t\t\t\t\t\t{$i18n.t('Not helpful')}\n\t\t\t\t\t\t{:else if reason === 'not_factually_correct'}\n\t\t\t\t\t\t\t{$i18n.t('Not factually correct')}\n\t\t\t\t\t\t{:else if reason === 'didnt_fully_follow_instructions'}\n\t\t\t\t\t\t\t{$i18n.t(\"Didn't fully follow instructions\")}\n\t\t\t\t\t\t{:else if reason === 'refused_when_it_shouldnt_have'}\n\t\t\t\t\t\t\t{$i18n.t(\"Refused when it shouldn't have\")}\n\t\t\t\t\t\t{:else if reason === 'being_lazy'}\n\t\t\t\t\t\t\t{$i18n.t('Being lazy')}\n\t\t\t\t\t\t{:else if reason === 'other'}\n\t\t\t\t\t\t\t{$i18n.t('Other')}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{reason}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"mt-2\">\n\t\t<textarea\n\t\t\tbind:value={comment}\n\t\t\tclass=\"w-full text-sm px-1 py-2 bg-transparent outline-hidden resize-none rounded-xl\"\n\t\t\tplaceholder={$i18n.t('Feel free to add specific details')}\n\t\t\trows=\"3\"\n\t\t/>\n\t</div>\n\n\t<div class=\"mt-2 gap-1.5 flex justify-between\">\n\t\t<div class=\"flex items-end group\">\n\t\t\t<Tags\n\t\t\t\t{tags}\n\t\t\t\ton:delete={(e) => {\n\t\t\t\t\ttags = tags.filter(\n\t\t\t\t\t\t(tag) =>\n\t\t\t\t\t\t\ttag.name.replaceAll(' ', '_').toLowerCase() !==\n\t\t\t\t\t\t\te.detail.replaceAll(' ', '_').toLowerCase()\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\ton:add={(e) => {\n\t\t\t\t\ttags = [...tags, { name: e.detail }];\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\n\t\t<button\n\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\ton:click={() => {\n\t\t\t\tsaveHandler();\n\t\t\t}}\n\t\t>\n\t\t\t{$i18n.t('Save')}\n\t\t</button>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport MagnifyingGlass from '$lib/components/icons/MagnifyingGlass.svelte';\n\timport Collapsible from '$lib/components/common/Collapsible.svelte';\n\n\texport let status = { urls: [], query: '' };\n\tlet state = false;\n</script>\n\n<Collapsible bind:open={state} className=\"w-full space-y-1\">\n\t<div\n\t\tclass=\"flex items-center gap-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition\"\n\t>\n\t\t<slot />\n\n\t\t{#if state}\n\t\t\t<ChevronUp strokeWidth=\"3.5\" className=\"size-3.5 \" />\n\t\t{:else}\n\t\t\t<ChevronDown strokeWidth=\"3.5\" className=\"size-3.5 \" />\n\t\t{/if}\n\t</div>\n\t<div\n\t\tclass=\"text-sm border border-gray-300/30 dark:border-gray-700/50 rounded-xl mb-1.5\"\n\t\tslot=\"content\"\n\t>\n\t\t{#if status?.query}\n\t\t\t<a\n\t\t\t\thref=\"https://www.google.com/search?q={status.query}\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"flex w-full items-center p-3 px-4 border-b border-gray-300/30 dark:border-gray-700/50 group/item justify-between font-normal text-gray-800 dark:text-gray-300 no-underline\"\n\t\t\t>\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t<MagnifyingGlass />\n\n\t\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t\t{status.query}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t>\n\t\t\t\t\t<!--  -->\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t{/if}\n\n\t\t{#each status.urls as url, urlIdx}\n\t\t\t<a\n\t\t\t\thref={url}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"flex w-full items-center p-3 px-4 {urlIdx === status.urls.length - 1\n\t\t\t\t\t? ''\n\t\t\t\t\t: 'border-b border-gray-300/30 dark:border-gray-700/50'} group/item justify-between font-normal text-gray-800 dark:text-gray-300\"\n\t\t\t>\n\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t{url}\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t>\n\t\t\t\t\t<!--  -->\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t{/each}\n\t</div>\n</Collapsible>\n","<script lang=\"ts\">\n\timport Info from '$lib/components/icons/Info.svelte';\n\n\texport let content = '';\n</script>\n\n<div class=\"flex my-2 gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-lg\">\n\t<div class=\" self-start mt-0.5\">\n\t\t<Info className=\"size-5 text-red-700 dark:text-red-400\" />\n\t</div>\n\n\t<div class=\" self-center text-sm\">\n\t\t{typeof content === 'string' ? content : JSON.stringify(content)}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { getContext, onMount, tick } from 'svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let citation;\n\texport let showPercentage = false;\n\texport let showRelevance = true;\n\n\tlet mergedDocuments = [];\n\n\tfunction calculatePercentage(distance: number) {\n\t\tif (typeof distance !== 'number') return null;\n\t\tif (distance < 0) return 0;\n\t\tif (distance > 1) return 100;\n\t\treturn Math.round(distance * 10000) / 100;\n\t}\n\n\tfunction getRelevanceColor(percentage: number) {\n\t\tif (percentage >= 80)\n\t\t\treturn 'bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200';\n\t\tif (percentage >= 60)\n\t\t\treturn 'bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200';\n\t\tif (percentage >= 40)\n\t\t\treturn 'bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200';\n\t\treturn 'bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200';\n\t}\n\n\t$: if (citation) {\n\t\tmergedDocuments = citation.document?.map((c, i) => {\n\t\t\treturn {\n\t\t\t\tsource: citation.source,\n\t\t\t\tdocument: c,\n\t\t\t\tmetadata: citation.metadata?.[i],\n\t\t\t\tdistance: citation.distances?.[i]\n\t\t\t};\n\t\t});\n\t\tif (mergedDocuments.every((doc) => doc.distance !== undefined)) {\n\t\t\tmergedDocuments = mergedDocuments.sort(\n\t\t\t\t(a, b) => (b.distance ?? Infinity) - (a.distance ?? Infinity)\n\t\t\t);\n\t\t}\n\t}\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center capitalize\">\n\t\t\t\t{$i18n.t('Citation')}\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-6 pb-5 md:space-x-4\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden\"\n\t\t\t>\n\t\t\t\t{#each mergedDocuments as document, documentIdx}\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<div class=\"text-sm font-medium dark:text-gray-300\">\n\t\t\t\t\t\t\t{$i18n.t('Source')}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if document.source?.name}\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tclassName=\"w-fit\"\n\t\t\t\t\t\t\t\tcontent={$i18n.t('Open file')}\n\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\ttippyOptions={{ duration: [500, 0] }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"text-sm dark:text-gray-400 flex items-center gap-2 w-fit\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"hover:text-gray-500 dark:hover:text-gray-100 underline grow\"\n\t\t\t\t\t\t\t\t\t\thref={document?.metadata?.file_id\n\t\t\t\t\t\t\t\t\t\t\t? `${WEBUI_API_BASE_URL}/files/${document?.metadata?.file_id}/content${document?.metadata?.page !== undefined ? `#page=${document.metadata.page + 1}` : ''}`\n\t\t\t\t\t\t\t\t\t\t\t: document.source?.url?.includes('http')\n\t\t\t\t\t\t\t\t\t\t\t\t? document.source.url\n\t\t\t\t\t\t\t\t\t\t\t\t: `#`}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{decodeString(document?.metadata?.name ?? document.source.name)}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t{#if document?.metadata?.page}\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\t({$i18n.t('page')}\n\t\t\t\t\t\t\t\t\t\t\t{document.metadata.page + 1})\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t{#if document.metadata?.parameters}\n\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium dark:text-gray-300 mt-2\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Parameters')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<pre\n\t\t\t\t\t\t\t\t\tclass=\"text-sm dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-2 rounded-md overflow-auto max-h-40\">{JSON.stringify(\n\t\t\t\t\t\t\t\t\t\tdocument.metadata.parameters,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t)}</pre>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if showRelevance}\n\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium dark:text-gray-300 mt-2\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Relevance')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{#if document.distance !== undefined}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-fit\"\n\t\t\t\t\t\t\t\t\t\tcontent={$i18n.t('Semantic distance to query')}\n\t\t\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\t\t\ttippyOptions={{ duration: [500, 0] }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm my-1 dark:text-gray-400 flex items-center gap-2 w-fit\">\n\t\t\t\t\t\t\t\t\t\t\t{#if showPercentage}\n\t\t\t\t\t\t\t\t\t\t\t\t{@const percentage = calculatePercentage(document.distance)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{#if typeof percentage === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`px-1 rounded-sm font-medium ${getRelevanceColor(percentage)}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{percentage.toFixed(2)}%\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{#if typeof document?.distance === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-gray-500 dark:text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t({(document?.distance ?? 0).toFixed(4)})\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t{:else if typeof document?.distance === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-gray-500 dark:text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t({(document?.distance ?? 0).toFixed(4)})\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<div class=\"text-sm dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('No distance available')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"text-sm dark:text-gray-400\">\n\t\t\t\t\t\t\t\t{$i18n.t('No source available')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<div class=\" text-sm font-medium dark:text-gray-300 mt-2\">\n\t\t\t\t\t\t\t{$i18n.t('Content')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if document.metadata?.html}\n\t\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\tclass=\"w-full border-0 h-auto rounded-none\"\n\t\t\t\t\t\t\t\tsandbox=\"allow-scripts allow-forms allow-same-origin\"\n\t\t\t\t\t\t\t\tsrcdoc={document.document}\n\t\t\t\t\t\t\t\ttitle={$i18n.t('Content')}\n\t\t\t\t\t\t\t></iframe>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<pre class=\"text-sm dark:text-gray-400 whitespace-pre-line\">\n                {document.document}\n              </pre>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if documentIdx !== mergedDocuments.length - 1}\n\t\t\t\t\t\t<hr class=\"border-gray-100 dark:border-gray-850 my-3\" />\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport CitationsModal from './CitationsModal.svelte';\n\timport Collapsible from '$lib/components/common/Collapsible.svelte';\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = '';\n\texport let sources = [];\n\n\tlet citations = [];\n\tlet showPercentage = false;\n\tlet showRelevance = true;\n\n\tlet showCitationModal = false;\n\tlet selectedCitation: any = null;\n\tlet isCollapsibleOpen = false;\n\n\tfunction calculateShowRelevance(sources: any[]) {\n\t\tconst distances = sources.flatMap((citation) => citation.distances ?? []);\n\t\tconst inRange = distances.filter((d) => d !== undefined && d >= -1 && d <= 1).length;\n\t\tconst outOfRange = distances.filter((d) => d !== undefined && (d < -1 || d > 1)).length;\n\n\t\tif (distances.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t(inRange === distances.length - 1 && outOfRange === 1) ||\n\t\t\t(outOfRange === distances.length - 1 && inRange === 1)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction shouldShowPercentage(sources: any[]) {\n\t\tconst distances = sources.flatMap((citation) => citation.distances ?? []);\n\t\treturn distances.every((d) => d !== undefined && d >= -1 && d <= 1);\n\t}\n\n\t$: {\n\t\tconsole.log('sources', sources);\n\t\tcitations = sources.reduce((acc, source) => {\n\t\t\tif (Object.keys(source).length === 0) {\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tsource.document.forEach((document, index) => {\n\t\t\t\tconst metadata = source.metadata?.[index];\n\t\t\t\tconst distance = source.distances?.[index];\n\n\t\t\t\t// Within the same citation there could be multiple documents\n\t\t\t\tconst id = metadata?.source ?? source?.source?.id ?? 'N/A';\n\t\t\t\tlet _source = source?.source;\n\n\t\t\t\tif (metadata?.name) {\n\t\t\t\t\t_source = { ..._source, name: metadata.name };\n\t\t\t\t}\n\n\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\t_source = { ..._source, name: id, url: id };\n\t\t\t\t}\n\n\t\t\t\tconst existingSource = acc.find((item) => item.id === id);\n\n\t\t\t\tif (existingSource) {\n\t\t\t\t\texistingSource.document.push(document);\n\t\t\t\t\texistingSource.metadata.push(metadata);\n\t\t\t\t\tif (distance !== undefined) existingSource.distances.push(distance);\n\t\t\t\t} else {\n\t\t\t\t\tacc.push({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tsource: _source,\n\t\t\t\t\t\tdocument: [document],\n\t\t\t\t\t\tmetadata: metadata ? [metadata] : [],\n\t\t\t\t\t\tdistances: distance !== undefined ? [distance] : undefined\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn acc;\n\t\t}, []);\n\t\tconsole.log('citations', citations);\n\n\t\tshowRelevance = calculateShowRelevance(citations);\n\t\tshowPercentage = shouldShowPercentage(citations);\n\t}\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<CitationsModal\n\tbind:show={showCitationModal}\n\tcitation={selectedCitation}\n\t{showPercentage}\n\t{showRelevance}\n/>\n\n{#if citations.length > 0}\n\t<div class=\" py-0.5 -mx-0.5 w-full flex gap-1 items-center flex-wrap\">\n\t\t{#if citations.length <= 3}\n\t\t\t<div class=\"flex text-xs font-medium flex-wrap\">\n\t\t\t\t{#each citations as citation, idx}\n\t\t\t\t\t<button\n\t\t\t\t\t\tid={`source-${id}-${idx + 1}`}\n\t\t\t\t\t\tclass=\"no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-white dark:bg-gray-900 rounded-xl max-w-96\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t\t\t\tselectedCitation = citation;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if citations.every((c) => c.distances !== undefined)}\n\t\t\t\t\t\t\t<div class=\"bg-gray-50 dark:bg-gray-800 rounded-full size-4\">\n\t\t\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"flex-1 mx-1 truncate text-black/60 hover:text-black dark:text-white/60 dark:hover:text-white transition\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{decodeString(citation.source.name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<Collapsible\n\t\t\t\tid={`collapsible-${id}`}\n\t\t\t\tbind:open={isCollapsibleOpen}\n\t\t\t\tclassName=\"w-full max-w-full \"\n\t\t\t\tbuttonClassName=\"w-fit max-w-full\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex w-full overflow-auto items-center gap-2 text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition cursor-pointer\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 flex items-center gap-1 overflow-auto scrollbar-none w-full max-w-full\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"whitespace-nowrap hidden sm:inline shrink-0\"\n\t\t\t\t\t\t\t>{$i18n.t('References from')}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex items-center overflow-auto scrollbar-none w-full max-w-full flex-1\">\n\t\t\t\t\t\t\t<div class=\"flex text-xs font-medium items-center\">\n\t\t\t\t\t\t\t\t{#each citations.slice(0, 2) as citation, idx}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition rounded-xl max-w-96\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t\t\t\t\t\t\t\tselectedCitation = citation;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ton:pointerup={(e) => {\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#if citations.every((c) => c.distances !== undefined)}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bg-gray-50 dark:bg-gray-800 rounded-full size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex-1 mx-1 truncate\">\n\t\t\t\t\t\t\t\t\t\t\t{decodeString(citation.source.name)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center gap-1 whitespace-nowrap shrink-0\">\n\t\t\t\t\t\t\t<span class=\"hidden sm:inline\">{$i18n.t('and')}</span>\n\t\t\t\t\t\t\t{citations.length - 2}\n\t\t\t\t\t\t\t<span>{$i18n.t('more')}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t{#if isCollapsibleOpen}\n\t\t\t\t\t\t\t<ChevronUp strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<ChevronDown strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div slot=\"content\">\n\t\t\t\t\t<div class=\"flex text-xs font-medium flex-wrap\">\n\t\t\t\t\t\t{#each citations as citation, idx}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid={`source-${id}-${idx + 1}`}\n\t\t\t\t\t\t\t\tclass=\"no-toggle outline-hidden flex dark:text-gray-300 p-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 transition rounded-xl max-w-96\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t\t\t\t\t\tselectedCitation = citation;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if citations.every((c) => c.distances !== undefined)}\n\t\t\t\t\t\t\t\t\t<div class=\"bg-gray-50 dark:bg-gray-800 rounded-full size-4\">\n\t\t\t\t\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<div class=\"flex-1 mx-1 truncate\">\n\t\t\t\t\t\t\t\t\t{decodeString(citation.source.name)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Collapsible>\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport CodeBlock from './CodeBlock.svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Badge from '$lib/components/common/Badge.svelte';\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let codeExecution = null;\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\"flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\"text-lg font-medium self-center flex flex-col gap-0.5 capitalize\">\n\t\t\t\t{#if codeExecution?.result}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if codeExecution.result?.error}\n\t\t\t\t\t\t\t<Badge type=\"error\" content=\"error\" />\n\t\t\t\t\t\t{:else if codeExecution.result?.output}\n\t\t\t\t\t\t\t<Badge type=\"success\" content=\"success\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Badge type=\"warning\" content=\"incomplete\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t{#if !codeExecution?.result}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if codeExecution?.name}\n\t\t\t\t\t\t\t{$i18n.t('Code execution')}: {codeExecution?.name}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{$i18n.t('Code execution')}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t\tcodeExecution = null;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-4 pb-5\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden\"\n\t\t\t>\n\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t<CodeBlock\n\t\t\t\t\t\tid=\"code-exec-{codeExecution?.id}-code\"\n\t\t\t\t\t\tlang={codeExecution?.language ?? ''}\n\t\t\t\t\t\tcode={codeExecution?.code ?? ''}\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\teditorClassName={codeExecution?.result &&\n\t\t\t\t\t\t(codeExecution?.result?.error || codeExecution?.result?.output)\n\t\t\t\t\t\t\t? 'rounded-b-none'\n\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\tstickyButtonsClassName=\"top-0\"\n\t\t\t\t\t\trun={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{#if codeExecution?.result && (codeExecution?.result?.error || codeExecution?.result?.output)}\n\t\t\t\t\t<div class=\"dark:bg-[#202123] dark:text-white px-4 py-4 rounded-b-lg flex flex-col gap-3\">\n\t\t\t\t\t\t{#if codeExecution?.result?.error}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs mb-1\">{$i18n.t('ERROR')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{codeExecution?.result?.error}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if codeExecution?.result?.output}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs mb-1\">{$i18n.t('OUTPUT')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{codeExecution?.result?.output}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if codeExecution?.result?.files && codeExecution?.result?.files.length > 0}\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<hr class=\"border-gray-100 dark:border-gray-850 my-2\" />\n\t\t\t\t\t\t<div class=\" text-sm font-medium dark:text-gray-300\">\n\t\t\t\t\t\t\t{$i18n.t('Files')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul class=\"mt-1 list-disc pl-4 text-xs\">\n\t\t\t\t\t\t\t{#each codeExecution?.result?.files as file}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href={file.url} target=\"_blank\">{file.name}</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport CodeExecutionModal from './CodeExecutionModal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Check from '$lib/components/icons/Check.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport EllipsisHorizontal from '$lib/components/icons/EllipsisHorizontal.svelte';\n\n\texport let codeExecutions = [];\n\n\tlet selectedCodeExecution = null;\n\tlet showCodeExecutionModal = false;\n\n\t$: if (codeExecutions) {\n\t\tupdateSelectedCodeExecution();\n\t}\n\n\tconst updateSelectedCodeExecution = () => {\n\t\tif (selectedCodeExecution) {\n\t\t\tselectedCodeExecution = codeExecutions.find(\n\t\t\t\t(execution) => execution.id === selectedCodeExecution.id\n\t\t\t);\n\t\t}\n\t};\n</script>\n\n<CodeExecutionModal bind:show={showCodeExecutionModal} codeExecution={selectedCodeExecution} />\n\n{#if codeExecutions.length > 0}\n\t<div class=\"mt-1 mb-2 w-full flex gap-1 items-center flex-wrap\">\n\t\t{#each codeExecutions as execution (execution.id)}\n\t\t\t<div class=\"flex gap-1 text-xs font-semibold\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl max-w-96\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tselectedCodeExecution = execution;\n\t\t\t\t\t\tshowCodeExecutionModal = true;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"bg-white dark:bg-gray-700 rounded-full size-4 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if execution?.result}\n\t\t\t\t\t\t\t{#if execution.result?.error}\n\t\t\t\t\t\t\t\t<XMark />\n\t\t\t\t\t\t\t{:else if execution.result?.output}\n\t\t\t\t\t\t\t\t<Check strokeWidth=\"3\" className=\"size-3\" />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<EllipsisHorizontal />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 mx-2 line-clamp-1 code-execution-name {execution?.result ? '' : 'pulse'}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{execution.name}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n{/if}\n\n<style>\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.6;\n\t\t}\n\t}\n\n\t.pulse {\n\t\topacity: 1;\n\t\tanimation: pulse 1.5s ease;\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport DOMPurify from 'dompurify';\n\timport { marked } from 'marked';\n\n\timport { getContext, tick } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { chatCompletion } from '$lib/apis/openai';\n\n\timport ChatBubble from '$lib/components/icons/ChatBubble.svelte';\n\timport LightBulb from '$lib/components/icons/LightBulb.svelte';\n\timport Markdown from '../Messages/Markdown.svelte';\n\timport Skeleton from '../Messages/Skeleton.svelte';\n\n\texport let id = '';\n\texport let model = null;\n\texport let messages = [];\n\texport let onAdd = () => {};\n\n\tlet floatingInput = false;\n\n\tlet selectedText = '';\n\tlet floatingInputValue = '';\n\n\tlet prompt = '';\n\tlet responseContent = null;\n\tlet responseDone = false;\n\n\tconst autoScroll = async () => {\n\t\t// Scroll to bottom only if the scroll is at the bottom give 50px buffer\n\t\tconst responseContainer = document.getElementById('response-container');\n\t\tif (\n\t\t\tresponseContainer.scrollHeight - responseContainer.clientHeight <=\n\t\t\tresponseContainer.scrollTop + 50\n\t\t) {\n\t\t\tresponseContainer.scrollTop = responseContainer.scrollHeight;\n\t\t}\n\t};\n\n\tconst askHandler = async () => {\n\t\tif (!model) {\n\t\t\ttoast.error('Model not selected');\n\t\t\treturn;\n\t\t}\n\t\tprompt = [\n\t\t\t// Blockquote each line of the selected text\n\t\t\t...selectedText.split('\\n').map((line) => `> ${line}`),\n\t\t\t'',\n\t\t\t// Then your question\n\t\t\tfloatingInputValue\n\t\t].join('\\n');\n\t\tfloatingInputValue = '';\n\n\t\tresponseContent = '';\n\t\tconst [res, controller] = await chatCompletion(localStorage.token, {\n\t\t\tmodel: model,\n\t\t\tmessages: [\n\t\t\t\t...messages,\n\t\t\t\t{\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: prompt\n\t\t\t\t}\n\t\t\t].map((message) => ({\n\t\t\t\trole: message.role,\n\t\t\t\tcontent: message.content\n\t\t\t})),\n\t\t\tstream: true // Enable streaming\n\t\t});\n\n\t\tif (res && res.ok) {\n\t\t\tconst reader = res.body.getReader();\n\t\t\tconst decoder = new TextDecoder();\n\n\t\t\tconst processStream = async () => {\n\t\t\t\twhile (true) {\n\t\t\t\t\t// Read data chunks from the response stream\n\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Decode the received chunk\n\t\t\t\t\tconst chunk = decoder.decode(value, { stream: true });\n\n\t\t\t\t\t// Process lines within the chunk\n\t\t\t\t\tconst lines = chunk.split('\\n').filter((line) => line.trim() !== '');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line.startsWith('data: ')) {\n\t\t\t\t\t\t\tif (line.startsWith('data: [DONE]')) {\n\t\t\t\t\t\t\t\tresponseDone = true;\n\n\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Parse the JSON chunk\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst data = JSON.parse(line.slice(6));\n\n\t\t\t\t\t\t\t\t\t// Append the `content` field from the \"choices\" object\n\t\t\t\t\t\t\t\t\tif (data.choices && data.choices[0]?.delta?.content) {\n\t\t\t\t\t\t\t\t\t\tresponseContent += data.choices[0].delta.content;\n\n\t\t\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Process the stream in the background\n\t\t\tawait processStream();\n\t\t} else {\n\t\t\ttoast.error('An error occurred while fetching the explanation');\n\t\t}\n\t};\n\n\tconst explainHandler = async () => {\n\t\tif (!model) {\n\t\t\ttoast.error('Model not selected');\n\t\t\treturn;\n\t\t}\n\t\tconst quotedText = selectedText\n\t\t\t.split('\\n')\n\t\t\t.map((line) => `> ${line}`)\n\t\t\t.join('\\n');\n\t\tprompt = `${quotedText}\\n\\nExplain`;\n\n\t\tresponseContent = '';\n\t\tconst [res, controller] = await chatCompletion(localStorage.token, {\n\t\t\tmodel: model,\n\t\t\tmessages: [\n\t\t\t\t...messages,\n\t\t\t\t{\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: prompt\n\t\t\t\t}\n\t\t\t].map((message) => ({\n\t\t\t\trole: message.role,\n\t\t\t\tcontent: message.content\n\t\t\t})),\n\t\t\tstream: true // Enable streaming\n\t\t});\n\n\t\tif (res && res.ok) {\n\t\t\tconst reader = res.body.getReader();\n\t\t\tconst decoder = new TextDecoder();\n\n\t\t\tconst processStream = async () => {\n\t\t\t\twhile (true) {\n\t\t\t\t\t// Read data chunks from the response stream\n\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Decode the received chunk\n\t\t\t\t\tconst chunk = decoder.decode(value, { stream: true });\n\n\t\t\t\t\t// Process lines within the chunk\n\t\t\t\t\tconst lines = chunk.split('\\n').filter((line) => line.trim() !== '');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line.startsWith('data: ')) {\n\t\t\t\t\t\t\tif (line.startsWith('data: [DONE]')) {\n\t\t\t\t\t\t\t\tresponseDone = true;\n\n\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Parse the JSON chunk\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst data = JSON.parse(line.slice(6));\n\n\t\t\t\t\t\t\t\t\t// Append the `content` field from the \"choices\" object\n\t\t\t\t\t\t\t\t\tif (data.choices && data.choices[0]?.delta?.content) {\n\t\t\t\t\t\t\t\t\t\tresponseContent += data.choices[0].delta.content;\n\n\t\t\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Process the stream in the background\n\t\t\tawait processStream();\n\t\t} else {\n\t\t\ttoast.error('An error occurred while fetching the explanation');\n\t\t}\n\t};\n\n\tconst addHandler = async () => {\n\t\tconst messages = [\n\t\t\t{\n\t\t\t\trole: 'user',\n\t\t\t\tcontent: prompt\n\t\t\t},\n\t\t\t{\n\t\t\t\trole: 'assistant',\n\t\t\t\tcontent: responseContent\n\t\t\t}\n\t\t];\n\n\t\tonAdd({\n\t\t\tmodelId: model,\n\t\t\tparentId: id,\n\t\t\tmessages: messages\n\t\t});\n\t};\n\n\texport const closeHandler = () => {\n\t\tresponseContent = null;\n\t\tresponseDone = false;\n\t\tfloatingInput = false;\n\t\tfloatingInputValue = '';\n\t};\n</script>\n\n<div\n\tid={`floating-buttons-${id}`}\n\tclass=\"absolute rounded-lg mt-1 text-xs z-9999\"\n\tstyle=\"display: none\"\n>\n\t{#if responseContent === null}\n\t\t{#if !floatingInput}\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-row gap-0.5 shrink-0 p-1 bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-lg shadow-xl\"\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"px-1 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-sm flex items-center gap-1 min-w-fit\"\n\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\tselectedText = window.getSelection().toString();\n\t\t\t\t\t\tfloatingInput = true;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconst input = document.getElementById('floating-message-input');\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ChatBubble className=\"size-3 shrink-0\" />\n\n\t\t\t\t\t<div class=\"shrink-0\">{$i18n.t('Ask')}</div>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"px-1 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-sm flex items-center gap-1 min-w-fit\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tselectedText = window.getSelection().toString();\n\t\t\t\t\t\texplainHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<LightBulb className=\"size-3 shrink-0\" />\n\n\t\t\t\t\t<div class=\"shrink-0\">{$i18n.t('Explain')}</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div\n\t\t\t\tclass=\"py-1 flex dark:text-gray-100 bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-850 w-72 rounded-full shadow-xl\"\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"floating-message-input\"\n\t\t\t\t\tclass=\"ml-5 bg-transparent outline-hidden w-full flex-1 text-sm\"\n\t\t\t\t\tplaceholder={$i18n.t('Ask a question')}\n\t\t\t\t\tbind:value={floatingInputValue}\n\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\taskHandler();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"ml-1 mr-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"{floatingInputValue !== ''\n\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1.5 m-0.5 self-center\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\taskHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div class=\"bg-white dark:bg-gray-850 dark:text-gray-100 rounded-xl shadow-xl w-80 max-w-full\">\n\t\t\t<div\n\t\t\t\tclass=\"bg-gray-50/50 dark:bg-gray-800 dark:text-gray-100 text-medium rounded-xl px-3.5 py-3 w-full\"\n\t\t\t>\n\t\t\t\t<div class=\"font-medium\">\n\t\t\t\t\t<Markdown id={`${id}-float-prompt`} content={prompt} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-xl px-3.5 py-3 w-full\"\n\t\t\t>\n\t\t\t\t<div class=\" max-h-80 overflow-y-auto w-full markdown-prose-xs\" id=\"response-container\">\n\t\t\t\t\t{#if responseContent.trim() === ''}\n\t\t\t\t\t\t<Skeleton size=\"sm\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Markdown id={`${id}-float-response`} content={responseContent} />\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if responseDone}\n\t\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\t\t\t\t\t\ton:click={addHandler}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Add')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n","<script>\n\timport { onDestroy, onMount, tick, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport Markdown from './Markdown.svelte';\n\timport {\n\t\tartifactCode,\n\t\tchatId,\n\t\tmobile,\n\t\tsettings,\n\t\tshowArtifacts,\n\t\tshowControls,\n\t\tshowOverview\n\t} from '$lib/stores';\n\timport FloatingButtons from '../ContentRenderer/FloatingButtons.svelte';\n\timport { createMessagesList } from '$lib/utils';\n\n\texport let id;\n\texport let content;\n\texport let history;\n\texport let model = null;\n\texport let sources = null;\n\n\texport let save = false;\n\texport let preview = false;\n\texport let floatingButtons = true;\n\n\texport let onSave = () => {};\n\texport let onSourceClick = () => {};\n\texport let onTaskClick = () => {};\n\n\texport let onAddMessages = () => {};\n\n\tlet contentContainerElement;\n\n\tlet floatingButtonsElement;\n\n\tconst updateButtonPosition = (event) => {\n\t\tconst buttonsContainerElement = document.getElementById(`floating-buttons-${id}`);\n\t\tif (\n\t\t\t!contentContainerElement?.contains(event.target) &&\n\t\t\t!buttonsContainerElement?.contains(event.target)\n\t\t) {\n\t\t\tcloseFloatingButtons();\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(async () => {\n\t\t\tawait tick();\n\n\t\t\tif (!contentContainerElement?.contains(event.target)) return;\n\n\t\t\tlet selection = window.getSelection();\n\n\t\t\tif (selection.toString().trim().length > 0) {\n\t\t\t\tconst range = selection.getRangeAt(0);\n\t\t\t\tconst rect = range.getBoundingClientRect();\n\n\t\t\t\tconst parentRect = contentContainerElement.getBoundingClientRect();\n\n\t\t\t\t// Adjust based on parent rect\n\t\t\t\tconst top = rect.bottom - parentRect.top;\n\t\t\t\tconst left = rect.left - parentRect.left;\n\n\t\t\t\tif (buttonsContainerElement) {\n\t\t\t\t\tbuttonsContainerElement.style.display = 'block';\n\n\t\t\t\t\t// Calculate space available on the right\n\t\t\t\t\tconst spaceOnRight = parentRect.width - left;\n\t\t\t\t\tlet halfScreenWidth = $mobile ? window.innerWidth / 2 : window.innerWidth / 3;\n\n\t\t\t\t\tif (spaceOnRight < halfScreenWidth) {\n\t\t\t\t\t\tconst right = parentRect.right - rect.right;\n\t\t\t\t\t\tbuttonsContainerElement.style.right = `${right}px`;\n\t\t\t\t\t\tbuttonsContainerElement.style.left = 'auto'; // Reset left\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Enough space, position using 'left'\n\t\t\t\t\t\tbuttonsContainerElement.style.left = `${left}px`;\n\t\t\t\t\t\tbuttonsContainerElement.style.right = 'auto'; // Reset right\n\t\t\t\t\t}\n\t\t\t\t\tbuttonsContainerElement.style.top = `${top + 5}px`; // +5 to add some spacing\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloseFloatingButtons();\n\t\t\t}\n\t\t}, 0);\n\t};\n\n\tconst closeFloatingButtons = () => {\n\t\tconst buttonsContainerElement = document.getElementById(`floating-buttons-${id}`);\n\t\tif (buttonsContainerElement) {\n\t\t\tbuttonsContainerElement.style.display = 'none';\n\t\t}\n\n\t\tif (floatingButtonsElement) {\n\t\t\t// check if closeHandler is defined\n\n\t\t\tif (typeof floatingButtonsElement?.closeHandler === 'function') {\n\t\t\t\t// call the closeHandler function\n\t\t\t\tfloatingButtonsElement?.closeHandler();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst keydownHandler = (e) => {\n\t\tif (e.key === 'Escape') {\n\t\t\tcloseFloatingButtons();\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (floatingButtons) {\n\t\t\tcontentContainerElement?.addEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.addEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.addEventListener('keydown', keydownHandler);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (floatingButtons) {\n\t\t\tcontentContainerElement?.removeEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.removeEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.removeEventListener('keydown', keydownHandler);\n\t\t}\n\t});\n</script>\n\n<div bind:this={contentContainerElement}>\n\t<Markdown\n\t\t{id}\n\t\t{content}\n\t\t{model}\n\t\t{save}\n\t\t{preview}\n\t\tsourceIds={(sources ?? []).reduce((acc, s) => {\n\t\t\tlet ids = [];\n\t\t\ts.document.forEach((document, index) => {\n\t\t\t\tif (model?.info?.meta?.capabilities?.citations == false) {\n\t\t\t\t\tids.push('N/A');\n\t\t\t\t\treturn ids;\n\t\t\t\t}\n\n\t\t\t\tconst metadata = s.metadata?.[index];\n\t\t\t\tconst id = metadata?.source ?? 'N/A';\n\n\t\t\t\tif (metadata?.name) {\n\t\t\t\t\tids.push(metadata.name);\n\t\t\t\t\treturn ids;\n\t\t\t\t}\n\n\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\tids.push(id);\n\t\t\t\t} else {\n\t\t\t\t\tids.push(s?.source?.name ?? id);\n\t\t\t\t}\n\n\t\t\t\treturn ids;\n\t\t\t});\n\n\t\t\tacc = [...acc, ...ids];\n\n\t\t\t// remove duplicates\n\t\t\treturn acc.filter((item, index) => acc.indexOf(item) === index);\n\t\t}, [])}\n\t\t{onSourceClick}\n\t\t{onTaskClick}\n\t\t{onSave}\n\t\tonUpdate={(token) => {\n\t\t\tconst { lang, text: code } = token;\n\n\t\t\tif (\n\t\t\t\t($settings?.detectArtifacts ?? true) &&\n\t\t\t\t(['html', 'svg'].includes(lang) || (lang === 'xml' && code.includes('svg'))) &&\n\t\t\t\t!$mobile &&\n\t\t\t\t$chatId\n\t\t\t) {\n\t\t\t\tshowArtifacts.set(true);\n\t\t\t\tshowControls.set(true);\n\t\t\t}\n\t\t}}\n\t\tonPreview={async (value) => {\n\t\t\tconsole.log('Preview', value);\n\t\t\tawait artifactCode.set(value);\n\t\t\tawait showControls.set(true);\n\t\t\tawait showArtifacts.set(true);\n\t\t\tawait showOverview.set(false);\n\t\t}}\n\t/>\n</div>\n\n{#if floatingButtons && model}\n\t<FloatingButtons\n\t\tbind:this={floatingButtonsElement}\n\t\t{id}\n\t\tmodel={model?.id}\n\t\tmessages={createMessagesList(history, id)}\n\t\tonAdd={({ modelId, parentId, messages }) => {\n\t\t\tconsole.log(modelId, parentId, messages);\n\t\t\tonAddMessages({ modelId, parentId, messages });\n\t\t\tcloseFloatingButtons();\n\t\t}}\n\t/>\n{/if}\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" fill=\"currentColor\" class={className}>\n\t<path\n\t\tfill-rule=\"evenodd\"\n\t\td=\"M2.75 2a.75.75 0 0 1 .75.75v6.5h7.94l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H2.75A.75.75 0 0 1 2 10V2.75A.75.75 0 0 1 2.75 2Z\"\n\t\tclip-rule=\"evenodd\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport ArrowTurnDownRight from '$lib/components/icons/ArrowTurnDownRight.svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let followUps: string[] = [];\n\texport let onClick: (followUp: string) => void = () => {};\n</script>\n\n<div class=\"mt-4\">\n\t<div class=\"text-sm font-medium\">\n\t\t{$i18n.t('Follow up')}\n\t</div>\n\n\t<div class=\"flex flex-col text-left gap-1 mt-1.5\">\n\t\t{#each followUps as followUp, idx (idx)}\n\t\t\t<button\n\t\t\t\tclass=\" mr-2 py-1.5 bg-transparent text-left text-sm flex items-center gap-2 px-1.5 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition\"\n\t\t\t\ton:click={() => onClick(followUp)}\n\t\t\t\ttitle={followUp}\n\t\t\t\taria-label={followUp}\n\t\t\t>\n\t\t\t\t<ArrowTurnDownRight className=\"size-3.5\" />\n\n\t\t\t\t<div class=\"line-clamp-1\">\n\t\t\t\t\t{followUp}\n\t\t\t\t</div>\n\t\t\t</button>\n\n\t\t\t{#if idx < followUps.length - 1}\n\t\t\t\t<hr class=\"border-gray-100 dark:border-gray-850\" />\n\t\t\t{/if}\n\t\t{/each}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\n\timport { createEventDispatcher } from 'svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport type { Writable } from 'svelte/store';\n\timport type { i18n as i18nType, t } from 'i18next';\n\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\timport { createNewFeedback, getFeedbackById, updateFeedbackById } from '$lib/apis/evaluations';\n\timport { getChatById } from '$lib/apis/chats';\n\timport { generateTags } from '$lib/apis';\n\n\timport { config, models, settings, temporaryChatEnabled, TTSWorker, user } from '$lib/stores';\n\timport { synthesizeOpenAISpeech } from '$lib/apis/audio';\n\timport { imageGenerations } from '$lib/apis/images';\n\timport {\n\t\tcopyToClipboard as _copyToClipboard,\n\t\tapproximateToHumanReadable,\n\t\tgetMessageContentParts,\n\t\tsanitizeResponseContent,\n\t\tcreateMessagesList,\n\t\tformatDate,\n\t\tremoveDetails,\n\t\tremoveAllDetails\n\t} from '$lib/utils';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport RateComment from './RateComment.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport WebSearchResults from './ResponseMessage/WebSearchResults.svelte';\n\timport Sparkles from '$lib/components/icons/Sparkles.svelte';\n\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport Error from './Error.svelte';\n\timport Citations from './Citations.svelte';\n\timport CodeExecutions from './CodeExecutions.svelte';\n\timport ContentRenderer from './ContentRenderer.svelte';\n\timport { KokoroWorker } from '$lib/workers/KokoroWorker';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport FollowUps from './ResponseMessage/FollowUps.svelte';\n\timport { fade } from 'svelte/transition';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\n\tinterface MessageType {\n\t\tid: string;\n\t\tmodel: string;\n\t\tcontent: string;\n\t\tfiles?: { type: string; url: string }[];\n\t\ttimestamp: number;\n\t\trole: string;\n\t\tstatusHistory?: {\n\t\t\tdone: boolean;\n\t\t\taction: string;\n\t\t\tdescription: string;\n\t\t\turls?: string[];\n\t\t\tquery?: string;\n\t\t}[];\n\t\tstatus?: {\n\t\t\tdone: boolean;\n\t\t\taction: string;\n\t\t\tdescription: string;\n\t\t\turls?: string[];\n\t\t\tquery?: string;\n\t\t};\n\t\tdone: boolean;\n\t\terror?: boolean | { content: string };\n\t\tsources?: string[];\n\t\tcode_executions?: {\n\t\t\tuuid: string;\n\t\t\tname: string;\n\t\t\tcode: string;\n\t\t\tlanguage?: string;\n\t\t\tresult?: {\n\t\t\t\terror?: string;\n\t\t\t\toutput?: string;\n\t\t\t\tfiles?: { name: string; url: string }[];\n\t\t\t};\n\t\t}[];\n\t\tinfo?: {\n\t\t\topenai?: boolean;\n\t\t\tprompt_tokens?: number;\n\t\t\tcompletion_tokens?: number;\n\t\t\ttotal_tokens?: number;\n\t\t\teval_count?: number;\n\t\t\teval_duration?: number;\n\t\t\tprompt_eval_count?: number;\n\t\t\tprompt_eval_duration?: number;\n\t\t\ttotal_duration?: number;\n\t\t\tload_duration?: number;\n\t\t\tusage?: unknown;\n\t\t};\n\t\tannotation?: { type: string; rating: number };\n\t}\n\n\texport let chatId = '';\n\texport let history;\n\texport let messageId;\n\n\tlet message: MessageType = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\texport let siblings;\n\n\texport let gotoMessage: Function = () => {};\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\n\texport let updateChat: Function;\n\texport let editMessage: Function;\n\texport let saveMessage: Function;\n\texport let rateMessage: Function;\n\texport let actionMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let submitMessage: Function;\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\n\texport let addMessages: Function;\n\n\texport let isLastMessage = true;\n\texport let readOnly = false;\n\n\tlet buttonsContainerElement: HTMLDivElement;\n\tlet showDeleteConfirm = false;\n\n\tlet model = null;\n\t$: model = $models.find((m) => m.id === message.model);\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editTextAreaElement: HTMLTextAreaElement;\n\n\tlet messageIndexEdit = false;\n\n\tlet audioParts: Record<number, HTMLAudioElement | null> = {};\n\tlet speaking = false;\n\tlet speakingIdx: number | undefined;\n\n\tlet loadingSpeech = false;\n\tlet generatingImage = false;\n\n\tlet showRateComment = false;\n\n\tconst copyToClipboard = async (text) => {\n\t\ttext = removeAllDetails(text);\n\n\t\tif (($config?.ui?.response_watermark ?? '').trim() !== '') {\n\t\t\ttext = `${text}\\n\\n${$config?.ui?.response_watermark}`;\n\t\t}\n\n\t\tconst res = await _copyToClipboard(text, $settings?.copyFormatted ?? false);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst playAudio = (idx: number) => {\n\t\treturn new Promise<void>((res) => {\n\t\t\tspeakingIdx = idx;\n\t\t\tconst audio = audioParts[idx];\n\n\t\t\tif (!audio) {\n\t\t\t\treturn res();\n\t\t\t}\n\n\t\t\taudio.play();\n\t\t\taudio.onended = async () => {\n\t\t\t\tawait new Promise((r) => setTimeout(r, 300));\n\n\t\t\t\tif (Object.keys(audioParts).length - 1 === idx) {\n\t\t\t\t\tspeaking = false;\n\t\t\t\t}\n\n\t\t\t\tres();\n\t\t\t};\n\t\t});\n\t};\n\n\tconst toggleSpeakMessage = async () => {\n\t\tif (speaking) {\n\t\t\ttry {\n\t\t\t\tspeechSynthesis.cancel();\n\n\t\t\t\tif (speakingIdx !== undefined && audioParts[speakingIdx]) {\n\t\t\t\t\taudioParts[speakingIdx]!.pause();\n\t\t\t\t\taudioParts[speakingIdx]!.currentTime = 0;\n\t\t\t\t}\n\t\t\t} catch {}\n\n\t\t\tspeaking = false;\n\t\t\tspeakingIdx = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(message?.content ?? '').trim().length) {\n\t\t\ttoast.info($i18n.t('No content to speak'));\n\t\t\treturn;\n\t\t}\n\n\t\tspeaking = true;\n\n\t\tconst content = removeAllDetails(message.content);\n\n\t\tif ($config.audio.tts.engine === '') {\n\t\t\tlet voices = [];\n\t\t\tconst getVoicesLoop = setInterval(() => {\n\t\t\t\tvoices = speechSynthesis.getVoices();\n\t\t\t\tif (voices.length > 0) {\n\t\t\t\t\tclearInterval(getVoicesLoop);\n\n\t\t\t\t\tconst voice =\n\t\t\t\t\t\tvoices\n\t\t\t\t\t\t\t?.filter(\n\t\t\t\t\t\t\t\t(v) => v.voiceURI === ($settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t?.at(0) ?? undefined;\n\n\t\t\t\t\tconsole.log(voice);\n\n\t\t\t\t\tconst speak = new SpeechSynthesisUtterance(content);\n\t\t\t\t\tspeak.rate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\tconsole.log(speak);\n\n\t\t\t\t\tspeak.onend = () => {\n\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\tif ($settings.conversationMode) {\n\t\t\t\t\t\t\tdocument.getElementById('voice-input-button')?.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (voice) {\n\t\t\t\t\t\tspeak.voice = voice;\n\t\t\t\t\t}\n\n\t\t\t\t\tspeechSynthesis.speak(speak);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t} else {\n\t\t\tloadingSpeech = true;\n\n\t\t\tconst messageContentParts: string[] = getMessageContentParts(\n\t\t\t\tcontent,\n\t\t\t\t$config?.audio?.tts?.split_on ?? 'punctuation'\n\t\t\t);\n\n\t\t\tif (!messageContentParts.length) {\n\t\t\t\tconsole.log('No content to speak');\n\t\t\t\ttoast.info($i18n.t('No content to speak'));\n\n\t\t\t\tspeaking = false;\n\t\t\t\tloadingSpeech = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.debug('Prepared message content for TTS', messageContentParts);\n\n\t\t\taudioParts = messageContentParts.reduce(\n\t\t\t\t(acc, _sentence, idx) => {\n\t\t\t\t\tacc[idx] = null;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{} as typeof audioParts\n\t\t\t);\n\n\t\t\tlet lastPlayedAudioPromise = Promise.resolve(); // Initialize a promise that resolves immediately\n\n\t\t\tif ($settings.audio?.tts?.engine === 'browser-kokoro') {\n\t\t\t\tif (!$TTSWorker) {\n\t\t\t\t\tawait TTSWorker.set(\n\t\t\t\t\t\tnew KokoroWorker({\n\t\t\t\t\t\t\tdtype: $settings.audio?.tts?.engineConfig?.dtype ?? 'fp32'\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tawait $TTSWorker.init();\n\t\t\t\t}\n\n\t\t\t\tfor (const [idx, sentence] of messageContentParts.entries()) {\n\t\t\t\t\tconst blob = await $TTSWorker\n\t\t\t\t\t\t.generate({\n\t\t\t\t\t\t\ttext: sentence,\n\t\t\t\t\t\t\tvoice: $settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\n\t\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tif (blob) {\n\t\t\t\t\t\tconst audio = new Audio(blob);\n\t\t\t\t\t\taudio.playbackRate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\t\taudioParts[idx] = audio;\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\tlastPlayedAudioPromise = lastPlayedAudioPromise.then(() => playAudio(idx));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const [idx, sentence] of messageContentParts.entries()) {\n\t\t\t\t\tconst res = await synthesizeOpenAISpeech(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t$settings?.audio?.tts?.defaultVoice === $config.audio.tts.voice\n\t\t\t\t\t\t\t? ($settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice)\n\t\t\t\t\t\t\t: $config?.audio?.tts?.voice,\n\t\t\t\t\t\tsentence\n\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\ttoast.error(`${error}`);\n\n\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tconst blob = await res.blob();\n\t\t\t\t\t\tconst blobUrl = URL.createObjectURL(blob);\n\t\t\t\t\t\tconst audio = new Audio(blobUrl);\n\t\t\t\t\t\taudio.playbackRate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\t\taudioParts[idx] = audio;\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\tlastPlayedAudioPromise = lastPlayedAudioPromise.then(() => playAudio(idx));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet preprocessedDetailsCache = [];\n\n\tfunction preprocessForEditing(content: string): string {\n\t\t// Replace <details>...</details> with unique ID placeholder\n\t\tconst detailsBlocks = [];\n\t\tlet i = 0;\n\n\t\tcontent = content.replace(/<details[\\s\\S]*?<\\/details>/gi, (match) => {\n\t\t\tdetailsBlocks.push(match);\n\t\t\treturn `<details id=\"__DETAIL_${i++}__\"/>`;\n\t\t});\n\n\t\t// Store original blocks in the editedContent or globally (see merging later)\n\t\tpreprocessedDetailsCache = detailsBlocks;\n\n\t\treturn content;\n\t}\n\n\tfunction postprocessAfterEditing(content: string): string {\n\t\tconst restoredContent = content.replace(\n\t\t\t/<details id=\"__DETAIL_(\\d+)__\"\\/>/g,\n\t\t\t(_, index) => preprocessedDetailsCache[parseInt(index)] || ''\n\t\t);\n\n\t\treturn restoredContent;\n\t}\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\n\t\teditedContent = preprocessForEditing(message.content);\n\n\t\tawait tick();\n\n\t\teditTextAreaElement.style.height = '';\n\t\teditTextAreaElement.style.height = `${editTextAreaElement.scrollHeight}px`;\n\t};\n\n\tconst editMessageConfirmHandler = async () => {\n\t\tconst messageContent = postprocessAfterEditing(editedContent ? editedContent : '');\n\t\teditMessage(message.id, { content: messageContent }, false);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t};\n\n\tconst saveAsCopyHandler = async () => {\n\t\tconst messageContent = postprocessAfterEditing(editedContent ? editedContent : '');\n\n\t\teditMessage(message.id, { content: messageContent });\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t};\n\n\tconst cancelEditMessage = async () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\tawait tick();\n\t};\n\n\tconst generateImage = async (message: MessageType) => {\n\t\tgeneratingImage = true;\n\t\tconst res = await imageGenerations(localStorage.token, message.content).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t});\n\t\tconsole.log(res);\n\n\t\tif (res) {\n\t\t\tconst files = res.map((image) => ({\n\t\t\t\ttype: 'image',\n\t\t\t\turl: `${image.url}`\n\t\t\t}));\n\n\t\t\tsaveMessage(message.id, {\n\t\t\t\t...message,\n\t\t\t\tfiles: files\n\t\t\t});\n\t\t}\n\n\t\tgeneratingImage = false;\n\t};\n\n\tlet feedbackLoading = false;\n\n\tconst feedbackHandler = async (rating: number | null = null, details: object | null = null) => {\n\t\tfeedbackLoading = true;\n\t\tconsole.log('Feedback', rating, details);\n\n\t\tconst updatedMessage = {\n\t\t\t...message,\n\t\t\tannotation: {\n\t\t\t\t...(message?.annotation ?? {}),\n\t\t\t\t...(rating !== null ? { rating: rating } : {}),\n\t\t\t\t...(details ? details : {})\n\t\t\t}\n\t\t};\n\n\t\tconst chat = await getChatById(localStorage.token, chatId).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t});\n\t\tif (!chat) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst messages = createMessagesList(history, message.id);\n\n\t\tlet feedbackItem = {\n\t\t\ttype: 'rating',\n\t\t\tdata: {\n\t\t\t\t...(updatedMessage?.annotation ? updatedMessage.annotation : {}),\n\t\t\t\tmodel_id: message?.selectedModelId ?? message.model,\n\t\t\t\t...(history.messages[message.parentId].childrenIds.length > 1\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tsibling_model_ids: history.messages[message.parentId].childrenIds\n\t\t\t\t\t\t\t\t.filter((id) => id !== message.id)\n\t\t\t\t\t\t\t\t.map((id) => history.messages[id]?.selectedModelId ?? history.messages[id].model)\n\t\t\t\t\t\t}\n\t\t\t\t\t: {})\n\t\t\t},\n\t\t\tmeta: {\n\t\t\t\tarena: message ? message.arena : false,\n\t\t\t\tmodel_id: message.model,\n\t\t\t\tmessage_id: message.id,\n\t\t\t\tmessage_index: messages.length,\n\t\t\t\tchat_id: chatId\n\t\t\t},\n\t\t\tsnapshot: {\n\t\t\t\tchat: chat\n\t\t\t}\n\t\t};\n\n\t\tconst baseModels = [\n\t\t\tfeedbackItem.data.model_id,\n\t\t\t...(feedbackItem.data.sibling_model_ids ?? [])\n\t\t].reduce((acc, modelId) => {\n\t\t\tconst model = $models.find((m) => m.id === modelId);\n\t\t\tif (model) {\n\t\t\t\tacc[model.id] = model?.info?.base_model_id ?? null;\n\t\t\t} else {\n\t\t\t\t// Log or handle cases where corresponding model is not found\n\t\t\t\tconsole.warn(`Model with ID ${modelId} not found`);\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\t\tfeedbackItem.meta.base_models = baseModels;\n\n\t\tlet feedback = null;\n\t\tif (message?.feedbackId) {\n\t\t\tfeedback = await updateFeedbackById(\n\t\t\t\tlocalStorage.token,\n\t\t\t\tmessage.feedbackId,\n\t\t\t\tfeedbackItem\n\t\t\t).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t});\n\t\t} else {\n\t\t\tfeedback = await createNewFeedback(localStorage.token, feedbackItem).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t});\n\n\t\t\tif (feedback) {\n\t\t\t\tupdatedMessage.feedbackId = feedback.id;\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(updatedMessage);\n\t\tsaveMessage(message.id, updatedMessage);\n\n\t\tawait tick();\n\n\t\tif (!details) {\n\t\t\tshowRateComment = true;\n\n\t\t\tif (!updatedMessage.annotation?.tags) {\n\t\t\t\t// attempt to generate tags\n\t\t\t\tconst tags = await generateTags(localStorage.token, message.model, messages, chatId).catch(\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tconsole.log(tags);\n\n\t\t\t\tif (tags) {\n\t\t\t\t\tupdatedMessage.annotation.tags = tags;\n\t\t\t\t\tfeedbackItem.data.tags = tags;\n\n\t\t\t\t\tsaveMessage(message.id, updatedMessage);\n\t\t\t\t\tawait updateFeedbackById(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tupdatedMessage.feedbackId,\n\t\t\t\t\t\tfeedbackItem\n\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfeedbackLoading = false;\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdeleteMessage(message.id);\n\t};\n\n\t$: if (!edit) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t})();\n\t}\n\n\tonMount(async () => {\n\t\t// console.log('ResponseMessage mounted');\n\n\t\tawait tick();\n\t\tif (buttonsContainerElement) {\n\t\t\tconsole.log(buttonsContainerElement);\n\n\t\t\tbuttonsContainerElement.addEventListener('wheel', function (event) {\n\t\t\t\tif (buttonsContainerElement.scrollWidth <= buttonsContainerElement.clientWidth) {\n\t\t\t\t\t// If the container is not scrollable, horizontal scroll\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tif (event.deltaY !== 0) {\n\t\t\t\t\t\t// Adjust horizontal scroll position based on vertical scroll\n\t\t\t\t\t\tbuttonsContainerElement.scrollLeft += event.deltaY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n</script>\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete message?')}\n\ton:confirm={() => {\n\t\tdeleteMessageHandler();\n\t}}\n/>\n\n{#key message.id}\n\t<div\n\t\tclass=\" flex w-full message-{message.id}\"\n\t\tid=\"message-{message.id}\"\n\t\tdir={$settings.chatDirection}\n\t>\n\t\t<div class={`shrink-0 ltr:mr-3 rtl:ml-3 hidden @lg:flex `}>\n\t\t\t<ProfileImage\n\t\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t\t($i18n.language === 'dg-DG' ? `/doge.png` : `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\tclassName={'size-8'}\n\t\t\t/>\n\t\t</div>\n\n\t\t<div class=\"flex-auto w-0 pl-1 relative -translate-y-0.5\">\n\t\t\t<Name>\n\t\t\t\t<Tooltip content={model?.name ?? message.model} placement=\"top-start\">\n\t\t\t\t\t<span class=\"line-clamp-1 text-black dark:text-white\">\n\t\t\t\t\t\t{model?.name ?? message.model}\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\">{formatDate(message.timestamp * 1000)}</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</Name>\n\n\t\t\t<div>\n\t\t\t\t<div class=\"chat-{message.role} w-full min-w-full markdown-prose\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if (message?.statusHistory ?? [...(message?.status ? [message?.status] : [])]).length > 0}\n\t\t\t\t\t\t\t{@const status = (\n\t\t\t\t\t\t\t\tmessage?.statusHistory ?? [...(message?.status ? [message?.status] : [])]\n\t\t\t\t\t\t\t).at(-1)}\n\t\t\t\t\t\t\t{#if !status?.hidden}\n\t\t\t\t\t\t\t\t<div class=\"status-description flex items-center gap-2 py-0.5\">\n\t\t\t\t\t\t\t\t\t{#if status?.action === 'web_search' && status?.urls}\n\t\t\t\t\t\t\t\t\t\t<WebSearchResults {status}>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{status?.done === false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} text-base line-clamp-1 text-wrap\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- $i18n.t(\"Generating search query\") -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- $i18n.t(\"No search query generated\") -->\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- $i18n.t('Searched {{count}} sites') -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if status?.description.includes('{{count}}')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t(status?.description, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcount: status?.urls.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else if status?.description === 'No search query generated'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('No search query generated')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else if status?.description === 'Generating search query'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Generating search query')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</WebSearchResults>\n\t\t\t\t\t\t\t\t\t{:else if status?.action === 'knowledge_search'}\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{status?.done === false\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t(`Searching Knowledge for \"{{searchQuery}}\"`, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsearchQuery: status.query\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{status?.done === false\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- $i18n.t(`Searching \"{{searchQuery}}\"`) -->\n\t\t\t\t\t\t\t\t\t\t\t\t{#if status?.description.includes('{{searchQuery}}')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t(status?.description, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsearchQuery: status?.query\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t{:else if status?.description === 'No search query generated'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('No search query generated')}\n\t\t\t\t\t\t\t\t\t\t\t\t{:else if status?.description === 'Generating search query'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Generating search query')}\n\t\t\t\t\t\t\t\t\t\t\t\t{:else if status?.description === 'Searching the web'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Searching the web...')}\n\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if message?.files && message.files?.filter((f) => f.type === 'image').length > 0}\n\t\t\t\t\t\t\t<div class=\"my-1 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t\t\t<Image src={file.url} alt={message.content} />\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\t\tcolorClassName=\"bg-white dark:bg-gray-850 \"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if edit === true}\n\t\t\t\t\t\t\t<div class=\"w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2\">\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\t\t\tbind:this={editTextAreaElement}\n\t\t\t\t\t\t\t\t\tclass=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-between text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"save-new-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsaveAsCopyHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save As Copy')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"w-full flex flex-col relative\" id=\"response-content-container\">\n\t\t\t\t\t\t\t\t{#if message.content === '' && !message.error && (message?.statusHistory ?? [...(message?.status ? [message?.status] : [])]).length === 0}\n\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t{:else if message.content && message.error !== true}\n\t\t\t\t\t\t\t\t\t<!-- always show message contents even if there's an error -->\n\t\t\t\t\t\t\t\t\t<!-- unless message.error === true which is legacy error handling, where the error message is stored in message.content -->\n\t\t\t\t\t\t\t\t\t<ContentRenderer\n\t\t\t\t\t\t\t\t\t\tid={message.id}\n\t\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t\t\t\t\tsources={message.sources}\n\t\t\t\t\t\t\t\t\t\tfloatingButtons={message?.done && !readOnly}\n\t\t\t\t\t\t\t\t\t\tsave={!readOnly}\n\t\t\t\t\t\t\t\t\t\tpreview={!readOnly}\n\t\t\t\t\t\t\t\t\t\t{model}\n\t\t\t\t\t\t\t\t\t\tonTaskClick={async (e) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonSourceClick={async (id, idx) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(id, idx);\n\t\t\t\t\t\t\t\t\t\t\tlet sourceButton = document.getElementById(`source-${message.id}-${idx}`);\n\t\t\t\t\t\t\t\t\t\t\tconst sourcesCollapsible = document.getElementById(\n\t\t\t\t\t\t\t\t\t\t\t\t`collapsible-${message.id}`\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t\tif (sourceButton) {\n\t\t\t\t\t\t\t\t\t\t\t\tsourceButton.click();\n\t\t\t\t\t\t\t\t\t\t\t} else if (sourcesCollapsible) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Open sources collapsible so we can click the source button\n\t\t\t\t\t\t\t\t\t\t\t\tsourcesCollapsible\n\t\t\t\t\t\t\t\t\t\t\t\t\t.querySelector('div:first-child')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.dispatchEvent(new PointerEvent('pointerup', {}));\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Wait for next frame to ensure DOM updates\n\t\t\t\t\t\t\t\t\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequestAnimationFrame(resolve);\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Try clicking the source button again\n\t\t\t\t\t\t\t\t\t\t\t\tsourceButton = document.getElementById(`source-${message.id}-${idx}`);\n\t\t\t\t\t\t\t\t\t\t\t\tsourceButton && sourceButton.click();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonAddMessages={({ modelId, parentId, messages }) => {\n\t\t\t\t\t\t\t\t\t\t\taddMessages({ modelId, parentId, messages });\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonSave={({ raw, oldContent, newContent }) => {\n\t\t\t\t\t\t\t\t\t\t\thistory.messages[message.id].content = history.messages[\n\t\t\t\t\t\t\t\t\t\t\t\tmessage.id\n\t\t\t\t\t\t\t\t\t\t\t].content.replace(raw, raw.replace(oldContent, newContent));\n\n\t\t\t\t\t\t\t\t\t\t\tupdateChat();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message?.error}\n\t\t\t\t\t\t\t\t\t<Error content={message?.error?.content ?? message.content} />\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if (message?.sources || message?.citations) && (model?.info?.meta?.capabilities?.citations ?? true)}\n\t\t\t\t\t\t\t\t\t<Citations id={message?.id} sources={message?.sources ?? message?.citations} />\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message.code_executions}\n\t\t\t\t\t\t\t\t\t<CodeExecutions codeExecutions={message.code_executions} />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{#if !edit}\n\t\t\t\t\t<div\n\t\t\t\t\t\tbind:this={buttonsContainerElement}\n\t\t\t\t\t\tclass=\"flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500 mt-0.5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if message.done || siblings.length > 1}\n\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t<div class=\"flex self-center min-w-fit\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Previous message')}\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Next message')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.done}\n\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'user' ? ($user?.permissions?.chat?.edit ?? true) : true}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Edit')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Copy')}\n\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.tts ?? true)}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Read Aloud')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Read Aloud')}\n\t\t\t\t\t\t\t\t\t\t\tid=\"speak-button-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!loadingSpeech) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleSpeakMessage();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if loadingSpeech}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_Km9P\" cx=\"12\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_JApP\" cx=\"20\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else if speaking}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if $config?.features.enable_image_generation && ($user?.role === 'admin' || $user?.permissions?.features?.image_generation) && !readOnly}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Generate Image')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Generate Image')}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'}  p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!generatingImage) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgenerateImage(message);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if generatingImage}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_Km9P\" cx=\"12\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_JApP\" cx=\"20\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message.usage}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tcontent={message.usage\n\t\t\t\t\t\t\t\t\t\t\t? `<pre>${sanitizeResponseContent(\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(message.usage, null, 2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\"([^(\")\"]+)\":/g, '$1:')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((line) => line.slice(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((line) => (line.endsWith(',') ? line.slice(0, -1) : line))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t\t\t\t\t\t\t)}</pre>`\n\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" {isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tid=\"info-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t{#if !$temporaryChatEnabled && ($config?.features.enable_message_rating ?? true)}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Good Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Good Response')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.annotation?.rating ?? ''\n\t\t\t\t\t\t\t\t\t\t\t\t).toString() === '1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={feedbackLoading}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait feedbackHandler(1);\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Bad Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Bad Response')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.annotation?.rating ?? ''\n\t\t\t\t\t\t\t\t\t\t\t\t).toString() === '-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={feedbackLoading}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait feedbackHandler(-1);\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Continue Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Continue Response')}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"continue-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontinueResponse();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Regenerate')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Regenerate')}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\n\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Delete')}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"delete-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t\t\t\t\t{#each model?.actions ?? [] as action}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={action.name} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={action.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactionMessage(action.id, message);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if action?.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={action.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 {action.icon.includes('svg')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'dark:invert-[80%]'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"fill: currentColor;\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={action.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Sparkles strokeWidth=\"2.1\" className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if message.done && showRateComment}\n\t\t\t\t\t\t<RateComment\n\t\t\t\t\t\t\tbind:message\n\t\t\t\t\t\t\tbind:show={showRateComment}\n\t\t\t\t\t\t\ton:save={async (e) => {\n\t\t\t\t\t\t\t\tawait feedbackHandler(null, {\n\t\t\t\t\t\t\t\t\t...e.detail\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if isLastMessage && message.done && !readOnly && (message?.followUps ?? []).length > 0}\n\t\t\t\t\t\t<div class=\"mt-2.5\" in:fade={{ duration: 100 }}>\n\t\t\t\t\t\t\t<FollowUps\n\t\t\t\t\t\t\t\tfollowUps={message?.followUps}\n\t\t\t\t\t\t\t\tonClick={(prompt) => {\n\t\t\t\t\t\t\t\t\tsubmitMessage(message?.id, prompt);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t{#if message?.done}\n\t\t\t\t<div aria-live=\"polite\" class=\"sr-only\">\n\t\t\t\t\t{message?.content ?? ''}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n{/key}\n\n<style>\n\t.buttons::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.buttons {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm6-2a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm0 0h-1a5 5 0 0 1-5-5v-.5\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport { createEventDispatcher } from 'svelte';\n\n\timport { mobile, settings } from '$lib/stores';\n\n\timport { generateMoACompletion } from '$lib/apis';\n\timport { updateChatById } from '$lib/apis/chats';\n\timport { createOpenAITextStream } from '$lib/apis/streaming';\n\n\timport ResponseMessage from './ResponseMessage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Merge from '$lib/components/icons/Merge.svelte';\n\n\timport Markdown from './Markdown.svelte';\n\timport Name from './Name.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\tconst i18n = getContext('i18n');\n\tdayjs.extend(localizedFormat);\n\n\texport let chatId;\n\texport let history;\n\texport let messageId;\n\n\texport let isLastMessage;\n\texport let readOnly = false;\n\n\texport let updateChat: Function;\n\texport let editMessage: Function;\n\texport let saveMessage: Function;\n\texport let rateMessage: Function;\n\texport let actionMessage: Function;\n\n\texport let submitMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\texport let mergeResponses: Function;\n\n\texport let addMessages: Function;\n\n\texport let triggerScroll: Function;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet currentMessageId;\n\tlet parentMessage;\n\tlet groupedMessageIds = {};\n\tlet groupedMessageIdsIdx = {};\n\n\tlet message = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\tconst gotoMessage = async (modelIdx, messageIdx) => {\n\t\t// Clamp messageIdx to ensure it's within valid range\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.max(\n\t\t\t0,\n\t\t\tMath.min(messageIdx, groupedMessageIds[modelIdx].messageIds.length - 1)\n\t\t);\n\n\t\t// Get the messageId at the specified index\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\t// Traverse the branch to find the deepest child message\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\t// Update the current message ID in history\n\t\thistory.currentId = messageId;\n\n\t\t// Await UI updates\n\t\tawait tick();\n\t\tawait updateChat();\n\n\t\t// Trigger scrolling after navigation\n\t\ttriggerScroll();\n\t};\n\n\tconst showPreviousMessage = async (modelIdx) => {\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.max(0, groupedMessageIdsIdx[modelIdx] - 1);\n\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tawait tick();\n\t\tawait updateChat();\n\t\ttriggerScroll();\n\t};\n\n\tconst showNextMessage = async (modelIdx) => {\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.min(\n\t\t\tgroupedMessageIds[modelIdx].messageIds.length - 1,\n\t\t\tgroupedMessageIdsIdx[modelIdx] + 1\n\t\t);\n\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tawait tick();\n\t\tawait updateChat();\n\t\ttriggerScroll();\n\t};\n\n\tconst initHandler = async () => {\n\t\tconsole.log('multiresponse:initHandler');\n\t\tawait tick();\n\n\t\tcurrentMessageId = messageId;\n\t\tparentMessage = history.messages[messageId].parentId\n\t\t\t? history.messages[history.messages[messageId].parentId]\n\t\t\t: null;\n\n\t\tgroupedMessageIds = parentMessage?.models.reduce((a, model, modelIdx) => {\n\t\t\t// Find all messages that are children of the parent message and have the same model\n\t\t\tlet modelMessageIds = parentMessage?.childrenIds\n\t\t\t\t.map((id) => history.messages[id])\n\t\t\t\t.filter((m) => m?.modelIdx === modelIdx)\n\t\t\t\t.map((m) => m.id);\n\n\t\t\t// Legacy support for messages that don't have a modelIdx\n\t\t\t// Find all messages that are children of the parent message and have the same model\n\t\t\tif (modelMessageIds.length === 0) {\n\t\t\t\tlet modelMessages = parentMessage?.childrenIds\n\t\t\t\t\t.map((id) => history.messages[id])\n\t\t\t\t\t.filter((m) => m?.model === model);\n\n\t\t\t\tmodelMessages.forEach((m) => {\n\t\t\t\t\tm.modelIdx = modelIdx;\n\t\t\t\t});\n\n\t\t\t\tmodelMessageIds = modelMessages.map((m) => m.id);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...a,\n\t\t\t\t[modelIdx]: { messageIds: modelMessageIds }\n\t\t\t};\n\t\t}, {});\n\n\t\tgroupedMessageIdsIdx = parentMessage?.models.reduce((a, model, modelIdx) => {\n\t\t\tconst idx = groupedMessageIds[modelIdx].messageIds.findIndex((id) => id === messageId);\n\t\t\tif (idx !== -1) {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t[modelIdx]: idx\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t[modelIdx]: groupedMessageIds[modelIdx].messageIds.length - 1\n\t\t\t\t};\n\t\t\t}\n\t\t}, {});\n\n\t\tconsole.log(groupedMessageIds, groupedMessageIdsIdx);\n\n\t\tawait tick();\n\t};\n\n\tconst mergeResponsesHandler = async () => {\n\t\tconst responses = Object.keys(groupedMessageIds).map((modelIdx) => {\n\t\t\tconst { messageIds } = groupedMessageIds[modelIdx];\n\t\t\tconst messageId = messageIds[groupedMessageIdsIdx[modelIdx]];\n\n\t\t\treturn history.messages[messageId].content;\n\t\t});\n\t\tmergeResponses(messageId, responses, chatId);\n\t};\n\n\tonMount(async () => {\n\t\tawait initHandler();\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst messageElement = document.getElementById(`message-${messageId}`);\n\t\t\tif (messageElement) {\n\t\t\t\tmessageElement.scrollIntoView({ block: 'start' });\n\t\t\t}\n\t\t}\n\t});\n</script>\n\n{#if parentMessage}\n\t<div>\n\t\t<div\n\t\t\tclass=\"flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden\"\n\t\t\tid=\"responses-container-{chatId}-{parentMessage.id}\"\n\t\t>\n\t\t\t{#each Object.keys(groupedMessageIds) as modelIdx}\n\t\t\t\t{#if groupedMessageIdsIdx[modelIdx] !== undefined && groupedMessageIds[modelIdx].messageIds.length > 0}\n\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t\t\t{@const _messageId =\n\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]]}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" snap-center w-full max-w-full m-1 border {history.messages[messageId]\n\t\t\t\t\t\t\t?.modelIdx == modelIdx\n\t\t\t\t\t\t\t? `border-gray-100 dark:border-gray-850 border-[1.5px] ${\n\t\t\t\t\t\t\t\t\t$mobile ? 'min-w-full' : 'min-w-80'\n\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t: `border-gray-100 dark:border-gray-850 border-dashed ${\n\t\t\t\t\t\t\t\t\t$mobile ? 'min-w-full' : 'min-w-80'\n\t\t\t\t\t\t\t\t}`} transition-all p-5 rounded-2xl\"\n\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\tif (messageId != _messageId) {\n\t\t\t\t\t\t\t\tlet currentMessageId = _messageId;\n\t\t\t\t\t\t\t\tlet messageChildrenIds = history.messages[currentMessageId].childrenIds;\n\t\t\t\t\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\t\t\t\t\tcurrentMessageId = messageChildrenIds.at(-1);\n\t\t\t\t\t\t\t\t\tmessageChildrenIds = history.messages[currentMessageId].childrenIds;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thistory.currentId = currentMessageId;\n\t\t\t\t\t\t\t\t// await tick();\n\t\t\t\t\t\t\t\t// await updateChat();\n\t\t\t\t\t\t\t\t// triggerScroll();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#key history.currentId}\n\t\t\t\t\t\t\t{#if message}\n\t\t\t\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\tmessageId={_messageId}\n\t\t\t\t\t\t\t\t\tisLastMessage={true}\n\t\t\t\t\t\t\t\t\tsiblings={groupedMessageIds[modelIdx].messageIds}\n\t\t\t\t\t\t\t\t\tgotoMessage={(message, messageIdx) => gotoMessage(modelIdx, messageIdx)}\n\t\t\t\t\t\t\t\t\tshowPreviousMessage={() => showPreviousMessage(modelIdx)}\n\t\t\t\t\t\t\t\t\tshowNextMessage={() => showNextMessage(modelIdx)}\n\t\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t\tregenerateResponse={async (message) => {\n\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\tgroupedMessageIdsIdx[modelIdx] =\n\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds.length - 1;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t</div>\n\n\t\t{#if !readOnly}\n\t\t\t{#if !Object.keys(groupedMessageIds).find((modelIdx) => {\n\t\t\t\tconst { messageIds } = groupedMessageIds[modelIdx];\n\t\t\t\tconst _messageId = messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\t\t\treturn !history.messages[_messageId]?.done ?? false;\n\t\t\t})}\n\t\t\t\t<div class=\"flex justify-end\">\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t{#if history.messages[messageId]?.merged?.status}\n\t\t\t\t\t\t\t{@const message = history.messages[messageId]?.merged}\n\n\t\t\t\t\t\t\t<div class=\"w-full rounded-xl pl-5 pr-2 py-2\">\n\t\t\t\t\t\t\t\t<Name>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Merged Response')}\n\n\t\t\t\t\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\" self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase ml-0.5 -mt-0.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{dayjs(message.timestamp * 1000).format('LT')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</Name>\n\n\t\t\t\t\t\t\t\t<div class=\"mt-1 markdown-prose w-full min-w-full\">\n\t\t\t\t\t\t\t\t\t{#if (message?.content ?? '') === ''}\n\t\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<Markdown id={`merged`} content={message.content ?? ''} />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t<div class=\" shrink-0 text-gray-600 dark:text-gray-500 mt-1\">\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Merge Responses')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tid=\"merge-response-button\"\n\t\t\t\t\t\t\t\t\tclass=\"{true\n\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tmergeResponsesHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Merge className=\" size-5 \" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport { toast } from 'svelte-sonner';\n\timport { tick, getContext, onMount } from 'svelte';\n\n\timport { models, settings } from '$lib/stores';\n\timport { user as _user } from '$lib/stores';\n\timport { copyToClipboard as _copyToClipboard, formatDate } from '$lib/utils';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport Markdown from './Markdown.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tconst i18n = getContext('i18n');\n\tdayjs.extend(localizedFormat);\n\n\texport let user;\n\n\texport let history;\n\texport let messageId;\n\n\texport let siblings;\n\n\texport let gotoMessage: Function;\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\n\texport let editMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let isFirstMessage: boolean;\n\texport let readOnly: boolean;\n\n\tlet showDeleteConfirm = false;\n\n\tlet messageIndexEdit = false;\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editedFiles = [];\n\n\tlet messageEditTextAreaElement: HTMLTextAreaElement;\n\n\tlet message = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\tconst copyToClipboard = async (text) => {\n\t\tconst res = await _copyToClipboard(text);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\t\teditedContent = message.content;\n\t\teditedFiles = message.files;\n\n\t\tawait tick();\n\n\t\tif (messageEditTextAreaElement) {\n\t\t\tmessageEditTextAreaElement.style.height = '';\n\t\t\tmessageEditTextAreaElement.style.height = `${messageEditTextAreaElement.scrollHeight}px`;\n\n\t\t\tmessageEditTextAreaElement?.focus();\n\t\t}\n\t};\n\n\tconst editMessageConfirmHandler = async (submit = true) => {\n\t\teditMessage(message.id, { content: editedContent, files: editedFiles }, submit);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\t\teditedFiles = [];\n\t};\n\n\tconst cancelEditMessage = () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\teditedFiles = [];\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdeleteMessage(message.id);\n\t};\n\n\tonMount(() => {\n\t\t// console.log('UserMessage mounted');\n\t});\n</script>\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete message?')}\n\ton:confirm={() => {\n\t\tdeleteMessageHandler();\n\t}}\n/>\n\n<div class=\" flex w-full user-message\" dir={$settings.chatDirection} id=\"message-{message.id}\">\n\t{#if !($settings?.chatBubble ?? true)}\n\t\t<div class={`shrink-0 ltr:mr-3 rtl:ml-3`}>\n\t\t\t<ProfileImage\n\t\t\t\tsrc={message.user\n\t\t\t\t\t? ($models.find((m) => m.id === message.user)?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t'/user.png')\n\t\t\t\t\t: (user?.profile_image_url ?? '/user.png')}\n\t\t\t\tclassName={'size-8'}\n\t\t\t/>\n\t\t</div>\n\t{/if}\n\t<div class=\"flex-auto w-0 max-w-full pl-1\">\n\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t<div>\n\t\t\t\t<Name>\n\t\t\t\t\t{#if message.user}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t\t<span class=\" text-gray-500 text-sm font-medium\">{message?.user ?? ''}</span>\n\t\t\t\t\t{:else if $settings.showUsername || $_user.name !== user.name}\n\t\t\t\t\t\t{user.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\">{formatDate(message.timestamp * 1000)}</span>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</Name>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class=\"chat-{message.role} w-full min-w-full markdown-prose\">\n\t\t\t{#if edit !== true}\n\t\t\t\t{#if message.files}\n\t\t\t\t\t<div class=\"mt-2.5 mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap\">\n\t\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t\t<div class={($settings?.chatBubble ?? true) ? 'self-end' : ''}>\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<Image src={file.url} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tcolorClassName=\"bg-white dark:bg-gray-850 \"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\n\t\t\t{#if message.content !== ''}\n\t\t\t\t{#if edit === true}\n\t\t\t\t\t<div class=\" w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2\">\n\t\t\t\t\t\t{#if (editedFiles ?? []).length > 0}\n\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-2 -mx-2 mb-1\">\n\t\t\t\t\t\t\t\t{#each editedFiles as file, fileIdx}\n\t\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t\t<div class=\" relative group\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"relative flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\timageClassName=\" size-14 rounded-xl object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" bg-white text-black border border-white rounded-full group-hover:visible invisible transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditedFiles.splice(fileIdx, 1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditedFiles = editedFiles;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\t\tedit={true}\n\t\t\t\t\t\t\t\t\t\t\ton:dismiss={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\teditedFiles.splice(fileIdx, 1);\n\n\t\t\t\t\t\t\t\t\t\t\t\teditedFiles = editedFiles;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(file);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"max-h-96 overflow-auto\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\t\tbind:this={messageEditTextAreaElement}\n\t\t\t\t\t\t\t\tclass=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-between text-sm font-medium\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"save-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\teditMessageConfirmHandler(false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Send')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t<div class=\"flex {($settings?.chatBubble ?? true) ? 'justify-end pb-1' : 'w-full'}\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"rounded-3xl {($settings?.chatBubble ?? true)\n\t\t\t\t\t\t\t\t\t? `max-w-[90%] px-5 py-2  bg-gray-50 dark:bg-gray-850 ${\n\t\t\t\t\t\t\t\t\t\t\tmessage.files ? 'rounded-tr-lg' : ''\n\t\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t\t: ' w-full'}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if message.content}\n\t\t\t\t\t\t\t\t\t<Markdown id={message.id} content={message.content} />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" flex {($settings?.chatBubble ?? true)\n\t\t\t\t\t\t\t\t? 'justify-end'\n\t\t\t\t\t\t\t\t: ''}  text-gray-600 dark:text-gray-500\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`message-index-input-${message.id}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t{#if !readOnly && (!isFirstMessage || siblings.length > 1)}\n\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"invisible group-hover:visible p-1 rounded-sm dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if $settings?.chatBubble ?? true}\n\t\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`message-index-input-${message.id}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\tconst i18n = getContext('i18n');\n\n\timport { settings } from '$lib/stores';\n\timport { copyToClipboard } from '$lib/utils';\n\n\timport MultiResponseMessages from './MultiResponseMessages.svelte';\n\timport ResponseMessage from './ResponseMessage.svelte';\n\timport UserMessage from './UserMessage.svelte';\n\n\texport let chatId;\n\texport let idx = 0;\n\n\texport let history;\n\texport let messageId;\n\n\texport let user;\n\n\texport let gotoMessage;\n\texport let showPreviousMessage;\n\texport let showNextMessage;\n\texport let updateChat;\n\n\texport let editMessage;\n\texport let saveMessage;\n\texport let deleteMessage;\n\texport let rateMessage;\n\texport let actionMessage;\n\texport let submitMessage;\n\n\texport let regenerateResponse;\n\texport let continueResponse;\n\texport let mergeResponses;\n\n\texport let addMessages;\n\texport let triggerScroll;\n\texport let readOnly = false;\n</script>\n\n<div\n\tclass=\"flex flex-col justify-between px-5 mb-3 w-full {($settings?.widescreenMode ?? null)\n\t\t? 'max-w-full'\n\t\t: 'max-w-5xl'} mx-auto rounded-lg group\"\n>\n\t{#if history.messages[messageId]}\n\t\t{#if history.messages[messageId].role === 'user'}\n\t\t\t<UserMessage\n\t\t\t\t{user}\n\t\t\t\t{history}\n\t\t\t\t{messageId}\n\t\t\t\tisFirstMessage={idx === 0}\n\t\t\t\tsiblings={history.messages[messageId].parentId !== null\n\t\t\t\t\t? (history.messages[history.messages[messageId].parentId]?.childrenIds ?? [])\n\t\t\t\t\t: (Object.values(history.messages)\n\t\t\t\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t\t\t\t.map((message) => message.id) ?? [])}\n\t\t\t\t{gotoMessage}\n\t\t\t\t{showPreviousMessage}\n\t\t\t\t{showNextMessage}\n\t\t\t\t{editMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{readOnly}\n\t\t\t/>\n\t\t{:else if (history.messages[history.messages[messageId].parentId]?.models?.length ?? 1) === 1}\n\t\t\t<ResponseMessage\n\t\t\t\t{chatId}\n\t\t\t\t{history}\n\t\t\t\t{messageId}\n\t\t\t\tisLastMessage={messageId === history.currentId}\n\t\t\t\tsiblings={history.messages[history.messages[messageId].parentId]?.childrenIds ?? []}\n\t\t\t\t{gotoMessage}\n\t\t\t\t{showPreviousMessage}\n\t\t\t\t{showNextMessage}\n\t\t\t\t{updateChat}\n\t\t\t\t{editMessage}\n\t\t\t\t{saveMessage}\n\t\t\t\t{rateMessage}\n\t\t\t\t{actionMessage}\n\t\t\t\t{submitMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{continueResponse}\n\t\t\t\t{regenerateResponse}\n\t\t\t\t{addMessages}\n\t\t\t\t{readOnly}\n\t\t\t/>\n\t\t{:else}\n\t\t\t<MultiResponseMessages\n\t\t\t\tbind:history\n\t\t\t\t{chatId}\n\t\t\t\t{messageId}\n\t\t\t\tisLastMessage={messageId === history?.currentId}\n\t\t\t\t{updateChat}\n\t\t\t\t{editMessage}\n\t\t\t\t{saveMessage}\n\t\t\t\t{rateMessage}\n\t\t\t\t{actionMessage}\n\t\t\t\t{submitMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{continueResponse}\n\t\t\t\t{regenerateResponse}\n\t\t\t\t{mergeResponses}\n\t\t\t\t{triggerScroll}\n\t\t\t\t{addMessages}\n\t\t\t\t{readOnly}\n\t\t\t/>\n\t\t{/if}\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport Fuse from 'fuse.js';\n\timport Bolt from '$lib/components/icons/Bolt.svelte';\n\timport { onMount, getContext, createEventDispatcher } from 'svelte';\n\timport { settings, WEBUI_NAME } from '$lib/stores';\n\timport { WEBUI_VERSION } from '$lib/constants';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\texport let suggestionPrompts = [];\n\texport let className = '';\n\texport let inputValue = '';\n\n\tlet sortedPrompts = [];\n\n\tconst fuseOptions = {\n\t\tkeys: ['content', 'title'],\n\t\tthreshold: 0.5\n\t};\n\n\tlet fuse;\n\tlet filteredPrompts = [];\n\n\t// Initialize Fuse\n\t$: fuse = new Fuse(sortedPrompts, fuseOptions);\n\n\t// Update the filteredPrompts if inputValue changes\n\t// Only increase version if something wirklich geändert hat\n\t$: getFilteredPrompts(inputValue);\n\n\t// Helper function to check if arrays are the same\n\t// (based on unique IDs oder content)\n\tfunction arraysEqual(a, b) {\n\t\tif (a.length !== b.length) return false;\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif ((a[i].id ?? a[i].content) !== (b[i].id ?? b[i].content)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tconst getFilteredPrompts = (inputValue) => {\n\t\tif (inputValue.length > 500) {\n\t\t\tfilteredPrompts = [];\n\t\t} else {\n\t\t\tconst newFilteredPrompts =\n\t\t\t\tinputValue.trim() && fuse\n\t\t\t\t\t? fuse.search(inputValue.trim()).map((result) => result.item)\n\t\t\t\t\t: sortedPrompts;\n\n\t\t\t// Compare with the oldFilteredPrompts\n\t\t\t// If there's a difference, update array + version\n\t\t\tif (!arraysEqual(filteredPrompts, newFilteredPrompts)) {\n\t\t\t\tfilteredPrompts = newFilteredPrompts;\n\t\t\t}\n\t\t}\n\t};\n\n\t$: if (suggestionPrompts) {\n\t\tsortedPrompts = [...(suggestionPrompts ?? [])].sort(() => Math.random() - 0.5);\n\t\tgetFilteredPrompts(inputValue);\n\t}\n</script>\n\n<div class=\"mb-1 flex gap-1 text-xs font-medium items-center text-gray-600 dark:text-gray-400\">\n\t{#if filteredPrompts.length > 0}\n\t\t<Bolt />\n\t\t{$i18n.t('Suggested')}\n\t{:else}\n\t\t<!-- Keine Vorschläge -->\n\n\t\t<div\n\t\t\tclass=\"flex w-full {$settings?.landingPageMode === 'chat'\n\t\t\t\t? ' -mt-1'\n\t\t\t\t: 'text-center items-center justify-center'}  self-start text-gray-600 dark:text-gray-400\"\n\t\t>\n\t\t\t{$WEBUI_NAME} ‧ v{WEBUI_VERSION}\n\t\t</div>\n\t{/if}\n</div>\n\n<div class=\"h-40 w-full\">\n\t{#if filteredPrompts.length > 0}\n\t\t<div class=\"max-h-40 overflow-auto scrollbar-none items-start {className}\">\n\t\t\t{#each filteredPrompts as prompt, idx (prompt.id || prompt.content)}\n\t\t\t\t<button\n\t\t\t\t\tclass=\"waterfall flex flex-col flex-1 shrink-0 w-full justify-between\n\t\t\t\t       px-3 py-2 rounded-xl bg-transparent hover:bg-black/5\n\t\t\t\t       dark:hover:bg-white/5 transition group\"\n\t\t\t\t\tstyle=\"animation-delay: {idx * 60}ms\"\n\t\t\t\t\ton:click={() => dispatch('select', prompt.content)}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col text-left\">\n\t\t\t\t\t\t{#if prompt.title && prompt.title[0] !== ''}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.title[0]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1\">\n\t\t\t\t\t\t\t\t{prompt.title[1]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1\">\n\t\t\t\t\t\t\t\t{$i18n.t('Prompt')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t/* Waterfall animation for the suggestions */\n\t@keyframes fadeInUp {\n\t\t0% {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(20px);\n\t\t}\n\t\t100% {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n\n\t.waterfall {\n\t\topacity: 0;\n\t\tanimation-name: fadeInUp;\n\t\tanimation-duration: 200ms;\n\t\tanimation-fill-mode: forwards;\n\t\tanimation-timing-function: ease;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { marked } from 'marked';\n\n\timport { config, user, models as _models, temporaryChatEnabled } from '$lib/stores';\n\timport { onMount, getContext } from 'svelte';\n\n\timport { blur, fade } from 'svelte/transition';\n\n\timport Suggestions from './Suggestions.svelte';\n\timport { sanitizeResponseContent } from '$lib/utils';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport EyeSlash from '$lib/components/icons/EyeSlash.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let modelIds = [];\n\texport let models = [];\n\texport let atSelectedModel;\n\n\texport let submitPrompt;\n\n\tlet mounted = false;\n\tlet selectedModelIdx = 0;\n\n\t$: if (modelIds.length > 0) {\n\t\tselectedModelIdx = models.length - 1;\n\t}\n\n\t$: models = modelIds.map((id) => $_models.find((m) => m.id === id));\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n</script>\n\n{#key mounted}\n\t<div class=\"m-auto w-full max-w-6xl px-8 lg:px-20\">\n\t\t<div class=\"flex justify-start\">\n\t\t\t<div class=\"flex -space-x-4 mb-0.5\" in:fade={{ duration: 200 }}>\n\t\t\t\t{#each models as model, modelIdx}\n\t\t\t\t\t<button\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedModelIdx = modelIdx;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(models[selectedModelIdx]?.info?.meta?.description ?? '')\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tplacement=\"right\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tcrossorigin=\"anonymous\"\n\t\t\t\t\t\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG'\n\t\t\t\t\t\t\t\t\t\t? `/doge.png`\n\t\t\t\t\t\t\t\t\t\t: `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\t\t\t\t\tclass=\" size-[2.7rem] rounded-full border-[1px] border-gray-100 dark:border-none\"\n\t\t\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if $temporaryChatEnabled}\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t('This chat won’t appear in history and your messages will not be saved.')}\n\t\t\t\tclassName=\"w-full flex justify-start mb-0.5\"\n\t\t\t\tplacement=\"top\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-2 text-gray-500 font-medium text-lg mt-2 w-fit\">\n\t\t\t\t\t<EyeSlash strokeWidth=\"2.5\" className=\"size-5\" />{$i18n.t('Temporary Chat')}\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 font-medium text-left flex items-center gap-4 font-primary\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<div class=\" capitalize line-clamp-1\" in:fade={{ duration: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.name}\n\t\t\t\t\t\t{models[selectedModelIdx]?.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('Hello, {{name}}', { name: $user?.name })}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div in:fade={{ duration: 200, delay: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.description ?? null}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{@html marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(models[selectedModelIdx]?.info?.meta?.description)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user}\n\t\t\t\t\t\t\t<div class=\"mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500\">\n\t\t\t\t\t\t\t\tBy\n\t\t\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user.community}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref=\"https://openwebui.com/m/{models[selectedModelIdx]?.info?.meta?.user\n\t\t\t\t\t\t\t\t\t\t\t.username}\"\n\t\t\t\t\t\t\t\t\t\t>{models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t? models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t: `@${models[selectedModelIdx]?.info?.meta?.user.username}`}</a\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{models[selectedModelIdx]?.info?.meta?.user.name}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\" font-medium text-gray-400 dark:text-gray-500 line-clamp-1 font-p\">\n\t\t\t\t\t\t\t{$i18n.t('How can I help you today?')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" w-full font-primary\" in:fade={{ duration: 200, delay: 300 }}>\n\t\t\t<Suggestions\n\t\t\t\tclassName=\"grid grid-cols-2\"\n\t\t\t\tsuggestionPrompts={atSelectedModel?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\t$config?.default_prompt_suggestions ??\n\t\t\t\t\t[]}\n\t\t\t\ton:select={(e) => {\n\t\t\t\t\tsubmitPrompt(e.detail);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t</div>\n{/key}\n","<script lang=\"ts\">\n\timport { v4 as uuidv4 } from 'uuid';\n\timport {\n\t\tchats,\n\t\tconfig,\n\t\tsettings,\n\t\tuser as _user,\n\t\tmobile,\n\t\tcurrentChatPage,\n\t\ttemporaryChatEnabled\n\t} from '$lib/stores';\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport { toast } from 'svelte-sonner';\n\timport { getChatList, updateChatById } from '$lib/apis/chats';\n\timport { copyToClipboard, extractCurlyBraceWords } from '$lib/utils';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\n\timport ChatPlaceholder from './ChatPlaceholder.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let className = 'h-full flex pt-8';\n\n\texport let chatId = '';\n\texport let user = $_user;\n\n\texport let prompt;\n\texport let history = {};\n\texport let selectedModels;\n\texport let atSelectedModel;\n\n\tlet messages = [];\n\n\texport let sendPrompt: Function;\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\texport let mergeResponses: Function;\n\n\texport let chatActionHandler: Function;\n\texport let showMessage: Function = () => {};\n\texport let submitMessage: Function = () => {};\n\texport let addMessages: Function = () => {};\n\n\texport let readOnly = false;\n\n\texport let bottomPadding = false;\n\texport let autoScroll;\n\n\tlet messagesCount = 20;\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\t\tmessagesCount += 20;\n\n\t\tawait tick();\n\n\t\tmessagesLoading = false;\n\t};\n\n\t$: if (history.currentId) {\n\t\tlet _messages = [];\n\n\t\tlet message = history.messages[history.currentId];\n\t\twhile (message && _messages.length <= messagesCount) {\n\t\t\t_messages.unshift({ ...message });\n\t\t\tmessage = message.parentId !== null ? history.messages[message.parentId] : null;\n\t\t}\n\n\t\tmessages = _messages;\n\t} else {\n\t\tmessages = [];\n\t}\n\n\t$: if (autoScroll && bottomPadding) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t})();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollHeight;\n\t};\n\n\tconst updateChat = async () => {\n\t\tif (!$temporaryChatEnabled) {\n\t\t\thistory = history;\n\t\t\tawait tick();\n\t\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\t\thistory: history,\n\t\t\t\tmessages: messages\n\t\t\t});\n\n\t\t\tcurrentChatPage.set(1);\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\n\t\t}\n\t};\n\n\tconst gotoMessage = async (message, idx) => {\n\t\t// Determine the correct sibling list (either parent's children or root messages)\n\t\tlet siblings;\n\t\tif (message.parentId !== null) {\n\t\t\tsiblings = history.messages[message.parentId].childrenIds;\n\t\t} else {\n\t\t\tsiblings = Object.values(history.messages)\n\t\t\t\t.filter((msg) => msg.parentId === null)\n\t\t\t\t.map((msg) => msg.id);\n\t\t}\n\n\t\t// Clamp index to a valid range\n\t\tidx = Math.max(0, Math.min(idx, siblings.length - 1));\n\n\t\tlet messageId = siblings[idx];\n\n\t\t// If we're navigating to a different message\n\t\tif (message.id !== messageId) {\n\t\t\t// Drill down to the deepest child of that branch\n\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t}\n\n\t\t\thistory.currentId = messageId;\n\t\t}\n\n\t\tawait tick();\n\n\t\t// Optional auto-scroll\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst showPreviousMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.max(history.messages[message.parentId].childrenIds.indexOf(message.id) - 1, 0)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId = childrenIds[Math.max(childrenIds.indexOf(message.id) - 1, 0)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst showNextMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.indexOf(message.id) + 1,\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.length - 1\n\t\t\t\t\t)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId =\n\t\t\t\tchildrenIds[Math.min(childrenIds.indexOf(message.id) + 1, childrenIds.length - 1)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst rateMessage = async (messageId, rating) => {\n\t\thistory.messages[messageId].annotation = {\n\t\t\t...history.messages[messageId].annotation,\n\t\t\trating: rating\n\t\t};\n\n\t\tawait updateChat();\n\t};\n\n\tconst editMessage = async (messageId, { content, files }, submit = true) => {\n\t\tif (history.messages[messageId].role === 'user') {\n\t\t\tif (submit) {\n\t\t\t\t// New user message\n\t\t\t\tlet userPrompt = content;\n\t\t\t\tlet userMessageId = uuidv4();\n\n\t\t\t\tlet userMessage = {\n\t\t\t\t\tid: userMessageId,\n\t\t\t\t\tparentId: history.messages[messageId].parentId,\n\t\t\t\t\tchildrenIds: [],\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: userPrompt,\n\t\t\t\t\t...(files && { files: files }),\n\t\t\t\t\tmodels: selectedModels,\n\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000) // Unix epoch\n\t\t\t\t};\n\n\t\t\t\tlet messageParentId = history.messages[messageId].parentId;\n\n\t\t\t\tif (messageParentId !== null) {\n\t\t\t\t\thistory.messages[messageParentId].childrenIds = [\n\t\t\t\t\t\t...history.messages[messageParentId].childrenIds,\n\t\t\t\t\t\tuserMessageId\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\thistory.messages[userMessageId] = userMessage;\n\t\t\t\thistory.currentId = userMessageId;\n\n\t\t\t\tawait tick();\n\t\t\t\tawait sendPrompt(history, userPrompt, userMessageId);\n\t\t\t} else {\n\t\t\t\t// Edit user message\n\t\t\t\thistory.messages[messageId].content = content;\n\t\t\t\thistory.messages[messageId].files = files;\n\t\t\t\tawait updateChat();\n\t\t\t}\n\t\t} else {\n\t\t\tif (submit) {\n\t\t\t\t// New response message\n\t\t\t\tconst responseMessageId = uuidv4();\n\t\t\t\tconst message = history.messages[messageId];\n\t\t\t\tconst parentId = message.parentId;\n\n\t\t\t\tconst responseMessage = {\n\t\t\t\t\t...message,\n\t\t\t\t\tid: responseMessageId,\n\t\t\t\t\tparentId: parentId,\n\t\t\t\t\tchildrenIds: [],\n\t\t\t\t\tfiles: undefined,\n\t\t\t\t\tcontent: content,\n\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000) // Unix epoch\n\t\t\t\t};\n\n\t\t\t\thistory.messages[responseMessageId] = responseMessage;\n\t\t\t\thistory.currentId = responseMessageId;\n\n\t\t\t\t// Append messageId to childrenIds of parent message\n\t\t\t\tif (parentId !== null) {\n\t\t\t\t\thistory.messages[parentId].childrenIds = [\n\t\t\t\t\t\t...history.messages[parentId].childrenIds,\n\t\t\t\t\t\tresponseMessageId\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tawait updateChat();\n\t\t\t} else {\n\t\t\t\t// Edit response message\n\t\t\t\thistory.messages[messageId].originalContent = history.messages[messageId].content;\n\t\t\t\thistory.messages[messageId].content = content;\n\t\t\t\tawait updateChat();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst actionMessage = async (actionId, message, event = null) => {\n\t\tawait chatActionHandler(chatId, actionId, message.model, message.id, event);\n\t};\n\n\tconst saveMessage = async (messageId, message) => {\n\t\thistory.messages[messageId] = message;\n\t\tawait updateChat();\n\t};\n\n\tconst deleteMessage = async (messageId) => {\n\t\tconst messageToDelete = history.messages[messageId];\n\t\tconst parentMessageId = messageToDelete.parentId;\n\t\tconst childMessageIds = messageToDelete.childrenIds ?? [];\n\n\t\t// Collect all grandchildren\n\t\tconst grandchildrenIds = childMessageIds.flatMap(\n\t\t\t(childId) => history.messages[childId]?.childrenIds ?? []\n\t\t);\n\n\t\t// Update parent's children\n\t\tif (parentMessageId && history.messages[parentMessageId]) {\n\t\t\thistory.messages[parentMessageId].childrenIds = [\n\t\t\t\t...history.messages[parentMessageId].childrenIds.filter((id) => id !== messageId),\n\t\t\t\t...grandchildrenIds\n\t\t\t];\n\t\t}\n\n\t\t// Update grandchildren's parent\n\t\tgrandchildrenIds.forEach((grandchildId) => {\n\t\t\tif (history.messages[grandchildId]) {\n\t\t\t\thistory.messages[grandchildId].parentId = parentMessageId;\n\t\t\t}\n\t\t});\n\n\t\t// Delete the message and its children\n\t\t[messageId, ...childMessageIds].forEach((id) => {\n\t\t\tdelete history.messages[id];\n\t\t});\n\n\t\tawait tick();\n\n\t\tshowMessage({ id: parentMessageId });\n\n\t\t// Update the chat\n\t\tawait updateChat();\n\t};\n\n\tconst triggerScroll = () => {\n\t\tif (autoScroll) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n</script>\n\n<div class={className}>\n\t{#if Object.keys(history?.messages ?? {}).length == 0}\n\t\t<ChatPlaceholder\n\t\t\tmodelIds={selectedModels}\n\t\t\t{atSelectedModel}\n\t\t\tsubmitPrompt={async (p) => {\n\t\t\t\tlet text = p;\n\n\t\t\t\tif (p.includes('{{CLIPBOARD}}')) {\n\t\t\t\t\tconst clipboardText = await navigator.clipboard.readText().catch((err) => {\n\t\t\t\t\t\ttoast.error($i18n.t('Failed to read clipboard contents'));\n\t\t\t\t\t\treturn '{{CLIPBOARD}}';\n\t\t\t\t\t});\n\n\t\t\t\t\ttext = p.replaceAll('{{CLIPBOARD}}', clipboardText);\n\t\t\t\t}\n\n\t\t\t\tprompt = text;\n\t\t\t\tawait tick();\n\t\t\t}}\n\t\t/>\n\t{:else}\n\t\t<div class=\"w-full pt-2\">\n\t\t\t{#key chatId}\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t{#if messages.at(0)?.parentId !== null}\n\t\t\t\t\t\t<Loader\n\t\t\t\t\t\t\ton:visible={(e) => {\n\t\t\t\t\t\t\t\tconsole.log('visible');\n\t\t\t\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t\t\t\t<div class=\" \">Loading...</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Loader>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#each messages as message, messageIdx (message.id)}\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\tbind:history\n\t\t\t\t\t\t\tmessageId={message.id}\n\t\t\t\t\t\t\tidx={messageIdx}\n\t\t\t\t\t\t\t{user}\n\t\t\t\t\t\t\t{gotoMessage}\n\t\t\t\t\t\t\t{showPreviousMessage}\n\t\t\t\t\t\t\t{showNextMessage}\n\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t{regenerateResponse}\n\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t{mergeResponses}\n\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t{triggerScroll}\n\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"pb-12\" />\n\t\t\t\t{#if bottomPadding}\n\t\t\t\t\t<div class=\"  pb-6\" />\n\t\t\t\t{/if}\n\t\t\t{/key}\n\t\t</div>\n\t{/if}\n</div>\n"],"names":["KokoroWorker","dtype","__publicField","WorkerInstance","event","status","error","audioUrl","request","resolve","reject","handleMessage","text","voice","attr","div0","div0_class_value","ctx","div1","div1_class_value","div2","div2_class_value","div4","div4_class_value","div5","div5_class_value","div6","div6_class_value","div8","div8_class_value","div9","div9_class_value","insert_hydration","target","div11","anchor","append_hydration","div10","div3","div7","dirty","size","$$props","_a","div","button","button_class_value","button_disabled_value","_b","i","set_data","t0","t0_value","t_value","create_if_block_1","create_if_block_2","create_if_block_3","create_if_block_4","create_if_block_5","create_if_block_6","create_if_block_7","create_if_block_8","create_if_block_9","create_if_block_10","create_if_block_11","create_if_block_12","create_if_block_13","create_if_block_14","if_block0","create_if_block_15","each_value_1","ensure_array_like","func","create_if_block","div12","div12_id_value","button0","textarea","button1","t1","t1_value","t6","t6_value","t9","t9_value","t14","t14_value","current","_","i18n","getContext","dispatch","createEventDispatcher","message","show","LIKE_REASONS","DISLIKE_REASONS","tags","reasons","selectedReason","comment","detailedRating","selectedModel","init","$$invalidate","_c","tag","_e","_d","onMount","$models","m","toast","$i18n","saveHandler","rating","reason","e","a","a_href_value","a_class_value","if_block","each_value","state","value","content","calculatePercentage","child_ctx","t","t3_value","span","t3","WEBUI_API_BASE_URL","_f","_h","_g","_j","_i","_l","_k","pre","t2","t2_value","span_class_value","getRelevanceColor","iframe","iframe_srcdoc_value","hr","if_block2","each_blocks","distance","percentage","citation","showPercentage","showRelevance","mergedDocuments","decodeString","str","c","doc","b","show_if","each_value_2","span0","span1","span2","t5","t5_value","t7","t7_value","calculateShowRelevance","sources","distances","inRange","d","outOfRange","shouldShowPercentage","id","citations","showCitationModal","selectedCitation","isCollapsibleOpen","func_1","func_2","acc","source","document","index","metadata","_source","existingSource","item","ul","li","if_block1","if_block3","_m","_o","_n","if_block4","_q","_p","_s","_r","codeblock_changes","codeExecution","get_key","codeExecutions","selectedCodeExecution","showCodeExecutionModal","updateSelectedCodeExecution","execution","svg","path","className","strokeWidth","input","t4","t4_value","model","messages","onAdd","floatingInput","selectedText","floatingInputValue","prompt","responseContent","responseDone","autoScroll","responseContainer","askHandler","line","res","controller","chatCompletion","reader","decoder","done","lines","tick","data","explainHandler","quotedText","addHandler","closeHandler","createMessagesList","floatingbuttons_changes","markdown_changes","history","save","preview","floatingButtons","onSave","onSourceClick","onTaskClick","onAddMessages","contentContainerElement","floatingButtonsElement","updateButtonPosition","buttonsContainerElement","closeFloatingButtons","selection","rect","parentRect","top","left","spaceOnRight","halfScreenWidth","$mobile","right","keydownHandler","onDestroy","s","ids","token","lang","code","$settings","$chatId","showArtifacts","showControls","artifactCode","showOverview","$$value","modelId","parentId","followUps","onClick","click_handler","followUp","constants_0","dayjs","formatDate","create_if_block_41","tooltip_changes","create_if_block_31","create_if_block_38","create_if_block_39","create_if_block_40","create_if_block_34","create_if_block_35","fileitem_changes","image_changes","create_if_block_25","create_if_block_24","create_if_block_23","textarea_id_value","button2","contentrenderer_changes","error_changes","citations_changes","codeexecutions_changes","create_if_block_20","create_if_block_21","svg0","path0","svg1","path1","input_id_value","input_value_value","input_max_value","create_if_block_18","create_if_block_19","style","circle0","circle1","circle2","create_if_block_16","create_if_block_17","button_id_value","sanitizeResponseContent","func_5","func_6","src_url_equal","img","img_src_value","img_class_value","img_alt_value","button_aria_label_value","followups_changes","div_intro","create_in_transition","fade","WEBUI_BASE_URL","create_if_block_30","get_if_ctx","div5_id_value","div5_dir_value","previous_key","safe_not_equal","f","chatId","messageId","siblings","gotoMessage","showPreviousMessage","showNextMessage","updateChat","editMessage","saveMessage","rateMessage","actionMessage","deleteMessage","submitMessage","continueResponse","regenerateResponse","addMessages","isLastMessage","readOnly","showDeleteConfirm","edit","editedContent","editTextAreaElement","messageIndexEdit","audioParts","speaking","speakingIdx","loadingSpeech","generatingImage","showRateComment","copyToClipboard","removeAllDetails","$config","_copyToClipboard","playAudio","idx","audio","r","toggleSpeakMessage","voices","getVoicesLoop","v","speak","messageContentParts","getMessageContentParts","_sentence","lastPlayedAudioPromise","$TTSWorker","TTSWorker","sentence","blob","synthesizeOpenAISpeech","_u","_t","blobUrl","_w","_v","preprocessedDetailsCache","preprocessForEditing","detailsBlocks","match","postprocessAfterEditing","editMessageHandler","editMessageConfirmHandler","messageContent","saveAsCopyHandler","cancelEditMessage","generateImage","imageGenerations","files","image","feedbackLoading","feedbackHandler","details","updatedMessage","chat","getChatById","feedbackItem","baseModels","feedback","updateFeedbackById","createNewFeedback","generateTags","deleteMessageHandler","isCmdOrCtrlPressed","isEnterPressed","sourceButton","sourcesCollapsible","raw","oldContent","newContent","action","div_class_value","get_if_ctx_1","localizedFormat","mergeResponses","triggerScroll","currentMessageId","parentMessage","groupedMessageIds","groupedMessageIdsIdx","modelIdx","messageIdx","messageChildrenIds","initHandler","modelMessageIds","modelMessages","mergeResponsesHandler","responses","messageIds","messageElement","_messageId","func_3","profileimage_changes","div2_dir_value","div2_id_value","user","isFirstMessage","editedFiles","messageEditTextAreaElement","submit","fileIdx","file","usermessage_changes","WEBUI_VERSION","set_style","arraysEqual","suggestionPrompts","inputValue","sortedPrompts","fuseOptions","fuse","filteredPrompts","getFilteredPrompts","newFilteredPrompts","result","Fuse","marked","raw_value","html_tag","suggestions_changes","div0_intro","div2_intro","div3_intro","div6_intro","modelIds","models","atSelectedModel","submitPrompt","mounted","selectedModelIdx","$_models","message_1_changes","$_user","selectedModels","sendPrompt","chatActionHandler","showMessage","bottomPadding","messagesCount","messagesLoading","loadMoreMessages","element","scrollToBottom","$temporaryChatEnabled","updateChatById","currentChatPage","chats","getChatList","$currentChatPage","msg","childrenIds","userPrompt","userMessageId","uuidv4","userMessage","messageParentId","responseMessageId","responseMessage","actionId","messageToDelete","parentMessageId","childMessageIds","grandchildrenIds","childId","grandchildId","p","clipboardText","err","_messages"],"mappings":"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"}