import{s as y,l as d,i as v,d as f,j as g,p as N,q as O,e as h,c as k,a as E,f as $,g as q,n as T}from"../chunks/Bk--KVgx.js";import{S as U,i as B,a as _,c as C,t as p,g as D,b as I,d as S,m as w,e as R}from"../chunks/CoU9NT7-.js";import{g as P}from"../chunks/D_XIBSCa.js";import{p as W}from"../chunks/D-0X3nPa.js";import{a as j,u as Q,g as F}from"../chunks/BQEMayK6.js";import{S as H}from"../chunks/R3jnHhLu.js";import{T as M}from"../chunks/DHU3YEis.js";import{d as b,t as z}from"../chunks/Cx1AvSPh.js";import{e as A,c as G}from"../chunks/BQs868cI.js";import{t as m}from"../chunks/DXxu2l8m.js";function J(l){let o,t,e,s;return e=new H({}),{c(){o=h("div"),t=h("div"),I(e.$$.fragment),this.h()},l(r){o=k(r,"DIV",{class:!0});var a=E(o);t=k(a,"DIV",{class:!0});var u=E(t);S(e.$$.fragment,u),u.forEach(f),a.forEach(f),this.h()},h(){$(t,"class","pb-16"),$(o,"class","flex items-center justify-center h-full")},m(r,a){v(r,o,a),q(o,t),w(e,t,null),s=!0},p:T,i(r){s||(p(e.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),s=!1},d(r){r&&f(o),R(e)}}}function K(l){let o,t;return o=new M({props:{edit:!0,id:l[0].id,name:l[0].name,meta:l[0].meta,content:l[0].content,accessControl:l[0].access_control,onSave:l[3]}}),{c(){I(o.$$.fragment)},l(e){S(o.$$.fragment,e)},m(e,s){w(o,e,s),t=!0},p(e,s){const r={};s&1&&(r.id=e[0].id),s&1&&(r.name=e[0].name),s&1&&(r.meta=e[0].meta),s&1&&(r.content=e[0].content),s&1&&(r.accessControl=e[0].access_control),o.$set(r)},i(e){t||(p(o.$$.fragment,e),t=!0)},o(e){_(o.$$.fragment,e),t=!1},d(e){R(o,e)}}}function L(l){let o,t,e,s;const r=[K,J],a=[];function u(c,n){return c[0]?0:1}return o=u(l),t=a[o]=r[o](l),{c(){t.c(),e=d()},l(c){t.l(c),e=d()},m(c,n){a[o].m(c,n),v(c,e,n),s=!0},p(c,[n]){let i=o;o=u(c),o===i?a[o].p(c,n):(D(),_(a[i],1,1,()=>{a[i]=null}),C(),t=a[o],t?t.p(c,n):(t=a[o]=r[o](c),t.c()),p(t,1),t.m(e.parentNode,e))},i(c){s||(p(t),s=!0)},o(c){_(t),s=!1},d(c){c&&f(e),a[o].d(c)}}}function X(l,o,t){let e,s;g(l,W,n=>t(4,e=n));const r=N("i18n");g(l,r,n=>t(5,s=n));let a=null;const u=async n=>{const i=A(n.content);if(G((i==null?void 0:i.required_open_webui_version)??"0.0.0",b)){m.error(s.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:b,REQUIRED_VERSION:(i==null?void 0:i.required_open_webui_version)??"0.0.0"}));return}await Q(localStorage.token,a.id,{id:n.id,name:n.name,meta:n.meta,content:n.content,access_control:n.access_control}).catch(V=>(m.error(`${V}`),null))&&(m.success(s.t("Tool updated successfully")),z.set(await F(localStorage.token)))};return O(async()=>{const n=e.url.searchParams.get("id");n&&t(0,a=await j(localStorage.token,n).catch(i=>(m.error(`${i}`),P("/workspace/tools"),null)))}),[a,r,u,n=>{u(n)}]}class le extends U{constructor(o){super(),B(this,o,X,L,y,{})}}export{le as component};
//# sourceMappingURL=39.BPChsIIJ.js.map
