import{s as be,k as F,l as me,m as we,d,o as R,i as ee,j as O,p as ye,z as J,e as h,t as G,c as v,a as b,b as K,f as p,g as u,u as Se,h as Q,B as X,D as Y}from"../chunks/Bk--KVgx.js";import{S as Ie,i as ke,t as q,a as se,c as Ee,f as Z,b as De,d as Me,m as Ve,e as Ce,g as Be}from"../chunks/CoU9NT7-.js";import{g as x}from"../chunks/D_XIBSCa.js";import{p as Le}from"../chunks/D-0X3nPa.js";import{d as te}from"../chunks/I1CDPYOB.js";import{i as ge,b as $,c as Ne,W as je,m as Ue}from"../chunks/Cx1AvSPh.js";import{l as Oe,a as Pe,b as Te}from"../chunks/BQs868cI.js";import{g as We,c as ze}from"../chunks/D7464H8B.js";import{M as Ae}from"../chunks/B74Rqbdy.js";import{t as Fe}from"../chunks/DXxu2l8m.js";import"../chunks/DuEzRzUF.js";import"../chunks/C7mVdHWX.js";import"../chunks/0ZqDA-lu.js";import{g as Re}from"../chunks/Dl8uL88t.js";import"../chunks/CF4_YkFU.js";import{g as qe,a as He}from"../chunks/CX6ZVZP8.js";import"../chunks/CyTOOynw.js";import"../chunks/MzMpT8ak.js";import"../chunks/B2GCdm33.js";function pe(e){let m,t,i,n,s,a,f,j,E,D,I=te(e[4].chat.timestamp).format("LLL")+"",L,w,U,M,V,c,_,P,T,W,C,B,o,k=e[11].t("Clone Chat")+"",r,y,H,ae;function _e(l){e[16](l)}function he(l){e[17](l)}function ve(l){e[18](l)}let z={className:"h-full flex pt-4 pb-8 ",user:e[5],chatId:e[8],readOnly:!0,selectedModels:e[3],processing:Ge,bottomPadding:e[13].length>0,sendPrompt:Ke,continueResponse:Qe,regenerateResponse:Xe};return e[0]!==void 0&&(z.history=e[0]),e[7]!==void 0&&(z.messages=e[7]),e[2]!==void 0&&(z.autoScroll=e[2]),c=new Ae({props:z}),J.push(()=>Z(c,"history",_e)),J.push(()=>Z(c,"messages",he)),J.push(()=>Z(c,"autoScroll",ve)),{c(){m=h("div"),t=h("div"),i=h("div"),n=h("div"),s=h("div"),a=h("div"),f=G(e[6]),j=F(),E=h("div"),D=h("div"),L=G(I),U=F(),M=h("div"),V=h("div"),De(c.$$.fragment),W=F(),C=h("div"),B=h("div"),o=h("button"),r=G(k),this.h()},l(l){m=v(l,"DIV",{class:!0});var g=b(m);t=v(g,"DIV",{class:!0});var S=b(t);i=v(S,"DIV",{class:!0,id:!0});var N=b(i);n=v(N,"DIV",{class:!0});var oe=b(n);s=v(oe,"DIV",{class:!0});var A=b(s);a=v(A,"DIV",{class:!0});var le=b(a);f=K(le,e[6]),le.forEach(d),j=R(A),E=v(A,"DIV",{class:!0});var re=b(E);D=v(re,"DIV",{class:!0});var ie=b(D);L=K(ie,I),ie.forEach(d),re.forEach(d),A.forEach(d),oe.forEach(d),U=R(N),M=v(N,"DIV",{class:!0});var ne=b(M);V=v(ne,"DIV",{class:!0});var ce=b(V);Me(c.$$.fragment,ce),ce.forEach(d),ne.forEach(d),N.forEach(d),W=R(S),C=v(S,"DIV",{class:!0});var ue=b(C);B=v(ue,"DIV",{class:!0});var de=b(B);o=v(de,"BUTTON",{class:!0});var fe=b(o);r=K(fe,k),fe.forEach(d),de.forEach(d),ue.forEach(d),S.forEach(d),g.forEach(d),this.h()},h(){var l;p(a,"class","text-2xl font-semibold line-clamp-1"),p(D,"class","text-gray-400"),p(E,"class","flex text-sm justify-between items-center mt-1"),p(s,"class","px-3"),p(n,"class",w="pt-5 px-2 w-full "+(((l=e[9])==null?void 0:l.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"),p(V,"class","w-full"),p(M,"class","h-full w-full flex flex-col py-2"),p(i,"class","flex flex-col w-full flex-auto overflow-auto h-0"),p(i,"id","messages-container"),p(o,"class","px-4 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),p(B,"class","pb-5"),p(C,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"),p(t,"class","flex flex-col flex-auto justify-center relative"),p(m,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(l,g){ee(l,m,g),u(m,t),u(t,i),u(i,n),u(n,s),u(s,a),u(a,f),u(s,j),u(s,E),u(E,D),u(D,L),u(i,U),u(i,M),u(M,V),Ve(c,V,null),u(t,W),u(t,C),u(C,B),u(B,o),u(o,r),y=!0,H||(ae=Se(o,"click",e[14]),H=!0)},p(l,g){var N;(!y||g&64)&&Q(f,l[6]),(!y||g&16)&&I!==(I=te(l[4].chat.timestamp).format("LLL")+"")&&Q(L,I),(!y||g&512&&w!==(w="pt-5 px-2 w-full "+(((N=l[9])==null?void 0:N.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"))&&p(n,"class",w);const S={};g&32&&(S.user=l[5]),g&256&&(S.chatId=l[8]),g&8&&(S.selectedModels=l[3]),!_&&g&1&&(_=!0,S.history=l[0],X(()=>_=!1)),!P&&g&128&&(P=!0,S.messages=l[7],X(()=>P=!1)),!T&&g&4&&(T=!0,S.autoScroll=l[2],X(()=>T=!1)),c.$set(S),(!y||g&2048)&&k!==(k=l[11].t("Clone Chat")+"")&&Q(r,k)},i(l){y||(q(c.$$.fragment,l),y=!0)},o(l){se(c.$$.fragment,l),y=!1},d(l){l&&d(m),Ce(c),H=!1,ae()}}}function Je(e){let m,t,i,n;document.title=m=`
		`+(e[6]?`${e[6].length>30?`${e[6].slice(0,30)}...`:e[6]} • ${e[10]}`:`${e[10]}`)+`
	`;let s=e[1]&&pe(e);return{c(){t=F(),s&&s.c(),i=me()},l(a){we("svelte-a2pwma",document.head).forEach(d),t=R(a),s&&s.l(a),i=me()},m(a,f){ee(a,t,f),s&&s.m(a,f),ee(a,i,f),n=!0},p(a,[f]){(!n||f&1088)&&m!==(m=`
		`+(a[6]?`${a[6].length>30?`${a[6].slice(0,30)}...`:a[6]} • ${a[10]}`:`${a[10]}`)+`
	`)&&(document.title=m),a[1]?s?(s.p(a,f),f&2&&q(s,1)):(s=pe(a),s.c(),q(s,1),s.m(i.parentNode,i)):s&&(Be(),se(s,1,1,()=>{s=null}),Ee())},i(a){n||(q(s),n=!0)},o(a){se(s),n=!1},d(a){a&&(d(t),d(i)),s&&s.d(a)}}}let Ge="";const Ke=()=>{},Qe=()=>{},Xe=()=>{};function Ye(e,m,t){let i,n,s,a,f,j;O(e,ge,o=>t(8,i=o)),O(e,Le,o=>t(15,n=o)),O(e,$,o=>t(9,s=o)),O(e,Ne,o=>t(19,a=o)),O(e,je,o=>t(10,f=o));const E=ye("i18n");O(e,E,o=>t(11,j=o)),te.extend(Oe);let D=!1,I=!0,L=[""],w=null,U=null,M="",V=[],c=[],_={messages:{},currentId:null};const P=async()=>{var k;const o=await qe(localStorage.token).catch(r=>(console.error(r),null));if(o)$.set(o.ui);else{let r={};try{r=JSON.parse(localStorage.getItem("settings")??"{}")}catch(y){console.error("Failed to parse settings from localStorage",y)}$.set(r)}if(await Ue.set(await Re(localStorage.token,((k=a==null?void 0:a.features)==null?void 0:k.enable_direct_connections)&&((s==null?void 0:s.directConnections)??null))),await ge.set(n.params.id),t(4,w=await We(localStorage.token,i).catch(async r=>(await x("/"),null))),w){t(5,U=await He(localStorage.token,w.user_id).catch(y=>(console.error(y),null)));const r=w.chat;return r?(t(3,L=((r==null?void 0:r.models)??void 0)!==void 0?r.models:[r.models??""]),t(0,_=((r==null?void 0:r.history)??void 0)!==void 0?r.history:Te(r.messages)),t(6,M=r.title),t(2,I=!0),await Y(),c.length>0&&t(0,_.messages[c.at(-1).id].done=!0,_),await Y(),!0):null}},T=async()=>{if(!w)return;const o=await ze(localStorage.token,w.id).catch(k=>(Fe.error(`${k}`),null));o&&x(`/c/${o.id}`)};function W(o){_=o,t(0,_)}function C(o){c=o,t(7,c),t(0,_)}function B(o){I=o,t(2,I)}return e.$$.update=()=>{e.$$.dirty&1&&t(7,c=Pe(_,_.currentId)),e.$$.dirty&32768&&n.params.id&&(async()=>await P()?(await Y(),t(1,D=!0)):await x("/"))()},[_,D,I,L,w,U,M,c,i,s,f,j,E,V,T,n,W,C,B]}class _s extends Ie{constructor(m){super(),ke(this,m,Ye,Je,be,{})}}export{_s as component};
//# sourceMappingURL=42.C_7i1LNR.js.map
