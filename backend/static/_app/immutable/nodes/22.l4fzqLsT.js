import{s as be,k as W,e as k,m as De,d as h,o as F,c as y,a as D,f as b,i as V,j as me,p as Ee,Z as Ne,q as Ie,n as oe,z as Ve,g as $,B as Te,t as M,b as A,h as G,u as je,S as He}from"../chunks/Bk--KVgx.js";import{S as we,i as ke,b as J,d as K,m as Q,g as fe,a as S,c as ue,t as C,e as X,f as Le}from"../chunks/CoU9NT7-.js";import{g as Ce}from"../chunks/D0QH3NT1.js";import{e as ce,u as Be,o as Se}from"../chunks/DOi8FfRu.js";import{t as re}from"../chunks/DXxu2l8m.js";import{f as Oe}from"../chunks/CyTOOynw.js";import{h as Pe,E as Ue}from"../chunks/MzMpT8ak.js";import{d as ne,r as We}from"../chunks/I1CDPYOB.js";import"../chunks/0ZqDA-lu.js";import{d as Fe}from"../chunks/BQWQRICs.js";import{g as Me}from"../chunks/D_XIBSCa.js";import{W as Ae}from"../chunks/Cx1AvSPh.js";import{g as xe,c as he,d as Re,N as qe}from"../chunks/Dfi3pxjT.js";import{m as Ge,d as _e}from"../chunks/BQs868cI.js";import{E as Ze}from"../chunks/BIJPbqz7.js";import{C as Je}from"../chunks/D_cgVhu-.js";import{P as Ke}from"../chunks/BMGTH2PZ.js";import{S as Qe}from"../chunks/R3jnHhLu.js";import{T as ye}from"../chunks/CSMXUTi0.js";import{F as Xe}from"../chunks/UYZoEWp3.js";const{document:de}=Ce;function pe(f,e,t){const o=f.slice();return o[24]=e[t],o}function ge(f,e,t){const o=f.slice();return o[27]=e[t],o[29]=t,o}function Ye(f){let e,t,o;return t=new Qe({}),{c(){e=k("div"),J(t.$$.fragment),this.h()},l(l){e=y(l,"DIV",{class:!0});var a=D(e);K(t.$$.fragment,a),a.forEach(h),this.h()},h(){b(e,"class","w-full h-full flex justify-center items-center")},m(l,a){V(l,e,a),Q(t,e,null),o=!0},p:oe,i(l){o||(C(t.$$.fragment,l),o=!0)},o(l){S(t.$$.fragment,l),o=!1},d(l){l&&h(e),X(t)}}}function ze(f){let e,t,o,l,a,r,s,i,m,u,p,n;function d(_){f[11](_)}let g={title:f[0].t("Delete note?"),$$slots:{default:[et]},$$scope:{ctx:f}};f[4]!==void 0&&(g.show=f[4]),e=new Je({props:g}),Ve.push(()=>Le(e,"show",d)),e.$on("confirm",f[12]);const B=[lt,tt],I=[];function x(_,w){return w&4&&(a=null),a==null&&(a=Object.keys(_[2]).length>0),a?0:1}return r=x(f,-1),s=I[r]=B[r](f),p=new ye({props:{content:f[0].t("Create Note"),$$slots:{default:[at]},$$scope:{ctx:f}}}),{c(){J(e.$$.fragment),o=W(),l=k("div"),s.c(),i=W(),m=k("div"),u=k("div"),J(p.$$.fragment),this.h()},l(_){K(e.$$.fragment,_),o=F(_),l=y(_,"DIV",{class:!0});var w=D(l);s.l(w),w.forEach(h),i=F(_),m=y(_,"DIV",{class:!0});var O=D(m);u=y(O,"DIV",{class:!0});var T=D(u);K(p.$$.fragment,T),T.forEach(h),O.forEach(h),this.h()},h(){b(l,"class","px-4.5 @container h-full pt-2"),b(u,"class","flex gap-0.5 justify-end w-full"),b(m,"class","absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end")},m(_,w){Q(e,_,w),V(_,o,w),V(_,l,w),I[r].m(l,null),V(_,i,w),V(_,m,w),$(m,u),Q(p,u,null),n=!0},p(_,w){const O={};w&1&&(O.title=_[0].t("Delete note?")),w&1073741833&&(O.$$scope={dirty:w,ctx:_}),!t&&w&16&&(t=!0,O.show=_[4],Te(()=>t=!1)),e.$set(O);let T=r;r=x(_,w),r===T?I[r].p(_,w):(fe(),S(I[T],1,1,()=>{I[T]=null}),ue(),s=I[r],s?s.p(_,w):(s=I[r]=B[r](_),s.c()),C(s,1),s.m(l,null));const R={};w&1&&(R.content=_[0].t("Create Note")),w&1073741824&&(R.$$scope={dirty:w,ctx:_}),p.$set(R)},i(_){n||(C(e.$$.fragment,_),C(s),C(p.$$.fragment,_),n=!0)},o(_){S(e.$$.fragment,_),S(s),S(p.$$.fragment,_),n=!1},d(_){_&&(h(o),h(l),h(i),h(m)),X(e,_),I[r].d(),X(p)}}}function et(f){let e,t=f[0].t("This will delete")+"",o,l,a,r=f[3].title+"",s,i;return{c(){e=k("div"),o=M(t),l=W(),a=k("span"),s=M(r),i=M("."),this.h()},l(m){e=y(m,"DIV",{class:!0});var u=D(e);o=A(u,t),l=F(u),a=y(u,"SPAN",{class:!0});var p=D(a);s=A(p,r),p.forEach(h),i=A(u,"."),u.forEach(h),this.h()},h(){b(a,"class","font-semibold"),b(e,"class","text-sm text-gray-500")},m(m,u){V(m,e,u),$(e,o),$(e,l),$(e,a),$(a,s),$(e,i)},p(m,u){u&1&&t!==(t=m[0].t("This will delete")+"")&&G(o,t),u&8&&r!==(r=m[3].title+"")&&G(s,r)},d(m){m&&h(e)}}}function tt(f){let e,t,o,l=f[0].t("No Notes")+"",a,r,s,i=f[0].t("Create your first note by clicking on the plus button below.")+"",m;return{c(){e=k("div"),t=k("div"),o=k("div"),a=M(l),r=W(),s=k("div"),m=M(i),this.h()},l(u){e=y(u,"DIV",{class:!0});var p=D(e);t=y(p,"DIV",{class:!0});var n=D(t);o=y(n,"DIV",{class:!0});var d=D(o);a=A(d,l),d.forEach(h),r=F(n),s=y(n,"DIV",{class:!0});var g=D(s);m=A(g,i),g.forEach(h),n.forEach(h),p.forEach(h),this.h()},h(){b(o,"class","text-xl font-medium text-gray-400 dark:text-gray-600"),b(s,"class","mt-1 text-sm text-gray-300 dark:text-gray-700"),b(t,"class","pb-20 text-center"),b(e,"class","w-full h-full flex flex-col items-center justify-center")},m(u,p){V(u,e,p),$(e,t),$(t,o),$(o,a),$(t,r),$(t,s),$(s,m)},p(u,p){p&1&&l!==(l=u[0].t("No Notes")+"")&&G(a,l),p&1&&i!==(i=u[0].t("Create your first note by clicking on the plus button below.")+"")&&G(m,i)},i:oe,o:oe,d(u){u&&h(e)}}}function lt(f){let e,t,o=ce(Object.keys(f[2])),l=[];for(let r=0;r<o.length;r+=1)l[r]=$e(pe(f,o,r));const a=r=>S(l[r],1,1,()=>{l[r]=null});return{c(){e=k("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var s=D(e);for(let i=0;i<l.length;i+=1)l[i].l(s);s.forEach(h),this.h()},h(){b(e,"class","pb-10")},m(r,s){V(r,e,s);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);t=!0},p(r,s){if(s&541){o=ce(Object.keys(r[2]));let i;for(i=0;i<o.length;i+=1){const m=pe(r,o,i);l[i]?(l[i].p(m,s),C(l[i],1)):(l[i]=$e(m),l[i].c(),C(l[i],1),l[i].m(e,null))}for(fe(),i=o.length;i<l.length;i+=1)a(i);ue()}},i(r){if(!t){for(let s=0;s<o.length;s+=1)C(l[s]);t=!0}},o(r){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)S(l[s]);t=!1},d(r){r&&h(e),He(l,r)}}}function rt(f){let e,t,o;return t=new Ze({props:{className:"size-5"}}),{c(){e=k("button"),J(t.$$.fragment),this.h()},l(l){e=y(l,"BUTTON",{class:!0,type:!0});var a=D(e);K(t.$$.fragment,a),a.forEach(h),this.h()},h(){b(e,"class","self-center w-fit text-sm p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),b(e,"type","button")},m(l,a){V(l,e,a),Q(t,e,null),o=!0},p:oe,i(l){o||(C(t.$$.fragment,l),o=!0)},o(l){S(t.$$.fragment,l),o=!1},d(l){l&&h(e),X(t)}}}function ot(f){let e=f[0].t("No content")+"",t;return{c(){t=M(e)},l(o){t=A(o,e)},m(o,l){V(o,t,l)},p(o,l){l&1&&e!==(e=o[0].t("No content")+"")&&G(t,e)},d(o){o&&h(t)}}}function nt(f){var o,l;let e=((l=(o=f[27].data)==null?void 0:o.content)==null?void 0:l.md)+"",t;return{c(){t=M(e)},l(a){t=A(a,e)},m(a,r){V(a,t,r)},p(a,r){var s,i;r&4&&e!==(e=((i=(s=a[27].data)==null?void 0:s.content)==null?void 0:i.md)+"")&&G(t,e)},d(a){a&&h(t)}}}function st(f){var l,a,r,s;let e,t=f[0].t("By {{name}}",{name:_e(((a=(l=f[27])==null?void 0:l.user)==null?void 0:a.name)??((s=(r=f[27])==null?void 0:r.user)==null?void 0:s.email)??f[0].t("Deleted User"))})+"",o;return{c(){e=k("div"),o=M(t),this.h()},l(i){e=y(i,"DIV",{class:!0});var m=D(e);o=A(m,t),m.forEach(h),this.h()},h(){b(e,"class","shrink-0 text-gray-500")},m(i,m){V(i,e,m),$(e,o)},p(i,m){var u,p,n,d;m&5&&t!==(t=i[0].t("By {{name}}",{name:_e(((p=(u=i[27])==null?void 0:u.user)==null?void 0:p.name)??((d=(n=i[27])==null?void 0:n.user)==null?void 0:d.email)??i[0].t("Deleted User"))})+"")&&G(o,t)},d(i){i&&h(e)}}}function ve(f,e){var j,P;let t,o,l,a,r,s,i=e[27].title+"",m,u,p,n,d,g,B,I,x,_=ne(e[27].updated_at/1e6).fromNow()+"",w,O,T,R,Z;function se(...N){return e[13](e[27],...N)}function ae(){return e[14](e[27])}n=new qe({props:{onDownload:se,onDelete:ae,$$slots:{default:[rt]},$$scope:{ctx:e}}});function ie(N,E){var H,L;return(L=(H=N[27].data)==null?void 0:H.content)!=null&&L.md?nt:ot}let c=ie(e),v=c(e);return T=new ye({props:{content:((P=(j=e[27])==null?void 0:j.user)==null?void 0:P.email)??e[0].t("Deleted User"),className:"flex shrink-0",placement:"top-start",$$slots:{default:[st]},$$scope:{ctx:e}}}),{key:f,first:null,c(){t=k("div"),o=k("div"),l=k("a"),a=k("div"),r=k("div"),s=k("div"),m=M(i),u=W(),p=k("div"),J(n.$$.fragment),d=W(),g=k("div"),v.c(),B=W(),I=k("div"),x=k("div"),w=M(_),O=W(),J(T.$$.fragment),this.h()},l(N){t=y(N,"DIV",{class:!0});var E=D(t);o=y(E,"DIV",{class:!0});var H=D(o);l=y(H,"A",{href:!0,class:!0});var L=D(l);a=y(L,"DIV",{class:!0});var q=D(a);r=y(q,"DIV",{class:!0});var U=D(r);s=y(U,"DIV",{class:!0});var z=D(s);m=A(z,i),z.forEach(h),u=F(U),p=y(U,"DIV",{});var ee=D(p);K(n.$$.fragment,ee),ee.forEach(h),U.forEach(h),d=F(q),g=y(q,"DIV",{class:!0});var te=D(g);v.l(te),te.forEach(h),q.forEach(h),B=F(L),I=y(L,"DIV",{class:!0});var Y=D(I);x=y(Y,"DIV",{});var le=D(x);w=A(le,_),le.forEach(h),O=F(Y),K(T.$$.fragment,Y),Y.forEach(h),L.forEach(h),H.forEach(h),E.forEach(h),this.h()},h(){b(s,"class","font-semibold line-clamp-1 capitalize"),b(r,"class","flex items-center gap-2 self-center mb-1 justify-between"),b(g,"class","text-xs text-gray-500 dark:text-gray-500 mb-3 line-clamp-5 min-h-18"),b(a,"class","flex-1"),b(I,"class","text-xs px-0.5 w-full flex justify-between items-center"),b(l,"href",R=`/notes/${e[27].id}`),b(l,"class","w-full -translate-y-0.5 flex flex-col justify-between"),b(o,"class","flex flex-1 space-x-4 cursor-pointer w-full"),b(t,"class","flex space-x-4 cursor-pointer w-full px-4.5 py-4 bg-gray-50 dark:bg-gray-850 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl transition"),this.first=t},m(N,E){V(N,t,E),$(t,o),$(o,l),$(l,a),$(a,r),$(r,s),$(s,m),$(r,u),$(r,p),Q(n,p,null),$(a,d),$(a,g),v.m(g,null),$(l,B),$(l,I),$(I,x),$(x,w),$(I,O),Q(T,I,null),Z=!0},p(N,E){var q,U;e=N,(!Z||E&4)&&i!==(i=e[27].title+"")&&G(m,i);const H={};E&12&&(H.onDownload=se),E&28&&(H.onDelete=ae),E&1073741824&&(H.$$scope={dirty:E,ctx:e}),n.$set(H),c===(c=ie(e))&&v?v.p(e,E):(v.d(1),v=c(e),v&&(v.c(),v.m(g,null))),(!Z||E&4)&&_!==(_=ne(e[27].updated_at/1e6).fromNow()+"")&&G(w,_);const L={};E&5&&(L.content=((U=(q=e[27])==null?void 0:q.user)==null?void 0:U.email)??e[0].t("Deleted User")),E&1073741829&&(L.$$scope={dirty:E,ctx:e}),T.$set(L),(!Z||E&4&&R!==(R=`/notes/${e[27].id}`))&&b(l,"href",R)},i(N){Z||(C(n.$$.fragment,N),C(T.$$.fragment,N),Z=!0)},o(N){S(n.$$.fragment,N),S(T.$$.fragment,N),Z=!1},d(N){N&&h(t),X(n),v.d(),X(T)}}}function $e(f){let e,t=f[0].t(f[24])+"",o,l,a,r=[],s=new Map,i,m,u=ce(f[2][f[24]]);const p=n=>n[27].id;for(let n=0;n<u.length;n+=1){let d=ge(f,u,n),g=p(d);s.set(g,r[n]=ve(g,d))}return{c(){e=k("div"),o=M(t),l=W(),a=k("div");for(let n=0;n<r.length;n+=1)r[n].c();i=W(),this.h()},l(n){e=y(n,"DIV",{class:!0});var d=D(e);o=A(d,t),d.forEach(h),l=F(n),a=y(n,"DIV",{class:!0});var g=D(a);for(let B=0;B<r.length;B+=1)r[B].l(g);i=F(g),g.forEach(h),this.h()},h(){b(e,"class","w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2.5"),b(a,"class","mb-5 gap-2.5 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4")},m(n,d){V(n,e,d),$(e,o),V(n,l,d),V(n,a,d);for(let g=0;g<r.length;g+=1)r[g]&&r[g].m(a,null);$(a,i),m=!0},p(n,d){(!m||d&5)&&t!==(t=n[0].t(n[24])+"")&&G(o,t),d&541&&(u=ce(n[2][n[24]]),fe(),r=Be(r,d,p,1,n,u,s,a,Se,ve,i,ge),ue())},i(n){if(!m){for(let d=0;d<u.length;d+=1)C(r[d]);m=!0}},o(n){for(let d=0;d<r.length;d+=1)S(r[d]);m=!1},d(n){n&&(h(e),h(l),h(a));for(let d=0;d<r.length;d+=1)r[d].d()}}}function at(f){let e,t,o,l,a;return t=new Ke({props:{className:"size-4.5",strokeWidth:"2.5"}}),{c(){e=k("button"),J(t.$$.fragment),this.h()},l(r){e=y(r,"BUTTON",{class:!0,type:!0});var s=D(e);K(t.$$.fragment,s),s.forEach(h),this.h()},h(){b(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"),b(e,"type","button")},m(r,s){V(r,e,s),Q(t,e,null),o=!0,l||(a=je(e,"click",f[15]),l=!0)},p:oe,i(r){o||(C(t.$$.fragment,r),o=!0)},o(r){S(t.$$.fragment,r),o=!1},d(r){r&&h(e),X(t),l=!1,a()}}}function it(f){let e,t,o,l,a,r,s,i;de.title=e=`
		`+f[0].t("Notes")+" • "+f[6]+`
	`,o=new Xe({props:{show:f[5]}});const m=[ze,Ye],u=[];function p(n,d){return n[1]?0:1}return r=p(f),s=u[r]=m[r](f),{c(){t=W(),J(o.$$.fragment),l=W(),a=k("div"),s.c(),this.h()},l(n){De("svelte-16ir3op",de.head).forEach(h),t=F(n),K(o.$$.fragment,n),l=F(n),a=y(n,"DIV",{id:!0,class:!0});var g=D(a);s.l(g),g.forEach(h),this.h()},h(){b(a,"id","notes-container"),b(a,"class","w-full min-h-full h-full")},m(n,d){V(n,t,d),Q(o,n,d),V(n,l,d),V(n,a,d),u[r].m(a,null),i=!0},p(n,[d]){(!i||d&65)&&e!==(e=`
		`+n[0].t("Notes")+" • "+n[6]+`
	`)&&(de.title=e);const g={};d&32&&(g.show=n[5]),o.$set(g);let B=r;r=p(n),r===B?u[r].p(n,d):(fe(),S(u[B],1,1,()=>{u[B]=null}),ue(),s=u[r],s?s.p(n,d):(s=u[r]=m[r](n),s.c()),C(s,1),s.m(a,null))},i(n){i||(C(o.$$.fragment,n),C(s),i=!0)},o(n){S(o.$$.fragment,n),S(s),i=!1},d(n){n&&(h(t),h(l),h(a)),X(o,n),u[r].d()}}}function ct(f,e,t){let o,l;me(f,Ae,c=>t(6,l=c));const{saveAs:a}=Oe;ne.extend(Fe),ne.extend(We);async function r(c){for(const v of c)try{ne.locale(v);break}catch(j){console.error(`Could not load locale '${v}':`,j)}}const s=Ee("i18n");me(f,s,c=>t(0,o=c));let i=!1,m=[],u=null,p=!1;const n=async()=>{t(2,m=await xe(localStorage.token))},d=async()=>{const c=await he(localStorage.token,{title:o.t("New Note"),data:{content:{json:null,html:"",md:""}},meta:null,access_control:null}).catch(v=>(re.error(`${v}`),null));c&&Me(`/notes/${c.id}`)},g=async c=>{if(c==="md"){const v=new Blob([u.data.content.md],{type:"text/markdown"});a(v,`${u.title}.md`)}else c==="pdf"&&await B(u)},B=async c=>{var v,j;try{const E=((j=(v=c.data)==null?void 0:v.content)==null?void 0:j.html)??"";let H;E instanceof HTMLElement?H=E:(H=document.createElement("div"),H.innerHTML=E,document.body.appendChild(H));const L=await Pe(H,{useCORS:!0,scale:2,width:1024,windowWidth:1024,windowHeight:1400});E instanceof HTMLElement||document.body.removeChild(H);const q=L.toDataURL("image/png"),U=new Ue("p","mm","a4"),z=210,ee=297,te=L.height*z/L.width;let Y=te,le=0;for(U.addImage(q,"PNG",0,le,z,te),Y-=ee;Y>0;)le-=ee,U.addPage(),U.addImage(q,"PNG",0,le,z,te),Y-=ee;U.save(`${c.title}.pdf`)}catch(P){console.error("Error generating PDF",P),re.error(`${P}`)}},I=async c=>{await Re(localStorage.token,c).catch(j=>(re.error(`${j}`),null))&&n()},x=async c=>{for(const v of c){if(v.type!=="text/markdown"){re.error(o.t("Only markdown files are allowed"));return}const j=new FileReader;j.onload=async P=>{const N=P.target.result;let E=v.name.replace(/\.md$/,"");if(typeof N!="string"){re.error(o.t("Invalid file content"));return}await he(localStorage.token,{title:E,data:{content:{json:null,html:Ge.parse(N??""),md:N}},meta:null,access_control:null}).catch(L=>(re.error(`${L}`),null))&&n()},j.readAsText(v)}};let _=!1;const w=c=>{var v,j;c.preventDefault(),(j=(v=c.dataTransfer)==null?void 0:v.types)!=null&&j.includes("Files")?t(5,_=!0):t(5,_=!1)},O=()=>{t(5,_=!1)},T=async c=>{var v,j;if(c.preventDefault(),(v=c.dataTransfer)!=null&&v.files){const P=Array.from((j=c.dataTransfer)==null?void 0:j.files);P&&P.length>0&&x(P)}t(5,_=!1)};Ne(()=>{const c=document.getElementById("notes-container");c&&(c==null||c.removeEventListener("dragover",w),c==null||c.removeEventListener("drop",T),c==null||c.removeEventListener("dragleave",O))}),Ie(async()=>{await n(),t(1,i=!0);const c=document.getElementById("notes-container");c==null||c.addEventListener("dragover",w),c==null||c.addEventListener("drop",T),c==null||c.addEventListener("dragleave",O)});function R(c){p=c,t(4,p)}const Z=()=>{I(u.id),t(4,p=!1)},se=(c,v)=>{t(3,u=c),g(v)},ae=c=>{t(3,u=c),t(4,p=!0)},ie=async()=>{d()};return f.$$.update=()=>{f.$$.dirty&1&&r(o.languages)},[o,i,m,u,p,_,l,s,d,g,I,R,Z,se,ae,ie]}class ft extends we{constructor(e){super(),ke(this,e,ct,it,be,{})}}function ut(f){let e,t;return e=new ft({}),{c(){J(e.$$.fragment)},l(o){K(e.$$.fragment,o)},m(o,l){Q(e,o,l),t=!0},p:oe,i(o){t||(C(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){X(e,o)}}}class Lt extends we{constructor(e){super(),ke(this,e,null,ut,be,{})}}export{Lt as component};
//# sourceMappingURL=22.l4fzqLsT.js.map
