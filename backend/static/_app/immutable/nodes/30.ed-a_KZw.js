import{s as We,z as Je,e as n,k as V,t as X,c as i,a as u,G as $e,o as x,b as J,d as c,f as a,i as qe,g as e,C as ue,u as fe,A as Qe,h as Q,B as et,H as tt,j as Ne,p as at,n as st}from"../chunks/jBEftbNB.js";import{S as ze,i as Oe,f as lt,b as Re,d as Ue,m as Ze,t as Ye,a as Fe,e as Ge}from"../chunks/2lNU1ddO.js";import{g as Le}from"../chunks/wUxqHZkW.js";import{c as rt,g as ot}from"../chunks/Ch-pd4BY.js";import{t as ke}from"../chunks/CPRQqKui.js";import{u as nt,k as it}from"../chunks/BmtUElco.js";import{A as ct}from"../chunks/BIZuvuEz.js";function Se(s){let t,l=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
										transform-origin: center;
										animation: spinner_AtaB 0.75s infinite linear;
									}
									@keyframes spinner_AtaB {
										100% {
											transform: rotate(360deg);
										}
									}
								</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){t=n("div"),t.innerHTML=l,this.h()},l(r){t=i(r,"DIV",{class:!0,"data-svelte-h":!0}),$e(t)!=="svelte-1k8nuce"&&(t.innerHTML=l),this.h()},h(){a(t,"class","ml-1.5 self-center")},m(r,C){qe(r,t,C)},d(r){r&&c(t)}}}function dt(s){var Ce,De,Ie,Ve;let t,l,r,C='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',P,w,h=s[4].t("Back")+"",k,A,v,y,B,H=s[4].t("Create a knowledge base")+"",K,ee,f,E,N,R=s[4].t("What are you working on?")+"",te,ge,L,_,ae,ve,M,S,U=s[4].t("What are you trying to achieve?")+"",se,me,W,b,le,pe,$,q,D,he,_e,z,Z,m,O,Y=s[4].t("Create Knowledge")+"",re,be,oe,p,we,ye;function Xe(o){s[11](o)}let Ee={accessRoles:["read","write"],allowPublic:((Ie=(De=(Ce=s[5])==null?void 0:Ce.permissions)==null?void 0:De.sharing)==null?void 0:Ie.public_knowledge)||((Ve=s[5])==null?void 0:Ve.role)==="admin"};s[3]!==void 0&&(Ee.accessControl=s[3]),D=new ct({props:Ee}),Je.push(()=>lt(D,"accessControl",Xe));let g=s[0]&&Se();return{c(){t=n("div"),l=n("button"),r=n("div"),r.innerHTML=C,P=V(),w=n("div"),k=X(h),A=V(),v=n("form"),y=n("div"),B=n("div"),K=X(H),ee=V(),f=n("div"),E=n("div"),N=n("div"),te=X(R),ge=V(),L=n("div"),_=n("input"),ve=V(),M=n("div"),S=n("div"),se=X(U),me=V(),W=n("div"),b=n("textarea"),pe=V(),$=n("div"),q=n("div"),Re(D.$$.fragment),_e=V(),z=n("div"),Z=n("div"),m=n("button"),O=n("div"),re=X(Y),be=V(),g&&g.c(),this.h()},l(o){t=i(o,"DIV",{class:!0});var d=u(t);l=i(d,"BUTTON",{class:!0});var T=u(l);r=i(T,"DIV",{class:!0,"data-svelte-h":!0}),$e(r)!=="svelte-1klo87r"&&(r.innerHTML=C),P=x(T),w=i(T,"DIV",{class:!0});var F=u(w);k=J(F,h),F.forEach(c),T.forEach(c),A=x(d),v=i(d,"FORM",{class:!0});var I=u(v);y=i(I,"DIV",{class:!0});var j=u(y);B=i(j,"DIV",{class:!0});var G=u(B);K=J(G,H),G.forEach(c),ee=x(j),f=i(j,"DIV",{class:!0});var ne=u(f);E=i(ne,"DIV",{class:!0});var ie=u(E);N=i(ie,"DIV",{class:!0});var xe=u(N);te=J(xe,R),xe.forEach(c),ge=x(ie),L=i(ie,"DIV",{class:!0});var Ae=u(L);_=i(Ae,"INPUT",{class:!0,type:!0,placeholder:!0}),Ae.forEach(c),ie.forEach(c),ve=x(ne),M=i(ne,"DIV",{});var ce=u(M);S=i(ce,"DIV",{class:!0});var Be=u(S);se=J(Be,U),Be.forEach(c),me=x(ce),W=i(ce,"DIV",{class:!0});var Te=u(W);b=i(Te,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),u(b).forEach(c),Te.forEach(c),ce.forEach(c),ne.forEach(c),j.forEach(c),pe=x(I),$=i(I,"DIV",{class:!0});var He=u($);q=i(He,"DIV",{class:!0});var Me=u(q);Ue(D.$$.fragment,Me),Me.forEach(c),He.forEach(c),_e=x(I),z=i(I,"DIV",{class:!0});var je=u(z);Z=i(je,"DIV",{});var Pe=u(Z);m=i(Pe,"BUTTON",{class:!0,type:!0});var de=u(m);O=i(de,"DIV",{class:!0});var Ke=u(O);re=J(Ke,Y),Ke.forEach(c),be=x(de),g&&g.l(de),de.forEach(c),Pe.forEach(c),je.forEach(c),I.forEach(c),d.forEach(c),this.h()},h(){a(r,"class","self-center"),a(w,"class","self-center font-medium text-sm"),a(l,"class","flex space-x-1"),a(B,"class","text-2xl font-medium font-primary mb-2.5"),a(N,"class","text-sm mb-2"),a(_,"class","w-full rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden"),a(_,"type","text"),a(_,"placeholder",ae=s[4].t("Name your knowledge base")),_.required=!0,a(L,"class","w-full mt-1"),a(E,"class","w-full"),a(S,"class","text-sm mb-2"),a(b,"class","w-full resize-none rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden"),a(b,"rows","4"),a(b,"placeholder",le=s[4].t("Describe your knowledge base and objectives")),b.required=!0,a(W,"class","w-full mt-1"),a(f,"class","w-full flex flex-col gap-2.5"),a(y,"class","w-full flex flex-col justify-center"),a(q,"class","px-3 py-2 bg-gray-50 dark:bg-gray-950 rounded-lg"),a($,"class","mt-2"),a(O,"class","self-center font-medium"),a(m,"class",oe="text-sm px-4 py-2 transition rounded-lg "+(s[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800")+" flex"),a(m,"type","submit"),m.disabled=s[0],a(z,"class","flex justify-end mt-2"),a(v,"class","flex flex-col max-w-lg mx-auto mt-10 mb-10"),a(t,"class","w-full max-h-full")},m(o,d){qe(o,t,d),e(t,l),e(l,r),e(l,P),e(l,w),e(w,k),e(t,A),e(t,v),e(v,y),e(y,B),e(B,K),e(y,ee),e(y,f),e(f,E),e(E,N),e(N,te),e(E,ge),e(E,L),e(L,_),ue(_,s[1]),e(f,ve),e(f,M),e(M,S),e(S,se),e(M,me),e(M,W),e(W,b),ue(b,s[2]),e(v,pe),e(v,$),e($,q),Ze(D,q,null),e(v,_e),e(v,z),e(z,Z),e(Z,m),e(m,O),e(O,re),e(m,be),g&&g.m(m,null),p=!0,we||(ye=[fe(l,"click",s[8]),fe(_,"input",s[9]),fe(b,"input",s[10]),fe(v,"submit",Qe(s[12]))],we=!0)},p(o,[d]){var F,I,j,G;(!p||d&16)&&h!==(h=o[4].t("Back")+"")&&Q(k,h),(!p||d&16)&&H!==(H=o[4].t("Create a knowledge base")+"")&&Q(K,H),(!p||d&16)&&R!==(R=o[4].t("What are you working on?")+"")&&Q(te,R),(!p||d&16&&ae!==(ae=o[4].t("Name your knowledge base")))&&a(_,"placeholder",ae),d&2&&_.value!==o[1]&&ue(_,o[1]),(!p||d&16)&&U!==(U=o[4].t("What are you trying to achieve?")+"")&&Q(se,U),(!p||d&16&&le!==(le=o[4].t("Describe your knowledge base and objectives")))&&a(b,"placeholder",le),d&4&&ue(b,o[2]);const T={};d&32&&(T.allowPublic=((j=(I=(F=o[5])==null?void 0:F.permissions)==null?void 0:I.sharing)==null?void 0:j.public_knowledge)||((G=o[5])==null?void 0:G.role)==="admin"),!he&&d&8&&(he=!0,T.accessControl=o[3],et(()=>he=!1)),D.$set(T),(!p||d&16)&&Y!==(Y=o[4].t("Create Knowledge")+"")&&Q(re,Y),o[0]?g||(g=Se(),g.c(),g.m(m,null)):g&&(g.d(1),g=null),(!p||d&1&&oe!==(oe="text-sm px-4 py-2 transition rounded-lg "+(o[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800")+" flex"))&&a(m,"class",oe),(!p||d&1)&&(m.disabled=o[0])},i(o){p||(Ye(D.$$.fragment,o),p=!0)},o(o){Fe(D.$$.fragment,o),p=!1},d(o){o&&c(t),Ge(D),g&&g.d(),we=!1,tt(ye)}}}function ut(s,t,l){let r,C;Ne(s,nt,f=>l(5,C=f));const P=at("i18n");Ne(s,P,f=>l(4,r=f));let w=!1,h="",k="",A={};const v=async()=>{if(l(0,w=!0),h.trim()===""||k.trim()===""){ke.error(r.t("Please fill in all fields.")),l(1,h=""),l(2,k=""),l(0,w=!1);return}const f=await rt(localStorage.token,h,k,A).catch(E=>{ke.error(`${E}`)});f&&(ke.success(r.t("Knowledge created successfully.")),it.set(await ot(localStorage.token)),Le(`/workspace/knowledge/${f.id}`)),l(0,w=!1)},y=()=>{Le("/workspace/knowledge")};function B(){h=this.value,l(1,h)}function H(){k=this.value,l(2,k)}function K(f){A=f,l(3,A)}return[w,h,k,A,r,C,P,v,y,B,H,K,()=>{v()}]}class ft extends ze{constructor(t){super(),Oe(this,t,ut,dt,We,{})}}function gt(s){let t,l;return t=new ft({}),{c(){Re(t.$$.fragment)},l(r){Ue(t.$$.fragment,r)},m(r,C){Ze(t,r,C),l=!0},p:st,i(r){l||(Ye(t.$$.fragment,r),l=!0)},o(r){Fe(t.$$.fragment,r),l=!1},d(r){Ge(t,r)}}}class kt extends ze{constructor(t){super(),Oe(this,t,null,gt,We,{})}}export{kt as component};
//# sourceMappingURL=30.ed-a_KZw.js.map
