import{s as g,l,i as w,d as S,p as k,j as b,q as h,n as y}from"../chunks/Bk--KVgx.js";import{S as P,i as $,a as m,c as N,t as i,b as v,d as q,m as C,e as E,g as J}from"../chunks/CoU9NT7-.js";import{t as u}from"../chunks/DXxu2l8m.js";import{g as M}from"../chunks/D_XIBSCa.js";import{p as O}from"../chunks/Cx1AvSPh.js";import{c as R,g as j}from"../chunks/CgPSx72R.js";import{P as I}from"../chunks/Bd5SqVxz.js";function f(a){let n,s;return n=new I({props:{prompt:a[0],onSubmit:a[3],clone:a[1]}}),{c(){v(n.$$.fragment)},l(t){q(n.$$.fragment,t)},m(t,e){C(n,t,e),s=!0},p(t,e){const o={};e&1&&(o.prompt=t[0]),e&2&&(o.clone=t[1]),n.$set(o)},i(t){s||(i(n.$$.fragment,t),s=!0)},o(t){m(n.$$.fragment,t),s=!1},d(t){E(n,t)}}}function L(a){let n=a[0],s,t,e=f(a);return{c(){e.c(),s=l()},l(o){e.l(o),s=l()},m(o,c){e.m(o,c),w(o,s,c),t=!0},p(o,[c]){c&1&&g(n,n=o[0])?(J(),m(e,1,1,y),N(),e=f(o),e.c(),i(e,1),e.m(s.parentNode,s)):e.p(o,c)},i(o){t||(i(e),t=!0)},o(o){m(e),t=!1},d(o){o&&S(s),e.d(o)}}}function z(a,n,s){let t;const e=k("i18n");b(a,e,r=>s(4,t=r));let o=null,c=!1;const _=async r=>{await R(localStorage.token,r).catch(d=>(u.error(`${d}`),null))&&(u.success(t.t("Prompt created successfully")),await O.set(await j(localStorage.token)),await M("/workspace/prompts"))};return h(async()=>{if(window.addEventListener("message",async r=>{if(!["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(r.origin))return;const p=JSON.parse(r.data);s(1,c=!0),s(0,o={title:p.title,command:p.command,content:p.content,access_control:null})}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.prompt){const r=JSON.parse(sessionStorage.prompt);sessionStorage.removeItem("prompt"),s(1,c=!0),s(0,o={title:r.title,command:r.command,content:r.content,access_control:null})}}),[o,c,e,_]}class Q extends P{constructor(n){super(),$(this,n,z,L,g,{})}}export{Q as component};
//# sourceMappingURL=35.4gbn0o4m.js.map
