{"version":3,"file":"23.BP_D2MVa.js","sources":["../../../../../../src/lib/components/icons/Calendar.svelte","../../../../../../src/lib/components/icons/Users.svelte","../../../../../../src/lib/components/icons/Mic.svelte","../../../../../../src/lib/components/icons/CursorArrowRays.svelte","../../../../../../src/lib/components/notes/RecordMenu.svelte","../../../../../../src/lib/components/icons/SparklesSolid.svelte","../../../../../../src/lib/components/icons/ArrowUturnLeft.svelte","../../../../../../src/lib/components/icons/ArrowUturnRight.svelte","../../../../../../src/lib/components/notes/NoteEditor.svelte","../../../../../../src/routes/(app)/notes/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-3';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-3';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { createEventDispatcher, getContext, onMount } from 'svelte';\n\n\timport { showSettings, mobile, showSidebar, user } from '$lib/stores';\n\timport { fade, slide } from 'svelte/transition';\n\n\timport Mic from '../icons/Mic.svelte';\n\timport CursorArrowRays from '../icons/CursorArrowRays.svelte';\n\timport DocumentArrowUp from '../icons/DocumentArrowUp.svelte';\n\timport CloudArrowUp from '../icons/CloudArrowUp.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let className = 'max-w-[170px]';\n\n\texport let onRecord = () => {};\n\texport let onCaptureAudio = () => {};\n\texport let onUpload = () => {};\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tonOpenChange={(state) => {\n\t\tdispatch('change', state);\n\t}}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\n\t<slot name=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full {className} text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary\"\n\t\t\tsideOffset={8}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={(e) => fade(e, { duration: 100 })}\n\t\t>\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={async () => {\n\t\t\t\t\tonRecord();\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t<Mic className=\"size-5\" strokeWidth=\"1.5\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Record')}</div>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonCaptureAudio();\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t<CursorArrowRays className=\"size-5\" strokeWidth=\"1.5\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Capture Audio')}</div>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonUpload();\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-2\">\n\t\t\t\t\t<CloudArrowUp className=\"size-5\" strokeWidth=\"1.5\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Upload Audio')}</div>\n\t\t\t</button>\n\t\t</DropdownMenu.Content>\n\t</slot>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class={className}>\n\t<path\n\t\tfill-rule=\"evenodd\"\n\t\td=\"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z\"\n\t\tclip-rule=\"evenodd\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { getContext, onDestroy, onMount, tick } from 'svelte';\n\timport { v4 as uuidv4 } from 'uuid';\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport jsPDF from 'jspdf';\n\timport html2canvas from 'html2canvas-pro';\n\n\tconst i18n = getContext('i18n');\n\n\timport { marked } from 'marked';\n\timport { toast } from 'svelte-sonner';\n\n\timport { config, models, settings, showSidebar } from '$lib/stores';\n\timport { goto } from '$app/navigation';\n\n\timport { compressImage, copyToClipboard, splitStream } from '$lib/utils';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\timport { uploadFile } from '$lib/apis/files';\n\n\timport dayjs from '$lib/dayjs';\n\timport calendar from 'dayjs/plugin/calendar';\n\timport duration from 'dayjs/plugin/duration';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\n\tdayjs.extend(calendar);\n\tdayjs.extend(duration);\n\tdayjs.extend(relativeTime);\n\n\tasync function loadLocale(locales) {\n\t\tfor (const locale of locales) {\n\t\t\ttry {\n\t\t\t\tdayjs.locale(locale);\n\t\t\t\tbreak; // Stop after successfully loading the first available locale\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Could not load locale '${locale}':`, error);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Assuming $i18n.languages is an array of language codes\n\t$: loadLocale($i18n.languages);\n\n\timport { deleteNoteById, getNoteById, updateNoteById } from '$lib/apis/notes';\n\n\timport RichTextInput from '../common/RichTextInput.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport MicSolid from '../icons/MicSolid.svelte';\n\timport VoiceRecording from '../chat/MessageInput/VoiceRecording.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport Calendar from '../icons/Calendar.svelte';\n\timport Users from '../icons/Users.svelte';\n\n\timport Image from '../common/Image.svelte';\n\timport FileItem from '../common/FileItem.svelte';\n\timport FilesOverlay from '../chat/MessageInput/FilesOverlay.svelte';\n\timport RecordMenu from './RecordMenu.svelte';\n\timport NoteMenu from './Notes/NoteMenu.svelte';\n\timport EllipsisHorizontal from '../icons/EllipsisHorizontal.svelte';\n\timport Sparkles from '../icons/Sparkles.svelte';\n\timport SparklesSolid from '../icons/SparklesSolid.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport Bars3BottomLeft from '../icons/Bars3BottomLeft.svelte';\n\timport ArrowUturnLeft from '../icons/ArrowUturnLeft.svelte';\n\timport ArrowUturnRight from '../icons/ArrowUturnRight.svelte';\n\timport Sidebar from '../common/Sidebar.svelte';\n\timport ArrowRight from '../icons/ArrowRight.svelte';\n\timport Cog6 from '../icons/Cog6.svelte';\n\timport { chatCompletion } from '$lib/apis/openai';\n\n\texport let id: null | string = null;\n\n\tlet note = null;\n\n\tconst newNote = {\n\t\ttitle: '',\n\t\tdata: {\n\t\t\tcontent: {\n\t\t\t\tjson: null,\n\t\t\t\thtml: '',\n\t\t\t\tmd: ''\n\t\t\t},\n\t\t\tversions: [],\n\t\t\tfiles: null\n\t\t},\n\t\tmeta: null,\n\t\taccess_control: null\n\t};\n\n\tlet files = [];\n\n\tlet versionIdx = null;\n\tlet selectedModelId = null;\n\n\tlet recording = false;\n\tlet displayMediaRecord = false;\n\n\tlet showSettings = false;\n\tlet showDeleteConfirm = false;\n\n\tlet dragged = false;\n\tlet loading = false;\n\n\tlet enhancing = false;\n\tlet streaming = false;\n\n\tconst init = async () => {\n\t\tloading = true;\n\t\tconst res = await getNoteById(localStorage.token, id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tnote = res;\n\t\t\tfiles = res.data.files || [];\n\t\t} else {\n\t\t\tgoto('/');\n\t\t\treturn;\n\t\t}\n\n\t\tloading = false;\n\t};\n\n\tlet debounceTimeout: NodeJS.Timeout | null = null;\n\n\tconst changeDebounceHandler = () => {\n\t\tif (debounceTimeout) {\n\t\t\tclearTimeout(debounceTimeout);\n\t\t}\n\n\t\tdebounceTimeout = setTimeout(async () => {\n\t\t\tif (!note || enhancing || versionIdx !== null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log('Saving note:', note);\n\n\t\t\tconst res = await updateNoteById(localStorage.token, id, {\n\t\t\t\t...note,\n\t\t\t\ttitle: note.title === '' ? $i18n.t('Untitled') : note.title\n\t\t\t}).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t});\n\t\t}, 200);\n\t};\n\n\t$: if (note) {\n\t\tchangeDebounceHandler();\n\t}\n\n\t$: if (id) {\n\t\tinit();\n\t}\n\n\tfunction areContentsEqual(a, b) {\n\t\treturn JSON.stringify(a) === JSON.stringify(b);\n\t}\n\n\tfunction insertNoteVersion(note) {\n\t\tconst current = {\n\t\t\tjson: note.data.content.json,\n\t\t\thtml: note.data.content.html,\n\t\t\tmd: note.data.content.md\n\t\t};\n\t\tconst lastVersion = note.data.versions?.at(-1);\n\n\t\tif (!lastVersion || !areContentsEqual(lastVersion, current)) {\n\t\t\tnote.data.versions = (note.data.versions ?? []).concat(current);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tasync function enhanceNoteHandler() {\n\t\tif (selectedModelId === '') {\n\t\t\ttoast.error($i18n.t('Please select a model.'));\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = $models\n\t\t\t.filter((model) => model.id === selectedModelId && !(model?.info?.meta?.hidden ?? false))\n\t\t\t.find((model) => model.id === selectedModelId);\n\n\t\tif (!model) {\n\t\t\tselectedModelId = '';\n\t\t\treturn;\n\t\t}\n\n\t\tenhancing = true;\n\n\t\tinsertNoteVersion(note);\n\t\tawait enhanceCompletionHandler(model);\n\n\t\tenhancing = false;\n\t\tversionIdx = null;\n\t}\n\n\tfunction setContentByVersion(versionIdx) {\n\t\tif (!note.data.versions?.length) return;\n\t\tlet idx = versionIdx;\n\n\t\tif (idx === null) idx = note.data.versions.length - 1; // latest\n\t\tconst v = note.data.versions[idx];\n\n\t\tnote.data.content.json = v.json;\n\t\tnote.data.content.html = v.html;\n\t\tnote.data.content.md = v.md;\n\n\t\tif (versionIdx === null) {\n\t\t\tconst lastVersion = note.data.versions.at(-1);\n\t\t\tconst currentContent = note.data.content;\n\n\t\t\tif (areContentsEqual(lastVersion, currentContent)) {\n\t\t\t\t// remove the last version\n\t\t\t\tnote.data.versions = note.data.versions.slice(0, -1);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Navigation\n\tfunction versionNavigateHandler(direction) {\n\t\tif (!note.data.versions || note.data.versions.length === 0) return;\n\n\t\tif (versionIdx === null) {\n\t\t\t// Get latest snapshots\n\t\t\tconst lastVersion = note.data.versions.at(-1);\n\t\t\tconst currentContent = note.data.content;\n\n\t\t\tif (!areContentsEqual(lastVersion, currentContent)) {\n\t\t\t\t// If the current content is different from the last version, insert a new version\n\t\t\t\tinsertNoteVersion(note);\n\t\t\t\tversionIdx = note.data.versions.length - 1;\n\t\t\t} else {\n\t\t\t\tversionIdx = note.data.versions.length;\n\t\t\t}\n\t\t}\n\n\t\tif (direction === 'prev') {\n\t\t\tif (versionIdx > 0) versionIdx -= 1;\n\t\t} else if (direction === 'next') {\n\t\t\tif (versionIdx < note.data.versions.length - 1) versionIdx += 1;\n\t\t\telse versionIdx = null; // Reset to latest\n\n\t\t\tif (versionIdx === note.data.versions.length - 1) {\n\t\t\t\t// If we reach the latest version, reset to null\n\t\t\t\tversionIdx = null;\n\t\t\t}\n\t\t}\n\n\t\tsetContentByVersion(versionIdx);\n\t}\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconst tempItemId = uuidv4();\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tcollection_name: '',\n\t\t\tstatus: 'uploading',\n\t\t\tsize: file.size,\n\t\t\terror: '',\n\t\t\titemId: tempItemId\n\t\t};\n\n\t\tif (fileItem.size == 0) {\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\n\t\t\treturn null;\n\t\t}\n\n\t\tfiles = [...files, fileItem];\n\n\t\ttry {\n\t\t\t// If the file is an audio file, provide the language for STT.\n\t\t\tlet metadata = null;\n\t\t\tif (\n\t\t\t\t(file.type.startsWith('audio/') || file.type.startsWith('video/')) &&\n\t\t\t\t$settings?.audio?.stt?.language\n\t\t\t) {\n\t\t\t\tmetadata = {\n\t\t\t\t\tlanguage: $settings?.audio?.stt?.language\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// During the file upload, file content is automatically extracted.\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file, metadata);\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.log('File upload completed:', {\n\t\t\t\t\tid: uploadedFile.id,\n\t\t\t\t\tname: fileItem.name,\n\t\t\t\t\tcollection: uploadedFile?.meta?.collection_name\n\t\t\t\t});\n\n\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\tconsole.warn('File upload warning:', uploadedFile.error);\n\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t}\n\n\t\t\t\tfileItem.status = 'uploaded';\n\t\t\t\tfileItem.file = uploadedFile;\n\t\t\t\tfileItem.id = uploadedFile.id;\n\t\t\t\tfileItem.collection_name =\n\t\t\t\t\tuploadedFile?.meta?.collection_name || uploadedFile?.collection_name;\n\n\t\t\t\tfileItem.url = `${WEBUI_API_BASE_URL}/files/${uploadedFile.id}`;\n\n\t\t\t\tfiles = files;\n\t\t\t} else {\n\t\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t}\n\n\t\tif (files.length > 0) {\n\t\t\tnote.data.files = files;\n\t\t} else {\n\t\t\tnote.data.files = null;\n\t\t}\n\t};\n\n\tconst inputFilesHandler = async (inputFiles) => {\n\t\tconsole.log('Input files handler called with:', inputFiles);\n\t\tinputFiles.forEach((file) => {\n\t\t\tconsole.log('Processing file:', {\n\t\t\t\tname: file.name,\n\t\t\t\ttype: file.type,\n\t\t\t\tsize: file.size,\n\t\t\t\textension: file.name.split('.').at(-1)\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\t($config?.file?.max_size ?? null) !== null &&\n\t\t\t\tfile.size > ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t) {\n\t\t\t\tconsole.log('File exceeds max size limit:', {\n\t\t\t\t\tfileSize: file.size,\n\t\t\t\t\tmaxSize: ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t\t});\n\t\t\t\ttoast.error(\n\t\t\t\t\t$i18n.t(`File size should not exceed {{maxSize}} MB.`, {\n\t\t\t\t\t\tmaxSize: $config?.file?.max_size\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t['image/gif', 'image/webp', 'image/jpeg', 'image/png', 'image/avif'].includes(file['type'])\n\t\t\t) {\n\t\t\t\tlet reader = new FileReader();\n\t\t\t\treader.onload = async (event) => {\n\t\t\t\t\tlet imageUrl = event.target.result;\n\n\t\t\t\t\tif ($settings?.imageCompression ?? false) {\n\t\t\t\t\t\tconst width = $settings?.imageCompressionSize?.width ?? null;\n\t\t\t\t\t\tconst height = $settings?.imageCompressionSize?.height ?? null;\n\n\t\t\t\t\t\tif (width || height) {\n\t\t\t\t\t\t\timageUrl = await compressImage(imageUrl, width, height);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfiles = [\n\t\t\t\t\t\t...files,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\turl: `${imageUrl}`\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\tnote.data.files = files;\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t} else {\n\t\t\t\tuploadFileHandler(file);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst downloadHandler = async (type) => {\n\t\tconsole.log('downloadHandler', type);\n\t\tif (type === 'md') {\n\t\t\tconst blob = new Blob([note.data.content.md], { type: 'text/markdown' });\n\t\t\tsaveAs(blob, `${note.title}.md`);\n\t\t} else if (type === 'pdf') {\n\t\t\tawait downloadPdf(note);\n\t\t}\n\t};\n\n\tconst downloadPdf = async (note) => {\n\t\ttry {\n\t\t\t// Define a fixed virtual screen size\n\t\t\tconst virtualWidth = 1024; // Fixed width (adjust as needed)\n\t\t\tconst virtualHeight = 1400; // Fixed height (adjust as needed)\n\n\t\t\t// STEP 1. Get a DOM node to render\n\t\t\tconst html = note.data?.content?.html ?? '';\n\t\t\tlet node;\n\t\t\tif (html instanceof HTMLElement) {\n\t\t\t\tnode = html;\n\t\t\t} else {\n\t\t\t\t// If it's HTML string, render to a temporary hidden element\n\t\t\t\tnode = document.createElement('div');\n\t\t\t\tnode.innerHTML = html;\n\t\t\t\tdocument.body.appendChild(node);\n\t\t\t}\n\n\t\t\t// Render to canvas with predefined width\n\t\t\tconst canvas = await html2canvas(node, {\n\t\t\t\tuseCORS: true,\n\t\t\t\tscale: 2, // Keep at 1x to avoid unexpected enlargements\n\t\t\t\twidth: virtualWidth, // Set fixed virtual screen width\n\t\t\t\twindowWidth: virtualWidth, // Ensure consistent rendering\n\t\t\t\twindowHeight: virtualHeight\n\t\t\t});\n\n\t\t\t// Remove hidden node if needed\n\t\t\tif (!(html instanceof HTMLElement)) {\n\t\t\t\tdocument.body.removeChild(node);\n\t\t\t}\n\n\t\t\tconst imgData = canvas.toDataURL('image/png');\n\n\t\t\t// A4 page settings\n\t\t\tconst pdf = new jsPDF('p', 'mm', 'a4');\n\t\t\tconst imgWidth = 210; // A4 width in mm\n\t\t\tconst pageHeight = 297; // A4 height in mm\n\n\t\t\t// Maintain aspect ratio\n\t\t\tconst imgHeight = (canvas.height * imgWidth) / canvas.width;\n\t\t\tlet heightLeft = imgHeight;\n\t\t\tlet position = 0;\n\n\t\t\tpdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n\t\t\theightLeft -= pageHeight;\n\n\t\t\t// Handle additional pages\n\t\t\twhile (heightLeft > 0) {\n\t\t\t\tposition -= pageHeight;\n\t\t\t\tpdf.addPage();\n\n\t\t\t\tpdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n\t\t\t\theightLeft -= pageHeight;\n\t\t\t}\n\n\t\t\tpdf.save(`${note.title}.pdf`);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error generating PDF', error);\n\n\t\t\ttoast.error(`${error}`);\n\t\t}\n\t};\n\n\tconst deleteNoteHandler = async (id) => {\n\t\tconst res = await deleteNoteById(localStorage.token, id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Note deleted successfully'));\n\t\t\tgoto('/notes');\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Failed to delete note'));\n\t\t}\n\t};\n\n\tconst scrollToBottom = () => {\n\t\tconst element = document.getElementById('note-content-container');\n\n\t\tif (element) {\n\t\t\telement.scrollTop = element?.scrollHeight;\n\t\t}\n\t};\n\n\tconst enhanceCompletionHandler = async (model) => {\n\t\tlet enhancedContent = {\n\t\t\tjson: null,\n\t\t\thtml: '',\n\t\t\tmd: ''\n\t\t};\n\n\t\tconst systemPrompt = `Enhance existing notes using additional context provided from audio transcription or uploaded file content. Your task is to make the notes more useful and comprehensive by incorporating relevant information from the provided context.\n\nInput will be provided within <notes> and <context> XML tags, providing a structure for the existing notes and context respectively.\n\n# Output Format\n\nProvide the enhanced notes in markdown format. Use markdown syntax for headings, lists, and emphasis to improve clarity and presentation. Ensure that all integrated content from the context is accurately reflected. Return only the markdown formatted note.\n`;\n\n\t\tconst [res, controller] = await chatCompletion(\n\t\t\tlocalStorage.token,\n\t\t\t{\n\t\t\t\tmodel: model.id,\n\t\t\t\tstream: true,\n\t\t\t\tmessages: [\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'system',\n\t\t\t\t\t\tcontent: systemPrompt\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'user',\n\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t`<notes>${note.data.content.md}</notes>` +\n\t\t\t\t\t\t\t(files && files.length > 0\n\t\t\t\t\t\t\t\t? `\\n<context>${files.map((file) => `${file.name}: ${file?.file?.data?.content ?? 'Could not extract content'}\\n`).join('')}</context>`\n\t\t\t\t\t\t\t\t: '')\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t`${WEBUI_BASE_URL}/api`\n\t\t);\n\n\t\tawait tick();\n\n\t\tstreaming = true;\n\n\t\tif (res && res.ok) {\n\t\t\tconst reader = res.body\n\t\t\t\t.pipeThrough(new TextDecoderStream())\n\t\t\t\t.pipeThrough(splitStream('\\n'))\n\t\t\t\t.getReader();\n\n\t\t\twhile (true) {\n\t\t\t\tconst { value, done } = await reader.read();\n\t\t\t\tif (done) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tlet lines = value.split('\\n');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line !== '') {\n\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\tif (line === 'data: [DONE]') {\n\t\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line.replace(/^data: /, ''));\n\t\t\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t\t\tif (data.choices && data.choices.length > 0) {\n\t\t\t\t\t\t\t\t\tconst choice = data.choices[0];\n\t\t\t\t\t\t\t\t\tif (choice.delta && choice.delta.content) {\n\t\t\t\t\t\t\t\t\t\tenhancedContent.md += choice.delta.content;\n\t\t\t\t\t\t\t\t\t\tenhancedContent.html = marked.parse(enhancedContent.md);\n\n\t\t\t\t\t\t\t\t\t\tnote.data.content.md = enhancedContent.md;\n\t\t\t\t\t\t\t\t\t\tnote.data.content.html = enhancedContent.html;\n\t\t\t\t\t\t\t\t\t\tnote.data.content.json = null;\n\n\t\t\t\t\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tstreaming = false;\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being dragged.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdragged = true;\n\t\t} else {\n\t\t\tdragged = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdragged = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(e);\n\n\t\tif (e.dataTransfer?.files) {\n\t\t\tconst inputFiles = Array.from(e.dataTransfer?.files);\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tconsole.log(inputFiles);\n\t\t\t\tinputFilesHandler(inputFiles);\n\t\t\t}\n\t\t}\n\n\t\tdragged = false;\n\t};\n\n\tonMount(async () => {\n\t\tawait tick();\n\n\t\tif ($settings?.models) {\n\t\t\tselectedModelId = $settings?.models[0];\n\t\t} else if ($config?.default_models) {\n\t\t\tselectedModelId = $config?.default_models.split(',')[0];\n\t\t} else {\n\t\t\tselectedModelId = '';\n\t\t}\n\n\t\tif (selectedModelId) {\n\t\t\tconst model = $models\n\t\t\t\t.filter((model) => model.id === selectedModelId && !(model?.info?.meta?.hidden ?? false))\n\t\t\t\t.find((model) => model.id === selectedModelId);\n\n\t\t\tif (!model) {\n\t\t\t\tselectedModelId = '';\n\t\t\t}\n\t\t}\n\n\t\tconst dropzoneElement = document.getElementById('note-editor');\n\n\t\tdropzoneElement?.addEventListener('dragover', onDragOver);\n\t\tdropzoneElement?.addEventListener('drop', onDrop);\n\t\tdropzoneElement?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\tconsole.log('destroy');\n\t\tconst dropzoneElement = document.getElementById('note-editor');\n\n\t\tif (dropzoneElement) {\n\t\t\tdropzoneElement?.removeEventListener('dragover', onDragOver);\n\t\t\tdropzoneElement?.removeEventListener('drop', onDrop);\n\t\t\tdropzoneElement?.removeEventListener('dragleave', onDragLeave);\n\t\t}\n\t});\n</script>\n\n<FilesOverlay show={dragged} />\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete note?')}\n\ton:confirm={() => {\n\t\tdeleteNoteHandler(note.id);\n\t\tshowDeleteConfirm = false;\n\t}}\n>\n\t<div class=\" text-sm text-gray-500\">\n\t\t{$i18n.t('This will delete')} <span class=\"  font-semibold\">{note.title}</span>.\n\t</div>\n</DeleteConfirmDialog>\n\n<div class=\"relative flex-1 w-full h-full flex justify-center\" id=\"note-editor\">\n\t<Sidebar bind:show={showSettings} className=\" bg-white dark:bg-gray-900\" width=\"300px\">\n\t\t<div class=\"flex flex-col px-5 py-3 text-sm\">\n\t\t\t<div class=\"flex justify-between items-center mb-2\">\n\t\t\t\t<div class=\" font-medium text-base\">Settings</div>\n\n\t\t\t\t<div class=\" translate-x-1.5\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshowSettings = !showSettings;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowRight className=\"size-3\" strokeWidth=\"2.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"mt-1\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\" text-xs font-medium mb-1\">Model</div>\n\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tclass=\"w-full bg-transparent text-sm outline-hidden\"\n\t\t\t\t\t\t\tbind:value={selectedModelId}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\" class=\"bg-gray-50 dark:bg-gray-700\" disabled>\n\t\t\t\t\t\t\t\t{$i18n.t('Select a model')}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t{#each $models.filter((model) => !(model?.info?.meta?.hidden ?? false)) as model}\n\t\t\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-50 dark:bg-gray-700\">{model.name}</option>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Sidebar>\n\n\t{#if loading}\n\t\t<div class=\" absolute top-0 bottom-0 left-0 right-0 flex\">\n\t\t\t<div class=\"m-auto\">\n\t\t\t\t<Spinner />\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<div class=\" w-full flex flex-col {loading ? 'opacity-20' : ''}\">\n\t\t\t<div class=\"shrink-0 w-full flex justify-between items-center px-4.5 mb-1.5\">\n\t\t\t\t<div class=\"w-full flex items-center\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"w-full text-2xl font-medium bg-transparent outline-hidden\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tbind:value={note.title}\n\t\t\t\t\t\tplaceholder={$i18n.t('Title')}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div class=\"flex items-center gap-2 translate-x-1\">\n\t\t\t\t\t\t{#if note.data?.versions?.length > 0}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-0.5 self-center min-w-fit\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tversionNavigateHandler('prev');\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdisabled={(versionIdx === null && note.data.versions.length === 0) ||\n\t\t\t\t\t\t\t\t\t\t\tversionIdx === 0}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ArrowUturnLeft className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tversionNavigateHandler('next');\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdisabled={versionIdx >= note.data.versions.length || versionIdx === null}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ArrowUturnRight className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<NoteMenu\n\t\t\t\t\t\t\tonDownload={(type) => {\n\t\t\t\t\t\t\t\tdownloadHandler(type);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonCopyToClipboard={async () => {\n\t\t\t\t\t\t\t\tconst res = await copyToClipboard(note.data.content.md).catch((error) => {\n\t\t\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\ttoast.success($i18n.t('Copied to clipboard'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonDelete={() => {\n\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EllipsisHorizontal className=\"size-5\" />\n\t\t\t\t\t\t</NoteMenu>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tshowSettings = !showSettings;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Cog6 />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\" mb-2.5 px-3.5\">\n\t\t\t\t<div class=\"flex gap-1 items-center text-xs font-medium text-gray-500 dark:text-gray-500\">\n\t\t\t\t\t<button class=\" flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg\">\n\t\t\t\t\t\t<Calendar className=\"size-3.5\" strokeWidth=\"2\" />\n\n\t\t\t\t\t\t<span>{dayjs(note.created_at / 1000000).calendar()}</span>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button class=\" flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg\">\n\t\t\t\t\t\t<Users className=\"size-3.5\" strokeWidth=\"2\" />\n\n\t\t\t\t\t\t<span> You </span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\" flex-1 w-full h-full overflow-auto px-4 pb-20 relative\"\n\t\t\t\tid=\"note-content-container\"\n\t\t\t>\n\t\t\t\t{#if enhancing}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"w-full h-full fixed top-0 left-0 {streaming\n\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t: ' backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10'} flex items-center justify-center z-10 cursor-not-allowed\"\n\t\t\t\t\t></div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if files && files.length > 0}\n\t\t\t\t\t<div class=\"mb-3.5 mt-1.5 w-full flex gap-1 flex-wrap z-40\">\n\t\t\t\t\t\t{#each files as file, fileIdx}\n\t\t\t\t\t\t\t<div class=\"w-fit\">\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\timageClassName=\" max-h-96 rounded-lg\"\n\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\tonDismiss={() => {\n\t\t\t\t\t\t\t\t\t\t\tfiles = files.filter((item, idx) => idx !== fileIdx);\n\t\t\t\t\t\t\t\t\t\t\tnote.data.files = files.length > 0 ? files : null;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\ton:dismiss={() => {\n\t\t\t\t\t\t\t\t\t\t\tfiles = files.filter((item) => item?.id !== file.id);\n\t\t\t\t\t\t\t\t\t\t\tnote.data.files = files.length > 0 ? files : null;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<RichTextInput\n\t\t\t\t\tclassName=\"input-prose-sm px-0.5\"\n\t\t\t\t\tbind:value={note.data.content.json}\n\t\t\t\t\tplaceholder={$i18n.t('Write something...')}\n\t\t\t\t\thtml={note.data?.content?.html}\n\t\t\t\t\tjson={true}\n\t\t\t\t\teditable={versionIdx === null && !enhancing}\n\t\t\t\t\tonChange={(content) => {\n\t\t\t\t\t\tnote.data.content.html = content.html;\n\t\t\t\t\t\tnote.data.content.md = content.md;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n\n<div\n\tclass=\"absolute z-20 bottom-0 right-0 p-5 max-w-full {$showSidebar\n\t\t? 'md:max-w-[calc(100%-260px)]'\n\t\t: ''} w-full flex justify-end\"\n>\n\t<div class=\"flex gap-1 justify-between w-full max-w-full\">\n\t\t{#if recording}\n\t\t\t<div class=\"flex-1 w-full\">\n\t\t\t\t<VoiceRecording\n\t\t\t\t\tbind:recording\n\t\t\t\t\tclassName=\"p-1 w-full max-w-full\"\n\t\t\t\t\ttranscribe={false}\n\t\t\t\t\tdisplayMedia={displayMediaRecord}\n\t\t\t\t\tonCancel={() => {\n\t\t\t\t\t\trecording = false;\n\t\t\t\t\t\tdisplayMediaRecord = false;\n\t\t\t\t\t}}\n\t\t\t\t\tonConfirm={(data) => {\n\t\t\t\t\t\tif (data?.file) {\n\t\t\t\t\t\t\tuploadFileHandler(data?.file);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trecording = false;\n\t\t\t\t\t\tdisplayMediaRecord = false;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<RecordMenu\n\t\t\t\tonRecord={async () => {\n\t\t\t\t\tdisplayMediaRecord = false;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\n\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\trecording = true;\n\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstream = null;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonCaptureAudio={async () => {\n\t\t\t\t\tdisplayMediaRecord = true;\n\n\t\t\t\t\trecording = true;\n\t\t\t\t}}\n\t\t\t\tonUpload={async () => {\n\t\t\t\t\tconst input = document.createElement('input');\n\t\t\t\t\tinput.type = 'file';\n\t\t\t\t\tinput.accept = 'audio/*';\n\t\t\t\t\tinput.multiple = false;\n\t\t\t\t\tinput.click();\n\n\t\t\t\t\tinput.onchange = async (e) => {\n\t\t\t\t\t\tconst files = e.target.files;\n\n\t\t\t\t\t\tif (files && files.length > 0) {\n\t\t\t\t\t\t\tawait uploadFileHandler(files[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Tooltip content={$i18n.t('Record')} placement=\"top\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<MicSolid className=\"size-4.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\t\t\t</RecordMenu>\n\n\t\t\t<div\n\t\t\t\tclass=\"cursor-pointer flex gap-0.5 rounded-full border border-gray-50 dark:border-gray-850 dark:bg-gray-850 transition shadow-xl\"\n\t\t\t>\n\t\t\t\t<!-- <Tooltip content={$i18n.t('My Notes')} placement=\"top\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-2 size-8.5 flex justify-center items-center {selectedVersion === 'note'\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800 '\n\t\t\t\t\t\t\t: ' hover:bg-gray-50 dark:hover:bg-gray-800'}  rounded-full transition shrink-0\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedVersion = 'note';\n\t\t\t\t\t\t\tversionToggleHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Bars3BottomLeft />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip> -->\n\n\t\t\t\t<Tooltip content={$i18n.t('Enhance')} placement=\"top\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"{enhancing\n\t\t\t\t\t\t\t? 'p-2'\n\t\t\t\t\t\t\t: 'p-2.5'} flex justify-center items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full transition shrink-0\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tenhanceNoteHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={enhancing}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if enhancing}\n\t\t\t\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<SparklesSolid />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { page } from '$app/stores';\n\timport NoteEditor from '$lib/components/notes/NoteEditor.svelte';\n</script>\n\n<NoteEditor id={$page.params.id} />\n"],"names":["ctx","insert_hydration","target","svg","anchor","append_hydration","path","className","$$props","strokeWidth","button0","div0","div1","button1","div2","div3","button2","div4","div5","set_data","t1","t1_value","t4","t4_value","t7","t7_value","i18n","getContext","show","onRecord","onCaptureAudio","onUpload","dispatch","createEventDispatcher","$$invalidate","func","e","fade","state","value","t2_value","div","span","t0","t0_value","dirty","t2","t_value","option","option_value_value","t","each_value_1","ensure_array_like","i","add_render_callback","select","div7","button","div6","t5","t5_value","dayjs","if_block0","_b","_a","create_if_block_6","create_if_block_5","if_block2","create_if_block_3","_d","_c","richtextinput_props","input_1","set_input_value","span0","span1","current","richtextinput_changes","button0_disabled_value","attr","div_class_value","each_blocks","fileitem_changes","image_changes","areContentsEqual","a","b","insertNoteVersion","note","lastVersion","model","saveAs","fileSaver","calendar","duration","relativeTime","loadLocale","locales","locale","error","id","files","versionIdx","selectedModelId","recording","displayMediaRecord","showSettings","showDeleteConfirm","dragged","loading","enhancing","streaming","init","res","getNoteById","toast","goto","debounceTimeout","changeDebounceHandler","updateNoteById","$i18n","enhanceNoteHandler","$models","enhanceCompletionHandler","setContentByVersion","idx","v","currentContent","versionNavigateHandler","direction","uploadFileHandler","file","tempItemId","uuidv4","fileItem","metadata","$settings","uploadedFile","uploadFile","_e","_f","WEBUI_API_BASE_URL","item","inputFilesHandler","inputFiles","$config","reader","event","imageUrl","width","height","compressImage","downloadHandler","type","blob","downloadPdf","html","node","canvas","html2canvas","imgData","pdf","jsPDF","imgWidth","pageHeight","imgHeight","heightLeft","position","deleteNoteHandler","deleteNoteById","scrollToBottom","element","enhancedContent","systemPrompt","controller","chatCompletion","WEBUI_BASE_URL","tick","splitStream","done","lines","line","data","choice","marked","onDragOver","onDragLeave","onDrop","onMount","dropzoneElement","onDestroy","select_value","copyToClipboard","fileIdx","content","$$self","stream","err","track","input"],"mappings":"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"}