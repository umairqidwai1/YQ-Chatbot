{"version":3,"file":"22.kIlVVKqQ.js","sources":["../../../../../../src/lib/components/notes/Notes.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport jsPDF from 'jspdf';\n\timport html2canvas from 'html2canvas-pro';\n\n\timport dayjs from '$lib/dayjs';\n\timport duration from 'dayjs/plugin/duration';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\n\tdayjs.extend(duration);\n\tdayjs.extend(relativeTime);\n\n\tasync function loadLocale(locales) {\n\t\tfor (const locale of locales) {\n\t\t\ttry {\n\t\t\t\tdayjs.locale(locale);\n\t\t\t\tbreak; // Stop after successfully loading the first available locale\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Could not load locale '${locale}':`, error);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Assuming $i18n.languages is an array of language codes\n\t$: loadLocale($i18n.languages);\n\n\timport { goto } from '$app/navigation';\n\timport { onMount, getContext, onDestroy } from 'svelte';\n\timport { WEBUI_NAME, config, prompts as _prompts, user } from '$lib/stores';\n\n\timport { createNewNote, deleteNoteById, getNotes } from '$lib/apis/notes';\n\timport { capitalizeFirstLetter } from '$lib/utils';\n\n\timport EllipsisHorizontal from '../icons/EllipsisHorizontal.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport Search from '../icons/Search.svelte';\n\timport Plus from '../icons/Plus.svelte';\n\timport ChevronRight from '../icons/ChevronRight.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport NoteMenu from './Notes/NoteMenu.svelte';\n\timport FilesOverlay from '../chat/MessageInput/FilesOverlay.svelte';\n\timport { marked } from 'marked';\n\n\tconst i18n = getContext('i18n');\n\tlet loaded = false;\n\n\tlet importFiles = '';\n\tlet query = '';\n\n\tlet notes = [];\n\tlet selectedNote = null;\n\n\tlet showDeleteConfirm = false;\n\n\tconst init = async () => {\n\t\tnotes = await getNotes(localStorage.token);\n\t};\n\n\tconst createNoteHandler = async () => {\n\t\tconst res = await createNewNote(localStorage.token, {\n\t\t\ttitle: $i18n.t('New Note'),\n\t\t\tdata: {\n\t\t\t\tcontent: {\n\t\t\t\t\tjson: null,\n\t\t\t\t\thtml: '',\n\t\t\t\t\tmd: ''\n\t\t\t\t}\n\t\t\t},\n\t\t\tmeta: null,\n\t\t\taccess_control: null\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tgoto(`/notes/${res.id}`);\n\t\t}\n\t};\n\n\tconst downloadHandler = async (type) => {\n\t\tconsole.log('downloadHandler', type);\n\t\tconsole.log('selectedNote', selectedNote);\n\t\tif (type === 'md') {\n\t\t\tconst blob = new Blob([selectedNote.data.content.md], { type: 'text/markdown' });\n\t\t\tsaveAs(blob, `${selectedNote.title}.md`);\n\t\t} else if (type === 'pdf') {\n\t\t\tawait downloadPdf(selectedNote);\n\t\t}\n\t};\n\n\tconst downloadPdf = async (note) => {\n\t\ttry {\n\t\t\t// Define a fixed virtual screen size\n\t\t\tconst virtualWidth = 1024; // Fixed width (adjust as needed)\n\t\t\tconst virtualHeight = 1400; // Fixed height (adjust as needed)\n\n\t\t\t// STEP 1. Get a DOM node to render\n\t\t\tconst html = note.data?.content?.html ?? '';\n\t\t\tlet node;\n\t\t\tif (html instanceof HTMLElement) {\n\t\t\t\tnode = html;\n\t\t\t} else {\n\t\t\t\t// If it's HTML string, render to a temporary hidden element\n\t\t\t\tnode = document.createElement('div');\n\t\t\t\tnode.innerHTML = html;\n\t\t\t\tdocument.body.appendChild(node);\n\t\t\t}\n\n\t\t\t// Render to canvas with predefined width\n\t\t\tconst canvas = await html2canvas(node, {\n\t\t\t\tuseCORS: true,\n\t\t\t\tscale: 2, // Keep at 1x to avoid unexpected enlargements\n\t\t\t\twidth: virtualWidth, // Set fixed virtual screen width\n\t\t\t\twindowWidth: virtualWidth, // Ensure consistent rendering\n\t\t\t\twindowHeight: virtualHeight\n\t\t\t});\n\n\t\t\t// Remove hidden node if needed\n\t\t\tif (!(html instanceof HTMLElement)) {\n\t\t\t\tdocument.body.removeChild(node);\n\t\t\t}\n\n\t\t\tconst imgData = canvas.toDataURL('image/png');\n\n\t\t\t// A4 page settings\n\t\t\tconst pdf = new jsPDF('p', 'mm', 'a4');\n\t\t\tconst imgWidth = 210; // A4 width in mm\n\t\t\tconst pageHeight = 297; // A4 height in mm\n\n\t\t\t// Maintain aspect ratio\n\t\t\tconst imgHeight = (canvas.height * imgWidth) / canvas.width;\n\t\t\tlet heightLeft = imgHeight;\n\t\t\tlet position = 0;\n\n\t\t\tpdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n\t\t\theightLeft -= pageHeight;\n\n\t\t\t// Handle additional pages\n\t\t\twhile (heightLeft > 0) {\n\t\t\t\tposition -= pageHeight;\n\t\t\t\tpdf.addPage();\n\n\t\t\t\tpdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n\t\t\t\theightLeft -= pageHeight;\n\t\t\t}\n\n\t\t\tpdf.save(`${note.title}.pdf`);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error generating PDF', error);\n\n\t\t\ttoast.error(`${error}`);\n\t\t}\n\t};\n\n\tconst deleteNoteHandler = async (id) => {\n\t\tconst res = await deleteNoteById(localStorage.token, id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tinit();\n\t\t}\n\t};\n\n\tconst inputFilesHandler = async (inputFiles) => {\n\t\t// Check if all the file is a markdown file and extract name and content\n\n\t\tfor (const file of inputFiles) {\n\t\t\tif (file.type !== 'text/markdown') {\n\t\t\t\ttoast.error($i18n.t('Only markdown files are allowed'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = async (event) => {\n\t\t\t\tconst content = event.target.result;\n\t\t\t\tlet name = file.name.replace(/\\.md$/, '');\n\n\t\t\t\tif (typeof content !== 'string') {\n\t\t\t\t\ttoast.error($i18n.t('Invalid file content'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Create a new note with the content\n\t\t\t\tconst res = await createNewNote(localStorage.token, {\n\t\t\t\t\ttitle: name,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\tjson: null,\n\t\t\t\t\t\t\thtml: marked.parse(content ?? ''),\n\t\t\t\t\t\t\tmd: content\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmeta: null,\n\t\t\t\t\taccess_control: null\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\n\t\t\t\tif (res) {\n\t\t\t\t\tinit();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treader.readAsText(file);\n\t\t}\n\t};\n\n\tlet dragged = false;\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being dragged.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdragged = true;\n\t\t} else {\n\t\t\tdragged = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdragged = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(e);\n\n\t\tif (e.dataTransfer?.files) {\n\t\t\tconst inputFiles = Array.from(e.dataTransfer?.files);\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tconsole.log(inputFiles);\n\t\t\t\tinputFilesHandler(inputFiles);\n\t\t\t}\n\t\t}\n\n\t\tdragged = false;\n\t};\n\n\tonDestroy(() => {\n\t\tconsole.log('destroy');\n\t\tconst dropzoneElement = document.getElementById('notes-container');\n\n\t\tif (dropzoneElement) {\n\t\t\tdropzoneElement?.removeEventListener('dragover', onDragOver);\n\t\t\tdropzoneElement?.removeEventListener('drop', onDrop);\n\t\t\tdropzoneElement?.removeEventListener('dragleave', onDragLeave);\n\t\t}\n\t});\n\n\tonMount(async () => {\n\t\tawait init();\n\t\tloaded = true;\n\n\t\tconst dropzoneElement = document.getElementById('notes-container');\n\n\t\tdropzoneElement?.addEventListener('dragover', onDragOver);\n\t\tdropzoneElement?.addEventListener('drop', onDrop);\n\t\tdropzoneElement?.addEventListener('dragleave', onDragLeave);\n\t});\n</script>\n\n<svelte:head>\n\t<title>\n\t\t{$i18n.t('Notes')} â€¢ {$WEBUI_NAME}\n\t</title>\n</svelte:head>\n\n<FilesOverlay show={dragged} />\n\n<div id=\"notes-container\" class=\"w-full min-h-full h-full\">\n\t{#if loaded}\n\t\t<DeleteConfirmDialog\n\t\t\tbind:show={showDeleteConfirm}\n\t\t\ttitle={$i18n.t('Delete note?')}\n\t\t\ton:confirm={() => {\n\t\t\t\tdeleteNoteHandler(selectedNote.id);\n\t\t\t\tshowDeleteConfirm = false;\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\" text-sm text-gray-500\">\n\t\t\t\t{$i18n.t('This will delete')} <span class=\"  font-semibold\">{selectedNote.title}</span>.\n\t\t\t</div>\n\t\t</DeleteConfirmDialog>\n\n\t\t<div class=\"px-4.5 @container h-full pt-2\">\n\t\t\t{#if Object.keys(notes).length > 0}\n\t\t\t\t<div class=\"pb-10\">\n\t\t\t\t\t{#each Object.keys(notes) as timeRange}\n\t\t\t\t\t\t<div class=\"w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2.5\">\n\t\t\t\t\t\t\t{$i18n.t(timeRange)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mb-5 gap-2.5 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#each notes[timeRange] as note, idx (note.id)}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\" flex space-x-4 cursor-pointer w-full px-4.5 py-4 bg-gray-50 dark:bg-gray-850 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl transition\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\" flex flex-1 space-x-4 cursor-pointer w-full\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={`/notes/${note.id}`}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full -translate-y-0.5 flex flex-col justify-between\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"  flex items-center gap-2 self-center mb-1 justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" font-semibold line-clamp-1 capitalize\">{note.title}</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<NoteMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDownload={(type) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedNote = note;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadHandler(type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedNote = note;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisHorizontal className=\"size-5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</NoteMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" text-xs text-gray-500 dark:text-gray-500 mb-3 line-clamp-5 min-h-18\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if note.data?.content?.md}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{note.data?.content?.md}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('No content')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" text-xs px-0.5 w-full flex justify-between items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(note.updated_at / 1000000).fromNow()}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent={note?.user?.email ?? $i18n.t('Deleted User')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex shrink-0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"shrink-0 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('By {{name}}', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnote?.user?.name ?? note?.user?.email ?? $i18n.t('Deleted User')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full h-full flex flex-col items-center justify-center\">\n\t\t\t\t\t<div class=\"pb-20 text-center\">\n\t\t\t\t\t\t<div class=\" text-xl font-medium text-gray-400 dark:text-gray-600\">\n\t\t\t\t\t\t\t{$i18n.t('No Notes')}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"mt-1 text-sm text-gray-300 dark:text-gray-700\">\n\t\t\t\t\t\t\t{$i18n.t('Create your first note by clicking on the plus button below.')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end\">\n\t\t\t<div class=\"flex gap-0.5 justify-end w-full\">\n\t\t\t\t<Tooltip content={$i18n.t('Create Note')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\tcreateNoteHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"size-4.5\" strokeWidth=\"2.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<!-- <button\n\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl\"\n\t\t\t>\n\t\t\t\t<SparklesSolid className=\"size-4\" />\n\t\t\t</button> -->\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- {#if $user?.role === 'admin'}\n\t\t<div class=\" flex justify-end w-full mb-3\">\n\t\t\t<div class=\"flex space-x-2\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"notes-import-input\"\n\t\t\t\t\tbind:files={importFiles}\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\".md\"\n\t\t\t\t\thidden\n\t\t\t\t\ton:change={() => {\n\t\t\t\t\t\tconsole.log(importFiles);\n\n\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\treader.onload = async (event) => {\n\t\t\t\t\t\t\tconsole.log(event.target.result);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treader.readAsText(importFiles[0]);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tconst notesImportInputElement = document.getElementById('notes-import-input');\n\t\t\t\t\t\tif (notesImportInputElement) {\n\t\t\t\t\t\t\tnotesImportInputElement.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-2 font-medium line-clamp-1\">{$i18n.t('Import Notes')}</div>\n\n\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t{/if} -->\n\t{:else}\n\t\t<div class=\"w-full h-full flex justify-center items-center\">\n\t\t\t<Spinner />\n\t\t</div>\n\t{/if}\n</div>\n"],"names":["insert_hydration","target","div","anchor","ctx","show_if","div0","div2","append_hydration","div1","t2_value","span","set_data","t0","t0_value","dirty","t2","div3","i","each_blocks","button","t_value","_b","_a","capitalizeFirstLetter","_d","_c","t4_value","dayjs","create_if_block_2","attr","a","a_href_value","div8","div7","div4","div6","div5","current","t4","each_value_1","ensure_array_like","get_key","document_1","title_value","saveAs","fileSaver","duration","relativeTime","loadLocale","locales","locale","error","i18n","getContext","loaded","notes","selectedNote","showDeleteConfirm","init","getNotes","createNoteHandler","res","createNewNote","$i18n","toast","goto","downloadHandler","type","blob","downloadPdf","note","html","node","canvas","html2canvas","imgData","pdf","jsPDF","imgWidth","pageHeight","imgHeight","heightLeft","position","deleteNoteHandler","id","deleteNoteById","inputFilesHandler","inputFiles","file","reader","event","content","name","marked","dragged","onDragOver","e","onDragLeave","onDrop","onDestroy","dropzoneElement","onMount","value","$$invalidate"],"mappings":"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"}