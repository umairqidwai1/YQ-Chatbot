import{s as Ce,E as qe,F as Xe,a as $,d,f as c,i as B,g as p,n as ce,e as v,c as w,S as Et,W as pt,k as q,o as X,z as xe,B as Fe,p as _t,j as We,G as gt,u as ie,t as we,b as $e,h as ke,C as Ae,A as Dt,H as ut,q as xt,Z as Ft}from"../chunks/Bk--KVgx.js";import{S as Pe,i as Ue,t as F,g as Ne,c as ze,a as V,b as H,d as K,m as j,e as O,f as Ve}from"../chunks/CoU9NT7-.js";import{F as Vt}from"../chunks/CU2r43ac.js";import{t as G}from"../chunks/DXxu2l8m.js";import{g as Ct}from"../chunks/D_XIBSCa.js";import{p as Tt}from"../chunks/D-0X3nPa.js";import{b as St,c as Nt,s as zt,u as Bt,k as Mt}from"../chunks/Cx1AvSPh.js";import{u as Wt,a as At,g as Pt}from"../chunks/CXOqznru.js";import{b as Ut,r as Lt,e as Ht,f as Kt,u as jt,h as Ot,g as Rt}from"../chunks/BjfCjpsn.js";import{p as qt,v as Xt}from"../chunks/BQs868cI.js";import{S as Gt}from"../chunks/R3jnHhLu.js";import{e as wt}from"../chunks/DOi8FfRu.js";import{F as Yt}from"../chunks/D9EXU4hk.js";import{A as Jt}from"../chunks/CBJiPhU2.js";import"../chunks/C7mVdHWX.js";import{M as ft}from"../chunks/Clho6vVM.js";import{b as Qt}from"../chunks/D0VtmBkg.js";import{f as Zt}from"../chunks/CBc5jlPY.js";import{D as el}from"../chunks/Cuw40vro.js";import{T as dt}from"../chunks/CSMXUTi0.js";import{F as tl}from"../chunks/DbBVPbki.js";import"../chunks/I1CDPYOB.js";import{M as ll}from"../chunks/DuEzRzUF.js";import{R as vt,V as rl}from"../chunks/Ce1KHyjf.js";import{X as sl}from"../chunks/Bus0oop7.js";import{M as nl}from"../chunks/tKgSc4-d.js";import{C as ol}from"../chunks/D_cgVhu-.js";import{D as al}from"../chunks/B6AwsgrP.js";import{C as il}from"../chunks/Cp2VFJft.js";import{A as cl,L as fl}from"../chunks/CbG5cdRx.js";function ul(s){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Xe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function dl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class ml extends Pe{constructor(e){super(),Ue(this,e,dl,ul,Ce,{className:0,strokeWidth:1})}}function $t(s,e,t){const l=s.slice();return l[6]=e[t],l}function kt(s){var o,i,f,_,y,b;let e,t,l,r;function a(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Yt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((o=s[6])==null?void 0:o.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((_=s[6])==null?void 0:_.size)??((b=(y=s[6])==null?void 0:y.meta)==null?void 0:b.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",a),t.$on("dismiss",n),{c(){e=v("div"),H(t.$$.fragment),l=q(),this.h()},l(h){e=w(h,"DIV",{class:!0});var D=$(e);K(t.$$.fragment,D),l=X(D),D.forEach(d),this.h()},h(){c(e,"class","mt-1 px-2")},m(h,D){B(h,e,D),j(t,e,null),p(e,l),r=!0},p(h,D){var C,A,P,T,S,k;s=h;const E={};D&3&&(E.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),D&4&&(E.small=s[2]),D&2&&(E.item=s[6]),D&2&&(E.name=((C=s[6])==null?void 0:C.name)??((P=(A=s[6])==null?void 0:A.meta)==null?void 0:P.name)),D&2&&(E.size=((T=s[6])==null?void 0:T.size)??((k=(S=s[6])==null?void 0:S.meta)==null?void 0:k.size)??""),D&2&&(E.loading=s[6].status==="uploading"),t.$set(E)},i(h){r||(F(t.$$.fragment,h),r=!0)},o(h){V(t.$$.fragment,h),r=!1},d(h){h&&d(e),O(t)}}}function hl(s){let e,t,l=wt(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=kt($t(s,l,n));const a=n=>V(r[n],1,1,()=>{r[n]=null});return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=$(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(d),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,o){B(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[o]){if(o&15){l=wt(n[1]);let i;for(i=0;i<l.length;i+=1){const f=$t(n,l,i);r[i]?(r[i].p(f,o),F(r[i],1)):(r[i]=kt(f),r[i].c(),F(r[i],1),r[i].m(e,null))}for(Ne(),i=l.length;i<r.length;i+=1)a(i);ze()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)F(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)V(r[o]);t=!1},d(n){n&&d(e),Et(r,n)}}}function pl(s,e,t){const l=pt();let{selectedFileId:r=null}=e,{files:a=[]}=e,{small:n=!1}=e;const o=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,a=f.files),"small"in f&&t(2,n=f.small)},[r,a,n,l,o,i]}class _l extends Pe{constructor(e){super(),Ue(this,e,pl,hl,Ce,{selectedFileId:0,files:1,small:2})}}function gl(s){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Xe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function vl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class wl extends Pe{constructor(e){super(),Ue(this,e,vl,gl,Ce,{className:0,strokeWidth:1})}}function $l(s){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Xe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function kl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class bl extends Pe{constructor(e){super(),Ue(this,e,kl,$l,Ce,{className:0,strokeWidth:1})}}function yl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(a){e=w(a,"BUTTON",{class:!0,"data-svelte-h":!0}),gt(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(a,n){B(a,e,n),l||(r=ie(e,"click",s[9]),l=!0)},p:ce,d(a){a&&d(e),l=!1,r()}}}function Il(s){let e,t;return e=new dt({props:{content:s[2].t("Add Content"),$$slots:{default:[yl]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&4&&(a.content=l[2].t("Add Content")),r&4098&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function El(s){let e,t,l,r=s[2].t("Upload files")+"",a,n;return e=new ml({props:{strokeWidth:"2"}}),{c(){H(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload files")+"")&&ke(a,r)},i(o){n||(F(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function Dl(s){let e,t,l,r=s[2].t("Upload directory")+"",a,n;return e=new tl({props:{strokeWidth:"2"}}),{c(){H(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload directory")+"")&&ke(a,r)},i(o){n||(F(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function xl(s){let e,t,l,r=s[2].t("Sync directory")+"",a,n;return e=new bl({props:{strokeWidth:"2"}}),{c(){H(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Sync directory")+"")&&ke(a,r)},i(o){n||(F(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function Fl(s){let e,t;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[xl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&4100&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Vl(s){let e,t,l,r=s[2].t("Add text content")+"",a,n;return e=new wl({props:{strokeWidth:"2"}}),{c(){H(e.$$.fragment),t=q(),l=v("div"),a=we(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=w(o,"DIV",{class:!0});var i=$(l);a=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),B(o,t,i),B(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Add text content")+"")&&ke(a,r)},i(o){n||(F(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),O(e,o)}}}function Cl(s){let e,t,l,r,a,n,o,i;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[El]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Dl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),a=new dt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),o=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Vl]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){H(e.$$.fragment),t=q(),H(l.$$.fragment),r=q(),H(a.$$.fragment),n=q(),H(o.$$.fragment)},l(f){K(e.$$.fragment,f),t=X(f),K(l.$$.fragment,f),r=X(f),K(a.$$.fragment,f),n=X(f),K(o.$$.fragment,f)},m(f,_){j(e,f,_),B(f,t,_),j(l,f,_),B(f,r,_),j(a,f,_),B(f,n,_),j(o,f,_),i=!0},p(f,_){const y={};_&4100&&(y.$$scope={dirty:_,ctx:f}),e.$set(y);const b={};_&4100&&(b.$$scope={dirty:_,ctx:f}),l.$set(b);const h={};_&4&&(h.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(h.$$scope={dirty:_,ctx:f}),a.$set(h);const D={};_&4100&&(D.$$scope={dirty:_,ctx:f}),o.$set(D)},i(f){i||(F(e.$$.fragment,f),F(l.$$.fragment,f),F(a.$$.fragment,f),F(o.$$.fragment,f),i=!0)},o(f){V(e.$$.fragment,f),V(l.$$.fragment,f),V(a.$$.fragment,f),V(o.$$.fragment,f),i=!1},d(f){f&&(d(t),d(r),d(n)),O(e,f),O(l,f),O(a,f),O(o,f)}}}function Tl(s){let e,t,l;return t=new Qt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Zt,$$slots:{default:[Cl]},$$scope:{ctx:s}}}),{c(){e=v("div"),H(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{slot:!0});var a=$(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"slot","content")},m(r,a){B(r,e,a),j(t,e,null),l=!0},p(r,a){const n={};a&4100&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(F(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),O(t)}}}function Sl(s){let e,t,l;function r(n){s[10](n)}let a={align:"end",$$slots:{content:[Tl],default:[Il]},$$scope:{ctx:s}};return s[1]!==void 0&&(a.show=s[1]),e=new el({props:a}),xe.push(()=>Ve(e,"show",r)),e.$on("change",s[11]),{c(){H(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,[o]){const i={};o&4102&&(i.$$scope={dirty:o,ctx:n}),!t&&o&2&&(t=!0,i.show=n[1],Fe(()=>t=!1)),e.$set(i)},i(n){l||(F(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function Nl(s,e,t){let l;const r=pt(),a=_t("i18n");We(s,a,E=>t(2,l=E));let{onClose:n=()=>{}}=e,o=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},y=()=>{r("upload",{type:"text"})},b=E=>{E.stopPropagation(),t(1,o=!0)};function h(E){o=E,t(1,o)}const D=E=>{E.detail===!1&&n()};return s.$$set=E=>{"onClose"in E&&t(0,n=E.onClose)},[n,o,l,r,a,i,f,_,y,b,h,D]}class zl extends Pe{constructor(e){super(),Ue(this,e,Nl,Sl,Ce,{onClose:0})}}function Bl(s){let e,t;return e=new dt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Wl]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&16&&(a.content=l[4].t("Voice Input")),r&65560&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Ml(s){let e,t,l,r;function a(o){s[12](o)}let n={className:"p-1",onCancel:s[10],onConfirm:s[11]};return s[3]!==void 0&&(n.recording=s[3]),t=new rl({props:n}),xe.push(()=>Ve(t,"recording",a)),{c(){e=v("div"),H(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=$(e);K(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full")},m(o,i){B(o,e,i),j(t,e,null),r=!0},p(o,i){const f={};i&8&&(f.onCancel=o[10]),i&12&&(f.onConfirm=o[11]),!l&&i&8&&(l=!0,f.recording=o[3],Fe(()=>l=!1)),t.$set(f)},i(o){r||(F(t.$$.fragment,o),r=!0)},o(o){V(t.$$.fragment,o),r=!1},d(o){o&&d(e),O(t)}}}function Wl(s){let e,t,l,r,a;return t=new nl({props:{className:"size-5"}}),{c(){e=v("button"),H(t.$$.fragment),this.h()},l(n){e=w(n,"BUTTON",{class:!0,type:!0});var o=$(e);K(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,o){B(n,e,o),j(t,e,null),l=!0,r||(a=ie(e,"click",s[13]),r=!0)},p:ce,i(n){l||(F(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&d(e),O(t),r=!1,a()}}}function Al(s){let e,t=s[4].t("Save")+"",l;return{c(){e=v("button"),l=we(t),this.h()},l(r){e=w(r,"BUTTON",{class:!0,type:!0});var a=$(e);l=$e(a,t),a.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,a){B(r,e,a),p(e,l)},p(r,a){a&16&&t!==(t=r[4].t("Save")+"")&&ke(l,t)},d(r){r&&d(e)}}}function Pl(s){let e,t,l,r,a,n,o,i,f,_,y,b,h,D,E,C,A,P,T,S,k,z,R,m,g,W,L;l=new sl({props:{className:"size-3.5"}});function Y(M){s[9](M)}let ee={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(ee.value=s[2]),E=new vt({props:ee}),xe.push(()=>Ve(E,"value",Y));const re=[Ml,Bl],J=[];function fe(M,Q){return M[3]?0:1}return S=fe(s),k=J[S]=re[S](s),m=new dt({props:{content:s[4].t("Save"),$$slots:{default:[Al]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("button"),H(l.$$.fragment),r=q(),a=v("div"),n=v("form"),o=v("div"),i=v("div"),f=v("div"),_=v("div"),y=v("input"),h=q(),D=v("div"),H(E.$$.fragment),A=q(),P=v("div"),T=v("div"),k.c(),z=q(),R=v("div"),H(m.$$.fragment),this.h()},l(M){e=w(M,"DIV",{class:!0});var Q=$(e);t=w(Q,"BUTTON",{class:!0,type:!0});var te=$(t);K(l.$$.fragment,te),te.forEach(d),Q.forEach(d),r=X(M),a=w(M,"DIV",{class:!0});var me=$(a);n=w(me,"FORM",{class:!0});var ue=$(n);o=w(ue,"DIV",{class:!0});var ge=$(o);i=w(ge,"DIV",{class:!0});var se=$(i);f=w(se,"DIV",{class:!0});var be=$(f);_=w(be,"DIV",{class:!0});var ae=$(_);y=w(ae,"INPUT",{class:!0,type:!0,placeholder:!0}),ae.forEach(d),be.forEach(d),h=X(se),D=w(se,"DIV",{class:!0});var oe=$(D);K(E.$$.fragment,oe),oe.forEach(d),se.forEach(d),ge.forEach(d),A=X(ue),P=w(ue,"DIV",{class:!0});var ve=$(P);T=w(ve,"DIV",{class:!0});var he=$(T);k.l(he),he.forEach(d),z=X(ve),R=w(ve,"DIV",{class:!0});var Be=$(R);K(m.$$.fragment,Be),Be.forEach(d),ve.forEach(d),ue.forEach(d),me.forEach(d),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(y,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(y,"type","text"),c(y,"placeholder",b=s[4].t("Title")),y.required=!0,c(_,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(D,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(o,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(T,"class",""),c(R,"class","shrink-0"),c(P,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(a,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(M,Q){B(M,e,Q),p(e,t),j(l,t,null),B(M,r,Q),B(M,a,Q),p(a,n),p(n,o),p(o,i),p(i,f),p(f,_),p(_,y),Ae(y,s[1]),p(i,h),p(i,D),j(E,D,null),p(n,A),p(n,P),p(P,T),J[S].m(T,null),p(P,z),p(P,R),j(m,R,null),g=!0,W||(L=[ie(t,"click",s[7]),ie(y,"input",s[8]),ie(n,"submit",Dt(s[14]))],W=!0)},p(M,Q){(!g||Q&16&&b!==(b=M[4].t("Title")))&&c(y,"placeholder",b),Q&2&&y.value!==M[1]&&Ae(y,M[1]);const te={};Q&16&&(te.placeholder=M[4].t("Write something...")),!C&&Q&4&&(C=!0,te.value=M[2],Fe(()=>C=!1)),E.$set(te);let me=S;S=fe(M),S===me?J[S].p(M,Q):(Ne(),V(J[me],1,1,()=>{J[me]=null}),ze(),k=J[S],k?k.p(M,Q):(k=J[S]=re[S](M),k.c()),F(k,1),k.m(T,null));const ue={};Q&16&&(ue.content=M[4].t("Save")),Q&65552&&(ue.$$scope={dirty:Q,ctx:M}),m.$set(ue)},i(M){g||(F(l.$$.fragment,M),F(E.$$.fragment,M),F(k),F(m.$$.fragment,M),g=!0)},o(M){V(l.$$.fragment,M),V(E.$$.fragment,M),V(k),V(m.$$.fragment,M),g=!1},d(M){M&&(d(e),d(r),d(a)),O(l),O(E),J[S].d(),O(m),W=!1,ut(L)}}}function Ul(s){let e,t,l;function r(n){s[15](n)}let a={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Pl]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.show=s[0]),e=new ll({props:a}),xe.push(()=>Ve(e,"show",r)),{c(){H(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,[o]){const i={};o&65567&&(i.$$scope={dirty:o,ctx:n}),!t&&o&1&&(t=!0,i.show=n[0],Fe(()=>t=!1)),e.$set(i)},i(n){l||(F(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function Ll(s,e,t){let l;const r=_t("i18n");We(s,r,T=>t(4,l=T));const a=pt();let{show:n=!1}=e,o="Untitled",i="",f=!1;const _=()=>{t(0,n=!1)};function y(){o=this.value,t(1,o)}function b(T){i=T,t(2,i)}const h=()=>{t(3,f=!1)},D=T=>{const{text:S,filename:k}=T;t(2,i=`${i}${S} `),t(3,f=!1)};function E(T){f=T,t(3,f)}const C=async()=>{try{let T=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(S){return G.error(l.t("Permission denied when accessing microphone: {{error}}",{error:S})),null});T&&(t(3,f=!0),T.getTracks().forEach(k=>k.stop())),T=null}catch{G.error(l.t("Permission denied when accessing microphone"))}},A=()=>{if(o.trim()===""||i.trim()===""){G.error(l.t("Please fill in all fields.")),t(1,o=o.trim()),t(2,i=i.trim());return}a("submit",{name:o,content:i}),t(0,n=!1),t(1,o=""),t(2,i="")};function P(T){n=T,t(0,n)}return s.$$set=T=>{"show"in T&&t(0,n=T.show)},[n,o,i,f,l,r,a,_,y,b,h,D,E,C,A,P]}class Hl extends Pe{constructor(e){super(),Ue(this,e,Ll,Ul,Ce,{show:0})}}function bt(s){let e,t,l,r,a,n,o;return a=new Jt({props:{$$slots:{default:[Kl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),H(a.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=$(e);t=w(f,"DIV",{class:!0});var _=$(t);l=w(_,"DIV",{class:!0});var y=$(l);r=w(y,"DIV",{class:!0});var b=$(r);K(a.$$.fragment,b),b.forEach(d),y.forEach(d),_.forEach(d),f.forEach(d),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){B(i,e,f),p(e,t),p(t,l),p(l,r),j(a,r,null),o=!0},p(i,f){const _={};f[2]&512&&(_.$$scope={dirty:f,ctx:i}),a.$set(_),(!o||f[0]&16384&&n!==(n="fixed "+(i[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){o||(F(a.$$.fragment,i),o=!0)},o(i){V(a.$$.fragment,i),o=!1},d(i){i&&d(e),O(a)}}}function Kl(s){let e,t="Drop any files here to add to my documents";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),gt(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){B(l,e,r)},p:ce,d(l){l&&d(e)}}}function jl(s){let e,t;return e=new Gt({}),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ce,i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Ol(s){var lt,rt,st,nt;let e,t,l,r,a,n,o,i,f,_,y,b,h,D,E,C,A=s[13].t("Access")+"",P,T,S,k,z,R,m,g,W,L,Y,ee,re,J,fe,M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',Q,te,me,ue,ge,se,be,ae,oe,ve,he,Be,Je;function mt(I){s[34](I)}function ht(I){s[35](I)}let Ge={allowPublic:((st=(rt=(lt=s[15])==null?void 0:lt.permissions)==null?void 0:rt.sharing)==null?void 0:st.public_knowledge)||((nt=s[15])==null?void 0:nt.role)==="admin",onChange:s[33],accessRoles:["read","write"]};s[7]!==void 0&&(Ge.show=s[7]),s[0].access_control!==void 0&&(Ge.accessControl=s[0].access_control),e=new cl({props:Ge}),xe.push(()=>Ve(e,"show",mt)),xe.push(()=>Ve(e,"accessControl",ht)),D=new fl({props:{strokeWidth:"2.5",className:"size-3.5"}});const Qe=[ql,Rl],ye=[];function Ze(I,Z){return I[3]?0:!I[3]&&I[2]!==null?1:-1}~(m=Ze(s))&&(g=ye[m]=Qe[m](s)),se=new zl({}),se.$on("upload",s[50]),se.$on("sync",s[51]);const et=[Ql,Jl],Ie=[];function tt(I,Z){return I[9].length>0?0:1}return ae=tt(s),oe=Ie[ae]=et[ae](s),{c(){H(e.$$.fragment),r=q(),a=v("div"),n=v("div"),o=v("div"),i=v("div"),f=v("div"),_=v("input"),y=q(),b=v("div"),h=v("button"),H(D.$$.fragment),E=q(),C=v("div"),P=we(A),T=q(),S=v("div"),k=v("input"),z=q(),R=v("div"),g&&g.c(),W=q(),L=v("div"),Y=v("div"),ee=v("div"),re=v("div"),J=v("div"),fe=v("div"),fe.innerHTML=M,Q=q(),te=v("input"),ue=q(),ge=v("div"),H(se.$$.fragment),be=q(),oe.c(),this.h()},l(I){K(e.$$.fragment,I),r=X(I),a=w(I,"DIV",{class:!0});var Z=$(a);n=w(Z,"DIV",{class:!0});var Te=$(n);o=w(Te,"DIV",{class:!0});var Ee=$(o);i=w(Ee,"DIV",{class:!0});var De=$(i);f=w(De,"DIV",{class:!0});var Le=$(f);_=w(Le,"INPUT",{type:!0,class:!0,placeholder:!0}),Le.forEach(d),y=X(De),b=w(De,"DIV",{class:!0});var He=$(b);h=w(He,"BUTTON",{class:!0,type:!0});var Se=$(h);K(D.$$.fragment,Se),E=X(Se),C=w(Se,"DIV",{class:!0});var Ke=$(C);P=$e(Ke,A),Ke.forEach(d),Se.forEach(d),He.forEach(d),De.forEach(d),T=X(Ee),S=w(Ee,"DIV",{class:!0});var ot=$(S);k=w(ot,"INPUT",{type:!0,class:!0,placeholder:!0}),ot.forEach(d),Ee.forEach(d),Te.forEach(d),Z.forEach(d),z=X(I),R=w(I,"DIV",{class:!0});var je=$(R);g&&g.l(je),W=X(je),L=w(je,"DIV",{class:!0});var at=$(L);Y=w(at,"DIV",{class:!0});var it=$(Y);ee=w(it,"DIV",{class:!0});var u=$(ee);re=w(u,"DIV",{class:!0});var x=$(re);J=w(x,"DIV",{class:!0});var N=$(J);fe=w(N,"DIV",{class:!0,"data-svelte-h":!0}),gt(fe)!=="svelte-or7cnz"&&(fe.innerHTML=M),Q=X(N),te=w(N,"INPUT",{class:!0,placeholder:!0}),ue=X(N),ge=w(N,"DIV",{});var U=$(ge);K(se.$$.fragment,U),U.forEach(d),N.forEach(d),x.forEach(d),be=X(u),oe.l(u),u.forEach(d),it.forEach(d),at.forEach(d),je.forEach(d),this.h()},h(){c(_,"type","text"),c(_,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(_,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(C,"class","text-sm font-medium shrink-0"),c(h,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(h,"type","button"),c(b,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(k,"type","text"),c(k,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(k,"placeholder","Knowledge Description"),c(S,"class","flex w-full px-1"),c(o,"class","flex-1"),c(n,"class","flex w-full"),c(a,"class","w-full mb-2.5"),c(fe,"class","self-center ml-1 mr-3"),c(te,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(te,"placeholder",me=s[13].t("Search Collection")),c(J,"class","flex mb-0.5"),c(re,"class","px-3"),c(ee,"class","w-full h-full flex flex-col"),c(Y,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(L,"class",ve=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(R,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(I,Z){j(e,I,Z),B(I,r,Z),B(I,a,Z),p(a,n),p(n,o),p(o,i),p(i,f),p(f,_),Ae(_,s[0].name),p(i,y),p(i,b),p(b,h),j(D,h,null),p(h,E),p(h,C),p(C,P),p(o,T),p(o,S),p(S,k),Ae(k,s[0].description),B(I,z,Z),B(I,R,Z),~m&&ye[m].m(R,null),p(R,W),p(R,L),p(L,Y),p(Y,ee),p(ee,re),p(re,J),p(J,fe),p(J,Q),p(J,te),Ae(te,s[1]),p(J,ue),p(J,ge),j(se,ge,null),p(ee,be),Ie[ae].m(ee,null),he=!0,Be||(Je=[ie(_,"input",s[36]),ie(_,"input",s[37]),ie(h,"click",s[38]),ie(k,"input",s[39]),ie(k,"input",s[40]),ie(te,"input",s[48]),ie(te,"focus",s[49])],Be=!0)},p(I,Z){var Le,He,Se,Ke;const Te={};Z[0]&32768&&(Te.allowPublic=((Se=(He=(Le=I[15])==null?void 0:Le.permissions)==null?void 0:He.sharing)==null?void 0:Se.public_knowledge)||((Ke=I[15])==null?void 0:Ke.role)==="admin"),!t&&Z[0]&128&&(t=!0,Te.show=I[7],Fe(()=>t=!1)),!l&&Z[0]&1&&(l=!0,Te.accessControl=I[0].access_control,Fe(()=>l=!1)),e.$set(Te),Z[0]&1&&_.value!==I[0].name&&Ae(_,I[0].name),(!he||Z[0]&8192)&&A!==(A=I[13].t("Access")+"")&&ke(P,A),Z[0]&1&&k.value!==I[0].description&&Ae(k,I[0].description);let Ee=m;m=Ze(I),m===Ee?~m&&ye[m].p(I,Z):(g&&(Ne(),V(ye[Ee],1,1,()=>{ye[Ee]=null}),ze()),~m?(g=ye[m],g?g.p(I,Z):(g=ye[m]=Qe[m](I),g.c()),F(g,1),g.m(R,W)):g=null),(!he||Z[0]&8192&&me!==(me=I[13].t("Search Collection")))&&c(te,"placeholder",me),Z[0]&2&&te.value!==I[1]&&Ae(te,I[1]);let De=ae;ae=tt(I),ae===De?Ie[ae].p(I,Z):(Ne(),V(Ie[De],1,1,()=>{Ie[De]=null}),ze(),oe=Ie[ae],oe?oe.p(I,Z):(oe=Ie[ae]=et[ae](I),oe.c()),F(oe,1),oe.m(ee,null)),(!he||Z[0]&8&&ve!==(ve=(I[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(L,"class",ve)},i(I){he||(F(e.$$.fragment,I),F(D.$$.fragment,I),F(g),F(se.$$.fragment,I),F(oe),he=!0)},o(I){V(e.$$.fragment,I),V(D.$$.fragment,I),V(g),V(se.$$.fragment,I),V(oe),he=!1},d(I){I&&(d(r),d(a),d(z),d(R)),O(e,I),O(D),~m&&ye[m].d(),O(se),Ie[ae].d(),Be=!1,ut(Je)}}}function Rl(s){let e,t;return e=new al({props:{className:"h-full",show:s[2]!==null,onClose:s[47],$$slots:{default:[Xl]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r[0]&4&&(a.show=l[2]!==null),r[0]&4&&(a.onClose=l[47]),r[0]&11268|r[2]&512&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function ql(s){let e,t,l,r;const a=[Yl,Gl],n=[];function o(i,f){return i[10]?0:1}return t=o(s),l=n[t]=a[t](s),{c(){e=v("div"),l.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=$(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){B(i,e,f),n[t].m(e,null),r=!0},p(i,f){let _=t;t=o(i),t===_?n[t].p(i,f):(Ne(),V(n[_],1,1,()=>{n[_]=null}),ze(),l=n[t],l?l.p(i,f):(l=n[t]=a[t](i),l.c()),F(l,1),l.m(e,null))},i(i){r||(F(l),r=!0)},o(i){V(l),r=!1},d(i){i&&d(e),n[t].d()}}}function yt(s){let e,t,l;function r(n){s[46](n)}let a={className:"input-prose-sm",placeholder:s[13].t("Add content here"),preserveBreaks:!1};return s[11]!==void 0&&(a.value=s[11]),e=new vt({props:a}),xe.push(()=>Ve(e,"value",r)),{c(){H(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o[0]&8192&&(i.placeholder=n[13].t("Add content here")),!t&&o[0]&2048&&(t=!0,i.value=n[11],Fe(()=>t=!1)),e.$set(i)},i(n){l||(F(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function Xl(s){var R,m;let e,t,l,r,a,n,o,i,f=((m=(R=s[10])==null?void 0:R.meta)==null?void 0:m.name)+"",_,y,b,h,D=s[13].t("Save")+"",E,C,A,P=s[10].id,T,S,k;n=new il({props:{strokeWidth:"2.5"}});let z=yt(s);return{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),a=v("button"),H(n.$$.fragment),o=q(),i=v("div"),_=we(f),y=q(),b=v("div"),h=v("button"),E=we(D),C=q(),A=v("div"),z.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var W=$(e);t=w(W,"DIV",{class:!0});var L=$(t);l=w(L,"DIV",{class:!0});var Y=$(l);r=w(Y,"DIV",{class:!0});var ee=$(r);a=w(ee,"BUTTON",{class:!0});var re=$(a);K(n.$$.fragment,re),re.forEach(d),ee.forEach(d),o=X(Y),i=w(Y,"DIV",{class:!0});var J=$(i);_=$e(J,f),J.forEach(d),y=X(Y),b=w(Y,"DIV",{});var fe=$(b);h=w(fe,"BUTTON",{class:!0});var M=$(h);E=$e(M,D),M.forEach(d),fe.forEach(d),Y.forEach(d),C=X(L),A=w(L,"DIV",{class:!0});var Q=$(A);z.l(Q),Q.forEach(d),L.forEach(d),W.forEach(d),this.h()},h(){c(a,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(h,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(A,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,W){B(g,e,W),p(e,t),p(t,l),p(l,r),p(r,a),j(n,a,null),p(l,o),p(l,i),p(i,_),p(l,y),p(l,b),p(b,h),p(h,E),p(t,C),p(t,A),z.m(A,null),T=!0,S||(k=[ie(a,"click",s[44]),ie(h,"click",s[45])],S=!0)},p(g,W){var L,Y;(!T||W[0]&1024)&&f!==(f=((Y=(L=g[10])==null?void 0:L.meta)==null?void 0:Y.name)+"")&&ke(_,f),(!T||W[0]&8192)&&D!==(D=g[13].t("Save")+"")&&ke(E,D),W[0]&1024&&Ce(P,P=g[10].id)?(Ne(),V(z,1,1,ce),ze(),z=yt(g),z.c(),F(z,1),z.m(A,null)):z.p(g,W)},i(g){T||(F(n.$$.fragment,g),F(z),T=!0)},o(g){V(n.$$.fragment,g),V(z),T=!1},d(g){g&&d(e),O(n),z.d(g),S=!1,ut(k)}}}function Gl(s){let e,t,l=s[13].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=v("div"),t=v("div"),r=we(l),this.h()},l(a){e=w(a,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{class:!0});var o=$(t);r=$e(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(a,n){B(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&8192&&l!==(l=a[13].t("Drag and drop a file to upload or select a file to view")+"")&&ke(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Yl(s){var z,R;let e,t,l,r,a,n=s[25]((R=(z=s[10])==null?void 0:z.meta)==null?void 0:R.name)+"",o,i,f,_,y,b=s[13].t("Save")+"",h,D,E,C=s[10].id,A,P,T,S=!er,k=It(s);return{c(){e=v("div"),t=v("div"),l=q(),r=v("div"),a=v("a"),o=we(n),f=q(),_=v("div"),y=v("button"),h=we(b),D=q(),E=v("div"),k.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=$(e);t=w(g,"DIV",{class:!0});var W=$(t);l=X(W),r=w(W,"DIV",{class:!0});var L=$(r);a=w(L,"A",{class:!0,href:!0,target:!0});var Y=$(a);o=$e(Y,n),Y.forEach(d),L.forEach(d),f=X(W),_=w(W,"DIV",{});var ee=$(_);y=w(ee,"BUTTON",{class:!0});var re=$(y);h=$e(re,b),re.forEach(d),ee.forEach(d),W.forEach(d),D=X(g),E=w(g,"DIV",{class:!0});var J=$(E);k.l(J),J.forEach(d),g.forEach(d),this.h()},h(){c(a,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(a,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(a,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(y,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(E,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,g){B(m,e,g),p(e,t),p(t,l),p(t,r),p(r,a),p(a,o),p(t,f),p(t,_),p(_,y),p(y,h),p(e,D),p(e,E),k.m(E,null),A=!0,P||(T=ie(y,"click",s[42]),P=!0)},p(m,g){var W,L;(!A||g[0]&1024)&&n!==(n=m[25]((L=(W=m[10])==null?void 0:W.meta)==null?void 0:L.name)+"")&&ke(o,n),(!A||g[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(a,"href",i),(!A||g[0]&8192)&&b!==(b=m[13].t("Save")+"")&&ke(h,b),g[0]&1024&&Ce(C,C=m[10].id)?(Ne(),V(k,1,1,ce),ze(),k=It(m),k.c(),F(k,1),k.m(E,null)):k.p(m,g)},i(m){A||(F(S),F(k),A=!0)},o(m){V(S),V(k),A=!1},d(m){m&&d(e),k.d(m),P=!1,T()}}}function It(s){let e,t,l;function r(n){s[43](n)}let a={className:"input-prose-sm",placeholder:s[13].t("Add content here"),preserveBreaks:!1};return s[11]!==void 0&&(a.value=s[11]),e=new vt({props:a}),xe.push(()=>Ve(e,"value",r)),{c(){H(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o[0]&8192&&(i.placeholder=n[13].t("Add content here")),!t&&o[0]&2048&&(t=!0,i.value=n[11],Fe(()=>t=!1)),e.$set(i)},i(n){l||(F(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){O(e,n)}}}function Jl(s){let e,t,l=s[13].t("No content found")+"",r;return{c(){e=v("div"),t=v("div"),r=we(l),this.h()},l(a){e=w(a,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{});var o=$(t);r=$e(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(a,n){B(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&8192&&l!==(l=a[13].t("No content found")+"")&&ke(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Ql(s){let e,t,l;return t=new _l({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[52]),t.$on("delete",s[53]),{c(){e=v("div"),H(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=$(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,a){B(r,e,a),j(t,e,null),l=!0},p(r,a){const n={};a[0]&512&&(n.files=r[9]),a[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(F(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),O(t)}}}function Zl(s){let e,t,l,r,a,n,o,i,f,_,y,b,h,D,E,C=s[12]&&bt(s);function A(m){s[27](m)}let P={message:s[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(P.show=s[6]),t=new ol({props:P}),xe.push(()=>Ve(t,"show",A)),t.$on("confirm",s[28]);function T(m){s[29](m)}let S={};s[5]!==void 0&&(S.show=s[5]),a=new Hl({props:S}),xe.push(()=>Ve(a,"show",T)),a.$on("submit",s[30]);const k=[Ol,jl],z=[];function R(m,g){return m[4]&&m[0]?0:1}return y=R(s),b=z[y]=k[y](s),{c(){C&&C.c(),e=q(),H(t.$$.fragment),r=q(),H(a.$$.fragment),o=q(),i=v("input"),f=q(),_=v("div"),b.c(),this.h()},l(m){C&&C.l(m),e=X(m),K(t.$$.fragment,m),r=X(m),K(a.$$.fragment,m),o=X(m),i=w(m,"INPUT",{id:!0,type:!0}),f=X(m),_=w(m,"DIV",{class:!0,id:!0});var g=$(_);b.l(g),g.forEach(d),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(_,"class","flex flex-col w-full translate-y-1"),c(_,"id","collection-container")},m(m,g){C&&C.m(m,g),B(m,e,g),j(t,m,g),B(m,r,g),j(a,m,g),B(m,o,g),B(m,i,g),B(m,f,g),B(m,_,g),z[y].m(_,null),h=!0,D||(E=[ie(i,"change",s[31]),ie(i,"change",s[32])],D=!0)},p(m,g){m[12]?C?(C.p(m,g),g[0]&4096&&F(C,1)):(C=bt(m),C.c(),F(C,1),C.m(e.parentNode,e)):C&&(Ne(),V(C,1,1,()=>{C=null}),ze());const W={};g[0]&8192&&(W.message=m[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&64&&(l=!0,W.show=m[6],Fe(()=>l=!1)),t.$set(W);const L={};!n&&g[0]&32&&(n=!0,L.show=m[5],Fe(()=>n=!1)),a.$set(L);let Y=y;y=R(m),y===Y?z[y].p(m,g):(Ne(),V(z[Y],1,1,()=>{z[Y]=null}),ze(),b=z[y],b?b.p(m,g):(b=z[y]=k[y](m),b.c()),F(b,1),b.m(_,null))},i(m){h||(F(C),F(t.$$.fragment,m),F(a.$$.fragment,m),F(b),h=!0)},o(m){V(C),V(t.$$.fragment,m),V(a.$$.fragment,m),V(b),h=!1},d(m){m&&(d(e),d(r),d(o),d(i),d(f),d(_)),C&&C.d(m),O(t,m),O(a,m),z[y].d(),D=!1,ut(E)}}}let er=!0;function tr(s,e,t){let l,r,a,n,o,i;We(s,Tt,u=>t(57,l=u)),We(s,St,u=>t(58,a=u)),We(s,Nt,u=>t(59,n=u)),We(s,zt,u=>t(14,o=u)),We(s,Bt,u=>t(15,i=u));const f=_t("i18n");We(s,f,u=>t(13,r=u));let _=!0,y,b=null,h=null,D="",E=!1,C=!1,A=!1,P=null,T=[],S=null,k=null,z="",R=new Map,m=null,g=null,W,L=!1;const Y=(u,x)=>{const N=new Blob([x],{type:"text/plain"}),U=qt(N,`${u}.txt`);return U},ee=async u=>{var U,ne,de,pe,le,_e,Me,Ye;const x=Xt(),N={type:"file",file:"",id:null,url:"",name:u.name,size:u.size,status:"uploading",error:"",itemId:x};if(N.size==0)return G.error(r.t("You cannot upload an empty file.")),null;if((((U=n==null?void 0:n.file)==null?void 0:U.max_size)??null)!==null&&u.size>(((ne=n==null?void 0:n.file)==null?void 0:ne.max_size)??0)*1024*1024){u.size,(((de=n==null?void 0:n.file)==null?void 0:de.max_size)??0)*1024*1024,G.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(pe=n==null?void 0:n.file)==null?void 0:pe.max_size}));return}t(0,h.files=[...h.files??[],N],h);try{let Oe=null;(u.type.startsWith("audio/")||u.type.startsWith("video/"))&&((_e=(le=a==null?void 0:a.audio)==null?void 0:le.stt)!=null&&_e.language)&&(Oe={language:(Ye=(Me=a==null?void 0:a.audio)==null?void 0:Me.stt)==null?void 0:Ye.language});const ct=await Wt(localStorage.token,u,Oe).catch(Re=>(G.error(`${Re}`),null));ct?(t(0,h.files=h.files.map(Re=>(Re.itemId===x&&(Re.id=ct.id),delete Re.itemId,Re)),h),await me(ct.id)):G.error(r.t("Failed to upload file."))}catch(Oe){G.error(`${Oe}`)}},re=async()=>{const u="showDirectoryPicker"in window;try{u?await fe():await M()}catch(x){Q(x)}},J=u=>u.split("/").some(x=>x.startsWith(".")),fe=async()=>{const u=await window.showDirectoryPicker();let x=0,N=0;const U=()=>{const pe=N/x*100;G.info(`Upload Progress: ${N}/${x} (${pe.toFixed(2)}%)`)};async function ne(pe){for await(const le of pe.values())le.name.startsWith(".")||(le.kind==="file"?x++:le.kind==="directory"&&(le.name.startsWith(".")||await ne(le)))}async function de(pe,le=""){for await(const _e of pe.values()){if(_e.name.startsWith("."))continue;const Me=le?`${le}/${_e.name}`:_e.name;if(!J(Me))if(_e.kind==="file"){const Ye=await _e.getFile(),Oe=new File([Ye],Me,{type:Ye.type});await ee(Oe),N++,U()}else _e.kind==="directory"&&(_e.name.startsWith(".")||await de(_e,Me))}}await ne(u),U(),x>0&&await de(u)},M=async()=>new Promise((u,x)=>{const N=document.createElement("input");N.type="file",N.webkitdirectory=!0,N.directory=!0,N.multiple=!0,N.style.display="none",document.body.appendChild(N),N.onchange=async()=>{try{const U=Array.from(N.files).filter(le=>!J(le.webkitRelativePath));let ne=U.length,de=0;const pe=()=>{const le=de/ne*100;G.info(`Upload Progress: ${de}/${ne} (${le.toFixed(2)}%)`)};pe();for(const le of U)if(!le.name.startsWith(".")){const _e=le.webkitRelativePath||le.name,Me=new File([le],_e,{type:le.type});await ee(Me),de++,pe()}document.body.removeChild(N),u()}catch(U){x(U)}},N.onerror=U=>{document.body.removeChild(N),x(U)},N.click()}),Q=u=>{u.name==="AbortError"?G.info("Directory selection was cancelled"):(G.error("Error accessing directory"),console.error("Directory access error:",u))},te=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const u=await Lt(localStorage.token,b).catch(x=>{G.error(`${x}`)});u&&(t(0,h=u),G.success(r.t("Knowledge reset successfully.")),re())}else re()},me=async u=>{const x=await Ht(localStorage.token,b,u).catch(N=>(G.error(`${N}`),null));x?(t(0,h=x),G.success(r.t("File added successfully."))):(G.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(N=>N.id!==u),h))},ue=async u=>{try{const x=await Kt(localStorage.token,b,u);x&&(t(0,h=x),G.success(r.t("File removed successfully.")))}catch(x){console.error("Error in deleteFileHandler:",x),G.error(`${x}`)}},ge=async()=>{const u=S.id,x=z;R.delete(u);const N=At(localStorage.token,u,x).catch(ne=>{G.error(`${ne}`)}),U=await jt(localStorage.token,b,u).catch(ne=>{G.error(`${ne}`)});N&&U&&(t(0,h=U),G.success(r.t("File content updated successfully.")))},se=()=>{g&&clearTimeout(g),g=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){G.error(r.t("Please fill in all fields."));return}await Ot(localStorage.token,b,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(x=>{G.error(`${x}`)})&&(G.success(r.t("Knowledge updated successfully")),Mt.set(await Rt(localStorage.token)))},1e3)},be=async u=>{u.matches?t(3,_=!0):t(3,_=!1)},ae=async u=>{try{if(t(10,S=u),R.has(u.id)){t(11,z=R.get(u.id));return}const x=await Pt(localStorage.token,u.id);x?(t(11,z=x.data.content),R.set(u.id,x.data.content)):G.error(r.t("No content found in file."))}catch{G.error(r.t("Failed to load file content."))}},oe=u=>{var x,N;u.preventDefault(),(N=(x=u.dataTransfer)==null?void 0:x.types)!=null&&N.includes("Files")?t(12,L=!0):t(12,L=!1)},ve=()=>{t(12,L=!1)},he=async u=>{var x,N,U,ne;if(u.preventDefault(),t(12,L=!1),(N=(x=u.dataTransfer)==null?void 0:x.types)!=null&&N.includes("Files")&&(U=u.dataTransfer)!=null&&U.files){const de=(ne=u.dataTransfer)==null?void 0:ne.files;if(de&&de.length>0)for(const pe of de)await ee(pe);else G.error(r.t("File not found."))}};xt(async()=>{W=window.matchMedia("(min-width: 1024px)"),W.addEventListener("change",be),be(W);const u=document.getElementById("collection-container");_&&Math.floor(300/u.clientWidth*100),new ResizeObserver(ne=>{for(let de of ne)de.contentRect.width}).observe(u),t(4,b=l.params.id);const N=await Ut(localStorage.token,b).catch(ne=>(G.error(`${ne}`),null));N?t(0,h=N):Ct("/workspace/knowledge");const U=document.querySelector("body");U==null||U.addEventListener("dragover",oe),U==null||U.addEventListener("drop",he),U==null||U.addEventListener("dragleave",ve)}),Ft(()=>{W==null||W.removeEventListener("change",be);const u=document.querySelector("body");u==null||u.removeEventListener("dragover",oe),u==null||u.removeEventListener("drop",he),u==null||u.removeEventListener("dragleave",ve)});const Be=u=>{try{return decodeURIComponent(u)}catch{return u}};function Je(u){C=u,t(6,C)}const mt=()=>{te()};function ht(u){E=u,t(5,E)}const Ge=u=>{const x=Y(u.detail.name,u.detail.content);ee(x)};function Qe(){P=this.files,t(8,P)}const ye=async()=>{if(P&&P.length>0){for(const x of P)await ee(x);t(8,P=null);const u=document.getElementById("files-input");u&&(u.value="")}else G.error(r.t("File not found."))},Ze=()=>{se()};function et(u){A=u,t(7,A)}function Ie(u){s.$$.not_equal(h.access_control,u)&&(h.access_control=u,t(0,h))}function tt(){h.name=this.value,t(0,h)}const lt=()=>{se()},rt=()=>{t(7,A=!0)};function st(){h.description=this.value,t(0,h)}const nt=()=>{se()},I=()=>{y.expand()},Z=()=>{ge()};function Te(u){z=u,t(11,z)}const Ee=()=>{t(2,k=null)},De=()=>{ge()};function Le(u){z=u,t(11,z)}const He=()=>{t(2,k=null)};function Se(){D=this.value,t(1,D)}const Ke=()=>{t(2,k=null)},ot=u=>{u.detail.type==="directory"?re():u.detail.type==="text"?t(5,E=!0):document.getElementById("files-input").click()},je=u=>{t(6,C=!0)},at=u=>{t(2,k=k===u.detail?null:u.detail)},it=u=>{u.detail,t(2,k=null),ue(u.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(26,m=new Vt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&67108867&&m&&t(9,T=D?m.search(D).map(u=>u.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(k){const u=((h==null?void 0:h.files)??[]).find(x=>x.id===k);u?ae(u):t(10,S=null)}else t(10,S=null)},[h,D,k,_,b,E,C,A,P,T,S,z,L,r,o,i,f,y,Y,ee,re,te,ue,ge,se,Be,m,Je,mt,ht,Ge,Qe,ye,Ze,et,Ie,tt,lt,rt,st,nt,I,Z,Te,Ee,De,Le,He,Se,Ke,ot,je,at,it]}class lr extends Pe{constructor(e){super(),Ue(this,e,tr,Zl,Ce,{},null,[-1,-1,-1])}}function rr(s){let e,t;return e=new lr({}),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ce,i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}class zr extends Pe{constructor(e){super(),Ue(this,e,null,rr,Ce,{})}}export{zr as component};
//# sourceMappingURL=29.CO1PWAJm.js.map
